{\rtf1\ansi\ansicpg1252\cocoartf2821
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red89\green138\blue67;\red24\green24\blue24;\red193\green193\blue193;
\red183\green111\blue179;\red140\green211\blue254;\red194\green126\blue101;\red70\green137\blue204;\red212\green214\blue154;
\red66\green179\blue255;\red202\green202\blue202;\red167\green197\blue152;\red67\green192\blue160;\red109\green109\blue109;
}
{\*\expandedcolortbl;;\cssrgb\c41569\c60000\c33333;\cssrgb\c12157\c12157\c12157;\cssrgb\c80000\c80000\c80000;
\cssrgb\c77255\c52549\c75294;\cssrgb\c61176\c86275\c99608;\cssrgb\c80784\c56863\c47059;\cssrgb\c33725\c61176\c83922;\cssrgb\c86275\c86275\c66667;
\cssrgb\c30980\c75686\c100000;\cssrgb\c83137\c83137\c83137;\cssrgb\c70980\c80784\c65882;\cssrgb\c30588\c78824\c69020;\cssrgb\c50196\c50196\c50196;
}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs24 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 // FieldJobSummaryPage.jsx \'97 allows editing of a single jobsByField job without touching the master job\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 import\cf4 \strokec4  \cf6 \strokec6 React\cf4 \strokec4 , \{ \cf6 \strokec6 useEffect\cf4 \strokec4 , \cf6 \strokec6 useState\cf4 \strokec4  \} \cf5 \strokec5 from\cf4 \strokec4  \cf7 \strokec7 'react'\cf4 \strokec4 ;\cb1 \
\cf5 \cb3 \strokec5 import\cf4 \strokec4  \{ \cf6 \strokec6 useParams\cf4 \strokec4 , \cf6 \strokec6 useNavigate\cf4 \strokec4  \} \cf5 \strokec5 from\cf4 \strokec4  \cf7 \strokec7 'react-router-dom'\cf4 \strokec4 ;\cb1 \
\cf5 \cb3 \strokec5 import\cf4 \strokec4  \{ \cf6 \strokec6 db\cf4 \strokec4  \} \cf5 \strokec5 from\cf4 \strokec4  \cf7 \strokec7 '../firebase'\cf4 \strokec4 ;\cb1 \
\cf5 \cb3 \strokec5 import\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf6 \strokec6 doc\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 getDoc\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 updateDoc\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 collection\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 getDocs\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 query\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 where\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 setDoc\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 deleteDoc\cf4 \strokec4 ,              \cf2 \strokec2 // \uc0\u9989  Add this here\cf4 \cb1 \strokec4 \
\cb3   \cf6 \strokec6 serverTimestamp\cf4 \strokec4          \cf2 \strokec2 // \uc0\u9989  You can move this up to combine\cf4 \cb1 \strokec4 \
\cb3 \} \cf5 \strokec5 from\cf4 \strokec4  \cf7 \strokec7 'firebase/firestore'\cf4 \strokec4 ;\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 function\cf4 \strokec4  \cf9 \strokec9 FieldJobSummaryPage\cf4 \strokec4 () \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \{ \cf10 \strokec10 jobId\cf4 \strokec4  \} \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useParams\cf4 \strokec4 ();\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 navigate\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useNavigate\cf4 \strokec4 ();\cb1 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 field\cf4 \strokec4 , \cf9 \strokec9 setField\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 null\cf4 \strokec4 );\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 notes\cf4 \strokec4 , \cf9 \strokec9 setNotes\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf7 \strokec7 ''\cf4 \strokec4 );\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 job\cf4 \strokec4 , \cf9 \strokec9 setJob\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 null\cf4 \strokec4 );\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 jobType\cf4 \strokec4 , \cf9 \strokec9 setJobType\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 null\cf4 \strokec4 );\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 usedProductIds\cf4 \strokec4 , \cf9 \strokec9 setUsedProductIds\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 ([]);\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 productsList\cf4 \strokec4 , \cf9 \strokec9 setProductsList\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 ([]);\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 saving\cf4 \strokec4 , \cf9 \strokec9 setSaving\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 false\cf4 \strokec4 );\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 vendors\cf4 \strokec4 , \cf9 \strokec9 setVendors\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 ([]);\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 applicators\cf4 \strokec4 , \cf9 \strokec9 setApplicators\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 ([]);\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 generatePdf\cf4 \strokec4 , \cf9 \strokec9 setGeneratePdf\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 false\cf4 \strokec4 );\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 originalJob\cf4 \strokec4 , \cf9 \strokec9 setOriginalJob\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 null\cf4 \strokec4 );\cb1 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 fieldBoundary\cf4 \strokec4 , \cf9 \strokec9 setFieldBoundary\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 null\cf4 \strokec4 );\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 waterVolume\cf4 \strokec4 , \cf9 \strokec9 setWaterVolume\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf8 \strokec8 null\cf4 \strokec4 );\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 jobTypesList\cf4 \strokec4 , \cf9 \strokec9 setJobTypesList\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 ([]);\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 passes\cf4 \strokec4 , \cf9 \strokec9 setPasses\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf12 \strokec12 1\cf4 \strokec4 );\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 jobStatus\cf4 \strokec4 , \cf9 \strokec9 setJobStatus\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf7 \strokec7 'Planned'\cf4 \strokec4 );\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 vendor\cf4 \strokec4 , \cf9 \strokec9 setVendor\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf7 \strokec7 ''\cf4 \strokec4 );\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 applicator\cf4 \strokec4 , \cf9 \strokec9 setApplicator\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 (\cf7 \strokec7 ''\cf4 \strokec4 );\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 editableProducts\cf4 \strokec4 , \cf9 \strokec9 setEditableProducts\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 useState\cf4 \strokec4 ([]);\cb1 \
\
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 isLeveeJob\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 name\cf4 \strokec4 ?.\cf9 \strokec9 toLowerCase\cf4 \strokec4 ().\cf9 \strokec9 includes\cf4 \strokec4 (\cf7 \strokec7 'levee'\cf4 \strokec4 ) \cf11 \strokec11 ||\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 name\cf4 \strokec4 ?.\cf9 \strokec9 toLowerCase\cf4 \strokec4 ().\cf9 \strokec9 includes\cf4 \strokec4 (\cf7 \strokec7 'pack'\cf4 \strokec4 );\cb1 \
\
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 getJobTypeName\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cf6 \strokec6 job\cf4 \strokec4 ) \cf8 \strokec8 =>\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 typeof\cf4 \strokec4  \cf6 \strokec6 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'string'\cf4 \strokec4  \cf11 \strokec11 ?\cf4 \strokec4  \cf6 \strokec6 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4  \cf11 \strokec11 :\cf4 \strokec4  \cf6 \strokec6 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 name\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ;\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf9 \cb3 \strokec9 useEffect\cf4 \strokec4 (() \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 loadJobTypes\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 async\cf4 \strokec4  () \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 snap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDocs\cf4 \strokec4 (\cf9 \strokec9 collection\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobTypes'\cf4 \strokec4 ));\cb1 \
\
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 rawTypes\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 snap\cf4 \strokec4 .\cf6 \strokec6 docs\cf4 \strokec4 .\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 doc\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  (\{ \cf6 \strokec6 id:\cf4 \strokec4  \cf6 \strokec6 doc\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 , \cf11 \strokec11 ...\cf6 \strokec6 doc\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 () \}));\cb1 \
\
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 flattenedTypes\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 rawTypes\cf4 \strokec4 .\cf9 \strokec9 flatMap\cf4 \strokec4 ((\cf6 \strokec6 type\cf4 \strokec4 ) \cf8 \strokec8 =>\cf4 \cb1 \strokec4 \
\cb3       (\cf6 \strokec6 type\cf4 \strokec4 .\cf6 \strokec6 subTypes\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  []).\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 sub\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  (\{\cb1 \
\cb3         \cf11 \strokec11 ...\cf6 \strokec6 sub\cf4 \strokec4 ,\cb1 \
\cb3         \cf6 \strokec6 parentName:\cf4 \strokec4  \cf6 \strokec6 type\cf4 \strokec4 .\cf6 \strokec6 name\cf4 \cb1 \strokec4 \
\cb3       \}))\cb1 \
\cb3     );\cb1 \
\
\cb3     \cf9 \strokec9 setJobTypesList\cf4 \strokec4 (\cf10 \strokec10 flattenedTypes\cf4 \strokec4 );\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf9 \strokec9 loadJobTypes\cf4 \strokec4 ();\cb1 \
\cb3 \}, []);\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf9 \cb3 \strokec9 useEffect\cf4 \strokec4 (() \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 job\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf9 \strokec9 setJobStatus\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 status\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 'Planned'\cf4 \strokec4 );\cb1 \
\cb3     \cf9 \strokec9 setJobType\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 );\cb1 \
\cb3     \cf9 \strokec9 setVendor\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 vendor\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 );\cb1 \
\cb3     \cf9 \strokec9 setApplicator\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 applicator\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 );\cb1 \
\cb3     \cf9 \strokec9 setEditableProducts\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  []);\cb1 \
\cb3   \}\cb1 \
\cb3 \}, [\cf10 \strokec10 job\cf4 \strokec4 ]);\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf9 \cb3 \strokec9 useEffect\cf4 \strokec4 (() \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf9 \strokec9 setJobType\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4 );\cb1 \
\cb3   \}\cb1 \
\cb3 \}, [\cf10 \strokec10 job\cf4 \strokec4 ]);\cb1 \
\
\cb3   \cf9 \strokec9 useEffect\cf4 \strokec4 (() \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 loadVendorsAndApplicators\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 async\cf4 \strokec4  () \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  [\cf10 \strokec10 vendorSnap\cf4 \strokec4 , \cf10 \strokec10 applicatorSnap\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf13 \strokec13 Promise\cf4 \strokec4 .\cf9 \strokec9 all\cf4 \strokec4 ([\cb1 \
\cb3       \cf9 \strokec9 getDocs\cf4 \strokec4 (\cf9 \strokec9 collection\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'vendors'\cf4 \strokec4 )),\cb1 \
\cb3       \cf9 \strokec9 getDocs\cf4 \strokec4 (\cf9 \strokec9 collection\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'applicators'\cf4 \strokec4 ))\cb1 \
\cb3     ]);\cb1 \
\cb3     \cf9 \strokec9 setVendors\cf4 \strokec4 (\cf10 \strokec10 vendorSnap\cf4 \strokec4 .\cf6 \strokec6 docs\cf4 \strokec4 .\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 doc\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  \cf6 \strokec6 doc\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 ().\cf6 \strokec6 name\cf4 \strokec4 ));\cb1 \
\cb3     \cf9 \strokec9 setApplicators\cf4 \strokec4 (\cf10 \strokec10 applicatorSnap\cf4 \strokec4 .\cf6 \strokec6 docs\cf4 \strokec4 .\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 doc\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  \cf6 \strokec6 doc\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 ().\cf6 \strokec6 name\cf4 \strokec4 ));\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf9 \strokec9 loadVendorsAndApplicators\cf4 \strokec4 ();\cb1 \
\cb3 \}, []);\cb1 \
\pard\pardeftab720\partightenfactor0
\cf9 \cb3 \strokec9 useEffect\cf4 \strokec4 (() \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 loadUsedProducts\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 async\cf4 \strokec4  () \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3     \cf5 \strokec5 if\cf4 \strokec4  (\cf11 \strokec11 !\cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf11 \strokec11 !\cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 cropYear\cf4 \strokec4 ) \cf5 \strokec5 return\cf4 \strokec4 ;\cb1 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 console\cf4 \strokec4 .\cf9 \strokec9 log\cf4 \strokec4 (\cf7 \strokec7 '\uc0\u55357 \u56599  linkedToJobId:'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 linkedToJobId\cf4 \strokec4 );\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 q\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 query\cf4 \strokec4 (\cb1 \
\cb3       \cf9 \strokec9 collection\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobs'\cf4 \strokec4 ),\cb1 \
\cb3       \cf9 \strokec9 where\cf4 \strokec4 (\cf7 \strokec7 'jobType'\cf4 \strokec4 , \cf7 \strokec7 '=='\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4 ),\cb1 \
\cb3       \cf9 \strokec9 where\cf4 \strokec4 (\cf7 \strokec7 'cropYear'\cf4 \strokec4 , \cf7 \strokec7 '=='\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 cropYear\cf4 \strokec4 )\cb1 \
\cb3     );\cb1 \
\
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 snap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDocs\cf4 \strokec4 (\cf10 \strokec10 q\cf4 \strokec4 );\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 ids\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 new\cf4 \strokec4  \cf13 \strokec13 Set\cf4 \strokec4 ();\cb1 \
\
\cb3     \cf10 \strokec10 snap\cf4 \strokec4 .\cf9 \strokec9 forEach\cf4 \strokec4 (\cf6 \strokec6 doc\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3       \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 jobData\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 doc\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 ();\cb1 \
\cb3       \cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 ?.\cf9 \strokec9 forEach\cf4 \strokec4 (\cf6 \strokec6 p\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3         \cf5 \strokec5 if\cf4 \strokec4  (\cf6 \strokec6 p\cf4 \strokec4 .\cf6 \strokec6 productId\cf4 \strokec4 ) \cf10 \strokec10 ids\cf4 \strokec4 .\cf9 \strokec9 add\cf4 \strokec4 (\cf6 \strokec6 p\cf4 \strokec4 .\cf6 \strokec6 productId\cf4 \strokec4 );\cb1 \
\cb3       \});\cb1 \
\cb3     \});\cb1 \
\
\cb3     \cf9 \strokec9 setUsedProductIds\cf4 \strokec4 (\cf13 \strokec13 Array\cf4 \strokec4 .\cf9 \strokec9 from\cf4 \strokec4 (\cf10 \strokec10 ids\cf4 \strokec4 ));\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf9 \strokec9 loadUsedProducts\cf4 \strokec4 ();\cb1 \
\cb3 \}, [\cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 cropYear\cf4 \strokec4 ]);\cb1 \
\
\
\cb3  \cf9 \strokec9 useEffect\cf4 \strokec4 (() \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 fetchData\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 async\cf4 \strokec4  () \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 jobSnap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 , \cf10 \strokec10 jobId\cf4 \strokec4 ));\cb1 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 jobSnap\cf4 \strokec4 .\cf9 \strokec9 exists\cf4 \strokec4 ()) \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 jobData\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \{ \cf6 \strokec6 id:\cf4 \strokec4  \cf10 \strokec10 jobSnap\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 , \cf11 \strokec11 ...\cf10 \strokec10 jobSnap\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 () \};\cb1 \
\pard\pardeftab720\partightenfactor0
\cf9 \cb3 \strokec9 setPasses\cf4 \strokec4 (\cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 passes\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 1\cf4 \strokec4 );\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 parsedPolygon\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 typeof\cf4 \strokec4  \cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'string'\cf4 \cb1 \strokec4 \
\cb3     \cf11 \strokec11 ?\cf4 \strokec4  \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 parse\cf4 \strokec4 (\cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4 )\cb1 \
\cb3     \cf11 \strokec11 :\cf4 \strokec4  \cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4 ;\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 normalizedJobType\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 typeof\cf4 \strokec4  \cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'string'\cf4 \cb1 \strokec4 \
\cb3     \cf11 \strokec11 ?\cf4 \strokec4  \{ \cf6 \strokec6 name:\cf4 \strokec4  \cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4  \}\cb1 \
\cb3     \cf11 \strokec11 :\cf4 \strokec4  \cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4 ;\cb1 \
\
\cb3   \cf9 \strokec9 setJob\cf4 \strokec4 (\{\cb1 \
\cb3     \cf11 \strokec11 ...\cf10 \strokec10 jobData\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 jobType:\cf4 \strokec4  \cf10 \strokec10 normalizedJobType\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf10 \strokec10 parsedPolygon\cf4 \strokec4 ,\cb1 \
\cb3   \});\cb1 \
\
\cb3   \cf9 \strokec9 setNotes\cf4 \strokec4 (\cf6 \strokec6 jobData\cf4 \strokec4 .\cf6 \strokec6 notes\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 );\cb1 \
\cb3   \cf9 \strokec9 setWaterVolume\cf4 \strokec4 (\cf6 \strokec6 jobData\cf4 \strokec4 .\cf6 \strokec6 waterVolume\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 0\cf4 \strokec4 );\cb1 \
\cb3   \cf9 \strokec9 setOriginalJob\cf4 \strokec4 (\cf10 \strokec10 jobData\cf4 \strokec4 );\cb1 \
\
\
\
\
\cb3       \cf2 \strokec2 // \uc0\u55357 \u56391  Fetch the full field boundary based on fieldId\cf4 \cb1 \strokec4 \
\cb3       \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 fieldSnap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'fields'\cf4 \strokec4 , \cf10 \strokec10 jobData\cf4 \strokec4 .\cf6 \strokec6 fieldId\cf4 \strokec4 ));\cb1 \
\cb3       \cf5 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 fieldSnap\cf4 \strokec4 .\cf9 \strokec9 exists\cf4 \strokec4 ()) \{\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 fieldData\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \{ \cf6 \strokec6 id:\cf4 \strokec4  \cf10 \strokec10 fieldSnap\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 , \cf11 \strokec11 ...\cf10 \strokec10 fieldSnap\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 () \};\cb1 \
\cb3   \cf9 \strokec9 setField\cf4 \strokec4 (\cf10 \strokec10 fieldData\cf4 \strokec4 );\cb1 \
\
\cb3   \cf2 \strokec2 // \uc0\u55357 \u57056 \u65039  Parse geojson safely\cf4 \cb1 \strokec4 \
\cb3   \cf8 \strokec8 let\cf4 \strokec4  \cf6 \strokec6 geo\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 fieldData\cf4 \strokec4 .\cf6 \strokec6 boundary\cf4 \strokec4 ?.\cf6 \strokec6 geojson\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ;\cb1 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf8 \strokec8 typeof\cf4 \strokec4  \cf6 \strokec6 geo\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'string'\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf5 \strokec5 try\cf4 \strokec4  \{\cb1 \
\cb3       \cf6 \strokec6 geo\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 parse\cf4 \strokec4 (\cf6 \strokec6 geo\cf4 \strokec4 );\cb1 \
\cb3     \} \cf5 \strokec5 catch\cf4 \strokec4  \{\cb1 \
\cb3       \cf6 \strokec6 geo\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ;\cb1 \
\cb3     \}\cb1 \
\cb3   \}\cb1 \
\cb3   \cf9 \strokec9 setFieldBoundary\cf4 \strokec4 (\cf6 \strokec6 geo\cf4 \strokec4 );\cb1 \
\cb3 \}\cb1 \
\
\cb3     \}\cb1 \
\
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 productsSnap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDocs\cf4 \strokec4 (\cf9 \strokec9 collection\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'products'\cf4 \strokec4 ));\cb1 \
\cb3     \cf9 \strokec9 setProductsList\cf4 \strokec4 (\cf10 \strokec10 productsSnap\cf4 \strokec4 .\cf6 \strokec6 docs\cf4 \strokec4 .\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 d\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  (\{ \cf6 \strokec6 id:\cf4 \strokec4  \cf6 \strokec6 d\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 , \cf11 \strokec11 ...\cf6 \strokec6 d\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 () \})));\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf9 \strokec9 fetchData\cf4 \strokec4 ();\cb1 \
\cb3 \}, [\cf10 \strokec10 jobId\cf4 \strokec4 ]);\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf9 \cb3 \strokec9 useEffect\cf4 \strokec4 (() \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 updated\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 location\cf4 \strokec4 .\cf6 \strokec6 state\cf4 \strokec4 ?.\cf6 \strokec6 updatedField\cf4 \strokec4 ;\cb1 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 updated\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf6 \strokec6 console\cf4 \strokec4 .\cf9 \strokec9 log\cf4 \strokec4 (\cf7 \strokec7 '\uc0\u55357 \u56549  Applying updatedField from location.state:'\cf4 \strokec4 , \cf10 \strokec10 updated\cf4 \strokec4 );\cb1 \
\
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 parsedPolygon\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 typeof\cf4 \strokec4  \cf10 \strokec10 updated\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'string'\cf4 \cb1 \strokec4 \
\cb3       \cf11 \strokec11 ?\cf4 \strokec4  \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 parse\cf4 \strokec4 (\cf10 \strokec10 updated\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4 )\cb1 \
\cb3       \cf11 \strokec11 :\cf4 \strokec4  \cf10 \strokec10 updated\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4 ;\cb1 \
\
\cb3     \cf9 \strokec9 setJob\cf4 \strokec4 (\cf6 \strokec6 prev\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  (\{\cb1 \
\cb3       \cf11 \strokec11 ...\cf6 \strokec6 prev\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf10 \strokec10 parsedPolygon\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 drawnAcres:\cf4 \strokec4  \cf10 \strokec10 updated\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 acres:\cf4 \strokec4  \cf10 \strokec10 updated\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \cb1 \strokec4 \
\cb3     \}));\cb1 \
\cb3   \}\cb1 \
\cb3 \}, [\cf6 \strokec6 location\cf4 \strokec4 .\cf6 \strokec6 state\cf4 \strokec4 ]);\cb1 \
\
\
\
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 handleProductChange\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cf6 \strokec6 index\cf4 \strokec4 , \cf6 \strokec6 field\cf4 \strokec4 , \cf6 \strokec6 value\cf4 \strokec4 ) \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 updated\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  [\cf11 \strokec11 ...\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 ];\cb1 \
\cb3     \cf10 \strokec10 updated\cf4 \strokec4 [\cf6 \strokec6 index\cf4 \strokec4 ][\cf6 \strokec6 field\cf4 \strokec4 ] \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 value\cf4 \strokec4 ;\cb1 \
\cb3     \cf9 \strokec9 setJob\cf4 \strokec4 (\cf6 \strokec6 prev\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  (\{ \cf11 \strokec11 ...\cf6 \strokec6 prev\cf4 \strokec4 , \cf6 \strokec6 products:\cf4 \strokec4  \cf10 \strokec10 updated\cf4 \strokec4  \}));\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 handleSave\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 async\cf4 \strokec4  () \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3     \cf9 \strokec9 setSaving\cf4 \strokec4 (\cf8 \strokec8 true\cf4 \strokec4 );\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 shouldBreakFromGroup\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cb1 \
\cb3   \cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 vendor\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 vendor\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \cb1 \strokec4 \
\cb3   \cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 applicator\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 applicator\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \cb1 \strokec4 \
\cb3   \cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 jobDate\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobDate\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \cb1 \strokec4 \
\cb3   \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 stringify\cf4 \strokec4 (\cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 ) \cf11 \strokec11 !==\cf4 \strokec4  \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 stringify\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 )\cb1 \
\cb3 );\cb1 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 if\cf4 \strokec4  (\cf11 \strokec11 !\cf10 \strokec10 shouldBreakFromGroup\cf4 \strokec4 ) \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 cleanedDrawnPolygon\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 typeof\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'object'\cf4 \cb1 \strokec4 \
\cb3     \cf11 \strokec11 ?\cf4 \strokec4  \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 stringify\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4 )\cb1 \
\cb3     \cf11 \strokec11 :\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4 ;\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 isAttached\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 linkedToJobId\cf4 \strokec4 ;\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 isAttached\cf4 \strokec4 ) \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 newJobRef\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 doc\cf4 \strokec4 (\cf9 \strokec9 collection\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 ));\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 // \uc0\u55358 \u56825  Delete the field-level job first\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 deleteDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 ));\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 // \uc0\u55357 \u56589  Then re-check for any remaining linked field jobs\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 linkedToJobId\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 linkedToJobId\cf4 \strokec4 ;\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 q\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 query\cf4 \strokec4 (\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf9 \strokec9 collection\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 ),\cb1 \
\cb3   \cf9 \strokec9 where\cf4 \strokec4 (\cf7 \strokec7 'linkedToJobId'\cf4 \strokec4 , \cf7 \strokec7 '=='\cf4 \strokec4 , \cf10 \strokec10 linkedToJobId\cf4 \strokec4 )\cb1 \
\cb3 );\cb1 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 snap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDocs\cf4 \strokec4 (\cf10 \strokec10 q\cf4 \strokec4 );\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 snap\cf4 \strokec4 .\cf6 \strokec6 size\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf12 \strokec12 1\cf4 \strokec4 ) \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf2 \strokec2 // If only one remains, unlink and detach it\cf4 \cb1 \strokec4 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 leftoverDoc\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 snap\cf4 \strokec4 .\cf6 \strokec6 docs\cf4 \strokec4 [\cf12 \strokec12 0\cf4 \strokec4 ];\cb1 \
\cb3   \cf6 \strokec6 console\cf4 \strokec4 .\cf9 \strokec9 log\cf4 \strokec4 (\cf7 \strokec7 '\uc0\u55358 \u56825  Clearing linkedToJobId on last field job:'\cf4 \strokec4 , \cf10 \strokec10 leftoverDoc\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 );\cb1 \
\cb3   \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 updateDoc\cf4 \strokec4 (\cf10 \strokec10 leftoverDoc\cf4 \strokec4 .\cf6 \strokec6 ref\cf4 \strokec4 , \{\cb1 \
\cb3     \cf6 \strokec6 linkedToJobId:\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 isDetachedFromGroup:\cf4 \strokec4  \cf8 \strokec8 true\cf4 \cb1 \strokec4 \
\cb3   \});\cb1 \
\
\cb3   \cf2 \strokec2 // Then delete the grouped job\cf4 \cb1 \strokec4 \
\cb3   \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 deleteDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobs'\cf4 \strokec4 , \cf10 \strokec10 linkedToJobId\cf4 \strokec4 ));\cb1 \
\cb3 \}\cb1 \
\
\
\
\cb3   \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 setDoc\cf4 \strokec4 (\cf10 \strokec10 newJobRef\cf4 \strokec4 , \{\cb1 \
\cb3     \cf11 \strokec11 ...\cf10 \strokec10 job\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 status:\cf4 \strokec4  \cf10 \strokec10 jobStatus\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 jobType\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 vendor\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 applicator\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 products:\cf4 \strokec4  \cf10 \strokec10 editableProducts\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf10 \strokec10 cleanedDrawnPolygon\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 waterVolume:\cf4 \strokec4  \cf10 \strokec10 waterVolume\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 0\cf4 \strokec4 ,\cb1 \
\cb3     \cf11 \strokec11 ...\cf4 \strokec4 (\cf10 \strokec10 jobType\cf4 \strokec4 ?.\cf6 \strokec6 parentName\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Tillage'\cf4 \strokec4  \cf11 \strokec11 ?\cf4 \strokec4  \{ \cf6 \strokec6 passes:\cf4 \strokec4  \cf9 \strokec9 parseInt\cf4 \strokec4 (\cf10 \strokec10 passes\cf4 \strokec4 ) \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 1\cf4 \strokec4  \} \cf11 \strokec11 :\cf4 \strokec4  \{\}),\cb1 \
\cb3     \cf6 \strokec6 notes\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 linkedToJobId:\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 isDetachedFromGroup:\cf4 \strokec4  \cf8 \strokec8 true\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 id:\cf4 \strokec4  \cf10 \strokec10 newJobRef\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 timestamp:\cf4 \strokec4  \cf9 \strokec9 serverTimestamp\cf4 \strokec4 ()\cb1 \
\cb3   \});\cb1 \
\
\cb3   \cf9 \strokec9 navigate\cf4 \strokec4 (\cf7 \strokec7 '/jobs'\cf4 \strokec4 );\cb1 \
\cb3 \} \cf5 \strokec5 else\cf4 \strokec4  \{\cb1 \
\cb3   \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 updateDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 ), \{\cb1 \
\cb3     \cf11 \strokec11 ...\cf10 \strokec10 job\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 status:\cf4 \strokec4  \cf10 \strokec10 jobStatus\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 jobType\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 vendor\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 applicator\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 products:\cf4 \strokec4  \cf10 \strokec10 editableProducts\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf10 \strokec10 cleanedDrawnPolygon\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 waterVolume:\cf4 \strokec4  \cf10 \strokec10 waterVolume\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 0\cf4 \strokec4 ,\cb1 \
\cb3     \cf11 \strokec11 ...\cf4 \strokec4 (\cf10 \strokec10 jobType\cf4 \strokec4 ?.\cf6 \strokec6 parentName\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Tillage'\cf4 \strokec4  \cf11 \strokec11 ?\cf4 \strokec4  \{ \cf6 \strokec6 passes:\cf4 \strokec4  \cf9 \strokec9 parseInt\cf4 \strokec4 (\cf10 \strokec10 passes\cf4 \strokec4 ) \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 1\cf4 \strokec4  \} \cf11 \strokec11 :\cf4 \strokec4  \{\}),\cb1 \
\cb3     \cf6 \strokec6 notes\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 timestamp:\cf4 \strokec4  \cf9 \strokec9 serverTimestamp\cf4 \strokec4 ()\cb1 \
\cb3   \});\cb1 \
\
\cb3   \cf9 \strokec9 navigate\cf4 \strokec4 (\cf7 \strokec7 '/jobs'\cf4 \strokec4 );\cb1 \
\cb3 \}\cb1 \
\
\
\
\
\
\
\
\cb3   \cf2 \strokec2 // \uc0\u55357 \u56391  Keep master group job in sync\cf4 \cb1 \strokec4 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 linkedToJobId\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 groupRef\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobs'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 linkedToJobId\cf4 \strokec4 );\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 groupSnap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDoc\cf4 \strokec4 (\cf10 \strokec10 groupRef\cf4 \strokec4 );\cb1 \
\cb3     \cf5 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 groupSnap\cf4 \strokec4 .\cf9 \strokec9 exists\cf4 \strokec4 ()) \{\cb1 \
\cb3       \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 groupData\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 groupSnap\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 ();\cb1 \
\
\cb3       \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 updatedFields\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cf10 \strokec10 groupData\cf4 \strokec4 .\cf6 \strokec6 fields\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  []).\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 f\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3         \cf5 \strokec5 if\cf4 \strokec4  (\cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldId\cf4 \strokec4 ) \cf5 \strokec5 return\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 ;\cb1 \
\
\cb3        \cf5 \strokec5 return\cf4 \strokec4  \{\cb1 \
\cb3   \cf11 \strokec11 ...\cf6 \strokec6 f\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 status:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 status\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 'Planned'\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf10 \strokec10 cleanedDrawnPolygon\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 drawnAcres:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 acres:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 acres\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 acres\cf4 \cb1 \strokec4 \
\cb3 \};\cb1 \
\
\cb3       \});\cb1 \
\
\cb3       \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 setDoc\cf4 \strokec4 (\cf10 \strokec10 groupRef\cf4 \strokec4 , \{\cb1 \
\cb3   \cf11 \strokec11 ...\cf10 \strokec10 groupData\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 fields:\cf4 \strokec4  \cf10 \strokec10 updatedFields\cf4 \strokec4 .\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 f\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  (\{\cb1 \
\cb3     \cf11 \strokec11 ...\cf6 \strokec6 f\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 drawnAcres:\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 acres:\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 acres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf12 \strokec12 0\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 crop:\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 crop\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 fieldName:\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 fieldName\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ,\cb1 \
\cb3   \}))\cb1 \
\cb3 \});\cb1 \
\
\cb3     \}\cb1 \
\cb3   \}\cb1 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 if\cf4 \strokec4  (\cf10 \strokec10 generatePdf\cf4 \strokec4 ) \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf5 \strokec5 try\cf4 \strokec4  \{\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \{ \cf9 \strokec9 generatePDFBlob\cf4 \strokec4  \} \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf8 \strokec8 import\cf4 \strokec4 (\cf7 \strokec7 '../utils/generatePDF'\cf4 \strokec4 );\cb1 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 fieldSnap\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 getDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'fields'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldId\cf4 \strokec4 ));\cb1 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 fieldData\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 fieldSnap\cf4 \strokec4 .\cf9 \strokec9 exists\cf4 \strokec4 () \cf11 \strokec11 ?\cf4 \strokec4  \cf10 \strokec10 fieldSnap\cf4 \strokec4 .\cf9 \strokec9 data\cf4 \strokec4 () \cf11 \strokec11 :\cf4 \strokec4  \{\};\cb1 \
\
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 fullJob\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf11 \strokec11 ...\cf10 \strokec10 job\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 notes\cf4 \strokec4 ,\cb1 \
\
\cb3   \cf6 \strokec6 fields:\cf4 \strokec4  [\cb1 \
\cb3     \{\cb1 \
\cb3       \cf6 \strokec6 id:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldId\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 fieldName:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldName\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 acres:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 acres\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 drawnAcres:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4 ,\cb1 \
\cb3       \cf11 \strokec11 ...\cf10 \strokec10 fieldData\cf4 \strokec4 ,\cb1 \
\cb3     \}\cb1 \
\cb3   ],\cb1 \
\cb3   \cf6 \strokec6 acres:\cf4 \strokec4  \{ \cf6 \strokec6 [\cf10 \strokec10 job\cf6 \strokec6 .fieldId]:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 acres\cf4 \strokec4  \},\cb1 \
\cb3   \cf6 \strokec6 fieldIds:\cf4 \strokec4  [\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldId\cf4 \strokec4 ],\cb1 \
\cb3 \};\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 blob\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 generatePDFBlob\cf4 \strokec4 (\cf10 \strokec10 fullJob\cf4 \strokec4 );\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 url\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf13 \strokec13 URL\cf4 \strokec4 .\cf9 \strokec9 createObjectURL\cf4 \strokec4 (\cf10 \strokec10 blob\cf4 \strokec4 );\cb1 \
\cb3     \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 link\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 document\cf4 \strokec4 .\cf9 \strokec9 createElement\cf4 \strokec4 (\cf7 \strokec7 'a'\cf4 \strokec4 );\cb1 \
\cb3     \cf10 \strokec10 link\cf4 \strokec4 .\cf6 \strokec6 href\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 url\cf4 \strokec4 ;\cb1 \
\cb3     \cf10 \strokec10 link\cf4 \strokec4 .\cf6 \strokec6 download\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf7 \strokec7 `FieldJob_\cf8 \strokec8 $\{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 fieldName\cf11 \strokec11  || \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 id\cf8 \strokec8 \}\cf7 \strokec7 .pdf`\cf4 \strokec4 ;\cb1 \
\cb3     \cf6 \strokec6 document\cf4 \strokec4 .\cf6 \strokec6 body\cf4 \strokec4 .\cf9 \strokec9 appendChild\cf4 \strokec4 (\cf6 \strokec6 link\cf4 \strokec4 );\cb1 \
\cb3     \cf10 \strokec10 link\cf4 \strokec4 .\cf9 \strokec9 click\cf4 \strokec4 ();\cb1 \
\cb3     \cf6 \strokec6 document\cf4 \strokec4 .\cf6 \strokec6 body\cf4 \strokec4 .\cf9 \strokec9 removeChild\cf4 \strokec4 (\cf10 \strokec10 link\cf4 \strokec4 );\cb1 \
\cb3   \} \cf5 \strokec5 catch\cf4 \strokec4  (\cf6 \strokec6 err\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf6 \strokec6 console\cf4 \strokec4 .\cf9 \strokec9 error\cf4 \strokec4 (\cf7 \strokec7 'PDF generation failed:'\cf4 \strokec4 , \cf6 \strokec6 err\cf4 \strokec4 );\cb1 \
\cb3     \cf9 \strokec9 alert\cf4 \strokec4 (\cf7 \strokec7 'Job saved, but PDF failed to generate.'\cf4 \strokec4 );\cb1 \
\cb3   \}\cb1 \
\cb3 \}\cb1 \
\
\cb3   \cf9 \strokec9 navigate\cf4 \strokec4 (\cf7 \strokec7 '/jobs'\cf4 \strokec4 );\cb1 \
\cb3   \cf5 \strokec5 return\cf4 \strokec4 ;\cb1 \
\cb3 \}\cb1 \
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 // \uc0\u55356 \u56725  Handle breakaway from group\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 newGroupedId\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf7 \strokec7 `\cf8 \strokec8 $\{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 id\cf8 \strokec8 \}\cf7 \strokec7 _solo`\cf4 \strokec4 ; \cf2 \strokec2 // unique ID to avoid conflict\cf4 \cb1 \strokec4 \
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 newGroupedJob\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf6 \strokec6 jobId:\cf4 \strokec4  \cf10 \strokec10 newGroupedId\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 jobType:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 vendor:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 vendor\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 applicator:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 applicator\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 jobDate:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobDate\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 cropYear:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 cropYear\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 products:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 ,\cb1 \
\cb3   \cb1 \
\cb3   \cf6 \strokec6 status:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 status\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 notes\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 passes:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 parentName\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Tillage'\cf4 \strokec4  \cf11 \strokec11 ?\cf4 \strokec4  \cf10 \strokec10 passes\cf4 \strokec4  \cf11 \strokec11 :\cf4 \strokec4  \cf8 \strokec8 undefined\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 waterVolume\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 fieldIds:\cf4 \strokec4  [\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldId\cf4 \strokec4 ],\cb1 \
\cb3   \cf6 \strokec6 fields:\cf4 \strokec4  [\cb1 \
\cb3     \{\cb1 \
\cb3       \cf6 \strokec6 id:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldId\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 fieldName:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 fieldName\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 drawnPolygon:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnPolygon\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 acres:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 acres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf12 \strokec12 0\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 crop:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 crop\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 riceLeveeAcres:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 riceLeveeAcres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ,\cb1 \
\cb3       \cf6 \strokec6 beanLeveeAcres:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 beanLeveeAcres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf8 \strokec8 null\cf4 \cb1 \strokec4 \
\cb3     \}\cb1 \
\cb3   ],\cb1 \
\cb3   \cf6 \strokec6 acres:\cf4 \strokec4  \{\cb1 \
\cb3     \cf6 \strokec6 [\cf10 \strokec10 job\cf6 \strokec6 .fieldId]:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 drawnAcres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 acres\cf4 \strokec4  \cf11 \strokec11 ??\cf4 \strokec4  \cf12 \strokec12 0\cf4 \cb1 \strokec4 \
\cb3   \},\cb1 \
\cb3   \cf6 \strokec6 timestamp:\cf4 \strokec4  \cf13 \strokec13 Date\cf4 \strokec4 .\cf9 \strokec9 now\cf4 \strokec4 ()\cb1 \
\cb3 \};\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 setDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobs'\cf4 \strokec4 , \cf10 \strokec10 newGroupedId\cf4 \strokec4 ), \cf10 \strokec10 newGroupedJob\cf4 \strokec4 );\cb1 \
\
\cf5 \cb3 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 updateDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 ), \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf11 \strokec11 ...\cf10 \strokec10 job\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 linkedToJobId:\cf4 \strokec4  \cf10 \strokec10 newGroupedId\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 notes\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 passes:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 parentName\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Tillage'\cf4 \strokec4  \cf11 \strokec11 ?\cf4 \strokec4  \cf10 \strokec10 passes\cf4 \strokec4  \cf11 \strokec11 :\cf4 \strokec4  \cf8 \strokec8 undefined\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 waterVolume\cf4 \cb1 \strokec4 \
\cb3 \});\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 handleSave\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf8 \strokec8 async\cf4 \strokec4  () \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf9 \strokec9 setSaving\cf4 \strokec4 (\cf8 \strokec8 true\cf4 \strokec4 );\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 shouldBreakFromGroup\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cb1 \
\cb3     \cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 vendor\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 vendor\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \cb1 \strokec4 \
\cb3     \cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 applicator\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 applicator\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \cb1 \strokec4 \
\cb3     \cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 jobDate\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobDate\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 stringify\cf4 \strokec4 (\cf10 \strokec10 originalJob\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 ) \cf11 \strokec11 !==\cf4 \strokec4  \cf6 \strokec6 JSON\cf4 \strokec4 .\cf9 \strokec9 stringify\cf4 \strokec4 (\cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 )\cb1 \
\cb3   );\cb1 \
\
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf11 \strokec11 !\cf10 \strokec10 shouldBreakFromGroup\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 updateDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 ), \{\cb1 \
\cb3       \cf11 \strokec11 ...\cf10 \strokec10 job\cf4 \cb1 \strokec4 \
\cb3     \});\cb1 \
\cb3     \cf9 \strokec9 navigate\cf4 \strokec4 (\cf7 \strokec7 '/jobs'\cf4 \strokec4 );\cb1 \
\cb3     \cf5 \strokec5 return\cf4 \strokec4 ;\cb1 \
\cb3   \}\cb1 \
\
\cb3   \cf2 \strokec2 // \uc0\u55357 \u56577  (Then paste the breakaway logic here)\cf4 \cb1 \strokec4 \
\cb3 \};\cb1 \
\
\cb3     \cf5 \strokec5 try\cf4 \strokec4  \{\cb1 \
\cb3      \cf5 \strokec5 await\cf4 \strokec4  \cf9 \strokec9 updateDoc\cf4 \strokec4 (\cf9 \strokec9 doc\cf4 \strokec4 (\cf10 \strokec10 db\cf4 \strokec4 , \cf7 \strokec7 'jobsByField'\cf4 \strokec4 , \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 id\cf4 \strokec4 ), \{\cb1 \
\cb3   \cf6 \strokec6 products:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 products\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 status:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 status\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 'Planned'\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 vendor:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 vendor\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 applicator:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 applicator\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 jobDate:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobDate\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 linkedToJobId:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 linkedToJobId\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 notes:\cf4 \strokec4  \cf10 \strokec10 notes\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf7 \strokec7 ''\cf4 \strokec4 ,\cb1 \
\cb3   \cf6 \strokec6 passes:\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 ?.\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 parentName\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Tillage'\cf4 \strokec4  \cf11 \strokec11 ?\cf4 \strokec4  \cf10 \strokec10 passes\cf4 \strokec4  \cf11 \strokec11 :\cf4 \strokec4  \cf8 \strokec8 undefined\cf4 \strokec4 ,\cb1 \
\
\cb3 \});\cb1 \
\
\
\
\
\cb3       \cf9 \strokec9 navigate\cf4 \strokec4 (\cf7 \strokec7 '/jobs'\cf4 \strokec4 );\cb1 \
\cb3     \} \cf5 \strokec5 catch\cf4 \strokec4  (\cf6 \strokec6 err\cf4 \strokec4 ) \{\cb1 \
\cb3       \cf6 \strokec6 console\cf4 \strokec4 .\cf9 \strokec9 error\cf4 \strokec4 (\cf7 \strokec7 'Error updating field job:'\cf4 \strokec4 , \cf6 \strokec6 err\cf4 \strokec4 );\cb1 \
\cb3       \cf9 \strokec9 alert\cf4 \strokec4 (\cf7 \strokec7 'Failed to save changes.'\cf4 \strokec4 );\cb1 \
\cb3     \} \cf5 \strokec5 finally\cf4 \strokec4  \{\cb1 \
\cb3       \cf9 \strokec9 setSaving\cf4 \strokec4 (\cf8 \strokec8 false\cf4 \strokec4 );\cb1 \
\cb3     \}\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf8 \strokec8 function\cf4 \strokec4  \cf9 \strokec9 renderBoundarySVG\cf4 \strokec4 (\cf6 \strokec6 baseGeometry\cf4 \strokec4 , \cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 ) \{\cb1 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf11 \strokec11 !\cf6 \strokec6 baseGeometry\cf4 \strokec4 ) \cf5 \strokec5 return\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ;\cb1 \
\
\cb3   \cf8 \strokec8 let\cf4 \strokec4  \cf6 \strokec6 base\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 baseGeometry\cf4 \strokec4 ;\cb1 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf6 \strokec6 base\cf4 \strokec4 .\cf6 \strokec6 type\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Feature'\cf4 \strokec4 ) \cf6 \strokec6 base\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 base\cf4 \strokec4 .\cf6 \strokec6 geometry\cf4 \strokec4 ;\cb1 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf6 \strokec6 base\cf4 \strokec4 .\cf6 \strokec6 type\cf4 \strokec4  \cf11 \strokec11 !==\cf4 \strokec4  \cf7 \strokec7 'Polygon'\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf11 \strokec11 !\cf6 \strokec6 base\cf4 \strokec4 .\cf6 \strokec6 coordinates\cf4 \strokec4 ?.[\cf12 \strokec12 0\cf4 \strokec4 ]) \cf5 \strokec5 return\cf4 \strokec4  \cf8 \strokec8 null\cf4 \strokec4 ;\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 baseCoords\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 base\cf4 \strokec4 .\cf6 \strokec6 coordinates\cf4 \strokec4 [\cf12 \strokec12 0\cf4 \strokec4 ];\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 bounds\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 baseCoords\cf4 \strokec4 .\cf9 \strokec9 reduce\cf4 \strokec4 ((\cf6 \strokec6 acc\cf4 \strokec4 , [\cf6 \strokec6 lng\cf4 \strokec4 , \cf6 \strokec6 lat\cf4 \strokec4 ]) \cf8 \strokec8 =>\cf4 \strokec4  (\{\cb1 \
\cb3     \cf6 \strokec6 minX:\cf4 \strokec4  \cf6 \strokec6 Math\cf4 \strokec4 .\cf9 \strokec9 min\cf4 \strokec4 (\cf6 \strokec6 acc\cf4 \strokec4 .\cf6 \strokec6 minX\cf4 \strokec4 , \cf6 \strokec6 lng\cf4 \strokec4 ),\cb1 \
\cb3     \cf6 \strokec6 maxX:\cf4 \strokec4  \cf6 \strokec6 Math\cf4 \strokec4 .\cf9 \strokec9 max\cf4 \strokec4 (\cf6 \strokec6 acc\cf4 \strokec4 .\cf6 \strokec6 maxX\cf4 \strokec4 , \cf6 \strokec6 lng\cf4 \strokec4 ),\cb1 \
\cb3     \cf6 \strokec6 minY:\cf4 \strokec4  \cf6 \strokec6 Math\cf4 \strokec4 .\cf9 \strokec9 min\cf4 \strokec4 (\cf6 \strokec6 acc\cf4 \strokec4 .\cf6 \strokec6 minY\cf4 \strokec4 , \cf6 \strokec6 lat\cf4 \strokec4 ),\cb1 \
\cb3     \cf6 \strokec6 maxY:\cf4 \strokec4  \cf6 \strokec6 Math\cf4 \strokec4 .\cf9 \strokec9 max\cf4 \strokec4 (\cf6 \strokec6 acc\cf4 \strokec4 .\cf6 \strokec6 maxY\cf4 \strokec4 , \cf6 \strokec6 lat\cf4 \strokec4 ),\cb1 \
\cb3   \}), \{ \cf6 \strokec6 minX:\cf4 \strokec4  \cf8 \strokec8 Infinity\cf4 \strokec4 , \cf6 \strokec6 maxX:\cf4 \strokec4  \cf11 \strokec11 -\cf8 \strokec8 Infinity\cf4 \strokec4 , \cf6 \strokec6 minY:\cf4 \strokec4  \cf8 \strokec8 Infinity\cf4 \strokec4 , \cf6 \strokec6 maxY:\cf4 \strokec4  \cf11 \strokec11 -\cf8 \strokec8 Infinity\cf4 \strokec4  \});\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 width\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 bounds\cf4 \strokec4 .\cf6 \strokec6 maxX\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  \cf10 \strokec10 bounds\cf4 \strokec4 .\cf6 \strokec6 minX\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 1\cf4 \strokec4 ;\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 height\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 bounds\cf4 \strokec4 .\cf6 \strokec6 maxY\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  \cf10 \strokec10 bounds\cf4 \strokec4 .\cf6 \strokec6 minY\cf4 \strokec4  \cf11 \strokec11 ||\cf4 \strokec4  \cf12 \strokec12 1\cf4 \strokec4 ;\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 boxSize\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf12 \strokec12 300\cf4 \strokec4 ;\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 margin\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf12 \strokec12 10\cf4 \strokec4 ;\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 scale\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cf10 \strokec10 boxSize\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  \cf10 \strokec10 margin\cf4 \strokec4  \cf11 \strokec11 *\cf4 \strokec4  \cf12 \strokec12 2\cf4 \strokec4 ) \cf11 \strokec11 /\cf4 \strokec4  \cf6 \strokec6 Math\cf4 \strokec4 .\cf9 \strokec9 max\cf4 \strokec4 (\cf10 \strokec10 width\cf4 \strokec4 , \cf10 \strokec10 height\cf4 \strokec4 );\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 xOffset\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cf10 \strokec10 boxSize\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  \cf10 \strokec10 width\cf4 \strokec4  \cf11 \strokec11 *\cf4 \strokec4  \cf10 \strokec10 scale\cf4 \strokec4 ) \cf11 \strokec11 /\cf4 \strokec4  \cf12 \strokec12 2\cf4 \strokec4 ;\cb1 \
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 yOffset\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cf10 \strokec10 boxSize\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  \cf10 \strokec10 height\cf4 \strokec4  \cf11 \strokec11 *\cf4 \strokec4  \cf10 \strokec10 scale\cf4 \strokec4 ) \cf11 \strokec11 /\cf4 \strokec4  \cf12 \strokec12 2\cf4 \strokec4 ;\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 project\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  ([\cf6 \strokec6 lng\cf4 \strokec4 , \cf6 \strokec6 lat\cf4 \strokec4 ]) \cf8 \strokec8 =>\cf4 \strokec4  (\{\cb1 \
\cb3     \cf6 \strokec6 x:\cf4 \strokec4  (\cf6 \strokec6 lng\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  \cf10 \strokec10 bounds\cf4 \strokec4 .\cf6 \strokec6 minX\cf4 \strokec4 ) \cf11 \strokec11 *\cf4 \strokec4  \cf10 \strokec10 scale\cf4 \strokec4  \cf11 \strokec11 +\cf4 \strokec4  \cf10 \strokec10 xOffset\cf4 \strokec4 ,\cb1 \
\cb3     \cf6 \strokec6 y:\cf4 \strokec4  \cf10 \strokec10 boxSize\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  ((\cf6 \strokec6 lat\cf4 \strokec4  \cf11 \strokec11 -\cf4 \strokec4  \cf10 \strokec10 bounds\cf4 \strokec4 .\cf6 \strokec6 minY\cf4 \strokec4 ) \cf11 \strokec11 *\cf4 \strokec4  \cf10 \strokec10 scale\cf4 \strokec4  \cf11 \strokec11 +\cf4 \strokec4  \cf10 \strokec10 yOffset\cf4 \strokec4 ),\cb1 \
\cb3   \});\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf9 \strokec9 pathFromCoords\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  (\cf6 \strokec6 coords\cf4 \strokec4 ) \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3     \cf5 \strokec5 return\cf4 \strokec4  \cf6 \strokec6 coords\cf4 \strokec4 .\cf9 \strokec9 map\cf4 \strokec4 ((\cf6 \strokec6 pt\cf4 \strokec4 , \cf6 \strokec6 i\cf4 \strokec4 ) \cf8 \strokec8 =>\cf4 \strokec4  \{\cb1 \
\cb3       \cf8 \strokec8 const\cf4 \strokec4  \{ \cf10 \strokec10 x\cf4 \strokec4 , \cf10 \strokec10 y\cf4 \strokec4  \} \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 project\cf4 \strokec4 (\cf6 \strokec6 pt\cf4 \strokec4 );\cb1 \
\cb3       \cf5 \strokec5 return\cf4 \strokec4  \cf7 \strokec7 `\cf8 \strokec8 $\{\cf6 \strokec6 i\cf11 \strokec11  === \cf12 \strokec12 0\cf11 \strokec11  ? \cf7 \strokec7 'M'\cf11 \strokec11  : \cf7 \strokec7 'L'\cf8 \strokec8 \}$\{\cf10 \strokec10 x\cf8 \strokec8 \}\cf7 \strokec7 ,\cf8 \strokec8 $\{\cf10 \strokec10 y\cf8 \strokec8 \}\cf7 \strokec7 `\cf4 \strokec4 ;\cb1 \
\cb3     \}).\cf9 \strokec9 join\cf4 \strokec4 (\cf7 \strokec7 ' '\cf4 \strokec4 ) \cf11 \strokec11 +\cf4 \strokec4  \cf7 \strokec7 ' Z'\cf4 \strokec4 ;\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf8 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 basePath\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf9 \strokec9 pathFromCoords\cf4 \strokec4 (\cf10 \strokec10 baseCoords\cf4 \strokec4 );\cb1 \
\
\cb3   \cf8 \strokec8 let\cf4 \strokec4  \cf6 \strokec6 overlayPaths\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  [];\cb1 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 ?.\cf6 \strokec6 type\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'FeatureCollection'\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf6 \strokec6 overlayPaths\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 .\cf6 \strokec6 features\cf4 \cb1 \strokec4 \
\cb3       .\cf9 \strokec9 filter\cf4 \strokec4 (\cf6 \strokec6 f\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  \cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 geometry\cf4 \strokec4 ?.\cf6 \strokec6 type\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Polygon'\cf4 \strokec4 )\cb1 \
\cb3       .\cf9 \strokec9 map\cf4 \strokec4 (\cf6 \strokec6 f\cf4 \strokec4  \cf8 \strokec8 =>\cf4 \strokec4  \cf9 \strokec9 pathFromCoords\cf4 \strokec4 (\cf6 \strokec6 f\cf4 \strokec4 .\cf6 \strokec6 geometry\cf4 \strokec4 .\cf6 \strokec6 coordinates\cf4 \strokec4 [\cf12 \strokec12 0\cf4 \strokec4 ]));\cb1 \
\cb3   \} \cf5 \strokec5 else\cf4 \strokec4  \cf5 \strokec5 if\cf4 \strokec4  (\cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 ?.\cf6 \strokec6 type\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Feature'\cf4 \strokec4  \cf11 \strokec11 &&\cf4 \strokec4  \cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 .\cf6 \strokec6 geometry\cf4 \strokec4 ?.\cf6 \strokec6 type\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Polygon'\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf6 \strokec6 overlayPaths\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  [\cf9 \strokec9 pathFromCoords\cf4 \strokec4 (\cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 .\cf6 \strokec6 geometry\cf4 \strokec4 .\cf6 \strokec6 coordinates\cf4 \strokec4 [\cf12 \strokec12 0\cf4 \strokec4 ])];\cb1 \
\cb3   \} \cf5 \strokec5 else\cf4 \strokec4  \cf5 \strokec5 if\cf4 \strokec4  (\cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 ?.\cf6 \strokec6 type\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Polygon'\cf4 \strokec4 ) \{\cb1 \
\cb3     \cf6 \strokec6 overlayPaths\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  [\cf9 \strokec9 pathFromCoords\cf4 \strokec4 (\cf6 \strokec6 overlayGeoJSON\cf4 \strokec4 .\cf6 \strokec6 coordinates\cf4 \strokec4 [\cf12 \strokec12 0\cf4 \strokec4 ])];\cb1 \
\cb3   \}\cb1 \
\
\cb3   \cf5 \strokec5 return\cf4 \strokec4  (\cb1 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 svg\cf4 \strokec4  \cf6 \strokec6 viewBox\cf11 \strokec11 =\cf8 \strokec8 \{\cf7 \strokec7 `0 0 \cf8 \strokec8 $\{\cf10 \strokec10 boxSize\cf8 \strokec8 \}\cf7 \strokec7  \cf8 \strokec8 $\{\cf10 \strokec10 boxSize\cf8 \strokec8 \}\cf7 \strokec7 `\cf8 \strokec8 \}\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "w-64 h-64 bg-white border rounded shadow mx-auto"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3       \cf8 \strokec8 \{\cf2 \strokec2 /* Base field = red if overlay exists */\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3       \cf14 \strokec14 <\cf8 \strokec8 path\cf4 \strokec4  \cf6 \strokec6 d\cf11 \strokec11 =\cf8 \strokec8 \{\cf10 \strokec10 basePath\cf8 \strokec8 \}\cf4 \strokec4  \cf6 \strokec6 fill\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 overlayPaths\cf11 \strokec11 .\cf6 \strokec6 length\cf11 \strokec11  ? \cf7 \strokec7 '#F87171'\cf11 \strokec11  : \cf7 \strokec7 '#34D399'\cf8 \strokec8 \}\cf4 \strokec4  \cf6 \strokec6 fillOpacity\cf11 \strokec11 =\cf8 \strokec8 \{\cf12 \strokec12 0.4\cf8 \strokec8 \}\cf4 \strokec4  \cf6 \strokec6 stroke\cf11 \strokec11 =\cf7 \strokec7 "#4B5563"\cf4 \strokec4  \cf6 \strokec6 strokeWidth\cf11 \strokec11 =\cf7 \strokec7 "1.5"\cf4 \strokec4  \cf14 \strokec14 />\cf4 \cb1 \strokec4 \
\cb3       \cb1 \
\cb3       \cf8 \strokec8 \{\cf2 \strokec2 /* Overlay polygons = green */\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3       \cf8 \strokec8 \{\cf6 \strokec6 overlayPaths\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 ((\cf6 \strokec6 d\cf11 \strokec11 , \cf6 \strokec6 i\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11         \cf14 \strokec14 <\cf8 \strokec8 path\cf11 \strokec11  \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 i\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 d\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 d\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 fill\cf11 \strokec11 =\cf7 \strokec7 "#34D399"\cf11 \strokec11  \cf6 \strokec6 fillOpacity\cf11 \strokec11 =\cf8 \strokec8 \{\cf12 \strokec12 0.6\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 stroke\cf11 \strokec11 =\cf7 \strokec7 "#047857"\cf11 \strokec11  \cf6 \strokec6 strokeWidth\cf11 \strokec11 =\cf7 \strokec7 "2"\cf11 \strokec11  \cf14 \strokec14 />\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       ))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf14 \strokec14 </\cf8 \strokec8 svg\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   );\cb1 \
\cb3 \}\cb1 \
\
\
\
\
\cb3   \cf5 \strokec5 if\cf4 \strokec4  (\cf11 \strokec11 !\cf10 \strokec10 job\cf4 \strokec4 ) \cf5 \strokec5 return\cf4 \strokec4  \cf14 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "p-6"\cf14 \strokec14 >\cf4 \strokec4 Loading...\cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \strokec4 ;\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 requiresProducts\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  [\cf7 \strokec7 'Seeding'\cf4 \strokec4 , \cf7 \strokec7 'Spraying'\cf4 \strokec4 , \cf7 \strokec7 'Fertilizing'\cf4 \strokec4 ].\cf9 \strokec9 includes\cf4 \strokec4 (\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 parentName\cf4 \cb1 \strokec4 \
\cb3 );\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 const\cf4 \strokec4  \cf10 \strokec10 requiresWater\cf4 \strokec4  \cf11 \strokec11 =\cf4 \strokec4  \cf10 \strokec10 job\cf4 \strokec4 .\cf6 \strokec6 jobType\cf4 \strokec4 ?.\cf6 \strokec6 parentName\cf4 \strokec4  \cf11 \strokec11 ===\cf4 \strokec4  \cf7 \strokec7 'Spraying'\cf4 \strokec4 ;\cb1 \
\
\
\pard\pardeftab720\partightenfactor0
\cf4 \cb3  \cf5 \strokec5 return\cf4 \strokec4  (\cb1 \
\cb3   \cf14 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "px-4 py-6 max-w-full overflow-x-hidden"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\cb3      \cf14 \strokec14 <\cf8 \strokec8 h2\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "text-xl font-bold mb-4"\cf14 \strokec14 >\cf4 \strokec4 Edit Field Job \'96 \cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 fieldName\cf8 \strokec8 \}\cf14 \strokec14 </\cf8 \strokec8 h2\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 label\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium"\cf14 \strokec14 >\cf4 \strokec4 Job Type\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 <\cf8 \strokec8 select\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 jobType\cf11 \strokec11 ?.\cf6 \strokec6 name\cf11 \strokec11  || \cf7 \strokec7 ''\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3   \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11     \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 selected\cf11 \strokec11  = \cf10 \strokec10 jobTypesList\cf11 \strokec11 .\cf9 \strokec9 find\cf11 \strokec11 (\cf6 \strokec6 t\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  \cf6 \strokec6 t\cf11 \strokec11 .\cf6 \strokec6 name\cf11 \strokec11  === \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf9 \strokec9 setJob\cf11 \strokec11 (\cf6 \strokec6 prev\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\{ ...\cf6 \strokec6 prev\cf11 \strokec11 , \cf6 \strokec6 jobType:\cf11 \strokec11  \cf10 \strokec10 selected\cf11 \strokec11  \}));\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \}\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border border-gray-300 rounded-md px-3 py-2 bg-white w-full focus:outline-none focus:ring-2 focus:ring-blue-500"\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 option\cf4 \strokec4  \cf6 \strokec6 value\cf11 \strokec11 =\cf7 \strokec7 ""\cf14 \strokec14 >\cf4 \strokec4 Select Job Type\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf8 \strokec8 \{\cf10 \strokec10 jobTypesList\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 (\cf6 \strokec6 type\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 option\cf11 \strokec11  \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 type\cf11 \strokec11 .\cf6 \strokec6 name\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 type\cf11 \strokec11 .\cf6 \strokec6 name\cf8 \strokec8 \}\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 \{\cf6 \strokec6 type\cf11 \strokec11 .\cf6 \strokec6 name\cf8 \strokec8 \}\cf11 \strokec11  \cf8 \strokec8 \{\cf6 \strokec6 type\cf11 \strokec11 .\cf6 \strokec6 parentName\cf11 \strokec11  ? \cf7 \strokec7 `(\cf8 \strokec8 $\{\cf6 \strokec6 type\cf11 \strokec11 .\cf6 \strokec6 parentName\cf8 \strokec8 \}\cf7 \strokec7 )`\cf11 \strokec11  : \cf7 \strokec7 ''\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   ))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 select\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-4 flex gap-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 label\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium text-gray-700"\cf14 \strokec14 >\cf4 \strokec4 Vendor\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 select\cf4 \cb1 \strokec4 \
\cb3       \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border p-2 rounded"\cf4 \cb1 \strokec4 \
\cb3       \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 vendor\cf11 \strokec11  || \cf7 \strokec7 ''\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3       \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 e\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setJob\cf11 \strokec11 (\cf6 \strokec6 prev\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\{ ...\cf6 \strokec6 prev\cf11 \strokec11 , \cf6 \strokec6 vendor:\cf11 \strokec11  \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11  \}))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3       \cf14 \strokec14 <\cf8 \strokec8 option\cf4 \strokec4  \cf6 \strokec6 value\cf11 \strokec11 =\cf7 \strokec7 ""\cf14 \strokec14 >\cf4 \strokec4 Select Vendor\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3       \cf8 \strokec8 \{\cf10 \strokec10 vendors\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 (\cf6 \strokec6 v\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11         \cf14 \strokec14 <\cf8 \strokec8 option\cf11 \strokec11  \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 v\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 v\cf8 \strokec8 \}\cf14 \strokec14 >\cf8 \strokec8 \{\cf6 \strokec6 v\cf8 \strokec8 \}\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       ))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf14 \strokec14 </\cf8 \strokec8 select\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-4 flex gap-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 \{\cf2 \strokec2 /* Vendor dropdown */\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3   \cf8 \strokec8 \{\cf2 \strokec2 /* Applicator dropdown */\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 label\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium text-gray-700"\cf14 \strokec14 >\cf4 \strokec4 Job Date\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 <\cf8 \strokec8 input\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 type\cf11 \strokec11 =\cf7 \strokec7 "date"\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border p-2 rounded"\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 jobDate\cf11 \strokec11  || \cf7 \strokec7 ''\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 e\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setJob\cf11 \strokec11 (\cf6 \strokec6 prev\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\{ ...\cf6 \strokec6 prev\cf11 \strokec11 , \cf6 \strokec6 jobDate:\cf11 \strokec11  \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11  \}))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 />\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 label\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium text-gray-700"\cf14 \strokec14 >\cf4 \strokec4 Job Status\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 <\cf8 \strokec8 select\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border p-2 rounded"\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 status\cf11 \strokec11  || \cf7 \strokec7 'Planned'\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 e\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setJob\cf11 \strokec11 (\cf6 \strokec6 prev\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\{ ...\cf6 \strokec6 prev\cf11 \strokec11 , \cf6 \strokec6 status:\cf11 \strokec11  \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11  \}))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 option\cf4 \strokec4  \cf6 \strokec6 value\cf11 \strokec11 =\cf7 \strokec7 "Planned"\cf14 \strokec14 >\cf4 \strokec4 Planned\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 option\cf4 \strokec4  \cf6 \strokec6 value\cf11 \strokec11 =\cf7 \strokec7 "Completed"\cf14 \strokec14 >\cf4 \strokec4 Completed\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 </\cf8 \strokec8 select\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 label\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium text-gray-700"\cf14 \strokec14 >\cf4 \strokec4 Applicator\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 select\cf4 \cb1 \strokec4 \
\cb3       \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border p-2 rounded"\cf4 \cb1 \strokec4 \
\cb3       \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 applicator\cf11 \strokec11  || \cf7 \strokec7 ''\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3       \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 e\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setJob\cf11 \strokec11 (\cf6 \strokec6 prev\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\{ ...\cf6 \strokec6 prev\cf11 \strokec11 , \cf6 \strokec6 applicator:\cf11 \strokec11  \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11  \}))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3       \cf14 \strokec14 <\cf8 \strokec8 option\cf4 \strokec4  \cf6 \strokec6 value\cf11 \strokec11 =\cf7 \strokec7 ""\cf14 \strokec14 >\cf4 \strokec4 Select Applicator\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3       \cf8 \strokec8 \{\cf10 \strokec10 applicators\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 (\cf6 \strokec6 a\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11         \cf14 \strokec14 <\cf8 \strokec8 option\cf11 \strokec11  \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 a\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 a\cf8 \strokec8 \}\cf14 \strokec14 >\cf8 \strokec8 \{\cf6 \strokec6 a\cf8 \strokec8 \}\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       ))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf14 \strokec14 </\cf8 \strokec8 select\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\cf14 \cb3 \strokec14 <\cf8 \strokec8 p\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-2 text-sm text-gray-500"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 \{\cf9 \strokec9 getJobTypeName\cf11 \strokec11 (\cf10 \strokec10 job\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \strokec4  \'95 \cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 cropYear\cf8 \strokec8 \}\cf4 \strokec4  \'95 \cf8 \strokec8 \{\cf11 \strokec11 (\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnAcres\cf11 \strokec11  ?? \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 acres\cf11 \strokec11 )?.\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \strokec4  acres\cb1 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 p\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\
\
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-6"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "grid grid-cols-3 font-semibold border-b pb-1 mb-1"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 span\cf14 \strokec14 >\cf4 \strokec4 Product\cf14 \strokec14 </\cf8 \strokec8 span\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 span\cf14 \strokec14 >\cf4 \strokec4 Rate\cf14 \strokec14 </\cf8 \strokec8 span\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf14 \strokec14 <\cf8 \strokec8 span\cf14 \strokec14 >\cf4 \strokec4 Units\cf14 \strokec14 </\cf8 \strokec8 span\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\cb3         \cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 products\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 ((\cf6 \strokec6 p\cf11 \strokec11 , \cf6 \strokec6 i\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 i\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "grid grid-cols-1 sm:grid-cols-3 gap-2 mb-2"\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11           \cf14 \strokec14 <\cf8 \strokec8 select\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border p-2 rounded"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 productName\cf11 \strokec11  || \cf7 \strokec7 ''\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11  \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 productName\cf11 \strokec11  = \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 matched\cf11 \strokec11  = \cf6 \strokec6 productsList\cf11 \strokec11 .\cf9 \strokec9 find\cf11 \strokec11 (\cf6 \strokec6 prod\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  \cf6 \strokec6 prod\cf11 \strokec11 .\cf6 \strokec6 name\cf11 \strokec11  === \cf6 \strokec6 productName\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11   \cf9 \strokec9 handleProductChange\cf11 \strokec11 (\cf6 \strokec6 i\cf11 \strokec11 , \cf7 \strokec7 'productName'\cf11 \strokec11 , \cf6 \strokec6 productName\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11   \cf5 \strokec5 if\cf11 \strokec11  (\cf6 \strokec6 matched\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 rateType\cf11 \strokec11  = \cf6 \strokec6 matched\cf11 \strokec11 ?.\cf6 \strokec6 rateType\cf11 \strokec11 ?.\cf9 \strokec9 toLowerCase\cf11 \strokec11 ();\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 cleanUnit\cf11 \strokec11  =\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 rateType\cf11 \strokec11  === \cf7 \strokec7 'weight'\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         ? \cf7 \strokec7 'lbs/acre'\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         : \cf6 \strokec6 rateType\cf11 \strokec11  === \cf7 \strokec7 'population'\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         ? \cf7 \strokec7 'seeds/acre'\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         : \cf6 \strokec6 matched\cf11 \strokec11 .\cf6 \strokec6 unit\cf11 \strokec11  || \cf7 \strokec7 ''\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11     \cf9 \strokec9 handleProductChange\cf11 \strokec11 (\cf6 \strokec6 i\cf11 \strokec11 , \cf7 \strokec7 'unit'\cf11 \strokec11 , \cf6 \strokec6 cleanUnit\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf9 \strokec9 handleProductChange\cf11 \strokec11 (\cf6 \strokec6 i\cf11 \strokec11 , \cf7 \strokec7 'rateType'\cf11 \strokec11 , \cf6 \strokec6 matched\cf11 \strokec11 .\cf6 \strokec6 rateType\cf11 \strokec11  || \cf7 \strokec7 ''\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf9 \strokec9 handleProductChange\cf11 \strokec11 (\cf6 \strokec6 i\cf11 \strokec11 , \cf7 \strokec7 'productId'\cf11 \strokec11 , \cf6 \strokec6 matched\cf11 \strokec11 .\cf6 \strokec6 id\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf9 \strokec9 handleProductChange\cf11 \strokec11 (\cf6 \strokec6 i\cf11 \strokec11 , \cf7 \strokec7 'crop'\cf11 \strokec11 , \cf6 \strokec6 matched\cf11 \strokec11 .\cf6 \strokec6 crop\cf11 \strokec11  || \cf7 \strokec7 ''\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 \}\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 option\cf11 \strokec11  \cf6 \strokec6 value\cf11 \strokec11 =\cf7 \strokec7 ""\cf14 \strokec14 >\cf11 \strokec11 Select Product\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf8 \strokec8 \{\cf6 \strokec6 productsList\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 (\cf6 \strokec6 prod\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 option\cf11 \strokec11  \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 prod\cf11 \strokec11 .\cf6 \strokec6 id\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 prod\cf11 \strokec11 .\cf6 \strokec6 name\cf8 \strokec8 \}\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf8 \strokec8 \{\cf6 \strokec6 prod\cf11 \strokec11 .\cf6 \strokec6 name\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 ))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 select\cf14 \strokec14 >\cf11 \strokec11   \cf8 \strokec8 \{\cf2 \strokec2 /* \uc0\u55357 \u56392  properly close the dropdown here */\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\
\
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11            \cf14 \strokec14 <\cf8 \strokec8 input\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 type\cf11 \strokec11 =\cf7 \strokec7 "text"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border p-1 rounded"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 rate\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 e\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 handleProductChange\cf11 \strokec11 (\cf6 \strokec6 i\cf11 \strokec11 , \cf7 \strokec7 'rate'\cf11 \strokec11 , \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 />\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 \{\cf11 \strokec11 (() \cf8 \strokec8 =>\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 rateType\cf11 \strokec11  = \cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 rateType\cf11 \strokec11 ?.\cf9 \strokec9 toLowerCase\cf11 \strokec11 () || \cf7 \strokec7 ''\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11  \cf8 \strokec8 let\cf11 \strokec11  \cf6 \strokec6 unitOptions\cf11 \strokec11  = [\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf7 \strokec7 "oz/acre"\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf7 \strokec7 "pt/acre"\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf7 \strokec7 "qt/acre"\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf7 \strokec7 "gal/acre"\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf7 \strokec7 "lbs/acre"\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf7 \strokec7 "seeds/acre"\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf7 \strokec7 "%v/v"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 ];\cf4 \cb1 \strokec4 \
\
\
\cf11 \cb3 \strokec11   \cf5 \strokec5 if\cf11 \strokec11  (\cf6 \strokec6 rateType\cf11 \strokec11  === \cf7 \strokec7 'weight'\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 unitOptions\cf11 \strokec11  = [\cf7 \strokec7 'lbs/acre'\cf11 \strokec11 ];\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  (\cf6 \strokec6 rateType\cf11 \strokec11  === \cf7 \strokec7 'population'\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 unitOptions\cf11 \strokec11  = [\cf7 \strokec7 'seeds/acre'\cf11 \strokec11 ];\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \}\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11   \cf5 \strokec5 return\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 select\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border p-2 rounded"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 unit\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 handleProductChange\cf11 \strokec11 (\cf6 \strokec6 i\cf11 \strokec11 , \cf7 \strokec7 'unit'\cf11 \strokec11 , \cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf14 \strokec14 <\cf8 \strokec8 option\cf11 \strokec11  \cf6 \strokec6 value\cf11 \strokec11 =\cf7 \strokec7 ""\cf14 \strokec14 >\cf11 \strokec11 Select Unit\cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 \{\cf6 \strokec6 unitOptions\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 (\cf6 \strokec6 unit\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf14 \strokec14 <\cf8 \strokec8 option\cf11 \strokec11  \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 unit\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 unit\cf8 \strokec8 \}\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           \cf8 \strokec8 \{\cf6 \strokec6 unit\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf14 \strokec14 </\cf8 \strokec8 option\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       ))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 </\cf8 \strokec8 select\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 \})()\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11           \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           \cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         ))\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 \{\cf6 \strokec6 requiresProducts\cf11 \strokec11  && (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf14 \strokec14 <>\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 button\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 onClick\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 () \cf8 \strokec8 =>\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf9 \strokec9 setJob\cf11 \strokec11 (\cf6 \strokec6 prev\cf11 \strokec11  \cf8 \strokec8 =>\cf11 \strokec11  (\{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           ...\cf6 \strokec6 prev\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           \cf6 \strokec6 products:\cf11 \strokec11  [...\cf6 \strokec6 prev\cf11 \strokec11 .\cf6 \strokec6 products\cf11 \strokec11 , \{ \cf6 \strokec6 productId:\cf11 \strokec11  \cf7 \strokec7 ''\cf11 \strokec11 , \cf6 \strokec6 productName:\cf11 \strokec11  \cf7 \strokec7 ''\cf11 \strokec11 , \cf6 \strokec6 rate:\cf11 \strokec11  \cf7 \strokec7 ''\cf11 \strokec11 , \cf6 \strokec6 unit:\cf11 \strokec11  \cf7 \strokec7 ''\cf11 \strokec11  \}]\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \}))\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "text-sm bg-blue-600 text-white px-3 py-1 rounded shadow hover:bg-blue-700 transition mb-4"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       + Add Product\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 </\cf8 \strokec8 button\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 </>\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 \{\cf6 \strokec6 job\cf11 \strokec11 ?.\cf6 \strokec6 jobType\cf11 \strokec11 ?.\cf6 \strokec6 parentName\cf11 \strokec11  === \cf7 \strokec7 'Tillage'\cf11 \strokec11  && (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 div\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 label\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium"\cf14 \strokec14 >\cf11 \strokec11 Number of Passes\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 input\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 type\cf11 \strokec11 =\cf7 \strokec7 "number"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 min\cf11 \strokec11 =\cf8 \strokec8 \{\cf12 \strokec12 1\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 passes\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setPasses\cf11 \strokec11 (\cf9 \strokec9 parseInt\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11 ) || \cf12 \strokec12 1\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border border-gray-300 rounded-md px-3 py-2 w-32 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 />\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 \{\cf6 \strokec6 requiresWater\cf11 \strokec11  && (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 div\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mb-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 label\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium text-gray-700"\cf14 \strokec14 >\cf11 \strokec11 Water Volume (gal/acre)\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 input\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 type\cf11 \strokec11 =\cf7 \strokec7 "number"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border rounded p-2 w-48"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 waterVolume\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setWaterVolume\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 />\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\
\
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "border border-gray-300 rounded-xl bg-white p-4 shadow-sm mb-6"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\
\
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf8 \strokec8 \{\cf6 \strokec6 field\cf11 \strokec11  && (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11     \cf14 \strokec14 <>\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 p\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "text-sm text-gray-800 mb-1"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 strong\cf14 \strokec14 >\cf8 \strokec8 \{\cf6 \strokec6 job\cf11 \strokec11 .\cf6 \strokec6 fieldName\cf8 \strokec8 \}\cf14 \strokec14 </\cf8 \strokec8 strong\cf14 \strokec14 >\cf11 \strokec11  \'96\cf8 \strokec8 \{\cf7 \strokec7 ' '\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf8 \strokec8 \{\cf10 \strokec10 isLeveeJob\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     ? \cf7 \strokec7 `\cf8 \strokec8 $\{\cf11 \strokec11 ((\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 crop\cf11 \strokec11  || \cf7 \strokec7 ''\cf11 \strokec11 ).\cf9 \strokec9 includes\cf11 \strokec11 (\cf7 \strokec7 'Rice'\cf11 \strokec11 ) ? \cf10 \strokec10 field\cf11 \strokec11 ?.\cf6 \strokec6 riceLeveeAcres\cf11 \strokec11  : \cf10 \strokec10 field\cf11 \strokec11 ?.\cf6 \strokec6 beanLeveeAcres\cf11 \strokec11 ) || \cf12 \strokec12 0\cf8 \strokec8 \}\cf7 \strokec7  acres (Levee \'96 \cf8 \strokec8 $\{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 crop\cf11 \strokec11  || \cf7 \strokec7 '\'97'\cf8 \strokec8 \}\cf7 \strokec7 )`\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     : \cf7 \strokec7 `\cf8 \strokec8 $\{\cf11 \strokec11 (\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnAcres\cf11 \strokec11  ?? \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 acres\cf11 \strokec11 )?.\cf9 \strokec9 toFixed\cf11 \strokec11 ?.(\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  acres \'96 \cf8 \strokec8 $\{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnPolygon\cf11 \strokec11  ? \cf7 \strokec7 'partial'\cf11 \strokec11  : \cf7 \strokec7 'full'\cf8 \strokec8 \}\cf7 \strokec7 `\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 p\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf14 \cb3 \strokec14 <\cf8 \strokec8 p\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "text-sm text-gray-600 mb-2"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   Crop: \cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 crop\cf11 \strokec11  || \cf7 \strokec7 '\'97'\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 p\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11       \cf14 \strokec14 <\cf8 \strokec8 div\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 id\cf11 \strokec11 =\cf8 \strokec8 \{\cf7 \strokec7 `field-canvas-\cf8 \strokec8 $\{\cf10 \strokec10 field\cf11 \strokec11 .\cf6 \strokec6 id\cf8 \strokec8 \}\cf7 \strokec7 `\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "bg-white p-2 rounded border shadow-sm"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 style\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 \{ \cf6 \strokec6 width:\cf11 \strokec11  \cf7 \strokec7 'fit-content'\cf11 \strokec11 , \cf6 \strokec6 margin:\cf11 \strokec11  \cf7 \strokec7 '0 auto'\cf11 \strokec11  \}\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 \{\cf11 \strokec11 (() \cf8 \strokec8 =>\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           \cf6 \strokec6 console\cf11 \strokec11 .\cf9 \strokec9 log\cf11 \strokec11 (\cf7 \strokec7 "\uc0\u55357 \u56385 \u65039  Field Boundary:"\cf11 \strokec11 , \cf10 \strokec10 fieldBoundary\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           \cf6 \strokec6 console\cf11 \strokec11 .\cf9 \strokec9 log\cf11 \strokec11 (\cf7 \strokec7 "\uc0\u55357 \u56385 \u65039  Drawn Polygon:"\cf11 \strokec11 , \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnPolygon\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11           \cf5 \strokec5 return\cf11 \strokec11  \cf9 \strokec9 renderBoundarySVG\cf11 \strokec11 (\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11             \cf10 \strokec10 fieldBoundary\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11             \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnPolygon\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \})()\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf14 \strokec14 <\cf8 \strokec8 div\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mt-6"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 label\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "block text-sm font-medium mb-1"\cf14 \strokec14 >\cf11 \strokec11 Notes\cf14 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 textarea\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 value\cf11 \strokec11 =\cf8 \strokec8 \{\cf10 \strokec10 notes\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setNotes\cf11 \strokec11 (\cf6 \strokec6 e\cf11 \strokec11 .\cf6 \strokec6 target\cf11 \strokec11 .\cf6 \strokec6 value\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "w-full border border-gray-300 rounded-md p-2 text-sm resize-none"\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 rows\cf11 \strokec11 =\cf8 \strokec8 \{\cf12 \strokec12 4\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 placeholder\cf11 \strokec11 =\cf7 \strokec7 "Add any notes for this job..."\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 />\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11     \cf14 \strokec14 </>\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\
\
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mt-2 no-print"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 button\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "text-sm text-blue-600 underline"\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 onClick\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 () \cf8 \strokec8 =>\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11       \cf9 \strokec9 navigate\cf11 \strokec11 (\cf7 \strokec7 `/jobs/edit-area/\cf8 \strokec8 $\{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 fieldId\cf8 \strokec8 \}\cf7 \strokec7 `\cf11 \strokec11 , \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11      \cf6 \strokec6 state:\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 field:\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 id:\cf11 \strokec11  \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 fieldId\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 fieldName:\cf11 \strokec11  \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 fieldName\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 boundary:\cf11 \strokec11  \cf10 \strokec10 fieldBoundary\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 drawnPolygon:\cf11 \strokec11  \cf8 \strokec8 typeof\cf11 \strokec11  \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnPolygon\cf11 \strokec11  === \cf7 \strokec7 'string'\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       ? \cf6 \strokec6 JSON\cf11 \strokec11 .\cf9 \strokec9 parse\cf11 \strokec11 (\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnPolygon\cf11 \strokec11 )\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       : \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnPolygon\cf11 \strokec11 ,\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 drawnAcres:\cf11 \strokec11  \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnAcres\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \},\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf6 \strokec6 cropYear:\cf11 \strokec11  \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 cropYear\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 \}\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11       \})\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \uc0\u9999 \u65039  Edit Area\cb1 \
\cb3   \cf14 \strokec14 </\cf8 \strokec8 button\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf4 \cb3      \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 \{\cf10 \strokec10 requiresProducts\cf11 \strokec11  && (\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf14 \strokec14 <\cf8 \strokec8 div\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "mt-6 border-t pt-4"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf14 \strokec14 <\cf8 \strokec8 h4\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "font-semibold text-sm mb-2"\cf14 \strokec14 >\cf11 \strokec11 Product Totals\cf14 \strokec14 </\cf8 \strokec8 h4\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf8 \strokec8 \{\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 products\cf11 \strokec11 .\cf9 \strokec9 map\cf11 \strokec11 ((\cf6 \strokec6 p\cf11 \strokec11 , \cf6 \strokec6 i\cf11 \strokec11 ) \cf8 \strokec8 =>\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 requiresWater\cf11 \strokec11  = \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 jobType\cf11 \strokec11 ?.\cf6 \strokec6 parentName\cf11 \strokec11  === \cf7 \strokec7 'Spraying'\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 rate\cf11 \strokec11  = \cf9 \strokec9 parseFloat\cf11 \strokec11 (\cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 rate\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 unit\cf11 \strokec11  = \cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 unit\cf11 \strokec11 ?.\cf9 \strokec9 toLowerCase\cf11 \strokec11 () || \cf7 \strokec7 ''\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 crop\cf11 \strokec11  = \cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 crop\cf11 \strokec11 ?.\cf9 \strokec9 toLowerCase\cf11 \strokec11 ?.() || \cf7 \strokec7 ''\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 let\cf11 \strokec11  \cf6 \strokec6 acres\cf11 \strokec11  = \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 drawnAcres\cf11 \strokec11  ?? \cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 acres\cf11 \strokec11  ?? \cf12 \strokec12 0\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 if\cf11 \strokec11  (\cf10 \strokec10 isLeveeJob\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11   \cf5 \strokec5 if\cf11 \strokec11  ((\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 crop\cf11 \strokec11  || \cf7 \strokec7 ''\cf11 \strokec11 ).\cf9 \strokec9 includes\cf11 \strokec11 (\cf7 \strokec7 'Rice'\cf11 \strokec11 ) && \cf10 \strokec10 field\cf11 \strokec11 ?.\cf6 \strokec6 riceLeveeAcres\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 acres\cf11 \strokec11  = \cf9 \strokec9 parseFloat\cf11 \strokec11 (\cf10 \strokec10 field\cf11 \strokec11 .\cf6 \strokec6 riceLeveeAcres\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  ((\cf10 \strokec10 job\cf11 \strokec11 .\cf6 \strokec6 crop\cf11 \strokec11  || \cf7 \strokec7 ''\cf11 \strokec11 ).\cf9 \strokec9 includes\cf11 \strokec11 (\cf7 \strokec7 'Soybean'\cf11 \strokec11 ) && \cf10 \strokec10 field\cf11 \strokec11 ?.\cf6 \strokec6 beanLeveeAcres\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \cf6 \strokec6 acres\cf11 \strokec11  = \cf9 \strokec9 parseFloat\cf11 \strokec11 (\cf10 \strokec10 field\cf11 \strokec11 .\cf6 \strokec6 beanLeveeAcres\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 \}\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11       \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 totalAmount\cf11 \strokec11  = \cf10 \strokec10 rate\cf11 \strokec11  * \cf6 \strokec6 acres\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \cf8 \strokec8 let\cf11 \strokec11  \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 ''\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11       \cf5 \strokec5 if\cf11 \strokec11  ([\cf7 \strokec7 'seeds/acre'\cf11 \strokec11 , \cf7 \strokec7 'population'\cf11 \strokec11 ].\cf9 \strokec9 includes\cf11 \strokec11 (\cf10 \strokec10 unit\cf11 \strokec11 )) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 seedsPerUnit\cf11 \strokec11  = \cf10 \strokec10 crop\cf11 \strokec11 .\cf9 \strokec9 includes\cf11 \strokec11 (\cf7 \strokec7 'rice'\cf11 \strokec11 ) ? \cf12 \strokec12 900000\cf11 \strokec11  : \cf10 \strokec10 crop\cf11 \strokec11 .\cf9 \strokec9 includes\cf11 \strokec11 (\cf7 \strokec7 'soybean'\cf11 \strokec11 ) ? \cf12 \strokec12 140000\cf11 \strokec11  : \cf12 \strokec12 1000000\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 totalSeeds\cf11 \strokec11  = \cf10 \strokec10 rate\cf11 \strokec11  * \cf6 \strokec6 acres\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 units\cf11 \strokec11  = \cf10 \strokec10 totalSeeds\cf11 \strokec11  / \cf10 \strokec10 seedsPerUnit\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf10 \strokec10 units\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 1\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  units`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  ([\cf7 \strokec7 'lbs/acre'\cf11 \strokec11 ].\cf9 \strokec9 includes\cf11 \strokec11 (\cf10 \strokec10 unit\cf11 \strokec11 )) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 lbsPerBushel\cf11 \strokec11  = \cf10 \strokec10 crop\cf11 \strokec11 .\cf9 \strokec9 includes\cf11 \strokec11 (\cf7 \strokec7 'rice'\cf11 \strokec11 ) ? \cf12 \strokec12 45\cf11 \strokec11  : \cf10 \strokec10 crop\cf11 \strokec11 .\cf9 \strokec9 includes\cf11 \strokec11 (\cf7 \strokec7 'soybean'\cf11 \strokec11 ) ? \cf12 \strokec12 60\cf11 \strokec11  : \cf12 \strokec12 50\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 bushels\cf11 \strokec11  = \cf10 \strokec10 totalAmount\cf11 \strokec11  / \cf10 \strokec10 lbsPerBushel\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf10 \strokec10 bushels\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 1\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  bushels`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  ([\cf7 \strokec7 'fl oz/acre'\cf11 \strokec11 , \cf7 \strokec7 'oz/acre'\cf11 \strokec11 ].\cf9 \strokec9 includes\cf11 \strokec11 (\cf10 \strokec10 unit\cf11 \strokec11 )) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 gal\cf11 \strokec11  = \cf10 \strokec10 totalAmount\cf11 \strokec11  / \cf12 \strokec12 128\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf10 \strokec10 gal\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  gallons`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  (\cf10 \strokec10 unit\cf11 \strokec11  === \cf7 \strokec7 'pt/acre'\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 gal\cf11 \strokec11  = \cf6 \strokec6 totalAmount\cf11 \strokec11  / \cf12 \strokec12 8\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf6 \strokec6 gal\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  gallons`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  (\cf6 \strokec6 unit\cf11 \strokec11  === \cf7 \strokec7 'qt/acre'\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 gal\cf11 \strokec11  = \cf6 \strokec6 totalAmount\cf11 \strokec11  / \cf12 \strokec12 4\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf6 \strokec6 gal\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  gallons`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  (\cf6 \strokec6 unit\cf11 \strokec11  === \cf7 \strokec7 'oz dry/acre'\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 lbs\cf11 \strokec11  = \cf6 \strokec6 totalAmount\cf11 \strokec11  / \cf12 \strokec12 16\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf6 \strokec6 lbs\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  lbs`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  (\cf6 \strokec6 unit\cf11 \strokec11  === \cf7 \strokec7 '%v/v'\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 water\cf11 \strokec11  = \cf9 \strokec9 parseFloat\cf11 \strokec11 (\cf6 \strokec6 requiresWater\cf11 \strokec11  ? \cf6 \strokec6 waterVolume\cf11 \strokec11  : \cf12 \strokec12 0\cf11 \strokec11 );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf8 \strokec8 const\cf11 \strokec11  \cf10 \strokec10 gal\cf11 \strokec11  = (\cf6 \strokec6 rate\cf11 \strokec11  / \cf12 \strokec12 100\cf11 \strokec11 ) * \cf6 \strokec6 water\cf11 \strokec11  * \cf6 \strokec6 acres\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf6 \strokec6 gal\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  gallons`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \cf5 \strokec5 if\cf11 \strokec11  (\cf6 \strokec6 unit\cf11 \strokec11  === \cf7 \strokec7 'tons/acre'\cf11 \strokec11 ) \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf6 \strokec6 totalAmount\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 2\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  tons`\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \} \cf5 \strokec5 else\cf11 \strokec11  \{\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf6 \strokec6 display\cf11 \strokec11  = \cf7 \strokec7 `\cf8 \strokec8 $\{\cf6 \strokec6 totalAmount\cf11 \strokec11 .\cf9 \strokec9 toFixed\cf11 \strokec11 (\cf12 \strokec12 1\cf11 \strokec11 )\cf8 \strokec8 \}\cf7 \strokec7  \cf8 \strokec8 $\{\cf6 \strokec6 unit\cf11 \strokec11 .\cf9 \strokec9 replace\cf11 \strokec11 (\cf7 \strokec7 '/acre'\cf11 \strokec11 , \cf7 \strokec7 ''\cf11 \strokec11 ).\cf9 \strokec9 trim\cf11 \strokec11 ()\cf8 \strokec8 \}\cf7 \strokec7 `\cf11 \strokec11 ;\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       \}\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11       \cf5 \strokec5 return\cf11 \strokec11  (\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf14 \strokec14 <\cf8 \strokec8 div\cf11 \strokec11  \cf6 \strokec6 key\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 i\cf8 \strokec8 \}\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "text-sm text-gray-700"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11           \cf8 \strokec8 \{\cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 productName\cf11 \strokec11  || \cf6 \strokec6 p\cf11 \strokec11 .\cf6 \strokec6 name\cf11 \strokec11  || \cf7 \strokec7 'Unnamed'\cf8 \strokec8 \}\cf11 \strokec11  \uc0\u8594  \cf14 \strokec14 <\cf8 \strokec8 span\cf11 \strokec11  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "font-mono"\cf14 \strokec14 >\cf8 \strokec8 \{\cf6 \strokec6 display\cf8 \strokec8 \}\cf14 \strokec14 </\cf8 \strokec8 span\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11         \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11       );\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11     \})\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11   \cf14 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf11 \cb3 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\
\
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 <\cf8 \strokec8 label\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "flex items-center gap-2 text-sm text-gray-700 mb-2"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 input\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 type\cf11 \strokec11 =\cf7 \strokec7 "checkbox"\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 checked\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 generatePdf\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 onChange\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 () \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 setGeneratePdf\cf11 \strokec11 (!\cf6 \strokec6 generatePdf\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 />\cf4 \cb1 \strokec4 \
\cb3   Generate PDF after saving\cb1 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 label\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\
\cf14 \cb3 \strokec14 <\cf8 \strokec8 div\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "flex justify-between items-center"\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf14 \strokec14 <\cf8 \strokec8 button\cf4 \strokec4  \cf6 \strokec6 onClick\cf11 \strokec11 =\cf8 \strokec8 \{\cf11 \strokec11 () \cf8 \strokec8 =>\cf11 \strokec11  \cf9 \strokec9 navigate\cf11 \strokec11 (\cf7 \strokec7 '/jobs'\cf11 \strokec11 )\cf8 \strokec8 \}\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "text-blue-600 underline"\cf14 \strokec14 >\cf4 \strokec4 \uc0\u8592  Cancel\cf14 \strokec14 </\cf8 \strokec8 button\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 <\cf8 \strokec8 button\cf4 \strokec4  \cf6 \strokec6 onClick\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 handleSave\cf8 \strokec8 \}\cf4 \strokec4  \cf6 \strokec6 className\cf11 \strokec11 =\cf7 \strokec7 "bg-green-600 text-white px-4 py-2 rounded"\cf4 \strokec4  \cf6 \strokec6 disabled\cf11 \strokec11 =\cf8 \strokec8 \{\cf6 \strokec6 saving\cf8 \strokec8 \}\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 \{\cf6 \strokec6 saving\cf11 \strokec11  ? \cf7 \strokec7 'Updating...'\cf11 \strokec11  : \cf7 \strokec7 'Update Field Job'\cf8 \strokec8 \}\cf4 \cb1 \strokec4 \
\cb3   \cf14 \strokec14 </\cf8 \strokec8 button\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\cf14 \cb3 \strokec14 </\cf8 \strokec8 div\cf14 \strokec14 >\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3 );\cb1 \
\cb3 \}\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 export\cf4 \strokec4  \cf5 \strokec5 default\cf4 \strokec4  \cf6 \strokec6 FieldJobSummaryPage\cf4 \strokec4 ;\cb1 \
\
\
}