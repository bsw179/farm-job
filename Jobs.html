<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #598a43; -webkit-text-stroke: #598a43}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #b76fb3; -webkit-text-stroke: #b76fb3}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #c1c1c1; -webkit-text-stroke: #c1c1c1}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #c1c1c1; -webkit-text-stroke: #c1c1c1; min-height: 14.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #42b3ff; -webkit-text-stroke: #42b3ff}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #d4d69a; -webkit-text-stroke: #d4d69a}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #43c0a0; -webkit-text-stroke: #43c0a0}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d}
    span.s1 {font-kerning: none; background-color: #181818}
    span.s2 {font-kerning: none; color: #b76fb3; background-color: #181818; -webkit-text-stroke: 0px #b76fb3}
    span.s3 {font-kerning: none; color: #c1c1c1; background-color: #181818; -webkit-text-stroke: 0px #c1c1c1}
    span.s4 {font-kerning: none; color: #c27e65; background-color: #181818; -webkit-text-stroke: 0px #c27e65}
    span.s5 {font-kerning: none; color: #8cd3fe; background-color: #181818; -webkit-text-stroke: 0px #8cd3fe}
    span.s6 {font-kerning: none}
    span.s7 {font-kerning: none; color: #d4d69a; background-color: #181818; -webkit-text-stroke: 0px #d4d69a}
    span.s8 {font-kerning: none; color: #4689cc; background-color: #181818; -webkit-text-stroke: 0px #4689cc}
    span.s9 {font-kerning: none; color: #42b3ff; background-color: #181818; -webkit-text-stroke: 0px #42b3ff}
    span.s10 {font-kerning: none; color: #cacaca; background-color: #181818; -webkit-text-stroke: 0px #cacaca}
    span.s11 {font-kerning: none; color: #598a43; background-color: #181818; -webkit-text-stroke: 0px #598a43}
    span.s12 {font-kerning: none; color: #c45356; background-color: #181818; -webkit-text-stroke: 0px #c45356}
    span.s13 {font-kerning: none; color: #cdad6a; background-color: #181818; -webkit-text-stroke: 0px #cdad6a}
    span.s14 {font-kerning: none; color: #a7c598; background-color: #181818; -webkit-text-stroke: 0px #a7c598}
    span.s15 {font-kerning: none; color: #6d6d6d; background-color: #181818; -webkit-text-stroke: 0px #6d6d6d}
    span.s16 {font-kerning: none; color: #43c0a0; background-color: #181818; -webkit-text-stroke: 0px #43c0a0}
  </style>
</head>
<body>
<p class="p1"><span class="s1">// src/pages/Jobs.jsx</span></p>
<p class="p2"><span class="s2">import</span><span class="s3"> </span><span class="s1">React</span><span class="s3">, { </span><span class="s1">useState</span><span class="s3">, </span><span class="s1">useEffect</span><span class="s3">, </span><span class="s1">useContext</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s4">'react'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">Tabs</span><span class="s3">, </span><span class="s5">Tab</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'@/components/ui/tabs'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">Button</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'@/components/ui/button'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">Card</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'@/components/ui/Card'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">PageHeader</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'@/components/ui/PageHeader'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">Badge</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'@/components/ui/Badge'</span><span class="s3">;</span></p>
<p class="p2"><span class="s2">import</span><span class="s3"> { </span><span class="s1">Plus</span><span class="s3">, </span><span class="s1">Pencil</span><span class="s3">, </span><span class="s1">Trash2</span><span class="s3">, </span><span class="s1">FileText</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s4">'lucide-react'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">useNavigate</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'react-router-dom'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">db</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'../firebase'</span><span class="s3">;</span></p>
<p class="p4"><span class="s1">import</span><span class="s3"> {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">collection</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">getDocs</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">deleteDoc</span><span class="s3">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s5">doc</span><span class="s1">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">getDoc</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">setDoc</span></p>
<p class="p3"><span class="s3">} </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'firebase/firestore'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">Menu</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'@headlessui/react'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">MoreVertical</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'lucide-react'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">getJobTypeIcon</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'../utils/getJobTypeIcon'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">CropYearContext</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'../context/CropYearContext'</span><span class="s3">;</span></p>
<p class="p2"><span class="s2">import</span><span class="s3"> { </span><span class="s1">MapContainer</span><span class="s3">, </span><span class="s1">TileLayer</span><span class="s3">, </span><span class="s1">GeoJSON</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s4">'react-leaflet'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">useUser</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'@/context/UserContext'</span><span class="s3">;</span></p>
<p class="p4"><span class="s1">import</span><span class="s3"> </span><span class="s5">L</span><span class="s3"> </span><span class="s1">from</span><span class="s3"> </span><span class="s4">'leaflet'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> </span><span class="s1">'leaflet/dist/leaflet.css'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s3"> { </span><span class="s5">auth</span><span class="s3"> } </span><span class="s2">from</span><span class="s3"> </span><span class="s1">'../firebase'</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s1">console</span><span class="s3">.</span><span class="s7">log</span><span class="s3">(</span><span class="s4">'ðŸ§ª LOGGED IN UID:'</span><span class="s3">, </span><span class="s1">auth</span><span class="s3">.</span><span class="s1">currentUser</span><span class="s3">?.</span><span class="s1">uid</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p4"><span class="s1">export</span><span class="s3"> </span><span class="s1">default</span><span class="s3"> </span><span class="s8">function</span><span class="s3"> </span><span class="s7">Jobs</span><span class="s3">() {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> { </span><span class="s9">cropYear</span><span class="s3"> } </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useContext</span><span class="s3">(</span><span class="s1">CropYearContext</span><span class="s3">);</span></p>
<p class="p5"><span class="s8">const</span><span class="s1"> { </span><span class="s9">role</span><span class="s1">, </span><span class="s9">loading</span><span class="s1"> } </span><span class="s10">=</span><span class="s1"> </span><span class="s7">useUser</span><span class="s1">();</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s5">console</span><span class="s3">.</span><span class="s7">log</span><span class="s3">(</span><span class="s1">'ðŸ§ª loading:'</span><span class="s3">, </span><span class="s5">loading</span><span class="s3">, </span><span class="s1">'role:'</span><span class="s3">, </span><span class="s5">role</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s2">if</span><span class="s3"> (</span><span class="s1">loading</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s10">!</span><span class="s1">role</span><span class="s3">) </span><span class="s2">return</span><span class="s3"> </span><span class="s8">null</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p7"><span class="s8">const</span><span class="s3"> [</span><span class="s1">view</span><span class="s3">, </span><span class="s1">setView</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s4">'By Field'</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s1">// ðŸ”’ Prevent viewer from switching to Grouped tab</span></p>
<p class="p8"><span class="s1">useEffect</span><span class="s3">(() </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s5">role</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s1">'viewer'</span><span class="s3"> </span><span class="s10">&amp;&amp;</span><span class="s3"> </span><span class="s5">view</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s1">'Grouped'</span><span class="s3">) {</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">setView</span><span class="s3">(</span><span class="s1">'By Field'</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p5"><span class="s1">}, [</span><span class="s5">role</span><span class="s1">, </span><span class="s5">view</span><span class="s1">]);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> [</span><span class="s9">jobs</span><span class="s1">, </span><span class="s9">setJobs</span><span class="s1">] </span><span class="s10">=</span><span class="s1"> </span><span class="s7">useState</span><span class="s1">([]);</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> [</span><span class="s1">fieldJobs</span><span class="s3">, </span><span class="s1">setFieldJobs</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">([]);</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> [</span><span class="s1">confirmDeleteId</span><span class="s3">, </span><span class="s1">setConfirmDeleteId</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s8">null</span><span class="s3">);</span></p>
<p class="p7"><span class="s8">const</span><span class="s3"> [</span><span class="s1">viewMode</span><span class="s3">, </span><span class="s1">setViewMode</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s4">'cards'</span><span class="s3">); </span><span class="s11">// or 'list'</span></p>
<p class="p7"><span class="s8">const</span><span class="s3"> [</span><span class="s1">searchText</span><span class="s3">, </span><span class="s1">setSearchText</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s4">''</span><span class="s3">);</span></p>
<p class="p1"><span class="s8">const</span><span class="s3"> [</span><span class="s9">sortKey</span><span class="s3">, </span><span class="s9">setSortKey</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s4">'date'</span><span class="s3">); </span><span class="s1">// or 'type', 'field'</span></p>
<p class="p7"><span class="s8">const</span><span class="s3"> [</span><span class="s1">showFilterPanel</span><span class="s3">, </span><span class="s1">setShowFilterPanel</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s8">false</span><span class="s3">);</span></p>
<p class="p1"><span class="s8">const</span><span class="s3"> [</span><span class="s9">filterStatus</span><span class="s3">, </span><span class="s9">setFilterStatus</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s4">'All'</span><span class="s3">); </span><span class="s1">// 'All', 'Planned', 'Completed'</span></p>
<p class="p1"><span class="s8">const</span><span class="s3"> [</span><span class="s9">filterType</span><span class="s3">, </span><span class="s9">setFilterType</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s4">'All'</span><span class="s3">); </span><span class="s1">// or specific job type name</span></p>
<p class="p7"><span class="s8">const</span><span class="s3"> [</span><span class="s1">sortDirection</span><span class="s3">, </span><span class="s1">setSortDirection</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s4">'desc'</span><span class="s3">); </span><span class="s11">// 'desc' = newest first</span></p>
<p class="p7"><span class="s8">const</span><span class="s3"> [</span><span class="s1">selectedJob</span><span class="s3">, </span><span class="s1">setSelectedJob</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s8">null</span><span class="s3">);</span></p>
<p class="p7"><span class="s8">const</span><span class="s3"> [</span><span class="s1">selectedJobs</span><span class="s3">, </span><span class="s1">setSelectedJobs</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">([]);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s8">const</span><span class="s3"> </span><span class="s1">getJobTypeName</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s5">job</span><span class="s3">) </span><span class="s8">=&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">typeof</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'string'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3">?.</span><span class="s1">name</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">;</span></p>
<p class="p8"><span class="s8">const</span><span class="s3"> </span><span class="s1">formatShortDate</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s5">isoString</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s10">!</span><span class="s1">isoString</span><span class="s3">) </span><span class="s2">return</span><span class="s3"> </span><span class="s4">'â€”'</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">date</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s8">new</span><span class="s1"> </span><span class="s7">Date</span><span class="s1">(</span><span class="s5">isoString</span><span class="s1">);</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">return</span><span class="s3"> </span><span class="s5">date</span><span class="s3">.</span><span class="s7">toLocaleDateString</span><span class="s3">(</span><span class="s1">'en-US'</span><span class="s3">, { </span><span class="s5">month:</span><span class="s3"> </span><span class="s1">'short'</span><span class="s3">, </span><span class="s5">day:</span><span class="s3"> </span><span class="s1">'numeric'</span><span class="s3"> });</span></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">navigate</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">useNavigate</span><span class="s3">();</span></p>
<p class="p8"><span class="s8">const</span><span class="s3"> </span><span class="s1">handleExportCSV</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> () </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">headers</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> [</span><span class="s1">'Date'</span><span class="s3">, </span><span class="s1">'Field'</span><span class="s3">, </span><span class="s1">'Job Type'</span><span class="s3">, </span><span class="s1">'Status'</span><span class="s3">, </span><span class="s1">'Vendor'</span><span class="s3">, </span><span class="s1">'Applicator'</span><span class="s3">, </span><span class="s1">'Acres'</span><span class="s3">, </span><span class="s1">'Products'</span><span class="s3">];</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">rows</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">jobsToShow</span><span class="s3">.</span><span class="s7">map</span><span class="s3">(</span><span class="s1">job</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">productSummary</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s5">job</span><span class="s3">.</span><span class="s5">products</span><span class="s3">?.</span><span class="s7">map</span><span class="s3">(</span><span class="s5">p</span><span class="s3"> </span><span class="s8">=&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s4">`</span><span class="s8">${</span><span class="s1">p</span><span class="s10">.</span><span class="s1">productName</span><span class="s10"> || </span><span class="s1">p</span><span class="s10">.</span><span class="s1">name</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> (</span><span class="s8">${</span><span class="s1">p</span><span class="s10">.</span><span class="s1">rate</span><span class="s10"> || </span><span class="s4">'?'</span><span class="s8">}</span><span class="s4"> </span><span class="s8">${</span><span class="s1">p</span><span class="s10">.</span><span class="s1">unit</span><span class="s10"> || </span><span class="s4">''</span><span class="s8">}</span><span class="s4">)`</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>).</span><span class="s7">join</span><span class="s1">(</span><span class="s4">'; '</span><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">return</span><span class="s1"> [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobDate</span><span class="s1"> </span><span class="s10">||</span><span class="s1"> </span><span class="s4">''</span><span class="s1">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">job</span><span class="s3">.</span><span class="s1">fieldName</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">,</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">getJobTypeName</span><span class="s3">(</span><span class="s5">job</span><span class="s3">) </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">status</span><span class="s1"> </span><span class="s10">||</span><span class="s1"> </span><span class="s4">''</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">vendor</span><span class="s1"> </span><span class="s10">||</span><span class="s1"> </span><span class="s4">''</span><span class="s1">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">job</span><span class="s3">.</span><span class="s1">applicator</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">job</span><span class="s3">.</span><span class="s1">acres</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">drawnAcres</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">productSummary</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>});</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">csvContent</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">headers</span><span class="s1">.</span><span class="s7">join</span><span class="s1">(</span><span class="s4">','</span><span class="s1">),</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s10">...</span><span class="s5">rows</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s5">row</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s5">row</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s5">field</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s4">`"</span><span class="s8">${</span><span class="s1">String</span><span class="s10">(</span><span class="s5">field</span><span class="s10">).</span><span class="s1">replace</span><span class="s10">(</span><span class="s12">/"/</span><span class="s8">g</span><span class="s10">, </span><span class="s4">'""'</span><span class="s10">)</span><span class="s8">}</span><span class="s4">"`</span><span class="s3">).</span><span class="s1">join</span><span class="s3">(</span><span class="s4">','</span><span class="s3">))</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>].</span><span class="s7">join</span><span class="s1">(</span><span class="s4">'</span><span class="s13">\n</span><span class="s4">'</span><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">blob</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s8">new</span><span class="s3"> </span><span class="s7">Blob</span><span class="s3">([</span><span class="s5">csvContent</span><span class="s3">], { </span><span class="s5">type:</span><span class="s3"> </span><span class="s1">'text/csv;charset=utf-8;'</span><span class="s3"> });</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">url</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s9">URL</span><span class="s3">.</span><span class="s1">createObjectURL</span><span class="s3">(</span><span class="s5">blob</span><span class="s3">);</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">link</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s5">document</span><span class="s3">.</span><span class="s1">createElement</span><span class="s3">(</span><span class="s4">'a'</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">link</span><span class="s3">.</span><span class="s1">href</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">url</span><span class="s3">;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s5">link</span><span class="s3">.</span><span class="s7">setAttribute</span><span class="s3">(</span><span class="s1">'download'</span><span class="s3">, </span><span class="s1">'FieldJobs.csv'</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">document</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s7">appendChild</span><span class="s3">(</span><span class="s1">link</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s5">link</span><span class="s1">.</span><span class="s7">click</span><span class="s1">();</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">document</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s7">removeChild</span><span class="s3">(</span><span class="s1">link</span><span class="s3">);</span></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s8">const</span><span class="s3"> </span><span class="s1">handleExportPDF</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s8">async</span><span class="s3"> () </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> { </span><span class="s9">jsPDF</span><span class="s1"> } </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s8">import</span><span class="s1">(</span><span class="s4">'jspdf'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">pdf</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s8">new</span><span class="s1"> </span><span class="s7">jsPDF</span><span class="s1">();</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">titleFontSize</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s14">12</span><span class="s3">;</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">bodyFontSize</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s14">10</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">let</span><span class="s1"> </span><span class="s5">y</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s14">10</span><span class="s1">;</span></p>
<p class="p2"><span class="s1">console</span><span class="s3">.</span><span class="s7">log</span><span class="s3">(</span><span class="s1">jobsToShow</span><span class="s3">)</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">jobsToShow</span><span class="s3">.</span><span class="s7">forEach</span><span class="s3">((</span><span class="s1">job</span><span class="s3">, </span><span class="s1">index</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">index</span><span class="s1"> </span><span class="s10">&gt;</span><span class="s1"> </span><span class="s14">0</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">addPage</span><span class="s1">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s14">10</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Title</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">pdf</span><span class="s3">.</span><span class="s7">setFontSize</span><span class="s3">(</span><span class="s1">titleFontSize</span><span class="s3">);</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">pdf</span><span class="s3">.</span><span class="s1">text</span><span class="s3">(</span><span class="s4">`Job: </span><span class="s8">${</span><span class="s1">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">) || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> (</span><span class="s8">${</span><span class="s5">job</span><span class="s10">.</span><span class="s5">status</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4">)`</span><span class="s3">, </span><span class="s14">10</span><span class="s3">, </span><span class="s5">y</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">8</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Meta</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">pdf</span><span class="s3">.</span><span class="s7">setFontSize</span><span class="s3">(</span><span class="s1">bodyFontSize</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">pdf</span><span class="s3">.</span><span class="s7">text</span><span class="s3">(</span><span class="s4">`Field: </span><span class="s8">${</span><span class="s1">job</span><span class="s10">.</span><span class="s1">fieldName</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4">`</span><span class="s3">, </span><span class="s14">10</span><span class="s3">, </span><span class="s1">y</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">6</span><span class="s1">;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">pdf</span><span class="s3">.</span><span class="s7">text</span><span class="s3">(</span><span class="s4">`Date: </span><span class="s8">${</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobDate</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4">`</span><span class="s3">, </span><span class="s14">10</span><span class="s3">, </span><span class="s1">y</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">6</span><span class="s1">;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">pdf</span><span class="s3">.</span><span class="s7">text</span><span class="s3">(</span><span class="s4">`Acres: </span><span class="s8">${</span><span class="s1">job</span><span class="s10">.</span><span class="s1">acres</span><span class="s10"> || </span><span class="s1">job</span><span class="s10">.</span><span class="s1">drawnAcres</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4">`</span><span class="s3">, </span><span class="s14">10</span><span class="s3">, </span><span class="s1">y</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">6</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">job</span><span class="s1">.</span><span class="s5">vendor</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">text</span><span class="s1">(</span><span class="s4">`Vendor: </span><span class="s8">${</span><span class="s5">job</span><span class="s10">.</span><span class="s5">vendor</span><span class="s8">}</span><span class="s4">`</span><span class="s1">, </span><span class="s14">10</span><span class="s1">, </span><span class="s5">y</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">6</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s1">job</span><span class="s3">.</span><span class="s1">applicator</span><span class="s3">) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">pdf</span><span class="s3">.</span><span class="s7">text</span><span class="s3">(</span><span class="s4">`Applicator: </span><span class="s8">${</span><span class="s1">job</span><span class="s10">.</span><span class="s1">applicator</span><span class="s8">}</span><span class="s4">`</span><span class="s3">, </span><span class="s14">10</span><span class="s3">, </span><span class="s1">y</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">6</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Products</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">4</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">setFont</span><span class="s1">(</span><span class="s8">undefined</span><span class="s1">, </span><span class="s4">'bold'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">text</span><span class="s1">(</span><span class="s4">'Products:'</span><span class="s1">, </span><span class="s14">10</span><span class="s1">, </span><span class="s5">y</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">setFont</span><span class="s1">(</span><span class="s8">undefined</span><span class="s1">, </span><span class="s4">'normal'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">5</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">products</span><span class="s1">?.</span><span class="s7">forEach</span><span class="s1">((</span><span class="s5">p</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">line</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s4">`</span><span class="s8">${</span><span class="s1">p</span><span class="s10">.</span><span class="s1">productName</span><span class="s10"> || </span><span class="s1">p</span><span class="s10">.</span><span class="s1">name</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> â€“ </span><span class="s8">${</span><span class="s1">p</span><span class="s10">.</span><span class="s1">rate</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> </span><span class="s8">${</span><span class="s1">p</span><span class="s10">.</span><span class="s1">unit</span><span class="s10"> || </span><span class="s4">''</span><span class="s8">}</span><span class="s4">`</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">text</span><span class="s1">(</span><span class="s5">line</span><span class="s1">, </span><span class="s14">14</span><span class="s1">, </span><span class="s5">y</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>});</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Notes</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">job</span><span class="s1">.</span><span class="s5">notes</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">4</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">setFont</span><span class="s1">(</span><span class="s8">undefined</span><span class="s1">, </span><span class="s4">'bold'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">text</span><span class="s1">(</span><span class="s4">'Notes:'</span><span class="s1">, </span><span class="s14">10</span><span class="s1">, </span><span class="s5">y</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">setFont</span><span class="s1">(</span><span class="s8">undefined</span><span class="s1">, </span><span class="s4">'normal'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">y</span><span class="s1"> </span><span class="s10">+=</span><span class="s1"> </span><span class="s14">5</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">splitNotes</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">splitTextToSize</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">notes</span><span class="s1">, </span><span class="s14">180</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">pdf</span><span class="s1">.</span><span class="s7">text</span><span class="s1">(</span><span class="s5">splitNotes</span><span class="s1">, </span><span class="s14">14</span><span class="s1">, </span><span class="s5">y</span><span class="s1">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">y</span><span class="s3"> </span><span class="s10">+=</span><span class="s3"> </span><span class="s1">splitNotes</span><span class="s3">.</span><span class="s1">length</span><span class="s3"> </span><span class="s10">*</span><span class="s3"> </span><span class="s14">5</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>});</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s5">pdf</span><span class="s3">.</span><span class="s7">save</span><span class="s3">(</span><span class="s1">'FieldJobs.pdf'</span><span class="s3">);</span></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">useEffect</span><span class="s3">(() </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s7">fetchJobs</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s8">async</span><span class="s1"> () </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">jobsSnapshot</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDocs</span><span class="s1">(</span><span class="s7">collection</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobs'</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">jobsData</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">jobsSnapshot</span><span class="s1">.</span><span class="s5">docs</span><span class="s1">.</span><span class="s7">map</span><span class="s1">((</span><span class="s5">doc</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> ({ </span><span class="s5">id:</span><span class="s1"> </span><span class="s5">doc</span><span class="s1">.</span><span class="s5">id</span><span class="s1">, </span><span class="s10">...</span><span class="s5">doc</span><span class="s1">.</span><span class="s7">data</span><span class="s1">() }));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s7">setJobs</span><span class="s1">(</span><span class="s5">jobsData</span><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">fieldJobsSnapshot</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDocs</span><span class="s1">(</span><span class="s7">collection</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobsByField'</span><span class="s1">));</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">fieldJobsData</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">fieldJobsSnapshot</span><span class="s3">.</span><span class="s1">docs</span><span class="s3">.</span><span class="s7">map</span><span class="s3">((</span><span class="s1">doc</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> ({ </span><span class="s1">id:</span><span class="s3"> </span><span class="s1">doc</span><span class="s3">.</span><span class="s1">id</span><span class="s3">, </span><span class="s10">...</span><span class="s1">doc</span><span class="s3">.</span><span class="s7">data</span><span class="s3">() }));</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s7">setFieldJobs</span><span class="s3">(</span><span class="s1">fieldJobsData</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">fetchJobs</span><span class="s3">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>}, []);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p9"><span class="s1">const</span><span class="s3"> </span><span class="s7">handleDelete</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">async</span><span class="s3"> (</span><span class="s5">jobId</span><span class="s3">, </span><span class="s5">isFieldJob</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">false</span><span class="s3">) </span><span class="s1">=&gt;</span><span class="s3"> {</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">ref</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s7">doc</span><span class="s3">(</span><span class="s5">db</span><span class="s3">, </span><span class="s5">isFieldJob</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">'jobsByField'</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">'jobs'</span><span class="s3">, </span><span class="s5">jobId</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s1">isFieldJob</span><span class="s3">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">jobDoc</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDoc</span><span class="s1">(</span><span class="s5">ref</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s10">!</span><span class="s5">jobDoc</span><span class="s1">.</span><span class="s7">exists</span><span class="s1">()) </span><span class="s2">return</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">jobData</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">jobDoc</span><span class="s1">.</span><span class="s7">data</span><span class="s1">();</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s3"> { </span><span class="s1">linkedToJobId</span><span class="s3">, </span><span class="s1">fieldId</span><span class="s3"> } </span><span class="s10">=</span><span class="s3"> </span><span class="s5">jobData</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Delete the jobsByField doc</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">await</span><span class="s3"> </span><span class="s1">deleteDoc</span><span class="s3">(</span><span class="s5">ref</span><span class="s3">);</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">setFieldJobs</span><span class="s3">(</span><span class="s5">fieldJobs</span><span class="s3">.</span><span class="s1">filter</span><span class="s3">((</span><span class="s5">j</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s5">j</span><span class="s3">.</span><span class="s5">id</span><span class="s3"> </span><span class="s10">!==</span><span class="s3"> </span><span class="s5">jobId</span><span class="s3">));</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Now update the master job if linked</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s1">linkedToJobId</span><span class="s3">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">masterRef</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s7">doc</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobs'</span><span class="s1">, </span><span class="s5">linkedToJobId</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">masterSnap</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDoc</span><span class="s1">(</span><span class="s5">masterRef</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s10">!</span><span class="s5">masterSnap</span><span class="s1">.</span><span class="s7">exists</span><span class="s1">()) </span><span class="s2">return</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">masterData</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">masterSnap</span><span class="s1">.</span><span class="s7">data</span><span class="s1">();</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">updatedFields</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s1">masterData</span><span class="s3">.</span><span class="s1">fields</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> []).</span><span class="s7">filter</span><span class="s3">(</span><span class="s1">f</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s1">f</span><span class="s3">.</span><span class="s1">id</span><span class="s3"> </span><span class="s10">!==</span><span class="s3"> </span><span class="s1">fieldId</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">updatedFieldIds</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s1">masterData</span><span class="s3">.</span><span class="s1">fieldIds</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> []).</span><span class="s7">filter</span><span class="s3">(</span><span class="s1">id</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s1">id</span><span class="s3"> </span><span class="s10">!==</span><span class="s3"> </span><span class="s1">fieldId</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s1">updatedFieldIds</span><span class="s3">.</span><span class="s1">length</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s14">0</span><span class="s3">) {</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// No fields left, delete the master job too</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">await</span><span class="s1"> </span><span class="s7">deleteDoc</span><span class="s1">(</span><span class="s5">masterRef</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">setJobs</span><span class="s1">(</span><span class="s5">jobs</span><span class="s1">.</span><span class="s7">filter</span><span class="s1">((</span><span class="s5">j</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">j</span><span class="s1">.</span><span class="s5">id</span><span class="s1"> </span><span class="s10">!==</span><span class="s1"> </span><span class="s5">linkedToJobId</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Otherwise just update it</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">await</span><span class="s1"> </span><span class="s7">setDoc</span><span class="s1">(</span><span class="s5">masterRef</span><span class="s1">, {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s10">...</span><span class="s5">masterData</span><span class="s1">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s1">fields:</span><span class="s3"> </span><span class="s1">updatedFields</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s1">fieldIds:</span><span class="s3"> </span><span class="s1">updatedFieldIds</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p5"><span class="s1">} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸ”¥ Delete all field jobs linked to this group</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">fieldJobSnap</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s2">await</span><span class="s3"> </span><span class="s7">getDocs</span><span class="s3">(</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">collection</span><span class="s3">(</span><span class="s9">db</span><span class="s3">, </span><span class="s1">'jobsByField'</span><span class="s3">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">linkedFieldJobs</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">fieldJobSnap</span><span class="s3">.</span><span class="s5">docs</span><span class="s3">.</span><span class="s7">filter</span><span class="s3">(</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span>(</span><span class="s1">doc</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s1">doc</span><span class="s3">.</span><span class="s7">data</span><span class="s3">().</span><span class="s1">linkedToJobId</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s1">jobId</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p10"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">await</span><span class="s3"> </span><span class="s1">Promise</span><span class="s3">.</span><span class="s7">all</span><span class="s3">(</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">linkedFieldJobs</span><span class="s3">.</span><span class="s7">map</span><span class="s3">((</span><span class="s5">docSnap</span><span class="s3">) </span><span class="s8">=&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s7">deleteDoc</span><span class="s1">(</span><span class="s7">doc</span><span class="s1">(</span><span class="s9">db</span><span class="s1">, </span><span class="s4">'jobsByField'</span><span class="s1">, </span><span class="s5">docSnap</span><span class="s1">.</span><span class="s5">id</span><span class="s1">))</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸ—‘ï¸ Delete the master job</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">await</span><span class="s3"> </span><span class="s1">deleteDoc</span><span class="s3">(</span><span class="s9">ref</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s7">setJobs</span><span class="s1">(</span><span class="s9">jobs</span><span class="s1">.</span><span class="s7">filter</span><span class="s1">((</span><span class="s5">j</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">j</span><span class="s1">.</span><span class="s5">id</span><span class="s1"> </span><span class="s10">!==</span><span class="s1"> </span><span class="s5">jobId</span><span class="s1">));</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">setFieldJobs</span><span class="s3">((</span><span class="s5">prev</span><span class="s3">) </span><span class="s8">=&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">prev</span><span class="s3">.</span><span class="s7">filter</span><span class="s3">((</span><span class="s1">j</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s1">j</span><span class="s3">.</span><span class="s1">linkedToJobId</span><span class="s3"> </span><span class="s10">!==</span><span class="s3"> </span><span class="s1">jobId</span><span class="s3">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s7">renderJobCard</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> (</span><span class="s5">job</span><span class="s1">, </span><span class="s5">isFieldJob</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s8">false</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p10"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">Card</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">key</span><span class="s10">=</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">id</span><span class="s8">}</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s10">() </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">setSelectedJob</span><span class="s10">(</span><span class="s5">job</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"cursor-pointer hover:shadow-md transition"</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">title</span><span class="s10">=</span><span class="s1">"Click for details"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">&gt;</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“‹ Header (job type + field name) */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex justify-between items-start"</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-sm font-semibold text-blue-700 flex items-center gap-1"</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">img</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">src</span><span class="s10">=</span><span class="s8">{</span><span class="s1">getJobTypeIcon</span><span class="s10">(</span><span class="s1">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">))</span><span class="s8">}</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">alt</span><span class="s10">=</span><span class="s8">{</span><span class="s1">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"w-4 h-4 inline-block"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-xs text-gray-500 leading-tight"</span><span class="s15">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">cropYear</span><span class="s8">}</span><span class="s3"> â€¢ </span><span class="s8">{</span><span class="s1">isFieldJob</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span>? </span><span class="s1">job</span><span class="s10">.</span><span class="s1">fieldName</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span>: </span><span class="s1">job</span><span class="s10">.</span><span class="s1">fields</span><span class="s10">?.</span><span class="s7">map</span><span class="s10">(</span><span class="s1">f</span><span class="s10"> </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">f</span><span class="s10">.</span><span class="s1">fieldName</span><span class="s10">).</span><span class="s7">join</span><span class="s10">(</span><span class="s4">', '</span><span class="s10">)</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s8">br</span><span class="s1"> </span><span class="s15">/&gt;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s1">formatShortDate</span><span class="s10">(</span><span class="s5">job</span><span class="s10">.</span><span class="s5">jobDate</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p9"><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ›  Actions (edit/delete/pdf) */</span><span class="s8">}</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ›  Actions (edit/delete/pdf) */</span><span class="s8">}</span></p>
<p class="p11"><span class="s8">{</span><span class="s9">role</span><span class="s1"> !== </span><span class="s4">'viewer'</span><span class="s1"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex gap-2"</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s1">Button</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">size</span><span class="s1">=</span><span class="s4">"icon"</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">variant</span><span class="s10">=</span><span class="s4">"ghost"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{</span><span class="s1">() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">isFieldJob</span><span class="s1">) {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s7">navigate</span><span class="s10">(</span><span class="s1">`/jobs/field/</span><span class="s8">${</span><span class="s5">job</span><span class="s10">.</span><span class="s5">id</span><span class="s8">}</span><span class="s1">`</span><span class="s10">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s7">navigate</span><span class="s10">(</span><span class="s1">'/jobs/summary'</span><span class="s10">, {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">state:</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">isEditing:</span><span class="s1"> </span><span class="s8">true</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">jobId:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1">,</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">jobType:</span><span class="s10"> </span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10">,</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">jobDate:</span><span class="s10"> </span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobDate</span><span class="s10">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">vendor:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">vendor</span><span class="s1">,</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">applicator:</span><span class="s10"> </span><span class="s1">job</span><span class="s10">.</span><span class="s1">applicator</span><span class="s10">,</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">products:</span><span class="s10"> </span><span class="s1">job</span><span class="s10">.</span><span class="s1">products</span><span class="s10">,</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">selectedFields:</span><span class="s10"> </span><span class="s1">job</span><span class="s10">.</span><span class="s1">fields</span><span class="s10"> || [],</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">cropYear:</span><span class="s10"> </span><span class="s1">job</span><span class="s10">.</span><span class="s1">cropYear</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Pencil</span><span class="s1"> </span><span class="s5">size</span><span class="s1">=</span><span class="s8">{</span><span class="s14">16</span><span class="s8">}</span><span class="s1"> </span><span class="s15">/&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Button</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s1">Button</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">size</span><span class="s1">=</span><span class="s4">"icon"</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">variant</span><span class="s10">=</span><span class="s4">"ghost"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{</span><span class="s1">(</span><span class="s5">e</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">e</span><span class="s10">.</span><span class="s1">stopPropagation</span><span class="s10">();</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">setConfirmDeleteId</span><span class="s10">(</span><span class="s5">job</span><span class="s10">.</span><span class="s5">id</span><span class="s10">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Trash2</span><span class="s1"> </span><span class="s5">size</span><span class="s1">=</span><span class="s8">{</span><span class="s14">16</span><span class="s8">}</span><span class="s1"> </span><span class="s15">/&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Button</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s1">Button</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">size</span><span class="s1">=</span><span class="s4">"icon"</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">variant</span><span class="s10">=</span><span class="s4">"ghost"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{</span><span class="s1">(</span><span class="s5">e</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">e</span><span class="s10">.</span><span class="s1">stopPropagation</span><span class="s10">();</span></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// optional: trigger your PDF logic here</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">FileText</span><span class="s1"> </span><span class="s5">size</span><span class="s1">=</span><span class="s8">{</span><span class="s14">16</span><span class="s8">}</span><span class="s1"> </span><span class="s15">/&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Button</span><span class="s15">&gt;</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸŸ¦ CARD CONTENT (By Field) */</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">{</span><span class="s1">isFieldJob</span><span class="s10"> ? (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-sm text-gray-600"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">(() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">p</span><span class="s1"> = </span><span class="s5">job</span><span class="s1">.</span><span class="s5">products</span><span class="s1">?.[</span><span class="s14">0</span><span class="s1">];</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (!</span><span class="s5">p</span><span class="s1">) </span><span class="s2">return</span><span class="s1"> </span><span class="s4">'â€”'</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">p</span><span class="s1">.</span><span class="s5">productName</span><span class="s1"> || </span><span class="s5">p</span><span class="s1">.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> â€¢ </span><span class="s8">${</span><span class="s5">p</span><span class="s1">.</span><span class="s5">rate</span><span class="s1"> || </span><span class="s4">''</span><span class="s8">}</span><span class="s4"> </span><span class="s8">${</span><span class="s5">p</span><span class="s1">.</span><span class="s5">unit</span><span class="s1"> || </span><span class="s4">''</span><span class="s8">}</span><span class="s4">`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>})()</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex flex-col gap-0.5 text-xs text-gray-500"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex items-center gap-2 text-xs text-gray-500"</span><span class="s15">&gt;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Badge</span><span class="s10"> </span><span class="s1">variant</span><span class="s10">=</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s10">?.</span><span class="s7">toLowerCase</span><span class="s10">()</span><span class="s8">}</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s16">Badge</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">(() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">isLeveeJob</span><span class="s1"> = (</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'levee'</span><span class="s1">) ||</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'pack'</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">crop</span><span class="s1"> = </span><span class="s5">job</span><span class="s1">.</span><span class="s5">crop</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">isLeveeJob</span><span class="s1">) {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s10"> (</span><span class="s5">crop</span><span class="s10">.</span><span class="s7">includes</span><span class="s10">(</span><span class="s1">'Rice'</span><span class="s10">)) </span><span class="s2">return</span><span class="s10"> </span><span class="s1">`</span><span class="s8">${</span><span class="s5">job</span><span class="s10">.</span><span class="s5">riceLeveeAcres</span><span class="s10"> || </span><span class="s1">'â€”'</span><span class="s8">}</span><span class="s1"> acres (Levee â€“ Rice)`</span><span class="s10">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s10"> (</span><span class="s5">crop</span><span class="s10">.</span><span class="s7">includes</span><span class="s10">(</span><span class="s1">'Soybean'</span><span class="s10">)) </span><span class="s2">return</span><span class="s10"> </span><span class="s1">`</span><span class="s8">${</span><span class="s5">job</span><span class="s10">.</span><span class="s5">beanLeveeAcres</span><span class="s10"> || </span><span class="s1">'â€”'</span><span class="s8">}</span><span class="s1"> acres (Levee â€“ Soybeans)`</span><span class="s10">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> || </span><span class="s5">job</span><span class="s1">.</span><span class="s5">drawnAcres</span><span class="s1"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> acres`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>})()</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10">?.</span><span class="s1">parentName</span><span class="s10"> === </span><span class="s4">'Tillage'</span><span class="s10"> &amp;&amp; </span><span class="s1">job</span><span class="s10">.</span><span class="s1">passes</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-xs text-gray-500"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>Passes: </span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">passes</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>) : (</span></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">// ðŸŸ¦ CARD CONTENT (Grouped)</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-sm text-gray-600"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">(() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">p</span><span class="s1"> = </span><span class="s5">job</span><span class="s1">.</span><span class="s5">products</span><span class="s1">?.[</span><span class="s14">0</span><span class="s1">];</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (!</span><span class="s5">p</span><span class="s1">) </span><span class="s2">return</span><span class="s1"> </span><span class="s4">'â€”'</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">p</span><span class="s1">.</span><span class="s5">productName</span><span class="s1"> || </span><span class="s5">p</span><span class="s1">.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> â€¢ </span><span class="s8">${</span><span class="s5">p</span><span class="s1">.</span><span class="s5">rate</span><span class="s1"> || </span><span class="s4">''</span><span class="s8">}</span><span class="s4"> </span><span class="s8">${</span><span class="s5">p</span><span class="s1">.</span><span class="s5">unit</span><span class="s1"> || </span><span class="s4">''</span><span class="s8">}</span><span class="s4">`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>})()</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex flex-col gap-0.5 text-xs text-gray-500"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex items-center gap-2"</span><span class="s15">&gt;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Badge</span><span class="s10"> </span><span class="s1">variant</span><span class="s10">=</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s10">?.</span><span class="s7">toLowerCase</span><span class="s10">()</span><span class="s8">}</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s16">Badge</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">(() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">isLeveeJob</span><span class="s1"> = (</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'levee'</span><span class="s1">) ||</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'pack'</span><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">isLeveeJob</span><span class="s1"> &amp;&amp; </span><span class="s5">Array</span><span class="s1">.</span><span class="s7">isArray</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">)) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">let</span><span class="s1"> </span><span class="s5">total</span><span class="s1"> = </span><span class="s14">0</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">.</span><span class="s7">forEach</span><span class="s1">(</span><span class="s5">f</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">crop</span><span class="s1"> = </span><span class="s5">f</span><span class="s1">.</span><span class="s5">crop</span><span class="s1"> || </span><span class="s5">f</span><span class="s1">.</span><span class="s5">crops</span><span class="s1">?.[</span><span class="s5">job</span><span class="s1">.</span><span class="s5">cropYear</span><span class="s1">]?.</span><span class="s5">crop</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'Rice'</span><span class="s1">)) </span><span class="s5">total</span><span class="s1"> += </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">f</span><span class="s1">.</span><span class="s5">riceLeveeAcres</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'Soybean'</span><span class="s1">)) </span><span class="s5">total</span><span class="s1"> += </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">f</span><span class="s1">.</span><span class="s5">beanLeveeAcres</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">total</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> acres (Levee)`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> &amp;&amp; </span><span class="s8">typeof</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> === </span><span class="s4">'object'</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">total</span><span class="s1"> = </span><span class="s5">Object</span><span class="s1">.</span><span class="s7">values</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1">).</span><span class="s7">reduce</span><span class="s1">((</span><span class="s5">sum</span><span class="s1">, </span><span class="s5">val</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">sum</span><span class="s1"> + (</span><span class="s5">val</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">), </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">total</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> acres`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">job</span><span class="s1">.</span><span class="s5">drawnAcres</span><span class="s1"> || </span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> acres`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>})()</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10">?.</span><span class="s1">parentName</span><span class="s10"> === </span><span class="s4">'Tillage'</span><span class="s10"> &amp;&amp; </span><span class="s1">job</span><span class="s10">.</span><span class="s1">passes</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s15">&gt;</span><span class="s1">Passes: </span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">passes</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p10"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">Card</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s8">const</span><span class="s3"> </span><span class="s1">renderListItem</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s5">job</span><span class="s3">, </span><span class="s5">isFieldJob</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p4"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">return</span><span class="s3"> (</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â </span></span><span class="s15">&lt;</span><span class="s1">div</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex items-center justify-between ..."</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s10">(</span><span class="s1">e</span><span class="s10">) </span><span class="s8">=&gt;</span><span class="s10"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">tag</span><span class="s1"> = </span><span class="s5">e</span><span class="s1">.</span><span class="s5">target</span><span class="s1">.</span><span class="s5">tagName</span><span class="s1">?.</span><span class="s7">toLowerCase</span><span class="s1">();</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">isInsideMenu</span><span class="s1"> = </span><span class="s5">e</span><span class="s1">.</span><span class="s5">target</span><span class="s1">.</span><span class="s7">closest</span><span class="s1">(</span><span class="s4">'.job-menu'</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">tag</span><span class="s1"> === </span><span class="s4">'input'</span><span class="s1"> || </span><span class="s5">isInsideMenu</span><span class="s1">) </span><span class="s2">return</span><span class="s1">;</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">setSelectedJob</span><span class="s10">(</span><span class="s5">job</span><span class="s10">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span><span class="s8">}</span></p>
<p class="p12"><span class="s1">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“‹ List View Left Section */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex items-center gap-3 overflow-x-auto whitespace-nowrap text-sm"</span><span class="s15">&gt;</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* â¬œ Checkbox */</span><span class="s8">}</span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">Â Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">role</span><span class="s1"> !== </span><span class="s4">'viewer'</span><span class="s1"> &amp;&amp; (</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">input</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">type</span><span class="s10">=</span><span class="s1">"checkbox"</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">checked</span><span class="s10">=</span><span class="s8">{</span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s7">includes</span><span class="s10">(</span><span class="s1">job</span><span class="s10">.</span><span class="s1">id</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">onChange</span><span class="s1">=</span><span class="s8">{</span><span class="s1">(</span><span class="s5">e</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">if</span><span class="s10"> (</span><span class="s1">e</span><span class="s10">.</span><span class="s1">target</span><span class="s10">.</span><span class="s1">checked</span><span class="s10">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">setSelectedJobs</span><span class="s1">((</span><span class="s5">prev</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> [...</span><span class="s5">prev</span><span class="s1">, </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1">]);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">setSelectedJobs</span><span class="s1">((</span><span class="s5">prev</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">prev</span><span class="s1">.</span><span class="s7">filter</span><span class="s1">((</span><span class="s5">id</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">id</span><span class="s1"> !== </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1">));</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“… Job Date */</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobDate</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸŒ± Job Type */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-gray-700 flex items-center gap-1"</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">img</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">src</span><span class="s10">=</span><span class="s8">{</span><span class="s1">getJobTypeIcon</span><span class="s10">(</span><span class="s1">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">))</span><span class="s8">}</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">alt</span><span class="s10">=</span><span class="s8">{</span><span class="s1">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"w-5 h-5 inline-block"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸŒ¾ Field Name */</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">isFieldJob</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>? </span><span class="s5">job</span><span class="s1">.</span><span class="s5">fieldName</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>: </span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">?.</span><span class="s7">map</span><span class="s1">(</span><span class="s5">f</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">f</span><span class="s1">.</span><span class="s5">fieldName</span><span class="s1">).</span><span class="s7">join</span><span class="s1">(</span><span class="s4">', '</span><span class="s1">) || </span><span class="s4">'â€”'</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ§ª Product Name */</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">products</span><span class="s10">?.[</span><span class="s14">0</span><span class="s10">]?.</span><span class="s1">productName</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“ Acres + Passes */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex flex-col"</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s10">(() </span><span class="s8">=&gt;</span><span class="s10"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">isLeveeJob</span><span class="s1"> = (</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'levee'</span><span class="s1">) ||</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'pack'</span><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">isLeveeJob</span><span class="s1"> &amp;&amp; </span><span class="s5">Array</span><span class="s1">.</span><span class="s7">isArray</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">)) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">let</span><span class="s1"> </span><span class="s5">total</span><span class="s1"> = </span><span class="s14">0</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">.</span><span class="s7">forEach</span><span class="s1">(</span><span class="s5">f</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">crop</span><span class="s1"> = </span><span class="s5">f</span><span class="s1">.</span><span class="s5">crop</span><span class="s1"> || </span><span class="s5">f</span><span class="s1">.</span><span class="s5">crops</span><span class="s1">?.[</span><span class="s5">job</span><span class="s1">.</span><span class="s5">cropYear</span><span class="s1">]?.</span><span class="s5">crop</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'Rice'</span><span class="s1">)) </span><span class="s5">total</span><span class="s1"> += </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">f</span><span class="s1">.</span><span class="s5">riceLeveeAcres</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'Soybean'</span><span class="s1">)) </span><span class="s5">total</span><span class="s1"> += </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">f</span><span class="s1">.</span><span class="s5">beanLeveeAcres</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">total</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">1</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> ac (Levee)`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">isFieldJob</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1">?.</span><span class="s7">toFixed</span><span class="s1">?.(</span><span class="s14">1</span><span class="s1">) || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> ac`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">total</span><span class="s1"> = </span><span class="s5">Object</span><span class="s1">.</span><span class="s7">values</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> || {}).</span><span class="s7">reduce</span><span class="s1">((</span><span class="s5">sum</span><span class="s1">, </span><span class="s5">val</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">sum</span><span class="s1"> + (</span><span class="s5">val</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">), </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">total</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">1</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> ac`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>})()</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10">?.</span><span class="s1">parentName</span><span class="s10"> === </span><span class="s4">'Tillage'</span><span class="s10"> &amp;&amp; </span><span class="s1">job</span><span class="s10">.</span><span class="s1">passes</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s15">&gt;</span><span class="s1">Passes: </span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">passes</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“Œ Status */</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Badge</span><span class="s3"> </span><span class="s1">variant</span><span class="s10">=</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s10">?.</span><span class="s7">toLowerCase</span><span class="s10">()</span><span class="s8">}</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s16">Badge</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ§° 3-dot menu */</span><span class="s8">}</span></p>
<p class="p11"><span class="s8">{</span><span class="s5">role</span><span class="s1"> !== </span><span class="s4">'viewer'</span><span class="s1"> &amp;&amp; (</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"job-menu relative"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Button</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-gray-500 hover:text-gray-700"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">MoreVertical</span><span class="s1"> </span><span class="s5">size</span><span class="s1">=</span><span class="s8">{</span><span class="s14">18</span><span class="s8">}</span><span class="s1"> </span><span class="s15">/&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s16">Menu.Button</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Items</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow-md z-50"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s11">/* âœï¸ Edit */</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">({ </span><span class="s5">active</span><span class="s1"> }) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`block w-full px-4 py-2 text-sm text-left </span><span class="s8">${</span><span class="s5">active</span><span class="s10"> ? </span><span class="s1">'bg-gray-100'</span><span class="s10"> : </span><span class="s1">''</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{</span><span class="s1">() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">isFieldJob</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">navigate</span><span class="s1">(</span><span class="s4">`/jobs/field/</span><span class="s8">${</span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s8">}</span><span class="s4">`</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">navigate</span><span class="s1">(</span><span class="s4">'/jobs/summary'</span><span class="s1">, {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">state:</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">isEditing:</span><span class="s1"> </span><span class="s8">true</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">jobId:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">jobType:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">jobDate:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobDate</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">vendor:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">vendor</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">applicator:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">applicator</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">products:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">products</span><span class="s1">,</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">selectedFields:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1"> || [],</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">cropYear:</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">cropYear</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>âœï¸ Edit</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ—‘ï¸ Delete */</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">({ </span><span class="s5">active</span><span class="s1"> }) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`block w-full px-4 py-2 text-sm text-left </span><span class="s8">${</span><span class="s5">active</span><span class="s10"> ? </span><span class="s1">'bg-gray-100'</span><span class="s10"> : </span><span class="s1">''</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{</span><span class="s1">() </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s7">handleDelete</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1">, </span><span class="s5">isFieldJob</span><span class="s1">)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ðŸ—‘ï¸ Delete</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s11">/* ðŸ“„ PDF */</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">({ </span><span class="s5">active</span><span class="s1"> }) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`block w-full px-4 py-2 text-sm text-left </span><span class="s8">${</span><span class="s5">active</span><span class="s10"> ? </span><span class="s1">'bg-gray-100'</span><span class="s10"> : </span><span class="s1">''</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{async</span><span class="s1"> () </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> { </span><span class="s9">generatePDFBlob</span><span class="s1"> } = </span><span class="s2">await</span><span class="s1"> </span><span class="s8">import</span><span class="s1">(</span><span class="s4">'../utils/generatePDF'</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">blob</span><span class="s1"> = </span><span class="s2">await</span><span class="s1"> </span><span class="s7">generatePDFBlob</span><span class="s1">(</span><span class="s5">job</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">url</span><span class="s1"> = </span><span class="s9">URL</span><span class="s1">.</span><span class="s7">createObjectURL</span><span class="s1">(</span><span class="s5">blob</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">link</span><span class="s1"> = </span><span class="s5">document</span><span class="s1">.</span><span class="s7">createElement</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">link</span><span class="s1">.</span><span class="s5">href</span><span class="s1"> = </span><span class="s5">url</span><span class="s1">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">link</span><span class="s10">.</span><span class="s1">download</span><span class="s10"> = </span><span class="s4">`JobOrder_</span><span class="s8">${</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobType</span><span class="s8">}</span><span class="s4">_</span><span class="s8">${</span><span class="s1">job</span><span class="s10">.</span><span class="s1">cropYear</span><span class="s8">}</span><span class="s4">.pdf`</span><span class="s10">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">document</span><span class="s1">.</span><span class="s5">body</span><span class="s1">.</span><span class="s7">appendChild</span><span class="s1">(</span><span class="s5">link</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">link</span><span class="s1">.</span><span class="s7">click</span><span class="s1">();</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">document</span><span class="s1">.</span><span class="s5">body</span><span class="s1">.</span><span class="s7">removeChild</span><span class="s1">(</span><span class="s5">link</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ðŸ“„ PDF</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ”„ Toggle Status */</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">({ </span><span class="s5">active</span><span class="s1"> }) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`block w-full px-4 py-2 text-sm text-left </span><span class="s8">${</span><span class="s5">active</span><span class="s10"> ? </span><span class="s1">'bg-gray-100'</span><span class="s10"> : </span><span class="s1">''</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{async</span><span class="s1"> () </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s10"> </span><span class="s9">newStatus</span><span class="s10"> = </span><span class="s5">job</span><span class="s10">.</span><span class="s5">status</span><span class="s10"> === </span><span class="s1">'Planned'</span><span class="s10"> ? </span><span class="s1">'Completed'</span><span class="s10"> : </span><span class="s1">'Planned'</span><span class="s10">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s10"> (</span><span class="s1">isFieldJob</span><span class="s10">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">ref</span><span class="s1"> = </span><span class="s7">doc</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobsByField'</span><span class="s1">, </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1">);</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">await</span><span class="s10"> </span><span class="s7">setDoc</span><span class="s10">(</span><span class="s1">ref</span><span class="s10">, { ...</span><span class="s1">job</span><span class="s10">, </span><span class="s1">status:</span><span class="s10"> </span><span class="s1">newStatus</span><span class="s10"> }, { </span><span class="s1">merge:</span><span class="s10"> </span><span class="s8">true</span><span class="s10"> });</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">setFieldJobs</span><span class="s10">(</span><span class="s5">prev</span><span class="s10"> </span><span class="s8">=&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">prev</span><span class="s1">.</span><span class="s7">map</span><span class="s1">(</span><span class="s5">j</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> (</span><span class="s5">j</span><span class="s1">.</span><span class="s5">id</span><span class="s1"> === </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1"> ? { ...</span><span class="s5">j</span><span class="s1">, </span><span class="s5">status:</span><span class="s1"> </span><span class="s5">newStatus</span><span class="s1"> } : </span><span class="s5">j</span><span class="s1">))</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// ðŸ” Also update linked grouped job field if exists</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s10"> (</span><span class="s1">job</span><span class="s10">.</span><span class="s1">linkedToJobId</span><span class="s10">) {</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s10"> </span><span class="s9">groupRef</span><span class="s10"> = </span><span class="s7">doc</span><span class="s10">(</span><span class="s1">db</span><span class="s10">, </span><span class="s4">'jobs'</span><span class="s10">, </span><span class="s1">job</span><span class="s10">.</span><span class="s1">linkedToJobId</span><span class="s10">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">groupSnap</span><span class="s1"> = </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDoc</span><span class="s1">(</span><span class="s5">groupRef</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">groupSnap</span><span class="s1">.</span><span class="s7">exists</span><span class="s1">()) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">groupData</span><span class="s1"> = </span><span class="s5">groupSnap</span><span class="s1">.</span><span class="s7">data</span><span class="s1">();</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">updatedFields</span><span class="s1"> = (</span><span class="s5">groupData</span><span class="s1">.</span><span class="s5">fields</span><span class="s1"> || []).</span><span class="s7">map</span><span class="s1">(</span><span class="s5">f</span><span class="s1"> </span><span class="s8">=&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s5">f</span><span class="s1">.</span><span class="s5">id</span><span class="s1"> === </span><span class="s5">job</span><span class="s1">.</span><span class="s5">fieldId</span><span class="s1"> ? { ...</span><span class="s5">f</span><span class="s1">, </span><span class="s5">status:</span><span class="s1"> </span><span class="s5">newStatus</span><span class="s1"> } : </span><span class="s5">f</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">await</span><span class="s10"> </span><span class="s7">setDoc</span><span class="s10">(</span><span class="s1">groupRef</span><span class="s10">, { ...</span><span class="s1">groupData</span><span class="s10">, </span><span class="s1">fields:</span><span class="s10"> </span><span class="s1">updatedFields</span><span class="s10"> }, { </span><span class="s1">merge:</span><span class="s10"> </span><span class="s8">true</span><span class="s10"> });</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// It's a master job â€” update it</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">ref</span><span class="s1"> = </span><span class="s7">doc</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobs'</span><span class="s1">, </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1">);</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">await</span><span class="s10"> </span><span class="s7">setDoc</span><span class="s10">(</span><span class="s1">ref</span><span class="s10">, { ...</span><span class="s1">job</span><span class="s10">, </span><span class="s1">status:</span><span class="s10"> </span><span class="s1">newStatus</span><span class="s10"> }, { </span><span class="s1">merge:</span><span class="s10"> </span><span class="s8">true</span><span class="s10"> });</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">setJobs</span><span class="s10">(</span><span class="s5">prev</span><span class="s10"> </span><span class="s8">=&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">prev</span><span class="s1">.</span><span class="s7">map</span><span class="s1">(</span><span class="s5">j</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> (</span><span class="s5">j</span><span class="s1">.</span><span class="s5">id</span><span class="s1"> === </span><span class="s5">job</span><span class="s1">.</span><span class="s5">id</span><span class="s1"> ? { ...</span><span class="s5">j</span><span class="s1">, </span><span class="s5">status:</span><span class="s1"> </span><span class="s5">newStatus</span><span class="s1"> } : </span><span class="s5">j</span><span class="s1">))</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// ðŸ” Also update all related jobsByField</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s10"> </span><span class="s9">fieldSnap</span><span class="s10"> = </span><span class="s2">await</span><span class="s10"> </span><span class="s1">getDocs</span><span class="s10">(</span><span class="s1">collection</span><span class="s10">(</span><span class="s5">db</span><span class="s10">, </span><span class="s4">'jobsByField'</span><span class="s10">));</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s10"> </span><span class="s9">linked</span><span class="s10"> = </span><span class="s1">fieldSnap</span><span class="s10">.</span><span class="s1">docs</span><span class="s10">.</span><span class="s7">filter</span><span class="s10">(</span><span class="s1">doc</span><span class="s10"> </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">doc</span><span class="s10">.</span><span class="s7">data</span><span class="s10">().</span><span class="s1">linkedToJobId</span><span class="s10"> === </span><span class="s1">job</span><span class="s10">.</span><span class="s1">id</span><span class="s10">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">await</span><span class="s10"> </span><span class="s1">Promise</span><span class="s10">.</span><span class="s7">all</span><span class="s10">(</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">linked</span><span class="s10">.</span><span class="s7">map</span><span class="s10">(</span><span class="s1">docSnap</span><span class="s10"> </span><span class="s8">=&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">setDoc</span><span class="s1">(</span><span class="s7">doc</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobsByField'</span><span class="s1">, </span><span class="s5">docSnap</span><span class="s1">.</span><span class="s5">id</span><span class="s1">), {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>...</span><span class="s5">docSnap</span><span class="s1">.</span><span class="s7">data</span><span class="s1">(),</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s1">status:</span><span class="s10"> </span><span class="s1">newStatus</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}, { </span><span class="s5">merge:</span><span class="s1"> </span><span class="s8">true</span><span class="s1"> })</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>)</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">setFieldJobs</span><span class="s10">(</span><span class="s5">prev</span><span class="s10"> </span><span class="s8">=&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">prev</span><span class="s1">.</span><span class="s7">map</span><span class="s1">(</span><span class="s5">j</span><span class="s1"> </span><span class="s8">=&gt;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">j</span><span class="s10">.</span><span class="s1">linkedToJobId</span><span class="s10"> === </span><span class="s1">job</span><span class="s10">.</span><span class="s1">id</span><span class="s10"> ? { ...</span><span class="s1">j</span><span class="s10">, </span><span class="s1">status:</span><span class="s10"> </span><span class="s1">newStatus</span><span class="s10"> } : </span><span class="s1">j</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>)</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p11"><span class="s1">}</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">job</span><span class="s10">.</span><span class="s5">status</span><span class="s10"> === </span><span class="s1">'Planned'</span><span class="s10"> ? </span><span class="s1">'âœ”ï¸ Mark as Completed'</span><span class="s10"> : </span><span class="s1">'â†©ï¸ Mark as Planned'</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s16">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s16">Menu.Items</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s16">Menu</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">filteredJobs</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">jobs</span><span class="s3">.</span><span class="s7">filter</span><span class="s3">((</span><span class="s1">job</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">cropYear</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s1">cropYear</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">filteredFieldJobs</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">fieldJobs</span><span class="s3">.</span><span class="s7">filter</span><span class="s3">((</span><span class="s1">job</span><span class="s3">) </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">cropYear</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s1">cropYear</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">jobsToShow</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s1">view</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'By Field'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">filteredFieldJobs</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">filteredJobs</span><span class="s3">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>.</span><span class="s7">filter</span><span class="s1">((</span><span class="s5">job</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">matchesStatus</span><span class="s3"> </span><span class="s10">=</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">filterStatus</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'All'</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">status</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s1">filterStatus</span><span class="s3">;</span></p>
<p class="p2"><span class="s8">const</span><span class="s3"> </span><span class="s9">jobTypeName</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s8">typeof</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'string'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3">?.</span><span class="s1">name</span><span class="s3">;</span></p>
<p class="p7"><span class="s8">const</span><span class="s3"> </span><span class="s1">matchesType</span><span class="s3"> </span><span class="s10">=</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">filterType</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'All'</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s7">getJobTypeName</span><span class="s3">(</span><span class="s1">job</span><span class="s3">) </span><span class="s10">===</span><span class="s3"> </span><span class="s1">filterType</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">matchesSearch</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> (() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">fieldMatch</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">view</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'By Field'</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s10">?</span><span class="s3"> </span><span class="s5">job</span><span class="s3">.</span><span class="s5">fieldName</span><span class="s3">?.</span><span class="s1">toLowerCase</span><span class="s3">().</span><span class="s1">includes</span><span class="s3">(</span><span class="s5">searchText</span><span class="s3">.</span><span class="s1">toLowerCase</span><span class="s3">())</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s10">:</span><span class="s3"> </span><span class="s5">job</span><span class="s3">.</span><span class="s5">fields</span><span class="s3">?.</span><span class="s1">some</span><span class="s3">(</span><span class="s5">f</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s5">f</span><span class="s3">.</span><span class="s5">fieldName</span><span class="s3">?.</span><span class="s1">toLowerCase</span><span class="s3">().</span><span class="s1">includes</span><span class="s3">(</span><span class="s5">searchText</span><span class="s3">.</span><span class="s1">toLowerCase</span><span class="s3">()));</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">productMatch</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">products</span><span class="s1">?.</span><span class="s7">some</span><span class="s1">(</span><span class="s5">p</span><span class="s1"> </span><span class="s8">=&gt;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">p</span><span class="s3">.</span><span class="s5">productName</span><span class="s3">?.</span><span class="s1">toLowerCase</span><span class="s3">().</span><span class="s1">includes</span><span class="s3">(</span><span class="s5">searchText</span><span class="s3">.</span><span class="s1">toLowerCase</span><span class="s3">())</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">typeMatch</span><span class="s3"> </span><span class="s10">=</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span>(</span><span class="s8">typeof</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'string'</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s10">?</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s10">:</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3">?.</span><span class="s1">name</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span>).</span><span class="s1">toLowerCase</span><span class="s3">().</span><span class="s1">includes</span><span class="s3">(</span><span class="s5">searchText</span><span class="s3">.</span><span class="s1">toLowerCase</span><span class="s3">());</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">return</span><span class="s3"> </span><span class="s1">fieldMatch</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s1">productMatch</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s1">typeMatch</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>})();</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">return</span><span class="s3"> </span><span class="s1">matchesStatus</span><span class="s3"> </span><span class="s10">&amp;&amp;</span><span class="s3"> </span><span class="s1">matchesType</span><span class="s3"> </span><span class="s10">&amp;&amp;</span><span class="s3"> </span><span class="s1">matchesSearch</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>})</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>.</span><span class="s7">sort</span><span class="s1">((</span><span class="s5">a</span><span class="s1">, </span><span class="s5">b</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">sortKey</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'date'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">compare</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> (</span><span class="s5">a</span><span class="s1">.</span><span class="s5">jobDate</span><span class="s1"> </span><span class="s10">||</span><span class="s1"> </span><span class="s4">''</span><span class="s1">).</span><span class="s7">localeCompare</span><span class="s1">(</span><span class="s5">b</span><span class="s1">.</span><span class="s5">jobDate</span><span class="s1"> </span><span class="s10">||</span><span class="s1"> </span><span class="s4">''</span><span class="s1">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">return</span><span class="s3"> </span><span class="s1">sortDirection</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'asc'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">compare</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s10">-</span><span class="s1">compare</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">sortKey</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'type'</span><span class="s1">) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">typeA</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s8">typeof</span><span class="s3"> </span><span class="s1">a</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'string'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">a</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">a</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3">?.</span><span class="s1">name</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">;</span></p>
<p class="p2"><span class="s8">const</span><span class="s3"> </span><span class="s9">typeB</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s8">typeof</span><span class="s3"> </span><span class="s1">b</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'string'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">b</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">b</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3">?.</span><span class="s1">name</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">;</span></p>
<p class="p8"><span class="s2">return</span><span class="s3"> </span><span class="s5">typeA</span><span class="s3">.</span><span class="s1">localeCompare</span><span class="s3">(</span><span class="s5">typeB</span><span class="s3">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">sortKey</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'field'</span><span class="s1">) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">nameA</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">view</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'By Field'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">a</span><span class="s3">.</span><span class="s1">fieldName</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">a</span><span class="s3">.</span><span class="s1">fields</span><span class="s3">?.[</span><span class="s14">0</span><span class="s3">]?.</span><span class="s1">fieldName</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">nameB</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">view</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'By Field'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">b</span><span class="s3">.</span><span class="s1">fieldName</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">b</span><span class="s3">.</span><span class="s1">fields</span><span class="s3">?.[</span><span class="s14">0</span><span class="s3">]?.</span><span class="s1">fieldName</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">return</span><span class="s3"> </span><span class="s5">nameA</span><span class="s3">.</span><span class="s1">localeCompare</span><span class="s3">(</span><span class="s5">nameB</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s14">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>});</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p4"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">return</span><span class="s3"> (</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"p-4 md:p-6"</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s1">PageHeader</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">title</span><span class="s10">=</span><span class="s4">"Jobs"</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">actions</span><span class="s10">=</span><span class="s8">{</span><span class="s15">&lt;</span><span class="s16">Button</span><span class="s10"> </span><span class="s1">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s10">() </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s7">navigate</span><span class="s10">(</span><span class="s4">'/jobs/create'</span><span class="s10">)</span><span class="s8">}</span><span class="s15">&gt;&lt;</span><span class="s16">Plus</span><span class="s10"> </span><span class="s1">className</span><span class="s10">=</span><span class="s4">"mr-2"</span><span class="s10"> </span><span class="s1">size</span><span class="s10">=</span><span class="s8">{</span><span class="s14">16</span><span class="s8">}</span><span class="s10"> </span><span class="s15">/&gt;</span><span class="s10"> Create Job</span><span class="s15">&lt;/</span><span class="s16">Button</span><span class="s15">&gt;</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s8">{</span><span class="s5">role</span><span class="s1"> === </span><span class="s4">'viewer'</span><span class="s1"> ? (</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s16">Tabs</span><span class="s10"> </span><span class="s1">defaultValue</span><span class="s10">=</span><span class="s4">"By Field"</span><span class="s10"> </span><span class="s1">value</span><span class="s10">=</span><span class="s8">{</span><span class="s1">view</span><span class="s8">}</span><span class="s10"> </span><span class="s1">onValueChange</span><span class="s10">=</span><span class="s8">{</span><span class="s1">setView</span><span class="s8">}</span><span class="s10"> </span><span class="s1">className</span><span class="s10">=</span><span class="s4">"mb-4"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Tab</span><span class="s1"> </span><span class="s5">value</span><span class="s1">=</span><span class="s4">"By Field"</span><span class="s15">&gt;</span><span class="s1">By Field</span><span class="s15">&lt;/</span><span class="s16">Tab</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">Tabs</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">) : (</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s16">Tabs</span><span class="s10"> </span><span class="s1">defaultValue</span><span class="s10">=</span><span class="s4">"By Field"</span><span class="s10"> </span><span class="s1">value</span><span class="s10">=</span><span class="s8">{</span><span class="s1">view</span><span class="s8">}</span><span class="s10"> </span><span class="s1">onValueChange</span><span class="s10">=</span><span class="s8">{</span><span class="s1">setView</span><span class="s8">}</span><span class="s10"> </span><span class="s1">className</span><span class="s10">=</span><span class="s4">"mb-4"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Tab</span><span class="s1"> </span><span class="s5">value</span><span class="s1">=</span><span class="s4">"By Field"</span><span class="s15">&gt;</span><span class="s1">By Field</span><span class="s15">&lt;/</span><span class="s16">Tab</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Tab</span><span class="s1"> </span><span class="s5">value</span><span class="s1">=</span><span class="s4">"Grouped"</span><span class="s15">&gt;</span><span class="s1">Grouped (Bulk Edit Only)</span><span class="s15">&lt;/</span><span class="s16">Tab</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">Tabs</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex gap-2 items-center mb-4"</span><span class="s15">&gt;</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">button</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s10">() </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">setViewMode</span><span class="s10">(</span><span class="s4">'cards'</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`p-1 rounded </span><span class="s8">${</span><span class="s5">viewMode</span><span class="s10"> === </span><span class="s1">'cards'</span><span class="s10"> ? </span><span class="s1">'bg-blue-100 text-blue-700'</span><span class="s10"> : </span><span class="s1">'text-gray-500 hover:text-gray-700'</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ðŸŸ¦ Card View</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">button</span><span class="s15">&gt;</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">button</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s10">() </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">setViewMode</span><span class="s10">(</span><span class="s4">'list'</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`p-1 rounded </span><span class="s8">${</span><span class="s5">viewMode</span><span class="s10"> === </span><span class="s1">'list'</span><span class="s10"> ? </span><span class="s1">'bg-blue-100 text-blue-700'</span><span class="s10"> : </span><span class="s1">'text-gray-500 hover:text-gray-700'</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ðŸ“‹ List View</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">button</span><span class="s15">&gt;</span></p>
<p class="p9"><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex flex-wrap items-center justify-between gap-3 mb-4"</span><span class="s15">&gt;</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ” Search */</span><span class="s8">}</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">input</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">type</span><span class="s10">=</span><span class="s1">"text"</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">placeholder</span><span class="s10">=</span><span class="s1">"Search jobs..."</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">value</span><span class="s10">=</span><span class="s8">{</span><span class="s1">searchText</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">onChange</span><span class="s10">=</span><span class="s8">{</span><span class="s1">e</span><span class="s10"> </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s7">setSearchText</span><span class="s10">(</span><span class="s1">e</span><span class="s10">.</span><span class="s1">target</span><span class="s10">.</span><span class="s1">value</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"border border-gray-300 px-3 py-1 rounded w-full md:w-64"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p2"><span class="s8">{</span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s1">length</span><span class="s10"> &gt; </span><span class="s14">0</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu</span><span class="s10"> </span><span class="s5">as</span><span class="s10">=</span><span class="s1">"div"</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"relative"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Button</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>âš™ï¸ Bulk Actions</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu.Button</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Items</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"absolute z-50 mt-2 bg-white border border-gray-300 rounded shadow-md w-48"</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s1">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">({ </span><span class="s5">active</span><span class="s1"> }) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`w-full text-left px-4 py-2 text-sm </span><span class="s8">${</span><span class="s5">active</span><span class="s10"> ? </span><span class="s1">'bg-gray-100'</span><span class="s10"> : </span><span class="s1">''</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{async</span><span class="s1"> () </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s10"> </span><span class="s9">confirm</span><span class="s10"> = </span><span class="s1">window</span><span class="s10">.</span><span class="s7">confirm</span><span class="s10">(</span><span class="s4">`Delete </span><span class="s8">${</span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s1">length</span><span class="s8">}</span><span class="s4"> selected jobs?`</span><span class="s10">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (!</span><span class="s5">confirm</span><span class="s1">) </span><span class="s2">return</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s2">await</span><span class="s10"> </span><span class="s1">Promise</span><span class="s10">.</span><span class="s7">all</span><span class="s10">(</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s7">map</span><span class="s10">(</span><span class="s8">async</span><span class="s10"> (</span><span class="s1">id</span><span class="s10">) </span><span class="s8">=&gt;</span><span class="s10"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">view</span><span class="s1"> === </span><span class="s4">'By Field'</span><span class="s1">) {</span></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">await</span><span class="s10"> </span><span class="s7">handleDelete</span><span class="s10">(</span><span class="s5">id</span><span class="s10">, </span><span class="s8">true</span><span class="s10">); </span><span class="s1">// isFieldJob = true</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">// Also delete linked field jobs</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">fieldJobSnap</span><span class="s1"> = </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDocs</span><span class="s1">(</span><span class="s7">collection</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobsByField'</span><span class="s1">));</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s10"> </span><span class="s9">linkedFieldJobs</span><span class="s10"> = </span><span class="s1">fieldJobSnap</span><span class="s10">.</span><span class="s1">docs</span><span class="s10">.</span><span class="s7">filter</span><span class="s10">(</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>(</span><span class="s5">doc</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">doc</span><span class="s1">.</span><span class="s7">data</span><span class="s1">().</span><span class="s5">linkedToJobId</span><span class="s1"> === </span><span class="s5">id</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">await</span><span class="s1"> </span><span class="s16">Promise</span><span class="s1">.</span><span class="s7">all</span><span class="s1">(</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">linkedFieldJobs</span><span class="s10">.</span><span class="s7">map</span><span class="s10">((</span><span class="s1">docSnap</span><span class="s10">) </span><span class="s8">=&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s7">deleteDoc</span><span class="s1">(</span><span class="s7">doc</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'jobsByField'</span><span class="s1">, </span><span class="s5">docSnap</span><span class="s1">.</span><span class="s5">id</span><span class="s1">))</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">await</span><span class="s10"> </span><span class="s7">handleDelete</span><span class="s10">(</span><span class="s5">id</span><span class="s10">, </span><span class="s8">false</span><span class="s10">); </span><span class="s1">// isFieldJob = false</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>})</span></p>
<p class="p11"><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s7">setJobs</span><span class="s10">((</span><span class="s1">prev</span><span class="s10">) </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">prev</span><span class="s10">.</span><span class="s7">filter</span><span class="s10">((</span><span class="s1">j</span><span class="s10">) </span><span class="s8">=&gt;</span><span class="s10"> !</span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s7">includes</span><span class="s10">(</span><span class="s1">j</span><span class="s10">.</span><span class="s1">id</span><span class="s10">)));</span></p>
<p class="p8"><span class="s1">setFieldJobs</span><span class="s10">((</span><span class="s5">prev</span><span class="s10">) </span><span class="s8">=&gt;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s1">prev</span><span class="s10">.</span><span class="s7">filter</span><span class="s10">((</span><span class="s1">j</span><span class="s10">) </span><span class="s8">=&gt;</span><span class="s10"> !</span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s7">includes</span><span class="s10">(</span><span class="s1">j</span><span class="s10">.</span><span class="s1">id</span><span class="s10">) &amp;&amp; !</span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s7">includes</span><span class="s10">(</span><span class="s1">j</span><span class="s10">.</span><span class="s1">linkedToJobId</span><span class="s10">))</span></p>
<p class="p11"><span class="s1">);</span></p>
<p class="p8"><span class="s1">setSelectedJobs</span><span class="s10">([]);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ðŸ—‘ï¸ Delete Selected</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu.Items</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“Ž Sort buttons */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex items-center gap-2"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">{</span><span class="s10">[</span><span class="s1">'date'</span><span class="s10">, </span><span class="s1">'type'</span><span class="s10">, </span><span class="s1">'field'</span><span class="s10">].</span><span class="s7">map</span><span class="s10">(</span><span class="s5">key</span><span class="s10"> </span><span class="s8">=&gt;</span><span class="s10"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s1">key</span><span class="s10">=</span><span class="s8">{</span><span class="s1">key</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{</span><span class="s1">() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">sortKey</span><span class="s1"> === </span><span class="s5">key</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s7">setSortDirection</span><span class="s1">(</span><span class="s5">prev</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> (</span><span class="s5">prev</span><span class="s1"> === </span><span class="s4">'asc'</span><span class="s1"> ? </span><span class="s4">'desc'</span><span class="s1"> : </span><span class="s4">'asc'</span><span class="s1">));</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">setSortKey</span><span class="s10">(</span><span class="s5">key</span><span class="s10">);</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">setSortDirection</span><span class="s10">(</span><span class="s4">'desc'</span><span class="s10">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span><span class="s8">}</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`px-3 py-1 rounded text-sm border </span><span class="s8">${</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">sortKey</span><span class="s10"> === </span><span class="s1">key</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span>? </span><span class="s1">'bg-blue-600 text-white'</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span>: </span><span class="s1">'text-gray-600 hover:bg-gray-100'</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">}</span><span class="s4">`</span><span class="s8">}</span></p>
<p class="p12"><span class="s1">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>Sort by </span><span class="s8">{</span><span class="s5">key</span><span class="s8">}</span></p>
<p class="p9"><span class="s15">&lt;/</span><span class="s1">button</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>))</span><span class="s8">}</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸŽ›ï¸ Filters Button (stub for now) */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"relative"</span><span class="s15">&gt;</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">button</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s10">() </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">setShowFilterPanel</span><span class="s10">(</span><span class="s5">prev</span><span class="s10"> </span><span class="s8">=&gt;</span><span class="s10"> !</span><span class="s5">prev</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-sm border rounded px-3 py-1 text-gray-700 hover:bg-gray-100"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>Filters</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">button</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s8">{</span><span class="s5">view</span><span class="s10"> === </span><span class="s1">'By Field'</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu</span><span class="s10"> </span><span class="s5">as</span><span class="s10">=</span><span class="s1">"div"</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"relative"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Button</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"bg-green-600 text-white text-sm px-3 py-1 rounded hover:bg-green-700 transition"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>ðŸ“¤ Export</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu.Button</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Menu.Items</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded shadow z-50"</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s1">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">({ </span><span class="s5">active</span><span class="s1"> }) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`block w-full px-4 py-2 text-sm text-left </span><span class="s8">${</span><span class="s5">active</span><span class="s10"> ? </span><span class="s1">'bg-gray-100'</span><span class="s10"> : </span><span class="s1">''</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s1">handleExportCSV</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ðŸ“Š Export as CSV</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â Â  Â  </span></span><span class="s8">{</span><span class="s5">role</span><span class="s1"> !== </span><span class="s4">'viewer'</span><span class="s1"> &amp;&amp; (</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">{</span><span class="s1">({ </span><span class="s5">active</span><span class="s1"> }) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`block w-full px-4 py-2 text-sm text-left </span><span class="s8">${</span><span class="s5">active</span><span class="s10"> ? </span><span class="s1">'bg-gray-100'</span><span class="s10"> : </span><span class="s1">''</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s1">handleExportPDF</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ðŸ“„ Export as PDF</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu.Item</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu.Items</span><span class="s15">&gt;</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">Menu</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s1">showFilterPanel</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow p-3 z-50"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"mb-2 text-xs font-semibold text-gray-500"</span><span class="s15">&gt;</span><span class="s10">Status</span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">select</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">value</span><span class="s10">=</span><span class="s8">{</span><span class="s1">filterStatus</span><span class="s8">}</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">onChange</span><span class="s10">=</span><span class="s8">{</span><span class="s10">(</span><span class="s1">e</span><span class="s10">) </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s7">setFilterStatus</span><span class="s10">(</span><span class="s1">e</span><span class="s10">.</span><span class="s1">target</span><span class="s10">.</span><span class="s1">value</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"mb-3 w-full border rounded px-2 py-1 text-sm"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">option</span><span class="s1"> </span><span class="s5">value</span><span class="s1">=</span><span class="s4">"All"</span><span class="s15">&gt;</span><span class="s1">All</span><span class="s15">&lt;/</span><span class="s8">option</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">option</span><span class="s1"> </span><span class="s5">value</span><span class="s1">=</span><span class="s4">"Planned"</span><span class="s15">&gt;</span><span class="s1">Planned</span><span class="s15">&lt;/</span><span class="s8">option</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">option</span><span class="s1"> </span><span class="s5">value</span><span class="s1">=</span><span class="s4">"Completed"</span><span class="s15">&gt;</span><span class="s1">Completed</span><span class="s15">&lt;/</span><span class="s8">option</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">select</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"mb-2 text-xs font-semibold text-gray-500"</span><span class="s15">&gt;</span><span class="s10">Job Type</span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">select</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">value</span><span class="s10">=</span><span class="s8">{</span><span class="s1">filterType</span><span class="s8">}</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">onChange</span><span class="s10">=</span><span class="s8">{</span><span class="s10">(</span><span class="s1">e</span><span class="s10">) </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s7">setFilterType</span><span class="s10">(</span><span class="s1">e</span><span class="s10">.</span><span class="s1">target</span><span class="s10">.</span><span class="s1">value</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"w-full border rounded px-2 py-1 text-sm"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">option</span><span class="s1"> </span><span class="s5">value</span><span class="s1">=</span><span class="s4">"All"</span><span class="s15">&gt;</span><span class="s1">All</span><span class="s15">&lt;/</span><span class="s8">option</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â Â  Â  </span></span><span class="s8">{</span><span class="s1">[...</span><span class="s8">new</span><span class="s1"> </span><span class="s7">Set</span><span class="s1">(</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span>[...</span><span class="s1">jobs</span><span class="s10">, ...</span><span class="s1">fieldJobs</span><span class="s10">]</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span>.</span><span class="s7">map</span><span class="s10">(</span><span class="s1">j</span><span class="s10"> </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s8">typeof</span><span class="s10"> </span><span class="s1">j</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10"> === </span><span class="s4">'string'</span><span class="s10"> ? </span><span class="s1">j</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10"> : </span><span class="s1">j</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10">?.</span><span class="s1">name</span><span class="s10">)</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span>.</span><span class="s7">filter</span><span class="s10">(</span><span class="s1">Boolean</span><span class="s10">)</span></p>
<p class="p11"><span class="s1">)].</span><span class="s7">map</span><span class="s1">((</span><span class="s5">type</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s8">option</span><span class="s10"> </span><span class="s1">key</span><span class="s10">=</span><span class="s8">{</span><span class="s1">type</span><span class="s8">}</span><span class="s10"> </span><span class="s1">value</span><span class="s10">=</span><span class="s8">{</span><span class="s1">type</span><span class="s8">}</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">type</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">option</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">))</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">select</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>)</span><span class="s8">}</span></p>
<p class="p9"><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p9"><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s8">{</span><span class="s5">viewMode</span><span class="s10"> === </span><span class="s1">'cards'</span><span class="s10"> ? </span><span class="s1">'...'</span><span class="s10"> : </span><span class="s1">'flex flex-col divide-y border rounded'</span><span class="s8">}</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s5">viewMode</span><span class="s1"> === </span><span class="s4">'list'</span><span class="s1"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex items-center justify-between border-b py-2 px-2 text-sm font-semibold text-gray-700 bg-gray-50"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â Â  Â  </span></span><span class="s8">{</span><span class="s5">role</span><span class="s1"> !== </span><span class="s4">'viewer'</span><span class="s1"> &amp;&amp; (</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">input</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">type</span><span class="s10">=</span><span class="s1">"checkbox"</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">checked</span><span class="s10">=</span><span class="s8">{</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s1">length</span><span class="s10"> &gt; </span><span class="s14">0</span><span class="s10"> &amp;&amp;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s1">selectedJobs</span><span class="s10">.</span><span class="s1">length</span><span class="s10"> === </span><span class="s1">jobsToShow</span><span class="s10">.</span><span class="s1">length</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">onChange</span><span class="s1">=</span><span class="s8">{</span><span class="s1">(</span><span class="s5">e</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">if</span><span class="s10"> (</span><span class="s1">e</span><span class="s10">.</span><span class="s1">target</span><span class="s10">.</span><span class="s1">checked</span><span class="s10">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">setSelectedJobs</span><span class="s1">(</span><span class="s5">jobsToShow</span><span class="s1">.</span><span class="s7">map</span><span class="s1">((</span><span class="s5">j</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">j</span><span class="s1">.</span><span class="s5">id</span><span class="s1">));</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">setSelectedJobs</span><span class="s10">([]);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s1">className</span><span class="s10">=</span><span class="s4">"flex-1"</span><span class="s10"> </span><span class="s15">/&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">span</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"opacity-0"</span><span class="s15">&gt;</span><span class="s10">â‹¯</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">{</span><span class="s1">jobsToShow</span><span class="s10">.</span><span class="s7">map</span><span class="s10">(</span><span class="s1">job</span><span class="s10"> </span><span class="s8">=&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">viewMode</span><span class="s1"> === </span><span class="s4">'cards'</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>? </span><span class="s7">renderJobCard</span><span class="s1">(</span><span class="s5">job</span><span class="s1">, </span><span class="s5">view</span><span class="s1"> === </span><span class="s4">'By Field'</span><span class="s1">)</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>: </span><span class="s7">renderListItem</span><span class="s1">(</span><span class="s5">job</span><span class="s1">, </span><span class="s5">view</span><span class="s1"> === </span><span class="s4">'By Field'</span><span class="s1">)</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>)</span><span class="s8">}</span></p>
<p class="p9"><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s8">{</span><span class="s1">selectedJob</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s1">JobDetailsModal</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">job</span><span class="s10">=</span><span class="s8">{</span><span class="s1">selectedJob</span><span class="s8">}</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">onClose</span><span class="s10">=</span><span class="s8">{</span><span class="s10">() </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">setSelectedJob</span><span class="s10">(</span><span class="s8">null</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">confirmDeleteId</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"bg-white p-6 rounded shadow-lg max-w-sm w-full"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">p</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-sm text-gray-800 mb-4"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>Are you sure you want to delete this job? This canâ€™t be undone.</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">p</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"flex justify-end gap-3"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s10">() </span><span class="s8">=&gt;</span><span class="s10"> </span><span class="s1">setConfirmDeleteId</span><span class="s10">(</span><span class="s8">null</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"px-3 py-1 rounded text-sm bg-gray-200 hover:bg-gray-300"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>Cancel</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s5">onClick</span><span class="s1">=</span><span class="s8">{</span><span class="s1">() </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">handleDelete</span><span class="s1">(</span><span class="s5">confirmDeleteId</span><span class="s1">, </span><span class="s5">view</span><span class="s1"> === </span><span class="s4">'By Field'</span><span class="s1">);</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">setConfirmDeleteId</span><span class="s10">(</span><span class="s8">null</span><span class="s10">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}</span><span class="s8">}</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"px-3 py-1 rounded text-sm bg-red-600 text-white hover:bg-red-700"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>Yes, Delete</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">Â  </span></span><span class="s15">&lt;/</span><span class="s1">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p1"><span class="s3">}<span class="Apple-converted-space">Â  </span></span><span class="s1">// closing Jobs component</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s8">function</span><span class="s3"> </span><span class="s1">JobDetailsModal</span><span class="s3">({ </span><span class="s5">job</span><span class="s3">, </span><span class="s5">onClose</span><span class="s3"> }) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s10">!</span><span class="s5">job</span><span class="s1">) </span><span class="s2">return</span><span class="s1"> </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸ§  Utilities</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">getJobTypeName</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s5">job</span><span class="s3">) </span><span class="s8">=&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">typeof</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'string'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">job</span><span class="s3">.</span><span class="s1">jobType</span><span class="s3">?.</span><span class="s1">name</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s4">''</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> [</span><span class="s1">fieldBoundary</span><span class="s3">, </span><span class="s1">setFieldBoundary</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">(</span><span class="s8">null</span><span class="s3">);</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> [</span><span class="s1">fieldBoundaries</span><span class="s3">, </span><span class="s1">setFieldBoundaries</span><span class="s3">] </span><span class="s10">=</span><span class="s3"> </span><span class="s7">useState</span><span class="s3">([]);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸ“¦ Load Field Boundary</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">useEffect</span><span class="s3">(() </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p2"><span class="s8">const</span><span class="s3"> </span><span class="s9">fieldId</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">job</span><span class="s3">?.</span><span class="s1">fieldId</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s1">job</span><span class="s3">?.</span><span class="s1">fields</span><span class="s3">?.[</span><span class="s14">0</span><span class="s3">]?.</span><span class="s1">id</span><span class="s3">;</span></p>
<p class="p4"><span class="s1">if</span><span class="s3"> (</span><span class="s10">!</span><span class="s5">fieldId</span><span class="s3">) </span><span class="s1">return</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s7">loadBoundary</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s8">async</span><span class="s1"> () </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">fieldRef</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s7">doc</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'fields'</span><span class="s1">, </span><span class="s5">fieldId</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">snap</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDoc</span><span class="s1">(</span><span class="s5">fieldRef</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s10">!</span><span class="s5">snap</span><span class="s1">.</span><span class="s7">exists</span><span class="s1">()) </span><span class="s2">return</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">let</span><span class="s3"> </span><span class="s1">geo</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">snap</span><span class="s3">.</span><span class="s7">data</span><span class="s3">()?.</span><span class="s1">boundary</span><span class="s3">?.</span><span class="s1">geojson</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s8">typeof</span><span class="s1"> </span><span class="s5">geo</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'string'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s2">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">geo</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s9">JSON</span><span class="s1">.</span><span class="s7">parse</span><span class="s1">(</span><span class="s5">geo</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>} </span><span class="s2">catch</span><span class="s1"> {</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s5">console</span><span class="s3">.</span><span class="s7">warn</span><span class="s3">(</span><span class="s1">'âŒ Could not parse field geojson'</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s1">geo</span><span class="s3">?.</span><span class="s1">type</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'Feature'</span><span class="s3">) </span><span class="s1">geo</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">geo</span><span class="s3">.</span><span class="s1">geometry</span><span class="s3">;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">setFieldBoundary</span><span class="s3">(</span><span class="s5">geo</span><span class="s3">);</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">setFieldBoundaries</span><span class="s3">([</span><span class="s5">geo</span><span class="s3">]);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} </span><span class="s2">catch</span><span class="s1"> (</span><span class="s5">err</span><span class="s1">) {</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">console</span><span class="s3">.</span><span class="s7">error</span><span class="s3">(</span><span class="s1">'âŒ Error loading field boundary'</span><span class="s3">, </span><span class="s5">err</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">loadBoundary</span><span class="s3">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>}, [</span><span class="s5">job</span><span class="s1">]);</span></p>
<p class="p8"><span class="s1">useEffect</span><span class="s3">(() </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">loadAllBoundaries</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s8">async</span><span class="s3"> () </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s10">!</span><span class="s1">Array</span><span class="s3">.</span><span class="s7">isArray</span><span class="s3">(</span><span class="s1">job</span><span class="s3">.</span><span class="s1">fields</span><span class="s3">)) </span><span class="s2">return</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">boundaries</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s16">Promise</span><span class="s1">.</span><span class="s7">all</span><span class="s1">(</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">.</span><span class="s7">map</span><span class="s1">(</span><span class="s8">async</span><span class="s1"> (</span><span class="s5">f</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">snap</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s2">await</span><span class="s1"> </span><span class="s7">getDoc</span><span class="s1">(</span><span class="s7">doc</span><span class="s1">(</span><span class="s5">db</span><span class="s1">, </span><span class="s4">'fields'</span><span class="s1">, </span><span class="s5">f</span><span class="s1">.</span><span class="s5">id</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s10">!</span><span class="s5">snap</span><span class="s1">.</span><span class="s7">exists</span><span class="s1">()) </span><span class="s2">return</span><span class="s1"> </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">let</span><span class="s3"> </span><span class="s1">geo</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">snap</span><span class="s3">.</span><span class="s7">data</span><span class="s3">()?.</span><span class="s1">boundary</span><span class="s3">?.</span><span class="s1">geojson</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s8">typeof</span><span class="s1"> </span><span class="s5">geo</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'string'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">geo</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s9">JSON</span><span class="s1">.</span><span class="s7">parse</span><span class="s1">(</span><span class="s5">geo</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">catch</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">geo</span><span class="s1">?.</span><span class="s5">type</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'Feature'</span><span class="s1">) </span><span class="s5">geo</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">geo</span><span class="s1">.</span><span class="s5">geometry</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s5">geo</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} </span><span class="s2">catch</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>})</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">setFieldBoundaries</span><span class="s3">(</span><span class="s5">boundaries</span><span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span><span class="s5">Boolean</span><span class="s3">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>};</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">loadAllBoundaries</span><span class="s3">();</span></p>
<p class="p5"><span class="s1">}, [</span><span class="s5">job</span><span class="s1">]);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸ§¾ Parse Drawn Polygon + Boundary</span></p>
<p class="p2"><span class="s8">let</span><span class="s3"> </span><span class="s1">parsedPolygons</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> [];</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p4"><span class="s1">try</span><span class="s3"> {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s1">Array</span><span class="s3">.</span><span class="s7">isArray</span><span class="s3">(</span><span class="s1">job</span><span class="s3">.</span><span class="s1">fields</span><span class="s3">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">.</span><span class="s7">forEach</span><span class="s1">((</span><span class="s5">f</span><span class="s1">, </span><span class="s5">i</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">let</span><span class="s3"> </span><span class="s1">poly</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">f</span><span class="s3">.</span><span class="s1">drawnPolygon</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s8">typeof</span><span class="s1"> </span><span class="s5">poly</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'string'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s2">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s5">poly</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s9">JSON</span><span class="s1">.</span><span class="s7">parse</span><span class="s1">(</span><span class="s5">poly</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} </span><span class="s2">catch</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">poly</span><span class="s1">?.</span><span class="s5">type</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'Feature'</span><span class="s1">) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">parsedPolygons</span><span class="s3">.</span><span class="s7">push</span><span class="s3">(</span><span class="s1">poly</span><span class="s3">.</span><span class="s1">geometry</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">poly</span><span class="s1">?.</span><span class="s5">type</span><span class="s1"> </span><span class="s10">===</span><span class="s1"> </span><span class="s4">'Polygon'</span><span class="s1">) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">parsedPolygons</span><span class="s3">.</span><span class="s7">push</span><span class="s3">(</span><span class="s1">poly</span><span class="s3">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>}</span></p>
<p class="p4"><span class="s3">} </span><span class="s1">catch</span><span class="s3"> {</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s5">console</span><span class="s3">.</span><span class="s7">warn</span><span class="s3">(</span><span class="s1">'Failed to parse multiple drawnPolygons'</span><span class="s3">);</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸ–¼ï¸ Modal Layout</span></p>
<p class="p4"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">return</span><span class="s3"> (</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"bg-white rounded-lg p-4 w-full max-w-md h-[80vh] overflow-y-auto shadow-xl relative"</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">button</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s1">onClick</span><span class="s10">=</span><span class="s8">{</span><span class="s1">onClose</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"absolute top-2 right-2 text-gray-500 hover:text-gray-700"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>âœ–</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">button</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“Œ Header */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">h2</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-lg font-semibold mb-2"</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s7">getJobTypeName</span><span class="s10">(</span><span class="s5">job</span><span class="s10">)</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">h2</span><span class="s15">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">p</span><span class="s3"> </span><span class="s1">className</span><span class="s10">=</span><span class="s4">"text-sm text-gray-600 mb-1"</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">cropYear</span><span class="s8">}</span><span class="s3"> â€¢ </span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">fieldName</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">p</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“… Date + Status */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-xs text-gray-600 mb-2 space-x-2"</span><span class="s15">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobDate</span><span class="s10"> &amp;&amp; </span><span class="s15">&lt;</span><span class="s8">span</span><span class="s15">&gt;&lt;</span><span class="s8">span</span><span class="s10"> </span><span class="s1">className</span><span class="s10">=</span><span class="s4">"font-medium"</span><span class="s15">&gt;</span><span class="s10">Date:</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s10"> </span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobDate</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s16">Badge</span><span class="s3"> </span><span class="s1">variant</span><span class="s10">=</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s10">?.</span><span class="s7">toLowerCase</span><span class="s10">()</span><span class="s8">}</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">status</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s16">Badge</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ§ª Products */</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">products</span><span class="s10">?.</span><span class="s1">length</span><span class="s10"> &gt; </span><span class="s14">0</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s1"> </span><span class="s5">className</span><span class="s1">=</span><span class="s4">"mb-4"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"grid grid-cols-2 font-semibold border-b pb-1 mb-1 text-xs text-gray-700"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s1">Product</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s1">Rate</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">products</span><span class="s1">.</span><span class="s7">map</span><span class="s1">((</span><span class="s5">p</span><span class="s1">, </span><span class="s5">i</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">key</span><span class="s1">=</span><span class="s8">{</span><span class="s5">i</span><span class="s8">}</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">className</span><span class="s10">=</span><span class="s1">"grid grid-cols-2 gap-2 text-sm text-gray-800 border-b py-1"</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s5">p</span><span class="s1">.</span><span class="s5">productName</span><span class="s1"> || </span><span class="s5">p</span><span class="s1">.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s5">p</span><span class="s1">.</span><span class="s5">rate</span><span class="s1"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s1"> </span><span class="s8">{</span><span class="s5">p</span><span class="s1">.</span><span class="s5">unit</span><span class="s1"> || </span><span class="s4">''</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>))</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ‘· Vendor / Applicator */</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s10">(</span><span class="s1">job</span><span class="s10">.</span><span class="s1">vendor</span><span class="s10"> || </span><span class="s1">job</span><span class="s10">.</span><span class="s1">applicator</span><span class="s10">) &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"mb-4 text-sm text-gray-700 space-y-1"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">vendor</span><span class="s1"> &amp;&amp; </span><span class="s15">&lt;</span><span class="s8">p</span><span class="s15">&gt;&lt;</span><span class="s8">span</span><span class="s1"> </span><span class="s5">className</span><span class="s1">=</span><span class="s4">"font-medium"</span><span class="s15">&gt;</span><span class="s1">Vendor:</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s1"> </span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">vendor</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">p</span><span class="s15">&gt;</span><span class="s8">}</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">applicator</span><span class="s10"> &amp;&amp; </span><span class="s15">&lt;</span><span class="s8">p</span><span class="s15">&gt;&lt;</span><span class="s8">span</span><span class="s10"> </span><span class="s1">className</span><span class="s10">=</span><span class="s4">"font-medium"</span><span class="s15">&gt;</span><span class="s10">Applicator:</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span><span class="s10"> </span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">applicator</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">p</span><span class="s15">&gt;</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“ Acres + Passes */</span><span class="s8">}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-xs text-gray-600 mb-4 space-y-1"</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">p</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s10">(() </span><span class="s8">=&gt;</span><span class="s10"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">isLeveeJob</span><span class="s1"> = (</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'levee'</span><span class="s1">) ||</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">jobType</span><span class="s1">?.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">).</span><span class="s7">toLowerCase</span><span class="s1">().</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'pack'</span><span class="s1">);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">isLeveeJob</span><span class="s1"> &amp;&amp; </span><span class="s5">Array</span><span class="s1">.</span><span class="s7">isArray</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">)) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">let</span><span class="s1"> </span><span class="s5">total</span><span class="s1"> = </span><span class="s14">0</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">job</span><span class="s1">.</span><span class="s5">fields</span><span class="s1">.</span><span class="s7">forEach</span><span class="s1">(</span><span class="s5">f</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">crop</span><span class="s1"> = </span><span class="s5">f</span><span class="s1">.</span><span class="s5">crop</span><span class="s1"> || </span><span class="s5">f</span><span class="s1">.</span><span class="s5">crops</span><span class="s1">?.[</span><span class="s5">job</span><span class="s1">.</span><span class="s5">cropYear</span><span class="s1">]?.</span><span class="s5">crop</span><span class="s1"> || </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'Rice'</span><span class="s1">)) </span><span class="s5">total</span><span class="s1"> += </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">f</span><span class="s1">.</span><span class="s5">riceLeveeAcres</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'Soybean'</span><span class="s1">)) </span><span class="s5">total</span><span class="s1"> += </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">f</span><span class="s1">.</span><span class="s5">beanLeveeAcres</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">total</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> acres (Levee)`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s8">typeof</span><span class="s1"> </span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> === </span><span class="s4">'object'</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">total</span><span class="s1"> = </span><span class="s5">Object</span><span class="s1">.</span><span class="s7">values</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1">).</span><span class="s7">reduce</span><span class="s1">((</span><span class="s5">sum</span><span class="s1">, </span><span class="s5">val</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s5">sum</span><span class="s1"> + (</span><span class="s5">val</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">), </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">total</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> acres`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> || </span><span class="s5">job</span><span class="s1">.</span><span class="s5">drawnAcres</span><span class="s1"> || </span><span class="s4">'â€”'</span><span class="s8">}</span><span class="s4"> acres`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>})()</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">p</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">jobType</span><span class="s10">?.</span><span class="s1">parentName</span><span class="s10"> === </span><span class="s4">'Tillage'</span><span class="s10"> &amp;&amp; </span><span class="s1">job</span><span class="s10">.</span><span class="s1">passes</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">p</span><span class="s15">&gt;</span><span class="s1">Passes: </span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">passes</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">p</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ—ºï¸ Map */</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s1"> </span><span class="s5">className</span><span class="s10">=</span><span class="s4">"mt-4"</span><span class="s15">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s7">renderBoundarySVG</span><span class="s10">(</span><span class="s1">fieldBoundaries</span><span class="s10">, </span><span class="s1">parsedPolygons</span><span class="s10">)</span><span class="s8">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“ Notes */</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s1"> </span><span class="s5">className</span><span class="s10">=</span><span class="s4">"mt-4"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">label</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"block text-sm font-medium mb-1"</span><span class="s15">&gt;</span><span class="s3">Notes</span><span class="s15">&lt;/</span><span class="s8">label</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-sm text-gray-700 whitespace-pre-line border border-gray-200 rounded p-2 bg-gray-50"</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">job</span><span class="s10">.</span><span class="s5">notes</span><span class="s10"> || </span><span class="s4">'â€”'</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">/* ðŸ“¦ Product Totals */</span><span class="s8">}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s1">job</span><span class="s10">.</span><span class="s1">products</span><span class="s10">?.</span><span class="s1">length</span><span class="s10"> &gt; </span><span class="s14">0</span><span class="s10"> &amp;&amp; (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"mt-6 border-t pt-4"</span><span class="s15">&gt;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">h4</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"font-semibold text-sm mb-2"</span><span class="s15">&gt;</span><span class="s10">Product Totals</span><span class="s15">&lt;/</span><span class="s8">h4</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">job</span><span class="s1">.</span><span class="s5">products</span><span class="s1">.</span><span class="s7">map</span><span class="s1">((</span><span class="s5">p</span><span class="s1">, </span><span class="s5">i</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">rate</span><span class="s1"> = </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">p</span><span class="s1">.</span><span class="s5">rate</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">unit</span><span class="s1"> = </span><span class="s5">p</span><span class="s1">.</span><span class="s5">unit</span><span class="s1">?.</span><span class="s7">toLowerCase</span><span class="s1">() || </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">crop</span><span class="s1"> = </span><span class="s5">p</span><span class="s1">.</span><span class="s5">crop</span><span class="s1">?.</span><span class="s7">toLowerCase</span><span class="s1">?.() || </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">acres</span><span class="s1"> = </span><span class="s5">job</span><span class="s1">.</span><span class="s5">acres</span><span class="s1"> || </span><span class="s5">job</span><span class="s1">.</span><span class="s5">drawnAcres</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">totalAmount</span><span class="s1"> = </span><span class="s5">rate</span><span class="s1"> * </span><span class="s5">acres</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">let</span><span class="s1"> </span><span class="s5">display</span><span class="s1"> = </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">if</span><span class="s1"> ([</span><span class="s4">'seeds/acre'</span><span class="s1">, </span><span class="s4">'population'</span><span class="s1">].</span><span class="s7">includes</span><span class="s1">(</span><span class="s5">unit</span><span class="s1">)) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">seedsPerUnit</span><span class="s1"> = </span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'rice'</span><span class="s1">) ? </span><span class="s14">900000</span><span class="s1"> : </span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'soybean'</span><span class="s1">) ? </span><span class="s14">140000</span><span class="s1"> : </span><span class="s14">1000000</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">totalSeeds</span><span class="s1"> = </span><span class="s5">rate</span><span class="s1"> * </span><span class="s5">acres</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">units</span><span class="s1"> = </span><span class="s5">totalSeeds</span><span class="s1"> / </span><span class="s5">seedsPerUnit</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">units</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">1</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> units`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> ([</span><span class="s4">'lbs/acre'</span><span class="s1">].</span><span class="s7">includes</span><span class="s1">(</span><span class="s5">unit</span><span class="s1">)) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">lbsPerBushel</span><span class="s1"> = </span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'rice'</span><span class="s1">) ? </span><span class="s14">45</span><span class="s1"> : </span><span class="s5">crop</span><span class="s1">.</span><span class="s7">includes</span><span class="s1">(</span><span class="s4">'soybean'</span><span class="s1">) ? </span><span class="s14">60</span><span class="s1"> : </span><span class="s14">50</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">bushels</span><span class="s1"> = </span><span class="s5">totalAmount</span><span class="s1"> / </span><span class="s5">lbsPerBushel</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">bushels</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">1</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> bushels`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> ([</span><span class="s4">'fl oz/acre'</span><span class="s1">, </span><span class="s4">'oz/acre'</span><span class="s1">].</span><span class="s7">includes</span><span class="s1">(</span><span class="s5">unit</span><span class="s1">)) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">gal</span><span class="s1"> = </span><span class="s5">totalAmount</span><span class="s1"> / </span><span class="s14">128</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">gal</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> gallons`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">unit</span><span class="s1"> === </span><span class="s4">'pt/acre'</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">gal</span><span class="s1"> = </span><span class="s5">totalAmount</span><span class="s1"> / </span><span class="s14">8</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">gal</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> gallons`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">unit</span><span class="s1"> === </span><span class="s4">'qt/acre'</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">gal</span><span class="s1"> = </span><span class="s5">totalAmount</span><span class="s1"> / </span><span class="s14">4</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">gal</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> gallons`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">unit</span><span class="s1"> === </span><span class="s4">'oz dry/acre'</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">lbs</span><span class="s1"> = </span><span class="s5">totalAmount</span><span class="s1"> / </span><span class="s14">16</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">lbs</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> lbs`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">unit</span><span class="s1"> === </span><span class="s4">'%v/v'</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">water</span><span class="s1"> = </span><span class="s7">parseFloat</span><span class="s1">(</span><span class="s5">job</span><span class="s1">.</span><span class="s5">waterVolume</span><span class="s1"> || </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">gal</span><span class="s1"> = (</span><span class="s5">rate</span><span class="s1"> / </span><span class="s14">100</span><span class="s1">) * </span><span class="s5">water</span><span class="s1"> * </span><span class="s5">acres</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">gal</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> gallons`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> </span><span class="s2">if</span><span class="s1"> (</span><span class="s5">unit</span><span class="s1"> === </span><span class="s4">'tons/acre'</span><span class="s1">) {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">totalAmount</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">2</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> tons`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} </span><span class="s2">else</span><span class="s1"> {</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s5">display</span><span class="s1"> = </span><span class="s4">`</span><span class="s8">${</span><span class="s5">totalAmount</span><span class="s1">.</span><span class="s7">toFixed</span><span class="s1">(</span><span class="s14">1</span><span class="s1">)</span><span class="s8">}</span><span class="s4"> </span><span class="s8">${</span><span class="s5">unit</span><span class="s1">.</span><span class="s7">replace</span><span class="s1">(</span><span class="s4">'/acre'</span><span class="s1">, </span><span class="s4">''</span><span class="s1">).</span><span class="s7">trim</span><span class="s1">()</span><span class="s8">}</span><span class="s4">`</span><span class="s1">;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s2">return</span><span class="s1"> (</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">div</span><span class="s10"> </span><span class="s5">key</span><span class="s10">=</span><span class="s8">{</span><span class="s5">i</span><span class="s8">}</span><span class="s10"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"text-sm text-gray-700"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">{</span><span class="s5">p</span><span class="s1">.</span><span class="s5">productName</span><span class="s1"> || </span><span class="s5">p</span><span class="s1">.</span><span class="s5">name</span><span class="s1"> || </span><span class="s4">'Unnamed'</span><span class="s8">}</span><span class="s1"> â†’ </span><span class="s15">&lt;</span><span class="s8">span</span><span class="s1"> </span><span class="s5">className</span><span class="s1">=</span><span class="s4">"font-mono"</span><span class="s15">&gt;</span><span class="s8">{</span><span class="s5">display</span><span class="s8">}</span><span class="s15">&lt;/</span><span class="s8">span</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>})</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>)</span><span class="s8">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;/</span><span class="s8">div</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s8">function</span><span class="s3"> </span><span class="s7">renderBoundarySVG</span><span class="s3">(</span><span class="s1">baseGeometries</span><span class="s3">, </span><span class="s1">overlayGeoJSONList</span><span class="s3">) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s2">if</span><span class="s3"> (</span><span class="s10">!</span><span class="s1">Array</span><span class="s3">.</span><span class="s7">isArray</span><span class="s3">(</span><span class="s1">baseGeometries</span><span class="s3">) </span><span class="s10">||</span><span class="s3"> </span><span class="s1">baseGeometries</span><span class="s3">.</span><span class="s1">length</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s14">0</span><span class="s3">) </span><span class="s2">return</span><span class="s3"> </span><span class="s8">null</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">boxSize</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s14">300</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">margin</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s14">10</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">allCoords</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">baseGeometries</span><span class="s3">.</span><span class="s7">flatMap</span><span class="s3">(</span><span class="s1">g</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> </span><span class="s1">g</span><span class="s3">?.</span><span class="s1">coordinates</span><span class="s3">?.[</span><span class="s14">0</span><span class="s3">] </span><span class="s10">||</span><span class="s3"> []);</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">bounds</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> </span><span class="s5">allCoords</span><span class="s1">.</span><span class="s7">reduce</span><span class="s1">((</span><span class="s5">acc</span><span class="s1">, [</span><span class="s5">lng</span><span class="s1">, </span><span class="s5">lat</span><span class="s1">]) </span><span class="s8">=&gt;</span><span class="s1"> ({</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">minX:</span><span class="s3"> </span><span class="s1">Math</span><span class="s3">.</span><span class="s7">min</span><span class="s3">(</span><span class="s1">acc</span><span class="s3">.</span><span class="s1">minX</span><span class="s3">, </span><span class="s1">lng</span><span class="s3">),</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">maxX:</span><span class="s3"> </span><span class="s1">Math</span><span class="s3">.</span><span class="s7">max</span><span class="s3">(</span><span class="s1">acc</span><span class="s3">.</span><span class="s1">maxX</span><span class="s3">, </span><span class="s1">lng</span><span class="s3">),</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">minY:</span><span class="s3"> </span><span class="s1">Math</span><span class="s3">.</span><span class="s7">min</span><span class="s3">(</span><span class="s1">acc</span><span class="s3">.</span><span class="s1">minY</span><span class="s3">, </span><span class="s1">lat</span><span class="s3">),</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">maxY:</span><span class="s3"> </span><span class="s1">Math</span><span class="s3">.</span><span class="s7">max</span><span class="s3">(</span><span class="s1">acc</span><span class="s3">.</span><span class="s1">maxY</span><span class="s3">, </span><span class="s1">lat</span><span class="s3">),</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">Â  </span>}), { </span><span class="s5">minX:</span><span class="s3"> </span><span class="s1">Infinity</span><span class="s3">, </span><span class="s5">maxX:</span><span class="s3"> </span><span class="s10">-</span><span class="s1">Infinity</span><span class="s3">, </span><span class="s5">minY:</span><span class="s3"> </span><span class="s1">Infinity</span><span class="s3">, </span><span class="s5">maxY:</span><span class="s3"> </span><span class="s10">-</span><span class="s1">Infinity</span><span class="s3"> });</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">width</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">bounds</span><span class="s3">.</span><span class="s1">maxX</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> </span><span class="s1">bounds</span><span class="s3">.</span><span class="s1">minX</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s14">1</span><span class="s3">;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">height</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">bounds</span><span class="s3">.</span><span class="s1">maxY</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> </span><span class="s1">bounds</span><span class="s3">.</span><span class="s1">minY</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> </span><span class="s14">1</span><span class="s3">;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">scale</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s1">boxSize</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> </span><span class="s1">margin</span><span class="s3"> </span><span class="s10">*</span><span class="s3"> </span><span class="s14">2</span><span class="s3">) </span><span class="s10">/</span><span class="s3"> </span><span class="s1">Math</span><span class="s3">.</span><span class="s7">max</span><span class="s3">(</span><span class="s1">width</span><span class="s3">, </span><span class="s1">height</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">xOffset</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s1">boxSize</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> </span><span class="s1">width</span><span class="s3"> </span><span class="s10">*</span><span class="s3"> </span><span class="s1">scale</span><span class="s3">) </span><span class="s10">/</span><span class="s3"> </span><span class="s14">2</span><span class="s3">;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">yOffset</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s1">boxSize</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> </span><span class="s1">height</span><span class="s3"> </span><span class="s10">*</span><span class="s3"> </span><span class="s1">scale</span><span class="s3">) </span><span class="s10">/</span><span class="s3"> </span><span class="s14">2</span><span class="s3">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s7">project</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> ([</span><span class="s5">lng</span><span class="s1">, </span><span class="s5">lat</span><span class="s1">]) </span><span class="s8">=&gt;</span><span class="s1"> ({</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">x:</span><span class="s3"> (</span><span class="s1">lng</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> </span><span class="s1">bounds</span><span class="s3">.</span><span class="s1">minX</span><span class="s3">) </span><span class="s10">*</span><span class="s3"> </span><span class="s1">scale</span><span class="s3"> </span><span class="s10">+</span><span class="s3"> </span><span class="s1">xOffset</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">y:</span><span class="s3"> </span><span class="s1">boxSize</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> ((</span><span class="s1">lat</span><span class="s3"> </span><span class="s10">-</span><span class="s3"> </span><span class="s1">bounds</span><span class="s3">.</span><span class="s1">minY</span><span class="s3">) </span><span class="s10">*</span><span class="s3"> </span><span class="s1">scale</span><span class="s3"> </span><span class="s10">+</span><span class="s3"> </span><span class="s1">yOffset</span><span class="s3">),</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>});</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s1">pathFromCoords</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> (</span><span class="s5">coords</span><span class="s3">) </span><span class="s8">=&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s5">coords</span><span class="s1">.</span><span class="s7">map</span><span class="s1">((</span><span class="s5">pt</span><span class="s1">, </span><span class="s5">i</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">const</span><span class="s1"> { </span><span class="s9">x</span><span class="s1">, </span><span class="s9">y</span><span class="s1"> } </span><span class="s10">=</span><span class="s1"> </span><span class="s7">project</span><span class="s1">(</span><span class="s5">pt</span><span class="s1">);</span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s2">return</span><span class="s3"> </span><span class="s4">`</span><span class="s8">${</span><span class="s5">i</span><span class="s1"> === </span><span class="s14">0</span><span class="s1"> ? </span><span class="s4">'M'</span><span class="s1"> : </span><span class="s4">'L'</span><span class="s8">}${</span><span class="s5">x</span><span class="s8">}</span><span class="s4">,</span><span class="s8">${</span><span class="s5">y</span><span class="s8">}</span><span class="s4">`</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}).</span><span class="s7">join</span><span class="s1">(</span><span class="s4">' '</span><span class="s1">) </span><span class="s10">+</span><span class="s1"> </span><span class="s4">' Z'</span><span class="s1">;</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span></span><span class="s8">const</span><span class="s1"> </span><span class="s9">paths</span><span class="s1"> </span><span class="s10">=</span><span class="s1"> [];</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸŸ¥ Field boundaries (base polygons)</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">baseGeometries</span><span class="s3">.</span><span class="s7">forEach</span><span class="s3">(</span><span class="s1">geo</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">geo</span><span class="s1">?.</span><span class="s5">coordinates</span><span class="s1">?.[</span><span class="s14">0</span><span class="s1">]) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">paths</span><span class="s1">.</span><span class="s7">push</span><span class="s1">({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">type:</span><span class="s1"> </span><span class="s4">'base'</span><span class="s1">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">d:</span><span class="s3"> </span><span class="s7">pathFromCoords</span><span class="s3">(</span><span class="s1">geo</span><span class="s3">.</span><span class="s1">coordinates</span><span class="s3">[</span><span class="s14">0</span><span class="s3">]),</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>});</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">// ðŸŸ© Drawn overlays (application zones)</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  </span>(</span><span class="s1">overlayGeoJSONList</span><span class="s3"> </span><span class="s10">||</span><span class="s3"> []).</span><span class="s7">forEach</span><span class="s3">(</span><span class="s1">overlay</span><span class="s3"> </span><span class="s8">=&gt;</span><span class="s3"> {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s8">const</span><span class="s3"> </span><span class="s9">poly</span><span class="s3"> </span><span class="s10">=</span><span class="s3"> </span><span class="s1">overlay</span><span class="s3">?.</span><span class="s1">type</span><span class="s3"> </span><span class="s10">===</span><span class="s3"> </span><span class="s4">'Feature'</span><span class="s3"> </span><span class="s10">?</span><span class="s3"> </span><span class="s1">overlay</span><span class="s3">.</span><span class="s1">geometry</span><span class="s3"> </span><span class="s10">:</span><span class="s3"> </span><span class="s1">overlay</span><span class="s3">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s2">if</span><span class="s1"> (</span><span class="s5">poly</span><span class="s1">?.</span><span class="s5">coordinates</span><span class="s1">?.[</span><span class="s14">0</span><span class="s1">]) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">paths</span><span class="s1">.</span><span class="s7">push</span><span class="s1">({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">type:</span><span class="s1"> </span><span class="s4">'overlay'</span><span class="s1">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">d:</span><span class="s3"> </span><span class="s7">pathFromCoords</span><span class="s3">(</span><span class="s1">poly</span><span class="s3">.</span><span class="s1">coordinates</span><span class="s3">[</span><span class="s14">0</span><span class="s3">]),</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>});</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p4"><span class="s3"><span class="Apple-converted-space">Â  </span></span><span class="s1">return</span><span class="s3"> (</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">svg</span><span class="s3"> </span><span class="s5">viewBox</span><span class="s10">=</span><span class="s8">{</span><span class="s1">`0 0 </span><span class="s8">${</span><span class="s5">boxSize</span><span class="s8">}</span><span class="s1"> </span><span class="s8">${</span><span class="s5">boxSize</span><span class="s8">}</span><span class="s1">`</span><span class="s8">}</span><span class="s3"> </span><span class="s5">className</span><span class="s10">=</span><span class="s1">"w-full max-w-xs bg-white border rounded shadow mx-auto"</span><span class="s15">&gt;</span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">Â Â  </span></span><span class="s8">{</span><span class="s5">paths</span><span class="s1">.</span><span class="s7">map</span><span class="s1">((</span><span class="s5">p</span><span class="s1">, </span><span class="s5">i</span><span class="s1">) </span><span class="s8">=&gt;</span><span class="s1"> (</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">&lt;</span><span class="s8">path</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">key</span><span class="s1">=</span><span class="s8">{</span><span class="s5">i</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">d</span><span class="s1">=</span><span class="s8">{</span><span class="s5">p</span><span class="s1">.</span><span class="s5">d</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">fill</span><span class="s1">=</span><span class="s8">{</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s5">p</span><span class="s1">.</span><span class="s5">type</span><span class="s1"> === </span><span class="s4">'overlay'</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>? </span><span class="s4">'#34D399'</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>: </span><span class="s1">overlayGeoJSONList</span><span class="s10">?.</span><span class="s1">length</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>? </span><span class="s4">'#F87171'</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>: </span><span class="s4">'#34D399'</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">fillOpacity</span><span class="s1">=</span><span class="s8">{</span><span class="s5">p</span><span class="s1">.</span><span class="s5">type</span><span class="s1"> === </span><span class="s4">'overlay'</span><span class="s1"> ? </span><span class="s14">0.6</span><span class="s1"> : </span><span class="s14">0.2</span><span class="s8">}</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">stroke</span><span class="s10">=</span><span class="s8">{</span><span class="s5">p</span><span class="s10">.</span><span class="s5">type</span><span class="s10"> === </span><span class="s1">'overlay'</span><span class="s10"> ? </span><span class="s1">'#047857'</span><span class="s10"> : </span><span class="s1">'#4B5563'</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span></span><span class="s5">strokeWidth</span><span class="s1">=</span><span class="s8">{</span><span class="s5">p</span><span class="s1">.</span><span class="s5">type</span><span class="s1"> === </span><span class="s4">'overlay'</span><span class="s1"> ? </span><span class="s14">2</span><span class="s1"> : </span><span class="s14">1.5</span><span class="s8">}</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s15">/&gt;</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">Â  </span>))</span><span class="s8">}</span></p>
<p class="p9"><span class="s15">&lt;/</span><span class="s1">svg</span><span class="s15">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â  </span>);</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s6"></span><br></p>
<p class="p6"><span class="s6"></span><br></p>
</body>
</html>
