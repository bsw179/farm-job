var j2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var jN=j2(Qt=>{function $2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Tm=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function Pu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function H2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Cy={exports:{}},_f={},ky={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Au=Symbol.for("react.element"),G2=Symbol.for("react.portal"),W2=Symbol.for("react.fragment"),q2=Symbol.for("react.strict_mode"),Z2=Symbol.for("react.profiler"),K2=Symbol.for("react.provider"),Q2=Symbol.for("react.context"),Y2=Symbol.for("react.forward_ref"),X2=Symbol.for("react.suspense"),J2=Symbol.for("react.memo"),tT=Symbol.for("react.lazy"),Vg=Symbol.iterator;function eT(t){return t===null||typeof t!="object"?null:(t=Vg&&t[Vg]||t["@@iterator"],typeof t=="function"?t:null)}var by={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iy=Object.assign,Py={};function Sa(t,e,n){this.props=t,this.context=e,this.refs=Py,this.updater=n||by}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ay(){}Ay.prototype=Sa.prototype;function Sm(t,e,n){this.props=t,this.context=e,this.refs=Py,this.updater=n||by}var Mm=Sm.prototype=new Ay;Mm.constructor=Sm;Iy(Mm,Sa.prototype);Mm.isPureReactComponent=!0;var Ug=Array.isArray,Ry=Object.prototype.hasOwnProperty,Lm={current:null},Dy={key:!0,ref:!0,__self:!0,__source:!0};function Ny(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Ry.call(e,r)&&!Dy.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];i.children=h}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Au,type:t,key:s,ref:a,props:i,_owner:Lm.current}}function nT(t,e){return{$$typeof:Au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Au}function iT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jg=/\/+/g;function od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iT(""+t.key):e.toString(36)}function ic(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Au:case G2:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+od(a,0):r,Ug(i)?(n="",t!=null&&(n=t.replace(jg,"$&/")+"/"),ic(i,e,n,"",function(c){return c})):i!=null&&(Cm(i)&&(i=nT(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(jg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Ug(t))for(var l=0;l<t.length;l++){s=t[l];var h=r+od(s,l);a+=ic(s,e,n,h,i)}else if(h=eT(t),typeof h=="function")for(t=h.call(t),l=0;!(s=t.next()).done;)s=s.value,h=r+od(s,l++),a+=ic(s,e,n,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ah(t,e,n){if(t==null)return t;var r=[],i=0;return ic(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var On={current:null},rc={transition:null},sT={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:rc,ReactCurrentOwner:Lm};function Oy(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Ah,forEach:function(t,e,n){Ah(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ah(t,function(){e++}),e},toArray:function(t){return Ah(t,function(e){return e})||[]},only:function(t){if(!Cm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Sa;oe.Fragment=W2;oe.Profiler=Z2;oe.PureComponent=Sm;oe.StrictMode=q2;oe.Suspense=X2;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sT;oe.act=Oy;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Iy({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Lm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)Ry.call(e,h)&&!Dy.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&l!==void 0?l[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Au,type:t.type,key:i,ref:s,props:r,_owner:a}};oe.createContext=function(t){return t={$$typeof:Q2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K2,_context:t},t.Consumer=t};oe.createElement=Ny;oe.createFactory=function(t){var e=Ny.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:Y2,render:t}};oe.isValidElement=Cm;oe.lazy=function(t){return{$$typeof:tT,_payload:{_status:-1,_result:t},_init:rT}};oe.memo=function(t,e){return{$$typeof:J2,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};oe.unstable_act=Oy;oe.useCallback=function(t,e){return On.current.useCallback(t,e)};oe.useContext=function(t){return On.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return On.current.useDeferredValue(t)};oe.useEffect=function(t,e){return On.current.useEffect(t,e)};oe.useId=function(){return On.current.useId()};oe.useImperativeHandle=function(t,e,n){return On.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return On.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return On.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return On.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return On.current.useReducer(t,e,n)};oe.useRef=function(t){return On.current.useRef(t)};oe.useState=function(t){return On.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return On.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return On.current.useTransition()};oe.version="18.3.1";ky.exports=oe;var Tt=ky.exports;const Zs=Pu(Tt),oT=$2({__proto__:null,default:Zs},[Tt]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=Tt,lT=Symbol.for("react.element"),uT=Symbol.for("react.fragment"),hT=Object.prototype.hasOwnProperty,cT=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fT={key:!0,ref:!0,__self:!0,__source:!0};function Fy(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)hT.call(e,r)&&!fT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lT,type:t,key:s,ref:a,props:i,_owner:cT.current}}_f.Fragment=uT;_f.jsx=Fy;_f.jsxs=Fy;Cy.exports=_f;var it=Cy.exports,qd={},By={exports:{}},ri={},zy={exports:{}},Vy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(lt,ot){var ft=lt.length;lt.push(ot);t:for(;0<ft;){var J=ft-1>>>1,tt=lt[J];if(0<i(tt,ot))lt[J]=ot,lt[ft]=tt,ft=J;else break t}}function n(lt){return lt.length===0?null:lt[0]}function r(lt){if(lt.length===0)return null;var ot=lt[0],ft=lt.pop();if(ft!==ot){lt[0]=ft;t:for(var J=0,tt=lt.length,_t=tt>>>1;J<_t;){var Et=2*(J+1)-1,vt=lt[Et],Pt=Et+1,$t=lt[Pt];if(0>i(vt,ft))Pt<tt&&0>i($t,vt)?(lt[J]=$t,lt[Pt]=ft,J=Pt):(lt[J]=vt,lt[Et]=ft,J=Et);else if(Pt<tt&&0>i($t,ft))lt[J]=$t,lt[Pt]=ft,J=Pt;else break t}}return ot}function i(lt,ot){var ft=lt.sortIndex-ot.sortIndex;return ft!==0?ft:lt.id-ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var h=[],c=[],p=1,m=null,v=3,_=!1,T=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(lt){for(var ot=n(c);ot!==null;){if(ot.callback===null)r(c);else if(ot.startTime<=lt)r(c),ot.sortIndex=ot.expirationTime,e(h,ot);else break;ot=n(c)}}function W(lt){if(w=!1,R(lt),!T)if(n(h)!==null)T=!0,Rt(q);else{var ot=n(c);ot!==null&&mt(W,ot.startTime-lt)}}function q(lt,ot){T=!1,w&&(w=!1,E(S),S=-1),_=!0;var ft=v;try{for(R(ot),m=n(h);m!==null&&(!(m.expirationTime>ot)||lt&&!H());){var J=m.callback;if(typeof J=="function"){m.callback=null,v=m.priorityLevel;var tt=J(m.expirationTime<=ot);ot=t.unstable_now(),typeof tt=="function"?m.callback=tt:m===n(h)&&r(h),R(ot)}else r(h);m=n(h)}if(m!==null)var _t=!0;else{var Et=n(c);Et!==null&&mt(W,Et.startTime-ot),_t=!1}return _t}finally{m=null,v=ft,_=!1}}var X=!1,U=null,S=-1,k=5,F=-1;function H(){return!(t.unstable_now()-F<k)}function D(){if(U!==null){var lt=t.unstable_now();F=lt;var ot=!0;try{ot=U(!0,lt)}finally{ot?j():(X=!1,U=null)}}else X=!1}var j;if(typeof M=="function")j=function(){M(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,wt=B.port2;B.port1.onmessage=D,j=function(){wt.postMessage(null)}}else j=function(){I(D,0)};function Rt(lt){U=lt,X||(X=!0,j())}function mt(lt,ot){S=I(function(){lt(t.unstable_now())},ot)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(lt){lt.callback=null},t.unstable_continueExecution=function(){T||_||(T=!0,Rt(q))},t.unstable_forceFrameRate=function(lt){0>lt||125<lt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<lt?Math.floor(1e3/lt):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(lt){switch(v){case 1:case 2:case 3:var ot=3;break;default:ot=v}var ft=v;v=ot;try{return lt()}finally{v=ft}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(lt,ot){switch(lt){case 1:case 2:case 3:case 4:case 5:break;default:lt=3}var ft=v;v=lt;try{return ot()}finally{v=ft}},t.unstable_scheduleCallback=function(lt,ot,ft){var J=t.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?J+ft:J):ft=J,lt){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=ft+tt,lt={id:p++,callback:ot,priorityLevel:lt,startTime:ft,expirationTime:tt,sortIndex:-1},ft>J?(lt.sortIndex=ft,e(c,lt),n(h)===null&&lt===n(c)&&(w?(E(S),S=-1):w=!0,mt(W,ft-J))):(lt.sortIndex=tt,e(h,lt),T||_||(T=!0,Rt(q))),lt},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(lt){var ot=v;return function(){var ft=v;v=ot;try{return lt.apply(this,arguments)}finally{v=ft}}}})(Vy);zy.exports=Vy;var dT=zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT=Tt,ni=dT;function bt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uy=new Set,Jl={};function oo(t,e){la(t,e),la(t+"Capture",e)}function la(t,e){for(Jl[t]=e,t=0;t<e.length;t++)Uy.add(e[t])}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zd=Object.prototype.hasOwnProperty,mT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$g={},Hg={};function _T(t){return Zd.call(Hg,t)?!0:Zd.call($g,t)?!1:mT.test(t)?Hg[t]=!0:($g[t]=!0,!1)}function gT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vT(t,e,n,r){if(e===null||typeof e>"u"||gT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fn(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new Fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gn[e]=new Fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new Fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new Fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new Fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new Fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new Fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new Fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new Fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var km=/[\-:]([a-z])/g;function bm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(km,bm);gn[e]=new Fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(km,bm);gn[e]=new Fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(km,bm);gn[e]=new Fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new Fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Im(t,e,n,r){var i=gn.hasOwnProperty(e)?gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vT(e,n,i,r)&&(n=null),r||i===null?_T(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ar=pT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rh=Symbol.for("react.element"),No=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),Kd=Symbol.for("react.profiler"),jy=Symbol.for("react.provider"),$y=Symbol.for("react.context"),Am=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Yd=Symbol.for("react.suspense_list"),Rm=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),Hy=Symbol.for("react.offscreen"),Gg=Symbol.iterator;function ul(t){return t===null||typeof t!="object"?null:(t=Gg&&t[Gg]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,ad;function yl(t){if(ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ad=e&&e[1]||""}return`
`+ad+t}var ld=!1;function ud(t,e){if(!t||ld)return"";ld=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var h=`
`+i[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=l);break}}}finally{ld=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yl(t):""}function yT(t){switch(t.tag){case 5:return yl(t.type);case 16:return yl("Lazy");case 13:return yl("Suspense");case 19:return yl("SuspenseList");case 0:case 2:case 15:return t=ud(t.type,!1),t;case 11:return t=ud(t.type.render,!1),t;case 1:return t=ud(t.type,!0),t;default:return""}}function Xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oo:return"Fragment";case No:return"Portal";case Kd:return"Profiler";case Pm:return"StrictMode";case Qd:return"Suspense";case Yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $y:return(t.displayName||"Context")+".Consumer";case jy:return(t._context.displayName||"Context")+".Provider";case Am:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rm:return e=t.displayName||null,e!==null?e:Xd(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return Xd(t(e))}catch{}}return null}function wT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xd(e);case 8:return e===Pm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xT(t){var e=Gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dh(t){t._valueTracker||(t._valueTracker=xT(t))}function Wy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jd(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qy(t,e){e=e.checked,e!=null&&Im(t,"checked",e,!1)}function tp(t,e){qy(t,e);var n=fs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ep(t,e.type,n):e.hasOwnProperty("defaultValue")&&ep(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ep(t,e,n){(e!=="number"||Sc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wl=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function np(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(bt(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(bt(92));if(wl(n)){if(1<n.length)throw Error(bt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fs(n)}}function Zy(t,e){var n=fs(e.value),r=fs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Kg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ky(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ip(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ky(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nh,Qy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nh=Nh||document.createElement("div"),Nh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ET=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(t){ET.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rl[e]=Rl[t]})});function Yy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Rl.hasOwnProperty(t)&&Rl[t]?(""+e).trim():e+"px"}function Xy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Yy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TT=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rp(t,e){if(e){if(TT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(bt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(bt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(bt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(bt(62))}}function sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var op=null;function Dm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ap=null,Xo=null,Jo=null;function Qg(t){if(t=Nu(t)){if(typeof ap!="function")throw Error(bt(280));var e=t.stateNode;e&&(e=xf(e),ap(t.stateNode,t.type,e))}}function Jy(t){Xo?Jo?Jo.push(t):Jo=[t]:Xo=t}function t1(){if(Xo){var t=Xo,e=Jo;if(Jo=Xo=null,Qg(t),e)for(t=0;t<e.length;t++)Qg(e[t])}}function e1(t,e){return t(e)}function n1(){}var hd=!1;function i1(t,e,n){if(hd)return t(e,n);hd=!0;try{return e1(t,e,n)}finally{hd=!1,(Xo!==null||Jo!==null)&&(n1(),t1())}}function eu(t,e){var n=t.stateNode;if(n===null)return null;var r=xf(n);if(r===null)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(bt(231,e,typeof n));return n}var lp=!1;if(Sr)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){lp=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{lp=!1}function ST(t,e,n,r,i,s,a,l,h){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(p){this.onError(p)}}var Dl=!1,Mc=null,Lc=!1,up=null,MT={onError:function(t){Dl=!0,Mc=t}};function LT(t,e,n,r,i,s,a,l,h){Dl=!1,Mc=null,ST.apply(MT,arguments)}function CT(t,e,n,r,i,s,a,l,h){if(LT.apply(this,arguments),Dl){if(Dl){var c=Mc;Dl=!1,Mc=null}else throw Error(bt(198));Lc||(Lc=!0,up=c)}}function ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function r1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yg(t){if(ao(t)!==t)throw Error(bt(188))}function kT(t){var e=t.alternate;if(!e){if(e=ao(t),e===null)throw Error(bt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yg(i),t;if(s===r)return Yg(i),e;s=s.sibling}throw Error(bt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(bt(189))}}if(n.alternate!==r)throw Error(bt(190))}if(n.tag!==3)throw Error(bt(188));return n.stateNode.current===n?t:e}function s1(t){return t=kT(t),t!==null?o1(t):null}function o1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=o1(t);if(e!==null)return e;t=t.sibling}return null}var a1=ni.unstable_scheduleCallback,Xg=ni.unstable_cancelCallback,bT=ni.unstable_shouldYield,IT=ni.unstable_requestPaint,$e=ni.unstable_now,PT=ni.unstable_getCurrentPriorityLevel,Nm=ni.unstable_ImmediatePriority,l1=ni.unstable_UserBlockingPriority,Cc=ni.unstable_NormalPriority,AT=ni.unstable_LowPriority,u1=ni.unstable_IdlePriority,gf=null,Ki=null;function RT(t){if(Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:OT,DT=Math.log,NT=Math.LN2;function OT(t){return t>>>=0,t===0?32:31-(DT(t)/NT|0)|0}var Oh=64,Fh=4194304;function xl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=xl(l):(s&=a,s!==0&&(r=xl(s)))}else a=n&~i,a!==0?r=xl(a):s!==0&&(r=xl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ii(e),i=1<<n,r|=t[n],e&=~i;return r}function FT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ii(s),l=1<<a,h=i[a];h===-1?(!(l&n)||l&r)&&(i[a]=FT(l,e)):h<=e&&(t.expiredLanes|=l),s&=~l}}function hp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function h1(){var t=Oh;return Oh<<=1,!(Oh&4194240)&&(Oh=64),t}function cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ii(e),t[e]=n}function zT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ii(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Om(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ii(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function c1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f1,Fm,d1,p1,m1,cp=!1,Bh=[],Jr=null,ts=null,es=null,nu=new Map,iu=new Map,qr=[],VT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jg(t,e){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":nu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iu.delete(e.pointerId)}}function cl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Nu(e),e!==null&&Fm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UT(t,e,n,r,i){switch(e){case"focusin":return Jr=cl(Jr,t,e,n,r,i),!0;case"dragenter":return ts=cl(ts,t,e,n,r,i),!0;case"mouseover":return es=cl(es,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return nu.set(s,cl(nu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,iu.set(s,cl(iu.get(s)||null,t,e,n,r,i)),!0}return!1}function _1(t){var e=Us(t.target);if(e!==null){var n=ao(e);if(n!==null){if(e=n.tag,e===13){if(e=r1(n),e!==null){t.blockedOn=e,m1(t.priority,function(){d1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);op=r,n.target.dispatchEvent(r),op=null}else return e=Nu(n),e!==null&&Fm(e),t.blockedOn=n,!1;e.shift()}return!0}function t0(t,e,n){sc(t)&&n.delete(e)}function jT(){cp=!1,Jr!==null&&sc(Jr)&&(Jr=null),ts!==null&&sc(ts)&&(ts=null),es!==null&&sc(es)&&(es=null),nu.forEach(t0),iu.forEach(t0)}function fl(t,e){t.blockedOn===e&&(t.blockedOn=null,cp||(cp=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,jT)))}function ru(t){function e(i){return fl(i,t)}if(0<Bh.length){fl(Bh[0],t);for(var n=1;n<Bh.length;n++){var r=Bh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jr!==null&&fl(Jr,t),ts!==null&&fl(ts,t),es!==null&&fl(es,t),nu.forEach(e),iu.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)_1(n),n.blockedOn===null&&qr.shift()}var ta=Ar.ReactCurrentBatchConfig,bc=!0;function $T(t,e,n,r){var i=xe,s=ta.transition;ta.transition=null;try{xe=1,Bm(t,e,n,r)}finally{xe=i,ta.transition=s}}function HT(t,e,n,r){var i=xe,s=ta.transition;ta.transition=null;try{xe=4,Bm(t,e,n,r)}finally{xe=i,ta.transition=s}}function Bm(t,e,n,r){if(bc){var i=fp(t,e,n,r);if(i===null)xd(t,e,r,Ic,n),Jg(t,r);else if(UT(i,t,e,n,r))r.stopPropagation();else if(Jg(t,r),e&4&&-1<VT.indexOf(t)){for(;i!==null;){var s=Nu(i);if(s!==null&&f1(s),s=fp(t,e,n,r),s===null&&xd(t,e,r,Ic,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xd(t,e,r,null,n)}}var Ic=null;function fp(t,e,n,r){if(Ic=null,t=Dm(r),t=Us(t),t!==null)if(e=ao(t),e===null)t=null;else if(n=e.tag,n===13){if(t=r1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ic=t,null}function g1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PT()){case Nm:return 1;case l1:return 4;case Cc:case AT:return 16;case u1:return 536870912;default:return 16}default:return 16}}var Kr=null,zm=null,oc=null;function v1(){if(oc)return oc;var t,e=zm,n=e.length,r,i="value"in Kr?Kr.value:Kr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return oc=i.slice(t,1<r?1-r:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zh(){return!0}function e0(){return!1}function si(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zh:e0,this.isPropagationStopped=e0,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zh)},persist:function(){},isPersistent:zh}),e}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vm=si(Ma),Du=Fe({},Ma,{view:0,detail:0}),GT=si(Du),fd,dd,dl,vf=Fe({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dl&&(dl&&t.type==="mousemove"?(fd=t.screenX-dl.screenX,dd=t.screenY-dl.screenY):dd=fd=0,dl=t),fd)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),n0=si(vf),WT=Fe({},vf,{dataTransfer:0}),qT=si(WT),ZT=Fe({},Du,{relatedTarget:0}),pd=si(ZT),KT=Fe({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),QT=si(KT),YT=Fe({},Ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XT=si(YT),JT=Fe({},Ma,{data:0}),i0=si(JT),tS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nS[t])?!!e[t]:!1}function Um(){return iS}var rS=Fe({},Du,{key:function(t){if(t.key){var e=tS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Um,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sS=si(rS),oS=Fe({},vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r0=si(oS),aS=Fe({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Um}),lS=si(aS),uS=Fe({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),hS=si(uS),cS=Fe({},vf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fS=si(cS),dS=[9,13,27,32],jm=Sr&&"CompositionEvent"in window,Nl=null;Sr&&"documentMode"in document&&(Nl=document.documentMode);var pS=Sr&&"TextEvent"in window&&!Nl,y1=Sr&&(!jm||Nl&&8<Nl&&11>=Nl),s0=String.fromCharCode(32),o0=!1;function w1(t,e){switch(t){case"keyup":return dS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fo=!1;function mS(t,e){switch(t){case"compositionend":return x1(e);case"keypress":return e.which!==32?null:(o0=!0,s0);case"textInput":return t=e.data,t===s0&&o0?null:t;default:return null}}function _S(t,e){if(Fo)return t==="compositionend"||!jm&&w1(t,e)?(t=v1(),oc=zm=Kr=null,Fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y1&&e.locale!=="ko"?null:e.data;default:return null}}var gS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gS[t.type]:e==="textarea"}function E1(t,e,n,r){Jy(r),e=Pc(e,"onChange"),0<e.length&&(n=new Vm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ol=null,su=null;function vS(t){R1(t,0)}function yf(t){var e=Vo(t);if(Wy(e))return t}function yS(t,e){if(t==="change")return e}var T1=!1;if(Sr){var md;if(Sr){var _d="oninput"in document;if(!_d){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),_d=typeof l0.oninput=="function"}md=_d}else md=!1;T1=md&&(!document.documentMode||9<document.documentMode)}function u0(){Ol&&(Ol.detachEvent("onpropertychange",S1),su=Ol=null)}function S1(t){if(t.propertyName==="value"&&yf(su)){var e=[];E1(e,su,t,Dm(t)),i1(vS,e)}}function wS(t,e,n){t==="focusin"?(u0(),Ol=e,su=n,Ol.attachEvent("onpropertychange",S1)):t==="focusout"&&u0()}function xS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(su)}function ES(t,e){if(t==="click")return yf(e)}function TS(t,e){if(t==="input"||t==="change")return yf(e)}function SS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ni=typeof Object.is=="function"?Object.is:SS;function ou(t,e){if(Ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zd.call(e,i)||!Ni(t[i],e[i]))return!1}return!0}function h0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function c0(t,e){var n=h0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=h0(n)}}function M1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?M1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function L1(){for(var t=window,e=Sc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sc(t.document)}return e}function $m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MS(t){var e=L1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&M1(n.ownerDocument.documentElement,n)){if(r!==null&&$m(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=c0(n,s);var a=c0(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LS=Sr&&"documentMode"in document&&11>=document.documentMode,Bo=null,dp=null,Fl=null,pp=!1;function f0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pp||Bo==null||Bo!==Sc(r)||(r=Bo,"selectionStart"in r&&$m(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fl&&ou(Fl,r)||(Fl=r,r=Pc(dp,"onSelect"),0<r.length&&(e=new Vm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bo)))}function Vh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zo={animationend:Vh("Animation","AnimationEnd"),animationiteration:Vh("Animation","AnimationIteration"),animationstart:Vh("Animation","AnimationStart"),transitionend:Vh("Transition","TransitionEnd")},gd={},C1={};Sr&&(C1=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function wf(t){if(gd[t])return gd[t];if(!zo[t])return t;var e=zo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C1)return gd[t]=e[n];return t}var k1=wf("animationend"),b1=wf("animationiteration"),I1=wf("animationstart"),P1=wf("transitionend"),A1=new Map,d0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(t,e){A1.set(t,e),oo(e,[t])}for(var vd=0;vd<d0.length;vd++){var yd=d0[vd],CS=yd.toLowerCase(),kS=yd[0].toUpperCase()+yd.slice(1);ys(CS,"on"+kS)}ys(k1,"onAnimationEnd");ys(b1,"onAnimationIteration");ys(I1,"onAnimationStart");ys("dblclick","onDoubleClick");ys("focusin","onFocus");ys("focusout","onBlur");ys(P1,"onTransitionEnd");la("onMouseEnter",["mouseout","mouseover"]);la("onMouseLeave",["mouseout","mouseover"]);la("onPointerEnter",["pointerout","pointerover"]);la("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function p0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CT(r,e,void 0,t),t.currentTarget=null}function R1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],h=l.instance,c=l.currentTarget;if(l=l.listener,h!==s&&i.isPropagationStopped())break t;p0(i,l,c),s=h}else for(a=0;a<r.length;a++){if(l=r[a],h=l.instance,c=l.currentTarget,l=l.listener,h!==s&&i.isPropagationStopped())break t;p0(i,l,c),s=h}}}if(Lc)throw t=up,Lc=!1,up=null,t}function Ce(t,e){var n=e[yp];n===void 0&&(n=e[yp]=new Set);var r=t+"__bubble";n.has(r)||(D1(e,t,2,!1),n.add(r))}function wd(t,e,n){var r=0;e&&(r|=4),D1(n,t,r,e)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function au(t){if(!t[Uh]){t[Uh]=!0,Uy.forEach(function(n){n!=="selectionchange"&&(bS.has(n)||wd(n,!1,t),wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uh]||(e[Uh]=!0,wd("selectionchange",!1,e))}}function D1(t,e,n,r){switch(g1(e)){case 1:var i=$T;break;case 4:i=HT;break;default:i=Bm}n=i.bind(null,e,n,t),i=void 0,!lp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)t:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Us(l),a===null)return;if(h=a.tag,h===5||h===6){r=s=a;continue t}l=l.parentNode}}r=r.return}i1(function(){var c=s,p=Dm(n),m=[];t:{var v=A1.get(t);if(v!==void 0){var _=Vm,T=t;switch(t){case"keypress":if(ac(n)===0)break t;case"keydown":case"keyup":_=sS;break;case"focusin":T="focus",_=pd;break;case"focusout":T="blur",_=pd;break;case"beforeblur":case"afterblur":_=pd;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=qT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=lS;break;case k1:case b1:case I1:_=QT;break;case P1:_=hS;break;case"scroll":_=GT;break;case"wheel":_=fS;break;case"copy":case"cut":case"paste":_=XT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=r0}var w=(e&4)!==0,I=!w&&t==="scroll",E=w?v!==null?v+"Capture":null:v;w=[];for(var M=c,R;M!==null;){R=M;var W=R.stateNode;if(R.tag===5&&W!==null&&(R=W,E!==null&&(W=eu(M,E),W!=null&&w.push(lu(M,W,R)))),I)break;M=M.return}0<w.length&&(v=new _(v,T,null,n,p),m.push({event:v,listeners:w}))}}if(!(e&7)){t:{if(v=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",v&&n!==op&&(T=n.relatedTarget||n.fromElement)&&(Us(T)||T[Mr]))break t;if((_||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,_?(T=n.relatedTarget||n.toElement,_=c,T=T?Us(T):null,T!==null&&(I=ao(T),T!==I||T.tag!==5&&T.tag!==6)&&(T=null)):(_=null,T=c),_!==T)){if(w=n0,W="onMouseLeave",E="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(w=r0,W="onPointerLeave",E="onPointerEnter",M="pointer"),I=_==null?v:Vo(_),R=T==null?v:Vo(T),v=new w(W,M+"leave",_,n,p),v.target=I,v.relatedTarget=R,W=null,Us(p)===c&&(w=new w(E,M+"enter",T,n,p),w.target=R,w.relatedTarget=I,W=w),I=W,_&&T)e:{for(w=_,E=T,M=0,R=w;R;R=bo(R))M++;for(R=0,W=E;W;W=bo(W))R++;for(;0<M-R;)w=bo(w),M--;for(;0<R-M;)E=bo(E),R--;for(;M--;){if(w===E||E!==null&&w===E.alternate)break e;w=bo(w),E=bo(E)}w=null}else w=null;_!==null&&m0(m,v,_,w,!1),T!==null&&I!==null&&m0(m,I,T,w,!0)}}t:{if(v=c?Vo(c):window,_=v.nodeName&&v.nodeName.toLowerCase(),_==="select"||_==="input"&&v.type==="file")var q=yS;else if(a0(v))if(T1)q=TS;else{q=xS;var X=wS}else(_=v.nodeName)&&_.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=ES);if(q&&(q=q(t,c))){E1(m,q,n,p);break t}X&&X(t,v,c),t==="focusout"&&(X=v._wrapperState)&&X.controlled&&v.type==="number"&&ep(v,"number",v.value)}switch(X=c?Vo(c):window,t){case"focusin":(a0(X)||X.contentEditable==="true")&&(Bo=X,dp=c,Fl=null);break;case"focusout":Fl=dp=Bo=null;break;case"mousedown":pp=!0;break;case"contextmenu":case"mouseup":case"dragend":pp=!1,f0(m,n,p);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":f0(m,n,p)}var U;if(jm)t:{switch(t){case"compositionstart":var S="onCompositionStart";break t;case"compositionend":S="onCompositionEnd";break t;case"compositionupdate":S="onCompositionUpdate";break t}S=void 0}else Fo?w1(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(y1&&n.locale!=="ko"&&(Fo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Fo&&(U=v1()):(Kr=p,zm="value"in Kr?Kr.value:Kr.textContent,Fo=!0)),X=Pc(c,S),0<X.length&&(S=new i0(S,t,null,n,p),m.push({event:S,listeners:X}),U?S.data=U:(U=x1(n),U!==null&&(S.data=U)))),(U=pS?mS(t,n):_S(t,n))&&(c=Pc(c,"onBeforeInput"),0<c.length&&(p=new i0("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:c}),p.data=U))}R1(m,e)})}function lu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=eu(t,n),s!=null&&r.unshift(lu(t,s,i)),s=eu(t,e),s!=null&&r.push(lu(t,s,i))),t=t.return}return r}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m0(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,h=l.alternate,c=l.stateNode;if(h!==null&&h===r)break;l.tag===5&&c!==null&&(l=c,i?(h=eu(n,s),h!=null&&a.unshift(lu(n,h,l))):i||(h=eu(n,s),h!=null&&a.push(lu(n,h,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var IS=/\r\n?/g,PS=/\u0000|\uFFFD/g;function _0(t){return(typeof t=="string"?t:""+t).replace(IS,`
`).replace(PS,"")}function jh(t,e,n){if(e=_0(e),_0(t)!==e&&n)throw Error(bt(425))}function Ac(){}var mp=null,_p=null;function gp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vp=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,RS=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(t){return g0.resolve(null).then(t).catch(DS)}:vp;function DS(t){setTimeout(function(){throw t})}function Ed(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ru(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ru(e)}function ns(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function v0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var La=Math.random().toString(36).slice(2),Wi="__reactFiber$"+La,uu="__reactProps$"+La,Mr="__reactContainer$"+La,yp="__reactEvents$"+La,NS="__reactListeners$"+La,OS="__reactHandles$"+La;function Us(t){var e=t[Wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[Wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=v0(t);t!==null;){if(n=t[Wi])return n;t=v0(t)}return e}t=n,n=t.parentNode}return null}function Nu(t){return t=t[Wi]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(bt(33))}function xf(t){return t[uu]||null}var wp=[],Uo=-1;function ws(t){return{current:t}}function ke(t){0>Uo||(t.current=wp[Uo],wp[Uo]=null,Uo--)}function Me(t,e){Uo++,wp[Uo]=t.current,t.current=e}var ds={},In=ws(ds),Gn=ws(!1),Ks=ds;function ua(t,e){var n=t.type.contextTypes;if(!n)return ds;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wn(t){return t=t.childContextTypes,t!=null}function Rc(){ke(Gn),ke(In)}function y0(t,e,n){if(In.current!==ds)throw Error(bt(168));Me(In,e),Me(Gn,n)}function N1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(bt(108,wT(t)||"Unknown",i));return Fe({},n,r)}function Dc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,Ks=In.current,Me(In,t),Me(Gn,Gn.current),!0}function w0(t,e,n){var r=t.stateNode;if(!r)throw Error(bt(169));n?(t=N1(t,e,Ks),r.__reactInternalMemoizedMergedChildContext=t,ke(Gn),ke(In),Me(In,t)):ke(Gn),Me(Gn,n)}var yr=null,Ef=!1,Td=!1;function O1(t){yr===null?yr=[t]:yr.push(t)}function FS(t){Ef=!0,O1(t)}function xs(){if(!Td&&yr!==null){Td=!0;var t=0,e=xe;try{var n=yr;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yr=null,Ef=!1}catch(i){throw yr!==null&&(yr=yr.slice(t+1)),a1(Nm,xs),i}finally{xe=e,Td=!1}}return null}var jo=[],$o=0,Nc=null,Oc=0,di=[],pi=0,Qs=null,wr=1,xr="";function Fs(t,e){jo[$o++]=Oc,jo[$o++]=Nc,Nc=t,Oc=e}function F1(t,e,n){di[pi++]=wr,di[pi++]=xr,di[pi++]=Qs,Qs=t;var r=wr;t=xr;var i=32-Ii(r)-1;r&=~(1<<i),n+=1;var s=32-Ii(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,wr=1<<32-Ii(e)+i|n<<i|r,xr=s+t}else wr=1<<s|n<<i|r,xr=t}function Hm(t){t.return!==null&&(Fs(t,1),F1(t,1,0))}function Gm(t){for(;t===Nc;)Nc=jo[--$o],jo[$o]=null,Oc=jo[--$o],jo[$o]=null;for(;t===Qs;)Qs=di[--pi],di[pi]=null,xr=di[--pi],di[pi]=null,wr=di[--pi],di[pi]=null}var ei=null,Jn=null,Ie=!1,bi=null;function B1(t,e){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function x0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ei=t,Jn=ns(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ei=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qs!==null?{id:wr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ei=t,Jn=null,!0):!1;default:return!1}}function xp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ep(t){if(Ie){var e=Jn;if(e){var n=e;if(!x0(t,e)){if(xp(t))throw Error(bt(418));e=ns(n.nextSibling);var r=ei;e&&x0(t,e)?B1(r,n):(t.flags=t.flags&-4097|2,Ie=!1,ei=t)}}else{if(xp(t))throw Error(bt(418));t.flags=t.flags&-4097|2,Ie=!1,ei=t}}}function E0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ei=t}function $h(t){if(t!==ei)return!1;if(!Ie)return E0(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gp(t.type,t.memoizedProps)),e&&(e=Jn)){if(xp(t))throw z1(),Error(bt(418));for(;e;)B1(t,e),e=ns(e.nextSibling)}if(E0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(bt(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jn=ns(t.nextSibling);break t}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=ei?ns(t.stateNode.nextSibling):null;return!0}function z1(){for(var t=Jn;t;)t=ns(t.nextSibling)}function ha(){Jn=ei=null,Ie=!1}function Wm(t){bi===null?bi=[t]:bi.push(t)}var BS=Ar.ReactCurrentBatchConfig;function pl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(bt(309));var r=n.stateNode}if(!r)throw Error(bt(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(bt(284));if(!n._owner)throw Error(bt(290,t))}return t}function Hh(t,e){throw t=Object.prototype.toString.call(e),Error(bt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function T0(t){var e=t._init;return e(t._payload)}function V1(t){function e(E,M){if(t){var R=E.deletions;R===null?(E.deletions=[M],E.flags|=16):R.push(M)}}function n(E,M){if(!t)return null;for(;M!==null;)e(E,M),M=M.sibling;return null}function r(E,M){for(E=new Map;M!==null;)M.key!==null?E.set(M.key,M):E.set(M.index,M),M=M.sibling;return E}function i(E,M){return E=os(E,M),E.index=0,E.sibling=null,E}function s(E,M,R){return E.index=R,t?(R=E.alternate,R!==null?(R=R.index,R<M?(E.flags|=2,M):R):(E.flags|=2,M)):(E.flags|=1048576,M)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,M,R,W){return M===null||M.tag!==6?(M=Id(R,E.mode,W),M.return=E,M):(M=i(M,R),M.return=E,M)}function h(E,M,R,W){var q=R.type;return q===Oo?p(E,M,R.props.children,W,R.key):M!==null&&(M.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Gr&&T0(q)===M.type)?(W=i(M,R.props),W.ref=pl(E,M,R),W.return=E,W):(W=pc(R.type,R.key,R.props,null,E.mode,W),W.ref=pl(E,M,R),W.return=E,W)}function c(E,M,R,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==R.containerInfo||M.stateNode.implementation!==R.implementation?(M=Pd(R,E.mode,W),M.return=E,M):(M=i(M,R.children||[]),M.return=E,M)}function p(E,M,R,W,q){return M===null||M.tag!==7?(M=Ws(R,E.mode,W,q),M.return=E,M):(M=i(M,R),M.return=E,M)}function m(E,M,R){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Id(""+M,E.mode,R),M.return=E,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Rh:return R=pc(M.type,M.key,M.props,null,E.mode,R),R.ref=pl(E,null,M),R.return=E,R;case No:return M=Pd(M,E.mode,R),M.return=E,M;case Gr:var W=M._init;return m(E,W(M._payload),R)}if(wl(M)||ul(M))return M=Ws(M,E.mode,R,null),M.return=E,M;Hh(E,M)}return null}function v(E,M,R,W){var q=M!==null?M.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return q!==null?null:l(E,M,""+R,W);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Rh:return R.key===q?h(E,M,R,W):null;case No:return R.key===q?c(E,M,R,W):null;case Gr:return q=R._init,v(E,M,q(R._payload),W)}if(wl(R)||ul(R))return q!==null?null:p(E,M,R,W,null);Hh(E,R)}return null}function _(E,M,R,W,q){if(typeof W=="string"&&W!==""||typeof W=="number")return E=E.get(R)||null,l(M,E,""+W,q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Rh:return E=E.get(W.key===null?R:W.key)||null,h(M,E,W,q);case No:return E=E.get(W.key===null?R:W.key)||null,c(M,E,W,q);case Gr:var X=W._init;return _(E,M,R,X(W._payload),q)}if(wl(W)||ul(W))return E=E.get(R)||null,p(M,E,W,q,null);Hh(M,W)}return null}function T(E,M,R,W){for(var q=null,X=null,U=M,S=M=0,k=null;U!==null&&S<R.length;S++){U.index>S?(k=U,U=null):k=U.sibling;var F=v(E,U,R[S],W);if(F===null){U===null&&(U=k);break}t&&U&&F.alternate===null&&e(E,U),M=s(F,M,S),X===null?q=F:X.sibling=F,X=F,U=k}if(S===R.length)return n(E,U),Ie&&Fs(E,S),q;if(U===null){for(;S<R.length;S++)U=m(E,R[S],W),U!==null&&(M=s(U,M,S),X===null?q=U:X.sibling=U,X=U);return Ie&&Fs(E,S),q}for(U=r(E,U);S<R.length;S++)k=_(U,E,S,R[S],W),k!==null&&(t&&k.alternate!==null&&U.delete(k.key===null?S:k.key),M=s(k,M,S),X===null?q=k:X.sibling=k,X=k);return t&&U.forEach(function(H){return e(E,H)}),Ie&&Fs(E,S),q}function w(E,M,R,W){var q=ul(R);if(typeof q!="function")throw Error(bt(150));if(R=q.call(R),R==null)throw Error(bt(151));for(var X=q=null,U=M,S=M=0,k=null,F=R.next();U!==null&&!F.done;S++,F=R.next()){U.index>S?(k=U,U=null):k=U.sibling;var H=v(E,U,F.value,W);if(H===null){U===null&&(U=k);break}t&&U&&H.alternate===null&&e(E,U),M=s(H,M,S),X===null?q=H:X.sibling=H,X=H,U=k}if(F.done)return n(E,U),Ie&&Fs(E,S),q;if(U===null){for(;!F.done;S++,F=R.next())F=m(E,F.value,W),F!==null&&(M=s(F,M,S),X===null?q=F:X.sibling=F,X=F);return Ie&&Fs(E,S),q}for(U=r(E,U);!F.done;S++,F=R.next())F=_(U,E,S,F.value,W),F!==null&&(t&&F.alternate!==null&&U.delete(F.key===null?S:F.key),M=s(F,M,S),X===null?q=F:X.sibling=F,X=F);return t&&U.forEach(function(D){return e(E,D)}),Ie&&Fs(E,S),q}function I(E,M,R,W){if(typeof R=="object"&&R!==null&&R.type===Oo&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Rh:t:{for(var q=R.key,X=M;X!==null;){if(X.key===q){if(q=R.type,q===Oo){if(X.tag===7){n(E,X.sibling),M=i(X,R.props.children),M.return=E,E=M;break t}}else if(X.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Gr&&T0(q)===X.type){n(E,X.sibling),M=i(X,R.props),M.ref=pl(E,X,R),M.return=E,E=M;break t}n(E,X);break}else e(E,X);X=X.sibling}R.type===Oo?(M=Ws(R.props.children,E.mode,W,R.key),M.return=E,E=M):(W=pc(R.type,R.key,R.props,null,E.mode,W),W.ref=pl(E,M,R),W.return=E,E=W)}return a(E);case No:t:{for(X=R.key;M!==null;){if(M.key===X)if(M.tag===4&&M.stateNode.containerInfo===R.containerInfo&&M.stateNode.implementation===R.implementation){n(E,M.sibling),M=i(M,R.children||[]),M.return=E,E=M;break t}else{n(E,M);break}else e(E,M);M=M.sibling}M=Pd(R,E.mode,W),M.return=E,E=M}return a(E);case Gr:return X=R._init,I(E,M,X(R._payload),W)}if(wl(R))return T(E,M,R,W);if(ul(R))return w(E,M,R,W);Hh(E,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,M!==null&&M.tag===6?(n(E,M.sibling),M=i(M,R),M.return=E,E=M):(n(E,M),M=Id(R,E.mode,W),M.return=E,E=M),a(E)):n(E,M)}return I}var ca=V1(!0),U1=V1(!1),Fc=ws(null),Bc=null,Ho=null,qm=null;function Zm(){qm=Ho=Bc=null}function Km(t){var e=Fc.current;ke(Fc),t._currentValue=e}function Tp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ea(t,e){Bc=t,qm=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function vi(t){var e=t._currentValue;if(qm!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(Bc===null)throw Error(bt(308));Ho=t,Bc.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var js=null;function Qm(t){js===null?js=[t]:js.push(t)}function j1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wr=!1;function Ym(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Lr(t,n)}return i=r.interleaved,i===null?(e.next=e,Qm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Lr(t,n)}function lc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Om(t,n)}}function S0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zc(t,e,n,r){var i=t.updateQueue;Wr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var h=l,c=h.next;h.next=null,a===null?s=c:a.next=c,a=h;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=c:l.next=c,p.lastBaseUpdate=h))}if(s!==null){var m=i.baseState;a=0,p=c=h=null,l=s;do{var v=l.lane,_=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var T=t,w=l;switch(v=e,_=n,w.tag){case 1:if(T=w.payload,typeof T=="function"){m=T.call(_,m,v);break t}m=T;break t;case 3:T.flags=T.flags&-65537|128;case 0:if(T=w.payload,v=typeof T=="function"?T.call(_,m,v):T,v==null)break t;m=Fe({},m,v);break t;case 2:Wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else _={eventTime:_,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(c=p=_,h=m):p=p.next=_,a|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(1);if(p===null&&(h=m),i.baseState=h,i.firstBaseUpdate=c,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xs|=a,t.lanes=a,t.memoizedState=m}}function M0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(bt(191,i));i.call(r)}}}var Ou={},Qi=ws(Ou),hu=ws(Ou),cu=ws(Ou);function $s(t){if(t===Ou)throw Error(bt(174));return t}function Xm(t,e){switch(Me(cu,e),Me(hu,t),Me(Qi,Ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ip(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ip(e,t)}ke(Qi),Me(Qi,e)}function fa(){ke(Qi),ke(hu),ke(cu)}function H1(t){$s(cu.current);var e=$s(Qi.current),n=ip(e,t.type);e!==n&&(Me(hu,t),Me(Qi,n))}function Jm(t){hu.current===t&&(ke(Qi),ke(hu))}var Ne=ws(0);function Vc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sd=[];function t_(){for(var t=0;t<Sd.length;t++)Sd[t]._workInProgressVersionPrimary=null;Sd.length=0}var uc=Ar.ReactCurrentDispatcher,Md=Ar.ReactCurrentBatchConfig,Ys=0,Oe=null,Je=null,an=null,Uc=!1,Bl=!1,fu=0,zS=0;function En(){throw Error(bt(321))}function e_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ni(t[n],e[n]))return!1;return!0}function n_(t,e,n,r,i,s){if(Ys=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uc.current=t===null||t.memoizedState===null?$S:HS,t=n(r,i),Bl){s=0;do{if(Bl=!1,fu=0,25<=s)throw Error(bt(301));s+=1,an=Je=null,e.updateQueue=null,uc.current=GS,t=n(r,i)}while(Bl)}if(uc.current=jc,e=Je!==null&&Je.next!==null,Ys=0,an=Je=Oe=null,Uc=!1,e)throw Error(bt(300));return t}function i_(){var t=fu!==0;return fu=0,t}function Gi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Oe.memoizedState=an=t:an=an.next=t,an}function yi(){if(Je===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=an===null?Oe.memoizedState:an.next;if(e!==null)an=e,Je=t;else{if(t===null)throw Error(bt(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},an===null?Oe.memoizedState=an=t:an=an.next=t}return an}function du(t,e){return typeof e=="function"?e(t):e}function Ld(t){var e=yi(),n=e.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,h=null,c=s;do{var p=c.lane;if((Ys&p)===p)h!==null&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};h===null?(l=h=m,a=r):h=h.next=m,Oe.lanes|=p,Xs|=p}c=c.next}while(c!==null&&c!==s);h===null?a=r:h.next=l,Ni(r,e.memoizedState)||(Hn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Oe.lanes|=s,Xs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cd(t){var e=yi(),n=e.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ni(s,e.memoizedState)||(Hn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function G1(){}function W1(t,e){var n=Oe,r=yi(),i=e(),s=!Ni(r.memoizedState,i);if(s&&(r.memoizedState=i,Hn=!0),r=r.queue,r_(K1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,pu(9,Z1.bind(null,n,r,i,e),void 0,null),ln===null)throw Error(bt(349));Ys&30||q1(n,e,i)}return i}function q1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z1(t,e,n,r){e.value=n,e.getSnapshot=r,Q1(e)&&Y1(t)}function K1(t,e,n){return n(function(){Q1(e)&&Y1(t)})}function Q1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ni(t,n)}catch{return!0}}function Y1(t){var e=Lr(t,1);e!==null&&Pi(e,t,1,-1)}function L0(t){var e=Gi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:du,lastRenderedState:t},e.queue=t,t=t.dispatch=jS.bind(null,Oe,t),[e.memoizedState,t]}function pu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function X1(){return yi().memoizedState}function hc(t,e,n,r){var i=Gi();Oe.flags|=t,i.memoizedState=pu(1|e,n,void 0,r===void 0?null:r)}function Tf(t,e,n,r){var i=yi();r=r===void 0?null:r;var s=void 0;if(Je!==null){var a=Je.memoizedState;if(s=a.destroy,r!==null&&e_(r,a.deps)){i.memoizedState=pu(e,n,s,r);return}}Oe.flags|=t,i.memoizedState=pu(1|e,n,s,r)}function C0(t,e){return hc(8390656,8,t,e)}function r_(t,e){return Tf(2048,8,t,e)}function J1(t,e){return Tf(4,2,t,e)}function tw(t,e){return Tf(4,4,t,e)}function ew(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nw(t,e,n){return n=n!=null?n.concat([t]):null,Tf(4,4,ew.bind(null,e,t),n)}function s_(){}function iw(t,e){var n=yi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&e_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rw(t,e){var n=yi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&e_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sw(t,e,n){return Ys&21?(Ni(n,e)||(n=h1(),Oe.lanes|=n,Xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=n)}function VS(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Md.transition;Md.transition={};try{t(!1),e()}finally{xe=n,Md.transition=r}}function ow(){return yi().memoizedState}function US(t,e,n){var r=ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aw(t))lw(e,n);else if(n=j1(t,e,n,r),n!==null){var i=Nn();Pi(n,t,r,i),uw(n,e,r)}}function jS(t,e,n){var r=ss(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aw(t))lw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Ni(l,a)){var h=e.interleaved;h===null?(i.next=i,Qm(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=j1(t,e,i,r),n!==null&&(i=Nn(),Pi(n,t,r,i),uw(n,e,r))}}function aw(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function lw(t,e){Bl=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Om(t,n)}}var jc={readContext:vi,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},$S={readContext:vi,useCallback:function(t,e){return Gi().memoizedState=[t,e===void 0?null:e],t},useContext:vi,useEffect:C0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hc(4194308,4,ew.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return hc(4,2,t,e)},useMemo:function(t,e){var n=Gi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=US.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Gi();return t={current:t},e.memoizedState=t},useState:L0,useDebugValue:s_,useDeferredValue:function(t){return Gi().memoizedState=t},useTransition:function(){var t=L0(!1),e=t[0];return t=VS.bind(null,t[1]),Gi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=Gi();if(Ie){if(n===void 0)throw Error(bt(407));n=n()}else{if(n=e(),ln===null)throw Error(bt(349));Ys&30||q1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,C0(K1.bind(null,r,s,t),[t]),r.flags|=2048,pu(9,Z1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gi(),e=ln.identifierPrefix;if(Ie){var n=xr,r=wr;n=(r&~(1<<32-Ii(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HS={readContext:vi,useCallback:iw,useContext:vi,useEffect:r_,useImperativeHandle:nw,useInsertionEffect:J1,useLayoutEffect:tw,useMemo:rw,useReducer:Ld,useRef:X1,useState:function(){return Ld(du)},useDebugValue:s_,useDeferredValue:function(t){var e=yi();return sw(e,Je.memoizedState,t)},useTransition:function(){var t=Ld(du)[0],e=yi().memoizedState;return[t,e]},useMutableSource:G1,useSyncExternalStore:W1,useId:ow,unstable_isNewReconciler:!1},GS={readContext:vi,useCallback:iw,useContext:vi,useEffect:r_,useImperativeHandle:nw,useInsertionEffect:J1,useLayoutEffect:tw,useMemo:rw,useReducer:Cd,useRef:X1,useState:function(){return Cd(du)},useDebugValue:s_,useDeferredValue:function(t){var e=yi();return Je===null?e.memoizedState=t:sw(e,Je.memoizedState,t)},useTransition:function(){var t=Cd(du)[0],e=yi().memoizedState;return[t,e]},useMutableSource:G1,useSyncExternalStore:W1,useId:ow,unstable_isNewReconciler:!1};function Ci(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sf={isMounted:function(t){return(t=t._reactInternals)?ao(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nn(),i=ss(t),s=Er(r,i);s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(Pi(e,t,i,r),lc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nn(),i=ss(t),s=Er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(Pi(e,t,i,r),lc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nn(),r=ss(t),i=Er(n,r);i.tag=2,e!=null&&(i.callback=e),e=is(t,i,r),e!==null&&(Pi(e,t,r,n),lc(e,t,r))}};function k0(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!ou(n,r)||!ou(i,s):!0}function hw(t,e,n){var r=!1,i=ds,s=e.contextType;return typeof s=="object"&&s!==null?s=vi(s):(i=Wn(e)?Ks:In.current,r=e.contextTypes,s=(r=r!=null)?ua(t,i):ds),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function b0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sf.enqueueReplaceState(e,e.state,null)}function Mp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ym(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vi(s):(s=Wn(e)?Ks:In.current,i.context=ua(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sf.enqueueReplaceState(i,i.state,null),zc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function da(t,e){try{var n="",r=e;do n+=yT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WS=typeof WeakMap=="function"?WeakMap:Map;function cw(t,e,n){n=Er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hc||(Hc=!0,Op=r),Lp(t,e)},n}function fw(t,e,n){n=Er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Lp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lp(t,e),typeof r!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function I0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=oM.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Er(-1,1),e.tag=2,is(n,e,1))),n.lanes|=1),t)}var qS=Ar.ReactCurrentOwner,Hn=!1;function Rn(t,e,n,r){e.child=t===null?U1(e,null,n,r):ca(e,t.child,n,r)}function R0(t,e,n,r,i){n=n.render;var s=e.ref;return ea(e,i),r=n_(t,e,n,r,s,i),n=i_(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(Ie&&n&&Hm(e),e.flags|=1,Rn(t,e,r,i),e.child)}function D0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!d_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dw(t,e,s,r,i)):(t=pc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:ou,n(a,r)&&t.ref===e.ref)return Cr(t,e,i)}return e.flags|=1,t=os(s,r),t.ref=e.ref,t.return=e,e.child=t}function dw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ou(s,r)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,Cr(t,e,i)}return Cp(t,e,n,r,i)}function pw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Wo,Xn),Xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Wo,Xn),Xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Me(Wo,Xn),Xn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Me(Wo,Xn),Xn|=r;return Rn(t,e,i,n),e.child}function mw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cp(t,e,n,r,i){var s=Wn(n)?Ks:In.current;return s=ua(e,s),ea(e,i),n=n_(t,e,n,r,s,i),r=i_(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(Ie&&r&&Hm(e),e.flags|=1,Rn(t,e,n,i),e.child)}function N0(t,e,n,r,i){if(Wn(n)){var s=!0;Dc(e)}else s=!1;if(ea(e,i),e.stateNode===null)cc(t,e),hw(e,n,r),Mp(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var h=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=vi(c):(c=Wn(n)?Ks:In.current,c=ua(e,c));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||h!==c)&&b0(e,a,r,c),Wr=!1;var v=e.memoizedState;a.state=v,zc(e,r,a,i),h=e.memoizedState,l!==r||v!==h||Gn.current||Wr?(typeof p=="function"&&(Sp(e,n,p,r),h=e.memoizedState),(l=Wr||k0(e,n,l,r,v,h,c))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=c,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,$1(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Ci(e.type,l),a.props=c,m=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=vi(h):(h=Wn(n)?Ks:In.current,h=ua(e,h));var _=n.getDerivedStateFromProps;(p=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||v!==h)&&b0(e,a,r,h),Wr=!1,v=e.memoizedState,a.state=v,zc(e,r,a,i);var T=e.memoizedState;l!==m||v!==T||Gn.current||Wr?(typeof _=="function"&&(Sp(e,n,_,r),T=e.memoizedState),(c=Wr||k0(e,n,c,r,v,T,h)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,T,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,T,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),a.props=r,a.state=T,a.context=h,r=c):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return kp(t,e,n,r,s,i)}function kp(t,e,n,r,i,s){mw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&w0(e,n,!1),Cr(t,e,s);r=e.stateNode,qS.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ca(e,t.child,null,s),e.child=ca(e,null,l,s)):Rn(t,e,l,s),e.memoizedState=r.state,i&&w0(e,n,!0),e.child}function _w(t){var e=t.stateNode;e.pendingContext?y0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&y0(t,e.context,!1),Xm(t,e.containerInfo)}function O0(t,e,n,r,i){return ha(),Wm(i),e.flags|=256,Rn(t,e,n,r),e.child}var bp={dehydrated:null,treeContext:null,retryLane:0};function Ip(t){return{baseLanes:t,cachePool:null,transitions:null}}function gw(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(Ne,i&1),t===null)return Ep(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Cf(a,r,0,null),t=Ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ip(n),e.memoizedState=bp,t):o_(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return ZS(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=os(i,h),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=os(l,s):(s=Ws(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Ip(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=bp,r}return s=t.child,t=s.sibling,r=os(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function o_(t,e){return e=Cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gh(t,e,n,r){return r!==null&&Wm(r),ca(e,t.child,null,n),t=o_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZS(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=kd(Error(bt(422))),Gh(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cf({mode:"visible",children:r.children},i,0,null),s=Ws(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ca(e,t.child,null,a),e.child.memoizedState=Ip(a),e.memoizedState=bp,s);if(!(e.mode&1))return Gh(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(bt(419)),r=kd(s,r,void 0),Gh(t,e,a,r)}if(l=(a&t.childLanes)!==0,Hn||l){if(r=ln,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Lr(t,i),Pi(r,t,i,-1))}return f_(),r=kd(Error(bt(421))),Gh(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jn=ns(i.nextSibling),ei=e,Ie=!0,bi=null,t!==null&&(di[pi++]=wr,di[pi++]=xr,di[pi++]=Qs,wr=t.id,xr=t.overflow,Qs=e),e=o_(e,r.children),e.flags|=4096,e)}function F0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tp(t.return,e,n)}function bd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rn(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F0(t,n,e);else if(t.tag===19)F0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Vc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),bd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Vc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}bd(e,!0,n,null,s);break;case"together":bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(bt(153));if(e.child!==null){for(t=e.child,n=os(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=os(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KS(t,e,n){switch(e.tag){case 3:_w(e),ha();break;case 5:H1(e);break;case 1:Wn(e.type)&&Dc(e);break;case 4:Xm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Me(Fc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?gw(t,e,n):(Me(Ne,Ne.current&1),t=Cr(t,e,n),t!==null?t.sibling:null);Me(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,pw(t,e,n)}return Cr(t,e,n)}var yw,Pp,ww,xw;yw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pp=function(){};ww=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$s(Qi.current);var s=null;switch(n){case"input":i=Jd(t,i),r=Jd(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=np(t,i),r=np(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ac)}rp(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var h=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&h!==l&&(h!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&l[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(s||(s=[]),s.push(c,n)),n=h;else c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,l=l?l.__html:void 0,h!=null&&l!==h&&(s=s||[]).push(c,h)):c==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(c,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jl.hasOwnProperty(c)?(h!=null&&c==="onScroll"&&Ce("scroll",t),s||l===h||(s=[])):(s=s||[]).push(c,h))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};xw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ml(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function QS(t,e,n){var r=e.pendingProps;switch(Gm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(e),null;case 1:return Wn(e.type)&&Rc(),Tn(e),null;case 3:return r=e.stateNode,fa(),ke(Gn),ke(In),t_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($h(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bi!==null&&(zp(bi),bi=null))),Pp(t,e),Tn(e),null;case 5:Jm(e);var i=$s(cu.current);if(n=e.type,t!==null&&e.stateNode!=null)ww(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(bt(166));return Tn(e),null}if(t=$s(Qi.current),$h(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wi]=e,r[uu]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<El.length;i++)Ce(El[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Wg(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":Zg(r,s),Ce("invalid",r)}rp(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&jh(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&jh(r.textContent,l,t),i=["children",""+l]):Jl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Dh(r),qg(r,s,!0);break;case"textarea":Dh(r),Kg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ac)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ky(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Wi]=e,t[uu]=r,yw(t,e,!1,!1),e.stateNode=t;t:{switch(a=sp(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<El.length;i++)Ce(El[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":Wg(t,r),i=Jd(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Zg(t,r),i=np(t,r),Ce("invalid",t);break;default:i=r}rp(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];s==="style"?Xy(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Qy(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&tu(t,h):typeof h=="number"&&tu(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jl.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Ce("scroll",t):h!=null&&Im(t,s,h,a))}switch(n){case"input":Dh(t),qg(t,r,!1);break;case"textarea":Dh(t),Kg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tn(e),null;case 6:if(t&&e.stateNode!=null)xw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(bt(166));if(n=$s(cu.current),$s(Qi.current),$h(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wi]=e,(s=r.nodeValue!==n)&&(t=ei,t!==null))switch(t.tag){case 3:jh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wi]=e,e.stateNode=r}return Tn(e),null;case 13:if(ke(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Jn!==null&&e.mode&1&&!(e.flags&128))z1(),ha(),e.flags|=98560,s=!1;else if(s=$h(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(bt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(bt(317));s[Wi]=e}else ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tn(e),s=!1}else bi!==null&&(zp(bi),bi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?en===0&&(en=3):f_())),e.updateQueue!==null&&(e.flags|=4),Tn(e),null);case 4:return fa(),Pp(t,e),t===null&&au(e.stateNode.containerInfo),Tn(e),null;case 10:return Km(e.type._context),Tn(e),null;case 17:return Wn(e.type)&&Rc(),Tn(e),null;case 19:if(ke(Ne),s=e.memoizedState,s===null)return Tn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)ml(s,!1);else{if(en!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Vc(t),a!==null){for(e.flags|=128,ml(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>pa&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304)}else{if(!r)if(t=Vc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ml(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ie)return Tn(e),null}else 2*$e()-s.renderingStartTime>pa&&n!==1073741824&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=Ne.current,Me(Ne,r?n&1|2:n&1),e):(Tn(e),null);case 22:case 23:return c_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xn&1073741824&&(Tn(e),e.subtreeFlags&6&&(e.flags|=8192)):Tn(e),null;case 24:return null;case 25:return null}throw Error(bt(156,e.tag))}function YS(t,e){switch(Gm(e),e.tag){case 1:return Wn(e.type)&&Rc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fa(),ke(Gn),ke(In),t_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jm(e),null;case 13:if(ke(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(bt(340));ha()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ne),null;case 4:return fa(),null;case 10:return Km(e.type._context),null;case 22:case 23:return c_(),null;case 24:return null;default:return null}}var Wh=!1,Cn=!1,XS=typeof WeakSet=="function"?WeakSet:Set,zt=null;function Go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Ap(t,e,n){try{n()}catch(r){ze(t,e,r)}}var B0=!1;function JS(t,e){if(mp=bc,t=L1(),$m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,h=-1,c=0,p=0,m=t,v=null;e:for(;;){for(var _;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(h=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(_=m.firstChild)!==null;)v=m,m=_;for(;;){if(m===t)break e;if(v===n&&++c===i&&(l=a),v===s&&++p===r&&(h=a),(_=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=_}n=l===-1||h===-1?null:{start:l,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(_p={focusedElem:t,selectionRange:n},bc=!1,zt=e;zt!==null;)if(e=zt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,zt=t;else for(;zt!==null;){e=zt;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var w=T.memoizedProps,I=T.memoizedState,E=e.stateNode,M=E.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ci(e.type,w),I);E.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(W){ze(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,zt=t;break}zt=e.return}return T=B0,B0=!1,T}function zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ap(e,n,s)}i=i.next}while(i!==r)}}function Mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ew(t){var e=t.alternate;e!==null&&(t.alternate=null,Ew(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wi],delete e[uu],delete e[yp],delete e[NS],delete e[OS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tw(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Tw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(t=t.child,t!==null))for(Dp(t,e,n),t=t.sibling;t!==null;)Dp(t,e,n),t=t.sibling}function Np(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Np(t,e,n),t=t.sibling;t!==null;)Np(t,e,n),t=t.sibling}var cn=null,ki=!1;function Hr(t,e,n){for(n=n.child;n!==null;)Sw(t,e,n),n=n.sibling}function Sw(t,e,n){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(gf,n)}catch{}switch(n.tag){case 5:Cn||Go(n,e);case 6:var r=cn,i=ki;cn=null,Hr(t,e,n),cn=r,ki=i,cn!==null&&(ki?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(ki?(t=cn,n=n.stateNode,t.nodeType===8?Ed(t.parentNode,n):t.nodeType===1&&Ed(t,n),ru(t)):Ed(cn,n.stateNode));break;case 4:r=cn,i=ki,cn=n.stateNode.containerInfo,ki=!0,Hr(t,e,n),cn=r,ki=i;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Ap(n,e,a),i=i.next}while(i!==r)}Hr(t,e,n);break;case 1:if(!Cn&&(Go(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ze(n,e,l)}Hr(t,e,n);break;case 21:Hr(t,e,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,Hr(t,e,n),Cn=r):Hr(t,e,n);break;default:Hr(t,e,n)}}function V0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XS),e.forEach(function(r){var i=lM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Li(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;t:for(;l!==null;){switch(l.tag){case 5:cn=l.stateNode,ki=!1;break t;case 3:cn=l.stateNode.containerInfo,ki=!0;break t;case 4:cn=l.stateNode.containerInfo,ki=!0;break t}l=l.return}if(cn===null)throw Error(bt(160));Sw(s,a,i),cn=null,ki=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(c){ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mw(e,t),e=e.sibling}function Mw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Li(e,t),$i(t),r&4){try{zl(3,t,t.return),Mf(3,t)}catch(w){ze(t,t.return,w)}try{zl(5,t,t.return)}catch(w){ze(t,t.return,w)}}break;case 1:Li(e,t),$i(t),r&512&&n!==null&&Go(n,n.return);break;case 5:if(Li(e,t),$i(t),r&512&&n!==null&&Go(n,n.return),t.flags&32){var i=t.stateNode;try{tu(i,"")}catch(w){ze(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&qy(i,s),sp(l,a);var c=sp(l,s);for(a=0;a<h.length;a+=2){var p=h[a],m=h[a+1];p==="style"?Xy(i,m):p==="dangerouslySetInnerHTML"?Qy(i,m):p==="children"?tu(i,m):Im(i,p,m,c)}switch(l){case"input":tp(i,s);break;case"textarea":Zy(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Yo(i,!!s.multiple,_,!1):v!==!!s.multiple&&(s.defaultValue!=null?Yo(i,!!s.multiple,s.defaultValue,!0):Yo(i,!!s.multiple,s.multiple?[]:"",!1))}i[uu]=s}catch(w){ze(t,t.return,w)}}break;case 6:if(Li(e,t),$i(t),r&4){if(t.stateNode===null)throw Error(bt(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){ze(t,t.return,w)}}break;case 3:if(Li(e,t),$i(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ru(e.containerInfo)}catch(w){ze(t,t.return,w)}break;case 4:Li(e,t),$i(t);break;case 13:Li(e,t),$i(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(u_=$e())),r&4&&V0(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(c=Cn)||p,Li(e,t),Cn=c):Li(e,t),$i(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!p&&t.mode&1)for(zt=t,p=t.child;p!==null;){for(m=zt=p;zt!==null;){switch(v=zt,_=v.child,v.tag){case 0:case 11:case 14:case 15:zl(4,v,v.return);break;case 1:Go(v,v.return);var T=v.stateNode;if(typeof T.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(w){ze(r,n,w)}}break;case 5:Go(v,v.return);break;case 22:if(v.memoizedState!==null){j0(m);continue}}_!==null?(_.return=v,zt=_):j0(m)}p=p.sibling}t:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,h=m.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,l.style.display=Yy("display",a))}catch(w){ze(t,t.return,w)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(w){ze(t,t.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break t;for(;m.sibling===null;){if(m.return===null||m.return===t)break t;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Li(e,t),$i(t),r&4&&V0(t);break;case 21:break;default:Li(e,t),$i(t)}}function $i(t){var e=t.flags;if(e&2){try{t:{for(var n=t.return;n!==null;){if(Tw(n)){var r=n;break t}n=n.return}throw Error(bt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tu(i,""),r.flags&=-33);var s=z0(t);Np(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=z0(t);Dp(t,l,a);break;default:throw Error(bt(161))}}catch(h){ze(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tM(t,e,n){zt=t,Lw(t)}function Lw(t,e,n){for(var r=(t.mode&1)!==0;zt!==null;){var i=zt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Wh;if(!a){var l=i.alternate,h=l!==null&&l.memoizedState!==null||Cn;l=Wh;var c=Cn;if(Wh=a,(Cn=h)&&!c)for(zt=i;zt!==null;)a=zt,h=a.child,a.tag===22&&a.memoizedState!==null?$0(i):h!==null?(h.return=a,zt=h):$0(i);for(;s!==null;)zt=s,Lw(s),s=s.sibling;zt=i,Wh=l,Cn=c}U0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,zt=s):U0(t)}}function U0(t){for(;zt!==null;){var e=zt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||Mf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ci(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&M0(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M0(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ru(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}Cn||e.flags&512&&Rp(e)}catch(v){ze(e,e.return,v)}}if(e===t){zt=null;break}if(n=e.sibling,n!==null){n.return=e.return,zt=n;break}zt=e.return}}function j0(t){for(;zt!==null;){var e=zt;if(e===t){zt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,zt=n;break}zt=e.return}}function $0(t){for(;zt!==null;){var e=zt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mf(4,e)}catch(h){ze(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){ze(e,i,h)}}var s=e.return;try{Rp(e)}catch(h){ze(e,s,h)}break;case 5:var a=e.return;try{Rp(e)}catch(h){ze(e,a,h)}}}catch(h){ze(e,e.return,h)}if(e===t){zt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,zt=l;break}zt=e.return}}var eM=Math.ceil,$c=Ar.ReactCurrentDispatcher,a_=Ar.ReactCurrentOwner,_i=Ar.ReactCurrentBatchConfig,me=0,ln=null,Ke=null,mn=0,Xn=0,Wo=ws(0),en=0,mu=null,Xs=0,Lf=0,l_=0,Vl=null,Un=null,u_=0,pa=1/0,vr=null,Hc=!1,Op=null,rs=null,qh=!1,Qr=null,Gc=0,Ul=0,Fp=null,fc=-1,dc=0;function Nn(){return me&6?$e():fc!==-1?fc:fc=$e()}function ss(t){return t.mode&1?me&2&&mn!==0?mn&-mn:BS.transition!==null?(dc===0&&(dc=h1()),dc):(t=xe,t!==0||(t=window.event,t=t===void 0?16:g1(t.type)),t):1}function Pi(t,e,n,r){if(50<Ul)throw Ul=0,Fp=null,Error(bt(185));Ru(t,n,r),(!(me&2)||t!==ln)&&(t===ln&&(!(me&2)&&(Lf|=n),en===4&&Zr(t,mn)),qn(t,r),n===1&&me===0&&!(e.mode&1)&&(pa=$e()+500,Ef&&xs()))}function qn(t,e){var n=t.callbackNode;BT(t,e);var r=kc(t,t===ln?mn:0);if(r===0)n!==null&&Xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xg(n),e===1)t.tag===0?FS(H0.bind(null,t)):O1(H0.bind(null,t)),RS(function(){!(me&6)&&xs()}),n=null;else{switch(c1(r)){case 1:n=Nm;break;case 4:n=l1;break;case 16:n=Cc;break;case 536870912:n=u1;break;default:n=Cc}n=Dw(n,Cw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cw(t,e){if(fc=-1,dc=0,me&6)throw Error(bt(327));var n=t.callbackNode;if(na()&&t.callbackNode!==n)return null;var r=kc(t,t===ln?mn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wc(t,r);else{e=r;var i=me;me|=2;var s=bw();(ln!==t||mn!==e)&&(vr=null,pa=$e()+500,Gs(t,e));do try{rM();break}catch(l){kw(t,l)}while(1);Zm(),$c.current=s,me=i,Ke!==null?e=0:(ln=null,mn=0,e=en)}if(e!==0){if(e===2&&(i=hp(t),i!==0&&(r=i,e=Bp(t,i))),e===1)throw n=mu,Gs(t,0),Zr(t,r),qn(t,$e()),n;if(e===6)Zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!nM(i)&&(e=Wc(t,r),e===2&&(s=hp(t),s!==0&&(r=s,e=Bp(t,s))),e===1))throw n=mu,Gs(t,0),Zr(t,r),qn(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(bt(345));case 2:Bs(t,Un,vr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=u_+500-$e(),10<e)){if(kc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vp(Bs.bind(null,t,Un,vr),e);break}Bs(t,Un,vr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ii(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eM(r/1960))-r,10<r){t.timeoutHandle=vp(Bs.bind(null,t,Un,vr),r);break}Bs(t,Un,vr);break;case 5:Bs(t,Un,vr);break;default:throw Error(bt(329))}}}return qn(t,$e()),t.callbackNode===n?Cw.bind(null,t):null}function Bp(t,e){var n=Vl;return t.current.memoizedState.isDehydrated&&(Gs(t,e).flags|=256),t=Wc(t,e),t!==2&&(e=Un,Un=n,e!==null&&zp(e)),t}function zp(t){Un===null?Un=t:Un.push.apply(Un,t)}function nM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ni(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~l_,e&=~Lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ii(e),r=1<<n;t[n]=-1,e&=~r}}function H0(t){if(me&6)throw Error(bt(327));na();var e=kc(t,0);if(!(e&1))return qn(t,$e()),null;var n=Wc(t,e);if(t.tag!==0&&n===2){var r=hp(t);r!==0&&(e=r,n=Bp(t,r))}if(n===1)throw n=mu,Gs(t,0),Zr(t,e),qn(t,$e()),n;if(n===6)throw Error(bt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bs(t,Un,vr),qn(t,$e()),null}function h_(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(pa=$e()+500,Ef&&xs())}}function Js(t){Qr!==null&&Qr.tag===0&&!(me&6)&&na();var e=me;me|=1;var n=_i.transition,r=xe;try{if(_i.transition=null,xe=1,t)return t()}finally{xe=r,_i.transition=n,me=e,!(me&6)&&xs()}}function c_(){Xn=Wo.current,ke(Wo)}function Gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AS(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Gm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rc();break;case 3:fa(),ke(Gn),ke(In),t_();break;case 5:Jm(r);break;case 4:fa();break;case 13:ke(Ne);break;case 19:ke(Ne);break;case 10:Km(r.type._context);break;case 22:case 23:c_()}n=n.return}if(ln=t,Ke=t=os(t.current,null),mn=Xn=e,en=0,mu=null,l_=Lf=Xs=0,Un=Vl=null,js!==null){for(e=0;e<js.length;e++)if(n=js[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}js=null}return t}function kw(t,e){do{var n=Ke;try{if(Zm(),uc.current=jc,Uc){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Uc=!1}if(Ys=0,an=Je=Oe=null,Bl=!1,fu=0,a_.current=null,n===null||n.return===null){en=1,mu=e,Ke=null;break}t:{var s=t,a=n.return,l=n,h=e;if(e=mn,l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var c=h,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=P0(a);if(_!==null){_.flags&=-257,A0(_,a,l,s,e),_.mode&1&&I0(s,c,e),e=_,h=c;var T=e.updateQueue;if(T===null){var w=new Set;w.add(h),e.updateQueue=w}else T.add(h);break t}else{if(!(e&1)){I0(s,c,e),f_();break t}h=Error(bt(426))}}else if(Ie&&l.mode&1){var I=P0(a);if(I!==null){!(I.flags&65536)&&(I.flags|=256),A0(I,a,l,s,e),Wm(da(h,l));break t}}s=h=da(h,l),en!==4&&(en=2),Vl===null?Vl=[s]:Vl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=cw(s,h,e);S0(s,E);break t;case 1:l=h;var M=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof M.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(rs===null||!rs.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var W=fw(s,l,e);S0(s,W);break t}}s=s.return}while(s!==null)}Pw(n)}catch(q){e=q,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function bw(){var t=$c.current;return $c.current=jc,t===null?jc:t}function f_(){(en===0||en===3||en===2)&&(en=4),ln===null||!(Xs&268435455)&&!(Lf&268435455)||Zr(ln,mn)}function Wc(t,e){var n=me;me|=2;var r=bw();(ln!==t||mn!==e)&&(vr=null,Gs(t,e));do try{iM();break}catch(i){kw(t,i)}while(1);if(Zm(),me=n,$c.current=r,Ke!==null)throw Error(bt(261));return ln=null,mn=0,en}function iM(){for(;Ke!==null;)Iw(Ke)}function rM(){for(;Ke!==null&&!bT();)Iw(Ke)}function Iw(t){var e=Rw(t.alternate,t,Xn);t.memoizedProps=t.pendingProps,e===null?Pw(t):Ke=e,a_.current=null}function Pw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YS(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{en=6,Ke=null;return}}else if(n=QS(n,e,Xn),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);en===0&&(en=5)}function Bs(t,e,n){var r=xe,i=_i.transition;try{_i.transition=null,xe=1,sM(t,e,n,r)}finally{_i.transition=i,xe=r}return null}function sM(t,e,n,r){do na();while(Qr!==null);if(me&6)throw Error(bt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(bt(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zT(t,s),t===ln&&(Ke=ln=null,mn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qh||(qh=!0,Dw(Cc,function(){return na(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_i.transition,_i.transition=null;var a=xe;xe=1;var l=me;me|=4,a_.current=null,JS(t,n),Mw(n,t),MS(_p),bc=!!mp,_p=mp=null,t.current=n,tM(n),IT(),me=l,xe=a,_i.transition=s}else t.current=n;if(qh&&(qh=!1,Qr=t,Gc=i),s=t.pendingLanes,s===0&&(rs=null),RT(n.stateNode),qn(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,t=Op,Op=null,t;return Gc&1&&t.tag!==0&&na(),s=t.pendingLanes,s&1?t===Fp?Ul++:(Ul=0,Fp=t):Ul=0,xs(),null}function na(){if(Qr!==null){var t=c1(Gc),e=_i.transition,n=xe;try{if(_i.transition=null,xe=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,Gc=0,me&6)throw Error(bt(331));var i=me;for(me|=4,zt=t.current;zt!==null;){var s=zt,a=s.child;if(zt.flags&16){var l=s.deletions;if(l!==null){for(var h=0;h<l.length;h++){var c=l[h];for(zt=c;zt!==null;){var p=zt;switch(p.tag){case 0:case 11:case 15:zl(8,p,s)}var m=p.child;if(m!==null)m.return=p,zt=m;else for(;zt!==null;){p=zt;var v=p.sibling,_=p.return;if(Ew(p),p===c){zt=null;break}if(v!==null){v.return=_,zt=v;break}zt=_}}}var T=s.alternate;if(T!==null){var w=T.child;if(w!==null){T.child=null;do{var I=w.sibling;w.sibling=null,w=I}while(w!==null)}}zt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,zt=a;else t:for(;zt!==null;){if(s=zt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zl(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,zt=E;break t}zt=s.return}}var M=t.current;for(zt=M;zt!==null;){a=zt;var R=a.child;if(a.subtreeFlags&2064&&R!==null)R.return=a,zt=R;else t:for(a=M;zt!==null;){if(l=zt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mf(9,l)}}catch(q){ze(l,l.return,q)}if(l===a){zt=null;break t}var W=l.sibling;if(W!==null){W.return=l.return,zt=W;break t}zt=l.return}}if(me=i,xs(),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(gf,t)}catch{}r=!0}return r}finally{xe=n,_i.transition=e}}return!1}function G0(t,e,n){e=da(n,e),e=cw(t,e,1),t=is(t,e,1),e=Nn(),t!==null&&(Ru(t,1,e),qn(t,e))}function ze(t,e,n){if(t.tag===3)G0(t,t,n);else for(;e!==null;){if(e.tag===3){G0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rs===null||!rs.has(r))){t=da(n,t),t=fw(e,t,1),e=is(e,t,1),t=Nn(),e!==null&&(Ru(e,1,t),qn(e,t));break}}e=e.return}}function oM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nn(),t.pingedLanes|=t.suspendedLanes&n,ln===t&&(mn&n)===n&&(en===4||en===3&&(mn&130023424)===mn&&500>$e()-u_?Gs(t,0):l_|=n),qn(t,e)}function Aw(t,e){e===0&&(t.mode&1?(e=Fh,Fh<<=1,!(Fh&130023424)&&(Fh=4194304)):e=1);var n=Nn();t=Lr(t,e),t!==null&&(Ru(t,e,n),qn(t,n))}function aM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Aw(t,n)}function lM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(bt(314))}r!==null&&r.delete(e),Aw(t,n)}var Rw;Rw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gn.current)Hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hn=!1,KS(t,e,n);Hn=!!(t.flags&131072)}else Hn=!1,Ie&&e.flags&1048576&&F1(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cc(t,e),t=e.pendingProps;var i=ua(e,In.current);ea(e,n),i=n_(null,e,r,t,i,n);var s=i_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wn(r)?(s=!0,Dc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ym(e),i.updater=Sf,e.stateNode=i,i._reactInternals=e,Mp(e,r,t,n),e=kp(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&Hm(e),Rn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(cc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=hM(r),t=Ci(r,t),i){case 0:e=Cp(null,e,r,t,n);break t;case 1:e=N0(null,e,r,t,n);break t;case 11:e=R0(null,e,r,t,n);break t;case 14:e=D0(null,e,r,Ci(r.type,t),n);break t}throw Error(bt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),Cp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),N0(t,e,r,i,n);case 3:t:{if(_w(e),t===null)throw Error(bt(387));r=e.pendingProps,s=e.memoizedState,i=s.element,$1(t,e),zc(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=da(Error(bt(423)),e),e=O0(t,e,r,n,i);break t}else if(r!==i){i=da(Error(bt(424)),e),e=O0(t,e,r,n,i);break t}else for(Jn=ns(e.stateNode.containerInfo.firstChild),ei=e,Ie=!0,bi=null,n=U1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ha(),r===i){e=Cr(t,e,n);break t}Rn(t,e,r,n)}e=e.child}return e;case 5:return H1(e),t===null&&Ep(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,gp(r,i)?a=null:s!==null&&gp(r,s)&&(e.flags|=32),mw(t,e),Rn(t,e,a,n),e.child;case 6:return t===null&&Ep(e),null;case 13:return gw(t,e,n);case 4:return Xm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ca(e,null,r,n):Rn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),R0(t,e,r,i,n);case 7:return Rn(t,e,e.pendingProps,n),e.child;case 8:return Rn(t,e,e.pendingProps.children,n),e.child;case 12:return Rn(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Me(Fc,r._currentValue),r._currentValue=a,s!==null)if(Ni(s.value,a)){if(s.children===i.children&&!Gn.current){e=Cr(t,e,n);break t}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var h=l.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=Er(-1,n&-n),h.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?h.next=h:(h.next=p.next,p.next=h),c.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),Tp(s.return,n,e),l.lanes|=n;break}h=h.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(bt(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Tp(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Rn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ea(e,n),i=vi(i),r=r(i),e.flags|=1,Rn(t,e,r,n),e.child;case 14:return r=e.type,i=Ci(r,e.pendingProps),i=Ci(r.type,i),D0(t,e,r,i,n);case 15:return dw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),cc(t,e),e.tag=1,Wn(r)?(t=!0,Dc(e)):t=!1,ea(e,n),hw(e,r,i),Mp(e,r,i,n),kp(null,e,r,!0,t,n);case 19:return vw(t,e,n);case 22:return pw(t,e,n)}throw Error(bt(156,e.tag))};function Dw(t,e){return a1(t,e)}function uM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,e,n,r){return new uM(t,e,n,r)}function d_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hM(t){if(typeof t=="function")return d_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Am)return 11;if(t===Rm)return 14}return 2}function os(t,e){var n=t.alternate;return n===null?(n=mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pc(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")d_(t)&&(a=1);else if(typeof t=="string")a=5;else t:switch(t){case Oo:return Ws(n.children,i,s,e);case Pm:a=8,i|=8;break;case Kd:return t=mi(12,n,e,i|2),t.elementType=Kd,t.lanes=s,t;case Qd:return t=mi(13,n,e,i),t.elementType=Qd,t.lanes=s,t;case Yd:return t=mi(19,n,e,i),t.elementType=Yd,t.lanes=s,t;case Hy:return Cf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jy:a=10;break t;case $y:a=9;break t;case Am:a=11;break t;case Rm:a=14;break t;case Gr:a=16,r=null;break t}throw Error(bt(130,t==null?t:typeof t,""))}return e=mi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ws(t,e,n,r){return t=mi(7,t,r,e),t.lanes=n,t}function Cf(t,e,n,r){return t=mi(22,t,r,e),t.elementType=Hy,t.lanes=n,t.stateNode={isHidden:!1},t}function Id(t,e,n){return t=mi(6,t,null,e),t.lanes=n,t}function Pd(t,e,n){return e=mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function p_(t,e,n,r,i,s,a,l,h){return t=new cM(t,e,n,l,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ym(s),t}function fM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:No,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Nw(t){if(!t)return ds;t=t._reactInternals;t:{if(ao(t)!==t||t.tag!==1)throw Error(bt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(bt(171))}if(t.tag===1){var n=t.type;if(Wn(n))return N1(t,n,e)}return e}function Ow(t,e,n,r,i,s,a,l,h){return t=p_(n,r,!0,t,i,s,a,l,h),t.context=Nw(null),n=t.current,r=Nn(),i=ss(n),s=Er(r,i),s.callback=e??null,is(n,s,i),t.current.lanes=i,Ru(t,i,r),qn(t,r),t}function kf(t,e,n,r){var i=e.current,s=Nn(),a=ss(i);return n=Nw(n),e.context===null?e.context=n:e.pendingContext=n,e=Er(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=is(i,e,a),t!==null&&(Pi(t,i,a,s),lc(t,i,a)),a}function qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function m_(t,e){W0(t,e),(t=t.alternate)&&W0(t,e)}function dM(){return null}var Fw=typeof reportError=="function"?reportError:function(t){console.error(t)};function __(t){this._internalRoot=t}bf.prototype.render=__.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(bt(409));kf(t,e,null,null)};bf.prototype.unmount=__.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Js(function(){kf(null,t,null,null)}),e[Mr]=null}};function bf(t){this._internalRoot=t}bf.prototype.unstable_scheduleHydration=function(t){if(t){var e=p1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&_1(t)}};function g_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function q0(){}function pM(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=qc(a);s.call(c)}}var a=Ow(e,r,t,0,null,!1,!1,"",q0);return t._reactRootContainer=a,t[Mr]=a.current,au(t.nodeType===8?t.parentNode:t),Js(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=qc(h);l.call(c)}}var h=p_(t,0,!1,null,null,!1,!1,"",q0);return t._reactRootContainer=h,t[Mr]=h.current,au(t.nodeType===8?t.parentNode:t),Js(function(){kf(e,h,n,r)}),h}function Pf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var h=qc(a);l.call(h)}}kf(e,a,t,i)}else a=pM(n,e,t,i,r);return qc(a)}f1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xl(e.pendingLanes);n!==0&&(Om(e,n|1),qn(e,$e()),!(me&6)&&(pa=$e()+500,xs()))}break;case 13:Js(function(){var r=Lr(t,1);if(r!==null){var i=Nn();Pi(r,t,1,i)}}),m_(t,1)}};Fm=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=Nn();Pi(e,t,134217728,n)}m_(t,134217728)}};d1=function(t){if(t.tag===13){var e=ss(t),n=Lr(t,e);if(n!==null){var r=Nn();Pi(n,t,e,r)}m_(t,e)}};p1=function(){return xe};m1=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};ap=function(t,e,n){switch(e){case"input":if(tp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xf(r);if(!i)throw Error(bt(90));Wy(r),tp(r,i)}}}break;case"textarea":Zy(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};e1=h_;n1=Js;var mM={usingClientEntryPoint:!1,Events:[Nu,Vo,xf,Jy,t1,h_]},_l={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_M={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=s1(t),t===null?null:t.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance||dM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{gf=Zh.inject(_M),Ki=Zh}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mM;ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g_(e))throw Error(bt(200));return fM(t,e,null,n)};ri.createRoot=function(t,e){if(!g_(t))throw Error(bt(299));var n=!1,r="",i=Fw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=p_(t,1,!1,null,null,n,!1,r,i),t[Mr]=e.current,au(t.nodeType===8?t.parentNode:t),new __(e)};ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(bt(188)):(t=Object.keys(t).join(","),Error(bt(268,t)));return t=s1(e),t=t===null?null:t.stateNode,t};ri.flushSync=function(t){return Js(t)};ri.hydrate=function(t,e,n){if(!If(e))throw Error(bt(200));return Pf(null,t,e,!0,n)};ri.hydrateRoot=function(t,e,n){if(!g_(t))throw Error(bt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Fw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ow(e,null,t,1,n??null,i,!1,s,a),t[Mr]=e.current,au(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new bf(e)};ri.render=function(t,e,n){if(!If(e))throw Error(bt(200));return Pf(null,t,e,!1,n)};ri.unmountComponentAtNode=function(t){if(!If(t))throw Error(bt(40));return t._reactRootContainer?(Js(function(){Pf(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};ri.unstable_batchedUpdates=h_;ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!If(n))throw Error(bt(200));if(t==null||t._reactInternals===void 0)throw Error(bt(38));return Pf(t,e,n,!1,r)};ri.version="18.3.1-next-f1338f8080-20240426";function Bw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bw)}catch(t){console.error(t)}}Bw(),By.exports=ri;var gM=By.exports,Z0=gM;qd.createRoot=Z0.createRoot,qd.hydrateRoot=Z0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_u.apply(this,arguments)}var Yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yr||(Yr={}));const K0="popstate";function vM(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return Vp("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Zc(i)}return wM(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yM(){return Math.random().toString(36).substr(2,8)}function Q0(t,e){return{usr:t.state,key:t.key,idx:e}}function Vp(t,e,n,r){return n===void 0&&(n=null),_u({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ca(e):e,{state:n,key:e&&e.key||r||yM()})}function Zc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ca(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wM(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=Yr.Pop,h=null,c=p();c==null&&(c=0,a.replaceState(_u({},a.state,{idx:c}),""));function p(){return(a.state||{idx:null}).idx}function m(){l=Yr.Pop;let I=p(),E=I==null?null:I-c;c=I,h&&h({action:l,location:w.location,delta:E})}function v(I,E){l=Yr.Push;let M=Vp(w.location,I,E);n&&n(M,I),c=p()+1;let R=Q0(M,c),W=w.createHref(M);try{a.pushState(R,"",W)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(W)}s&&h&&h({action:l,location:w.location,delta:1})}function _(I,E){l=Yr.Replace;let M=Vp(w.location,I,E);n&&n(M,I),c=p();let R=Q0(M,c),W=w.createHref(M);a.replaceState(R,"",W),s&&h&&h({action:l,location:w.location,delta:0})}function T(I){let E=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof I=="string"?I:Zc(I);return M=M.replace(/ $/,"%20"),Qe(E,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,E)}let w={get action(){return l},get location(){return t(i,a)},listen(I){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(K0,m),h=I,()=>{i.removeEventListener(K0,m),h=null}},createHref(I){return e(i,I)},createURL:T,encodeLocation(I){let E=T(I);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:_,go(I){return a.go(I)}};return w}var Y0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Y0||(Y0={}));function xM(t,e,n){return n===void 0&&(n="/"),EM(t,e,n,!1)}function EM(t,e,n,r){let i=typeof e=="string"?Ca(e):e,s=v_(i.pathname||"/",n);if(s==null)return null;let a=Vw(t);TM(a);let l=null;for(let h=0;l==null&&h<a.length;++h){let c=DM(s);l=AM(a[h],c,r)}return l}function Vw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let h={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};h.relativePath.startsWith("/")&&(Qe(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let c=as([r,h.relativePath]),p=n.concat(h);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Vw(s.children,e,p,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:IM(c,s.index),routesMeta:p})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let h of Uw(s.path))i(s,a,h)}),e}function Uw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Uw(r.join("/")),l=[];return l.push(...a.map(h=>h===""?s:[s,h].join("/"))),i&&l.push(...a),l.map(h=>t.startsWith("/")&&h===""?"/":h)}function TM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SM=/^:[\w-]+$/,MM=3,LM=2,CM=1,kM=10,bM=-2,X0=t=>t==="*";function IM(t,e){let n=t.split("/"),r=n.length;return n.some(X0)&&(r+=bM),e&&(r+=LM),n.filter(i=>!X0(i)).reduce((i,s)=>i+(SM.test(s)?MM:s===""?CM:kM),r)}function PM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function AM(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",a=[];for(let l=0;l<r.length;++l){let h=r[l],c=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=J0({path:h.relativePath,caseSensitive:h.caseSensitive,end:c},p),v=h.route;if(!m&&c&&n&&!r[r.length-1].route.index&&(m=J0({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:as([s,m.pathname]),pathnameBase:BM(as([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=as([s,m.pathnameBase]))}return a}function J0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,p,m)=>{let{paramName:v,isOptional:_}=p;if(v==="*"){let w=l[m]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const T=l[m];return _&&!T?c[v]=void 0:c[v]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function RM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,h)=>(r.push({paramName:l,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function v_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function NM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ca(t):t;return{pathname:n?n.startsWith("/")?n:OM(n,e):e,search:zM(r),hash:VM(i)}}function OM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ad(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jw(t,e){let n=FM(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $w(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ca(t):(i=_u({},t),Qe(!i.pathname||!i.pathname.includes("?"),Ad("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),Ad("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),Ad("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}l=m>=0?e[m]:"/"}let h=NM(i,l),c=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(c||p)&&(h.pathname+="/"),h}const as=t=>t.join("/").replace(/\/\/+/g,"/"),BM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Hw=["post","put","patch","delete"];new Set(Hw);const jM=["get",...Hw];new Set(jM);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gu(){return gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gu.apply(this,arguments)}const y_=Tt.createContext(null),$M=Tt.createContext(null),lo=Tt.createContext(null),Af=Tt.createContext(null),Es=Tt.createContext({outlet:null,matches:[],isDataRoute:!1}),Gw=Tt.createContext(null);function HM(t,e){let{relative:n}=e===void 0?{}:e;Fu()||Qe(!1);let{basename:r,navigator:i}=Tt.useContext(lo),{hash:s,pathname:a,search:l}=qw(t,{relative:n}),h=a;return r!=="/"&&(h=a==="/"?r:as([r,a])),i.createHref({pathname:h,search:l,hash:s})}function Fu(){return Tt.useContext(Af)!=null}function Rf(){return Fu()||Qe(!1),Tt.useContext(Af).location}function Ww(t){Tt.useContext(lo).static||Tt.useLayoutEffect(t)}function w_(){let{isDataRoute:t}=Tt.useContext(Es);return t?rL():GM()}function GM(){Fu()||Qe(!1);let t=Tt.useContext(y_),{basename:e,future:n,navigator:r}=Tt.useContext(lo),{matches:i}=Tt.useContext(Es),{pathname:s}=Rf(),a=JSON.stringify(jw(i,n.v7_relativeSplatPath)),l=Tt.useRef(!1);return Ww(()=>{l.current=!0}),Tt.useCallback(function(c,p){if(p===void 0&&(p={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=$w(c,JSON.parse(a),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:as([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,a,s,t])}function WM(){let{matches:t}=Tt.useContext(Es),e=t[t.length-1];return e?e.params:{}}function qw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Tt.useContext(lo),{matches:i}=Tt.useContext(Es),{pathname:s}=Rf(),a=JSON.stringify(jw(i,r.v7_relativeSplatPath));return Tt.useMemo(()=>$w(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function qM(t,e){return ZM(t,e)}function ZM(t,e,n,r){Fu()||Qe(!1);let{navigator:i,static:s}=Tt.useContext(lo),{matches:a}=Tt.useContext(Es),l=a[a.length-1],h=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let p=Rf(),m;if(e){var v;let E=typeof e=="string"?Ca(e):e;c==="/"||(v=E.pathname)!=null&&v.startsWith(c)||Qe(!1),m=E}else m=p;let _=m.pathname||"/",T=_;if(c!=="/"){let E=c.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(E.length).join("/")}let w=!s&&n&&n.matches&&n.matches.length>0?n.matches:xM(t,{pathname:T}),I=JM(w&&w.map(E=>Object.assign({},E,{params:Object.assign({},h,E.params),pathname:as([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:as([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,n,r);return e&&I?Tt.createElement(Af.Provider,{value:{location:gu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Yr.Pop}},I):I}function KM(){let t=iL(),e=UM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return Tt.createElement(Tt.Fragment,null,Tt.createElement("h2",null,"Unexpected Application Error!"),Tt.createElement("h3",{style:{fontStyle:"italic"}},e),n?Tt.createElement("pre",{style:i},n):null,s)}const QM=Tt.createElement(KM,null);class YM extends Tt.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Tt.createElement(Es.Provider,{value:this.props.routeContext},Tt.createElement(Gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XM(t){let{routeContext:e,match:n,children:r}=t,i=Tt.useContext(y_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Tt.createElement(Es.Provider,{value:e},r)}function JM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Qe(!1),a=a.slice(0,Math.min(a.length,p+1))}let h=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=p),m.route.id){let{loaderData:v,errors:_}=n,T=m.route.loader&&v[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||T){h=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((p,m,v)=>{let _,T=!1,w=null,I=null;n&&(_=l&&m.route.id?l[m.route.id]:void 0,w=m.route.errorElement||QM,h&&(c<0&&v===0?(sL("route-fallback",!1),T=!0,I=null):c===v&&(T=!0,I=m.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,v+1)),M=()=>{let R;return _?R=w:T?R=I:m.route.Component?R=Tt.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,Tt.createElement(XM,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:R})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?Tt.createElement(YM,{location:n.location,revalidation:n.revalidation,component:w,error:_,children:M(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):M()},null)}var Zw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Zw||{}),Kc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Kc||{});function tL(t){let e=Tt.useContext(y_);return e||Qe(!1),e}function eL(t){let e=Tt.useContext($M);return e||Qe(!1),e}function nL(t){let e=Tt.useContext(Es);return e||Qe(!1),e}function Kw(t){let e=nL(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function iL(){var t;let e=Tt.useContext(Gw),n=eL(Kc.UseRouteError),r=Kw(Kc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rL(){let{router:t}=tL(Zw.UseNavigateStable),e=Kw(Kc.UseNavigateStable),n=Tt.useRef(!1);return Ww(()=>{n.current=!0}),Tt.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,gu({fromRouteId:e},s)))},[t,e])}const tv={};function sL(t,e,n){!e&&!tv[t]&&(tv[t]=!0)}function oL(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Up(t){Qe(!1)}function aL(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yr.Pop,navigator:s,static:a=!1,future:l}=t;Fu()&&Qe(!1);let h=e.replace(/^\/*/,"/"),c=Tt.useMemo(()=>({basename:h,navigator:s,static:a,future:gu({v7_relativeSplatPath:!1},l)}),[h,l,s,a]);typeof r=="string"&&(r=Ca(r));let{pathname:p="/",search:m="",hash:v="",state:_=null,key:T="default"}=r,w=Tt.useMemo(()=>{let I=v_(p,h);return I==null?null:{location:{pathname:I,search:m,hash:v,state:_,key:T},navigationType:i}},[h,p,m,v,_,T,i]);return w==null?null:Tt.createElement(lo.Provider,{value:c},Tt.createElement(Af.Provider,{children:n,value:w}))}function lL(t){let{children:e,location:n}=t;return qM(jp(e),n)}new Promise(()=>{});function jp(t,e){e===void 0&&(e=[]);let n=[];return Tt.Children.forEach(t,(r,i)=>{if(!Tt.isValidElement(r))return;let s=[...e,i];if(r.type===Tt.Fragment){n.push.apply(n,jp(r.props.children,s));return}r.type!==Up&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=jp(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $p(){return $p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$p.apply(this,arguments)}function uL(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cL(t,e){return t.button===0&&(!e||e==="_self")&&!hL(t)}const fL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dL="6";try{window.__reactRouterVersion=dL}catch{}const pL="startTransition",ev=oT[pL];function mL(t){let{basename:e,children:n,future:r,window:i}=t,s=Tt.useRef();s.current==null&&(s.current=vM({window:i,v5Compat:!0}));let a=s.current,[l,h]=Tt.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},p=Tt.useCallback(m=>{c&&ev?ev(()=>h(m)):h(m)},[h,c]);return Tt.useLayoutEffect(()=>a.listen(p),[a,p]),Tt.useEffect(()=>oL(r),[r]),Tt.createElement(aL,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const _L=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vL=Tt.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:h,to:c,preventScrollReset:p,viewTransition:m}=e,v=uL(e,fL),{basename:_}=Tt.useContext(lo),T,w=!1;if(typeof c=="string"&&gL.test(c)&&(T=c,_L))try{let R=new URL(window.location.href),W=c.startsWith("//")?new URL(R.protocol+c):new URL(c),q=v_(W.pathname,_);W.origin===R.origin&&q!=null?c=q+W.search+W.hash:w=!0}catch{}let I=HM(c,{relative:i}),E=yL(c,{replace:a,state:l,target:h,preventScrollReset:p,relative:i,viewTransition:m});function M(R){r&&r(R),R.defaultPrevented||E(R)}return Tt.createElement("a",$p({},v,{href:T||I,onClick:w||s?r:M,ref:n,target:h}))});var nv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nv||(nv={}));var iv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(iv||(iv={}));function yL(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=e===void 0?{}:e,h=w_(),c=Rf(),p=qw(t,{relative:a});return Tt.useCallback(m=>{if(cL(m,n)){m.preventDefault();let v=r!==void 0?r:Zc(c)===Zc(p);h(t,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[c,h,p,r,i,n,t,s,a,l])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Yw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,h=i+2<t.length,c=h?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|c>>6,_=c&63;h||(_=64,a||(v=64)),r.push(n[p],n[m],n[v],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new xL;const v=s<<2|l>>4;if(r.push(v),c!==64){const _=l<<4&240|c>>2;if(r.push(_),m!==64){const T=c<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EL=function(t){const e=Qw(t);return Yw.encodeByteArray(e,!0)},Qc=function(t){return EL(t).replace(/\./g,"")},TL=function(t){try{return Yw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(){if(typeof self<"u")return self;if(typeof window<"u"||typeof window<"u")return window;throw new Error("Unable to locate window object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=()=>SL().__FIREBASE_DEFAULTS__,LL=()=>{if(typeof process>"u"||typeof{}>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TL(t[1]);return e&&JSON.parse(e)},x_=()=>{try{return ML()||LL()||CL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kL=t=>{var e,n;return(n=(e=x_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bL=t=>{const e=kL(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xw=()=>{var t;return(t=x_())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Qc(JSON.stringify(n)),Qc(JSON.stringify(a)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RL(){var t;const e=(t=x_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(window.process)==="[object process]"}catch{return!1}}function DL(){return!RL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NL(){try{return typeof indexedDB=="object"}catch{return!1}}function OL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="FirebaseError";class ka extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FL,Object.setPrototypeOf(this,ka.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jw.prototype.create)}}class Jw{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?BL(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new ka(i,l,r)}}function BL(t,e){return t.replace(zL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zL=/\{\$([^}]+)}/g;function Hp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(rv(s)&&rv(a)){if(!Hp(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t){return t&&t._delegate?t._delegate:t}class vu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jL(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UL(t){return t===zs?void 0:t}function jL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const HL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},GL=pe.INFO,WL={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},qL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tx{constructor(e){this.name=e,this._logLevel=GL,this._logHandler=qL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const ZL=(t,e)=>e.some(n=>t instanceof n);let sv,ov;function KL(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QL(){return ov||(ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ex=new WeakMap,Gp=new WeakMap,nx=new WeakMap,Rd=new WeakMap,E_=new WeakMap;function YL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(ls(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&ex.set(n,t)}).catch(()=>{}),E_.set(e,t),e}function XL(t){if(Gp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Gp.set(t,e)}let Wp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JL(t){Wp=t(Wp)}function tC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dd(this),e,...n);return nx.set(r,e.sort?e.sort():[e]),ls(r)}:QL().includes(t)?function(...e){return t.apply(Dd(this),e),ls(ex.get(this))}:function(...e){return ls(t.apply(Dd(this),e))}}function eC(t){return typeof t=="function"?tC(t):(t instanceof IDBTransaction&&XL(t),ZL(t,KL())?new Proxy(t,Wp):t)}function ls(t){if(t instanceof IDBRequest)return YL(t);if(Rd.has(t))return Rd.get(t);const e=eC(t);return e!==t&&(Rd.set(t,e),E_.set(e,t)),e}const Dd=t=>E_.get(t);function nC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=ls(a);return r&&a.addEventListener("upgradeneeded",h=>{r(ls(a.result),h.oldVersion,h.newVersion,ls(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),l.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const iC=["get","getKey","getAll","getAllKeys","count"],rC=["put","add","delete","clear"],Nd=new Map;function av(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iC.includes(n)))return;const s=async function(a,...l){const h=this.transaction(a,i?"readwrite":"readonly");let c=h.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&h.done]))[0]};return Nd.set(e,s),s}JL(t=>({...t,get:(e,n,r)=>av(e,n)||t.get(e,n,r),has:(e,n)=>!!av(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qp="@firebase/app",lv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new tx("@firebase/app"),aC="@firebase/app-compat",lC="@firebase/analytics-compat",uC="@firebase/analytics",hC="@firebase/app-check-compat",cC="@firebase/app-check",fC="@firebase/auth",dC="@firebase/auth-compat",pC="@firebase/database",mC="@firebase/data-connect",_C="@firebase/database-compat",gC="@firebase/functions",vC="@firebase/functions-compat",yC="@firebase/installations",wC="@firebase/installations-compat",xC="@firebase/messaging",EC="@firebase/messaging-compat",TC="@firebase/performance",SC="@firebase/performance-compat",MC="@firebase/remote-config",LC="@firebase/remote-config-compat",CC="@firebase/storage",kC="@firebase/storage-compat",bC="@firebase/firestore",IC="@firebase/vertexai-preview",PC="@firebase/firestore-compat",AC="firebase",RC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="[DEFAULT]",DC={[qp]:"fire-core",[aC]:"fire-core-compat",[uC]:"fire-analytics",[lC]:"fire-analytics-compat",[cC]:"fire-app-check",[hC]:"fire-app-check-compat",[fC]:"fire-auth",[dC]:"fire-auth-compat",[pC]:"fire-rtdb",[mC]:"fire-data-connect",[_C]:"fire-rtdb-compat",[gC]:"fire-fn",[vC]:"fire-fn-compat",[yC]:"fire-iid",[wC]:"fire-iid-compat",[xC]:"fire-fcm",[EC]:"fire-fcm-compat",[TC]:"fire-perf",[SC]:"fire-perf-compat",[MC]:"fire-rc",[LC]:"fire-rc-compat",[CC]:"fire-gcs",[kC]:"fire-gcs-compat",[bC]:"fire-fst",[PC]:"fire-fst-compat",[IC]:"fire-vertex","fire-js":"fire-js",[AC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Map,NC=new Map,Kp=new Map;function uv(t,e){try{t.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xc(t){const e=t.name;if(Kp.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Kp.set(e,t);for(const n of Yc.values())uv(n,t);for(const n of NC.values())uv(n,t);return!0}function OC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new Jw("app","Firebase",FC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=RC;function ix(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw us.create("bad-app-name",{appName:String(i)});if(n||(n=Xw()),!n)throw us.create("no-options");const s=Yc.get(i);if(s){if(Hp(n,s.options)&&Hp(r,s.config))return s;throw us.create("duplicate-app",{appName:i})}const a=new $L(i);for(const h of Kp.values())a.addComponent(h);const l=new BC(n,r,a);return Yc.set(i,l),l}function VC(t=Zp){const e=Yc.get(t);if(!e&&t===Zp&&Xw())return ix();if(!e)throw us.create("no-app",{appName:t});return e}function ia(t,e,n){var r;let i=(r=DC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(l.join(" "));return}Xc(new vu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="firebase-heartbeat-database",jC=1,yu="firebase-heartbeat-store";let Od=null;function rx(){return Od||(Od=nC(UC,jC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),Od}async function $C(t){try{const n=(await rx()).transaction(yu),r=await n.objectStore(yu).get(sx(t));return await n.done,r}catch(e){if(e instanceof ka)br.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(n.message)}}}async function hv(t,e){try{const r=(await rx()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,sx(t)),await r.done}catch(n){if(n instanceof ka)br.warn(n.message);else{const r=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});br.warn(r.message)}}}function sx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=1024,GC=30*24*60*60*1e3;class WC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=GC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cv(),{heartbeatsToSend:r,unsentEntries:i}=qC(this._heartbeatsCache.heartbeats),s=Qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return br.warn(n),""}}}function cv(){return new Date().toISOString().substring(0,10)}function qC(t,e=HC){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),fv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NL()?OL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $C(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fv(t){return Qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){Xc(new vu("platform-logger",e=>new sC(e),"PRIVATE")),Xc(new vu("heartbeat",e=>new WC(e),"PRIVATE")),ia(qp,lv,t),ia(qp,lv,"esm2017"),ia("fire-js","")}KC("");var dv=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,ox;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,S){function k(){}k.prototype=S.prototype,U.D=S.prototype,U.prototype=new k,U.prototype.constructor=U,U.C=function(F,H,D){for(var j=Array(arguments.length-2),B=2;B<arguments.length;B++)j[B-2]=arguments[B];return S.prototype[H].apply(F,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(U,S,k){k||(k=0);var F=Array(16);if(typeof S=="string")for(var H=0;16>H;++H)F[H]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(H=0;16>H;++H)F[H]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=U.g[0],k=U.g[1],H=U.g[2];var D=U.g[3],j=S+(D^k&(H^D))+F[0]+3614090360&4294967295;S=k+(j<<7&4294967295|j>>>25),j=D+(H^S&(k^H))+F[1]+3905402710&4294967295,D=S+(j<<12&4294967295|j>>>20),j=H+(k^D&(S^k))+F[2]+606105819&4294967295,H=D+(j<<17&4294967295|j>>>15),j=k+(S^H&(D^S))+F[3]+3250441966&4294967295,k=H+(j<<22&4294967295|j>>>10),j=S+(D^k&(H^D))+F[4]+4118548399&4294967295,S=k+(j<<7&4294967295|j>>>25),j=D+(H^S&(k^H))+F[5]+1200080426&4294967295,D=S+(j<<12&4294967295|j>>>20),j=H+(k^D&(S^k))+F[6]+2821735955&4294967295,H=D+(j<<17&4294967295|j>>>15),j=k+(S^H&(D^S))+F[7]+4249261313&4294967295,k=H+(j<<22&4294967295|j>>>10),j=S+(D^k&(H^D))+F[8]+1770035416&4294967295,S=k+(j<<7&4294967295|j>>>25),j=D+(H^S&(k^H))+F[9]+2336552879&4294967295,D=S+(j<<12&4294967295|j>>>20),j=H+(k^D&(S^k))+F[10]+4294925233&4294967295,H=D+(j<<17&4294967295|j>>>15),j=k+(S^H&(D^S))+F[11]+2304563134&4294967295,k=H+(j<<22&4294967295|j>>>10),j=S+(D^k&(H^D))+F[12]+1804603682&4294967295,S=k+(j<<7&4294967295|j>>>25),j=D+(H^S&(k^H))+F[13]+4254626195&4294967295,D=S+(j<<12&4294967295|j>>>20),j=H+(k^D&(S^k))+F[14]+2792965006&4294967295,H=D+(j<<17&4294967295|j>>>15),j=k+(S^H&(D^S))+F[15]+1236535329&4294967295,k=H+(j<<22&4294967295|j>>>10),j=S+(H^D&(k^H))+F[1]+4129170786&4294967295,S=k+(j<<5&4294967295|j>>>27),j=D+(k^H&(S^k))+F[6]+3225465664&4294967295,D=S+(j<<9&4294967295|j>>>23),j=H+(S^k&(D^S))+F[11]+643717713&4294967295,H=D+(j<<14&4294967295|j>>>18),j=k+(D^S&(H^D))+F[0]+3921069994&4294967295,k=H+(j<<20&4294967295|j>>>12),j=S+(H^D&(k^H))+F[5]+3593408605&4294967295,S=k+(j<<5&4294967295|j>>>27),j=D+(k^H&(S^k))+F[10]+38016083&4294967295,D=S+(j<<9&4294967295|j>>>23),j=H+(S^k&(D^S))+F[15]+3634488961&4294967295,H=D+(j<<14&4294967295|j>>>18),j=k+(D^S&(H^D))+F[4]+3889429448&4294967295,k=H+(j<<20&4294967295|j>>>12),j=S+(H^D&(k^H))+F[9]+568446438&4294967295,S=k+(j<<5&4294967295|j>>>27),j=D+(k^H&(S^k))+F[14]+3275163606&4294967295,D=S+(j<<9&4294967295|j>>>23),j=H+(S^k&(D^S))+F[3]+4107603335&4294967295,H=D+(j<<14&4294967295|j>>>18),j=k+(D^S&(H^D))+F[8]+1163531501&4294967295,k=H+(j<<20&4294967295|j>>>12),j=S+(H^D&(k^H))+F[13]+2850285829&4294967295,S=k+(j<<5&4294967295|j>>>27),j=D+(k^H&(S^k))+F[2]+4243563512&4294967295,D=S+(j<<9&4294967295|j>>>23),j=H+(S^k&(D^S))+F[7]+1735328473&4294967295,H=D+(j<<14&4294967295|j>>>18),j=k+(D^S&(H^D))+F[12]+2368359562&4294967295,k=H+(j<<20&4294967295|j>>>12),j=S+(k^H^D)+F[5]+4294588738&4294967295,S=k+(j<<4&4294967295|j>>>28),j=D+(S^k^H)+F[8]+2272392833&4294967295,D=S+(j<<11&4294967295|j>>>21),j=H+(D^S^k)+F[11]+1839030562&4294967295,H=D+(j<<16&4294967295|j>>>16),j=k+(H^D^S)+F[14]+4259657740&4294967295,k=H+(j<<23&4294967295|j>>>9),j=S+(k^H^D)+F[1]+2763975236&4294967295,S=k+(j<<4&4294967295|j>>>28),j=D+(S^k^H)+F[4]+1272893353&4294967295,D=S+(j<<11&4294967295|j>>>21),j=H+(D^S^k)+F[7]+4139469664&4294967295,H=D+(j<<16&4294967295|j>>>16),j=k+(H^D^S)+F[10]+3200236656&4294967295,k=H+(j<<23&4294967295|j>>>9),j=S+(k^H^D)+F[13]+681279174&4294967295,S=k+(j<<4&4294967295|j>>>28),j=D+(S^k^H)+F[0]+3936430074&4294967295,D=S+(j<<11&4294967295|j>>>21),j=H+(D^S^k)+F[3]+3572445317&4294967295,H=D+(j<<16&4294967295|j>>>16),j=k+(H^D^S)+F[6]+76029189&4294967295,k=H+(j<<23&4294967295|j>>>9),j=S+(k^H^D)+F[9]+3654602809&4294967295,S=k+(j<<4&4294967295|j>>>28),j=D+(S^k^H)+F[12]+3873151461&4294967295,D=S+(j<<11&4294967295|j>>>21),j=H+(D^S^k)+F[15]+530742520&4294967295,H=D+(j<<16&4294967295|j>>>16),j=k+(H^D^S)+F[2]+3299628645&4294967295,k=H+(j<<23&4294967295|j>>>9),j=S+(H^(k|~D))+F[0]+4096336452&4294967295,S=k+(j<<6&4294967295|j>>>26),j=D+(k^(S|~H))+F[7]+1126891415&4294967295,D=S+(j<<10&4294967295|j>>>22),j=H+(S^(D|~k))+F[14]+2878612391&4294967295,H=D+(j<<15&4294967295|j>>>17),j=k+(D^(H|~S))+F[5]+4237533241&4294967295,k=H+(j<<21&4294967295|j>>>11),j=S+(H^(k|~D))+F[12]+1700485571&4294967295,S=k+(j<<6&4294967295|j>>>26),j=D+(k^(S|~H))+F[3]+2399980690&4294967295,D=S+(j<<10&4294967295|j>>>22),j=H+(S^(D|~k))+F[10]+4293915773&4294967295,H=D+(j<<15&4294967295|j>>>17),j=k+(D^(H|~S))+F[1]+2240044497&4294967295,k=H+(j<<21&4294967295|j>>>11),j=S+(H^(k|~D))+F[8]+1873313359&4294967295,S=k+(j<<6&4294967295|j>>>26),j=D+(k^(S|~H))+F[15]+4264355552&4294967295,D=S+(j<<10&4294967295|j>>>22),j=H+(S^(D|~k))+F[6]+2734768916&4294967295,H=D+(j<<15&4294967295|j>>>17),j=k+(D^(H|~S))+F[13]+1309151649&4294967295,k=H+(j<<21&4294967295|j>>>11),j=S+(H^(k|~D))+F[4]+4149444226&4294967295,S=k+(j<<6&4294967295|j>>>26),j=D+(k^(S|~H))+F[11]+3174756917&4294967295,D=S+(j<<10&4294967295|j>>>22),j=H+(S^(D|~k))+F[2]+718787259&4294967295,H=D+(j<<15&4294967295|j>>>17),j=k+(D^(H|~S))+F[9]+3951481745&4294967295,U.g[0]=U.g[0]+S&4294967295,U.g[1]=U.g[1]+(H+(j<<21&4294967295|j>>>11))&4294967295,U.g[2]=U.g[2]+H&4294967295,U.g[3]=U.g[3]+D&4294967295}r.prototype.u=function(U,S){S===void 0&&(S=U.length);for(var k=S-this.blockSize,F=this.B,H=this.h,D=0;D<S;){if(H==0)for(;D<=k;)i(this,U,D),D+=this.blockSize;if(typeof U=="string"){for(;D<S;)if(F[H++]=U.charCodeAt(D++),H==this.blockSize){i(this,F),H=0;break}}else for(;D<S;)if(F[H++]=U[D++],H==this.blockSize){i(this,F),H=0;break}}this.h=H,this.o+=S},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var S=1;S<U.length-8;++S)U[S]=0;var k=8*this.o;for(S=U.length-8;S<U.length;++S)U[S]=k&255,k/=256;for(this.u(U),U=Array(16),S=k=0;4>S;++S)for(var F=0;32>F;F+=8)U[k++]=this.g[S]>>>F&255;return U};function s(U,S){var k=l;return Object.prototype.hasOwnProperty.call(k,U)?k[U]:k[U]=S(U)}function a(U,S){this.h=S;for(var k=[],F=!0,H=U.length-1;0<=H;H--){var D=U[H]|0;F&&D==S||(k[H]=D,F=!1)}this.g=k}var l={};function h(U){return-128<=U&&128>U?s(U,function(S){return new a([S|0],0>S?-1:0)}):new a([U|0],0>U?-1:0)}function c(U){if(isNaN(U)||!isFinite(U))return m;if(0>U)return I(c(-U));for(var S=[],k=1,F=0;U>=k;F++)S[F]=U/k|0,k*=4294967296;return new a(S,0)}function p(U,S){if(U.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(U.charAt(0)=="-")return I(p(U.substring(1),S));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(S,8)),F=m,H=0;H<U.length;H+=8){var D=Math.min(8,U.length-H),j=parseInt(U.substring(H,H+D),S);8>D?(D=c(Math.pow(S,D)),F=F.j(D).add(c(j))):(F=F.j(k),F=F.add(c(j)))}return F}var m=h(0),v=h(1),_=h(16777216);t=a.prototype,t.m=function(){if(w(this))return-I(this).m();for(var U=0,S=1,k=0;k<this.g.length;k++){var F=this.i(k);U+=(0<=F?F:4294967296+F)*S,S*=4294967296}return U},t.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(T(this))return"0";if(w(this))return"-"+I(this).toString(U);for(var S=c(Math.pow(U,6)),k=this,F="";;){var H=W(k,S).g;k=E(k,H.j(S));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(U);if(k=H,T(k))return D+F;for(;6>D.length;)D="0"+D;F=D+F}},t.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function T(U){if(U.h!=0)return!1;for(var S=0;S<U.g.length;S++)if(U.g[S]!=0)return!1;return!0}function w(U){return U.h==-1}t.l=function(U){return U=E(this,U),w(U)?-1:T(U)?0:1};function I(U){for(var S=U.g.length,k=[],F=0;F<S;F++)k[F]=~U.g[F];return new a(k,~U.h).add(v)}t.abs=function(){return w(this)?I(this):this},t.add=function(U){for(var S=Math.max(this.g.length,U.g.length),k=[],F=0,H=0;H<=S;H++){var D=F+(this.i(H)&65535)+(U.i(H)&65535),j=(D>>>16)+(this.i(H)>>>16)+(U.i(H)>>>16);F=j>>>16,D&=65535,j&=65535,k[H]=j<<16|D}return new a(k,k[k.length-1]&-2147483648?-1:0)};function E(U,S){return U.add(I(S))}t.j=function(U){if(T(this)||T(U))return m;if(w(this))return w(U)?I(this).j(I(U)):I(I(this).j(U));if(w(U))return I(this.j(I(U)));if(0>this.l(_)&&0>U.l(_))return c(this.m()*U.m());for(var S=this.g.length+U.g.length,k=[],F=0;F<2*S;F++)k[F]=0;for(F=0;F<this.g.length;F++)for(var H=0;H<U.g.length;H++){var D=this.i(F)>>>16,j=this.i(F)&65535,B=U.i(H)>>>16,wt=U.i(H)&65535;k[2*F+2*H]+=j*wt,M(k,2*F+2*H),k[2*F+2*H+1]+=D*wt,M(k,2*F+2*H+1),k[2*F+2*H+1]+=j*B,M(k,2*F+2*H+1),k[2*F+2*H+2]+=D*B,M(k,2*F+2*H+2)}for(F=0;F<S;F++)k[F]=k[2*F+1]<<16|k[2*F];for(F=S;F<2*S;F++)k[F]=0;return new a(k,0)};function M(U,S){for(;(U[S]&65535)!=U[S];)U[S+1]+=U[S]>>>16,U[S]&=65535,S++}function R(U,S){this.g=U,this.h=S}function W(U,S){if(T(S))throw Error("division by zero");if(T(U))return new R(m,m);if(w(U))return S=W(I(U),S),new R(I(S.g),I(S.h));if(w(S))return S=W(U,I(S)),new R(I(S.g),S.h);if(30<U.g.length){if(w(U)||w(S))throw Error("slowDivide_ only works with positive integers.");for(var k=v,F=S;0>=F.l(U);)k=q(k),F=q(F);var H=X(k,1),D=X(F,1);for(F=X(F,2),k=X(k,2);!T(F);){var j=D.add(F);0>=j.l(U)&&(H=H.add(k),D=j),F=X(F,1),k=X(k,1)}return S=E(U,H.j(S)),new R(H,S)}for(H=m;0<=U.l(S);){for(k=Math.max(1,Math.floor(U.m()/S.m())),F=Math.ceil(Math.log(k)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),D=c(k),j=D.j(S);w(j)||0<j.l(U);)k-=F,D=c(k),j=D.j(S);T(D)&&(D=v),H=H.add(D),U=E(U,j)}return new R(H,U)}t.A=function(U){return W(this,U).h},t.and=function(U){for(var S=Math.max(this.g.length,U.g.length),k=[],F=0;F<S;F++)k[F]=this.i(F)&U.i(F);return new a(k,this.h&U.h)},t.or=function(U){for(var S=Math.max(this.g.length,U.g.length),k=[],F=0;F<S;F++)k[F]=this.i(F)|U.i(F);return new a(k,this.h|U.h)},t.xor=function(U){for(var S=Math.max(this.g.length,U.g.length),k=[],F=0;F<S;F++)k[F]=this.i(F)^U.i(F);return new a(k,this.h^U.h)};function q(U){for(var S=U.g.length+1,k=[],F=0;F<S;F++)k[F]=U.i(F)<<1|U.i(F-1)>>>31;return new a(k,U.h)}function X(U,S){var k=S>>5;S%=32;for(var F=U.g.length-k,H=[],D=0;D<F;D++)H[D]=0<S?U.i(D+k)>>>S|U.i(D+k+1)<<32-S:U.i(D+k);return new a(H,U.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ox=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=p,qs=a}).apply(typeof dv<"u"?dv:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ax,Tl,lx,mc,Qp,ux,hx,cx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,x,A){return f==Array.prototype||f==Object.prototype||(f[x]=A.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var x=0;x<f.length;++x){var A=f[x];if(A&&A.Math==Math)return A}throw Error("Cannot find window object")}var r=n(this);function i(f,x){if(x)t:{var A=r;f=f.split(".");for(var G=0;G<f.length-1;G++){var ut=f[G];if(!(ut in A))break t;A=A[ut]}f=f[f.length-1],G=A[f],x=x(G),x!=G&&x!=null&&e(A,f,{configurable:!0,writable:!0,value:x})}}function s(f,x){f instanceof String&&(f+="");var A=0,G=!1,ut={next:function(){if(!G&&A<f.length){var yt=A++;return{value:x(yt,f[yt]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ut[Symbol.iterator]=function(){return ut},ut}i("Array.prototype.values",function(f){return f||function(){return s(this,function(x,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(f){var x=typeof f;return x=x!="object"?x:f?Array.isArray(f)?"array":x:"null",x=="array"||x=="object"&&typeof f.length=="number"}function c(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function p(f,x,A){return f.call.apply(f.bind,arguments)}function m(f,x,A){if(!f)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ut=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ut,G),f.apply(x,ut)}}return function(){return f.apply(x,arguments)}}function v(f,x,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function _(f,x){var A=Array.prototype.slice.call(arguments,1);return function(){var G=A.slice();return G.push.apply(G,arguments),f.apply(this,G)}}function T(f,x){function A(){}A.prototype=x.prototype,f.aa=x.prototype,f.prototype=new A,f.prototype.constructor=f,f.Qb=function(G,ut,yt){for(var At=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)At[ve-2]=arguments[ve];return x.prototype[ut].apply(G,At)}}function w(f){const x=f.length;if(0<x){const A=Array(x);for(let G=0;G<x;G++)A[G]=f[G];return A}return[]}function I(f,x){for(let A=1;A<arguments.length;A++){const G=arguments[A];if(h(G)){const ut=f.length||0,yt=G.length||0;f.length=ut+yt;for(let At=0;At<yt;At++)f[ut+At]=G[At]}else f.push(G)}}class E{constructor(x,A){this.i=x,this.j=A,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function M(f){return/^[\s\xa0]*$/.test(f)}function R(){var f=l.navigator;return f&&(f=f.userAgent)?f:""}function W(f){return W[" "](f),f}W[" "]=function(){};var q=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function X(f,x,A){for(const G in f)x.call(A,f[G],G,f)}function U(f,x){for(const A in f)x.call(void 0,f[A],A,f)}function S(f){const x={};for(const A in f)x[A]=f[A];return x}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,x){let A,G;for(let ut=1;ut<arguments.length;ut++){G=arguments[ut];for(A in G)f[A]=G[A];for(let yt=0;yt<k.length;yt++)A=k[yt],Object.prototype.hasOwnProperty.call(G,A)&&(f[A]=G[A])}}function H(f){var x=1;f=f.split(":");const A=[];for(;0<x&&f.length;)A.push(f.shift()),x--;return f.length&&A.push(f.join(":")),A}function D(f){l.setTimeout(()=>{throw f},0)}function j(){var f=ot;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class B{constructor(){this.h=this.g=null}add(x,A){const G=wt.get();G.set(x,A),this.h?this.h.next=G:this.g=G,this.h=G}}var wt=new E(()=>new Rt,f=>f.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(x,A){this.h=x,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let mt,lt=!1,ot=new B,ft=()=>{const f=l.Promise.resolve(void 0);mt=()=>{f.then(J)}};var J=()=>{for(var f;f=j();){try{f.h.call(f.g)}catch(A){D(A)}var x=wt;x.j(f),100>x.h&&(x.h++,f.next=x.g,x.g=f)}lt=!1};function tt(){this.s=this.s,this.C=this.C}tt.prototype.s=!1,tt.prototype.ma=function(){this.s||(this.s=!0,this.N())},tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var Et=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};l.addEventListener("test",A,x),l.removeEventListener("test",A,x)}catch{}return f}();function vt(f,x){if(_t.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var A=this.type=f.type,G=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget){if(q){t:{try{W(x.nodeName);var ut=!0;break t}catch{}ut=!1}ut||(x=null)}}else A=="mouseover"?x=f.fromElement:A=="mouseout"&&(x=f.toElement);this.relatedTarget=x,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Pt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&vt.aa.h.call(this)}}T(vt,_t);var Pt={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var $t="closure_listenable_"+(1e6*Math.random()|0),It=0;function Nt(f,x,A,G,ut){this.listener=f,this.proxy=null,this.src=x,this.type=A,this.capture=!!G,this.ha=ut,this.key=++It,this.da=this.fa=!1}function Ht(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ft(f){this.src=f,this.g={},this.h=0}Ft.prototype.add=function(f,x,A,G,ut){var yt=f.toString();f=this.g[yt],f||(f=this.g[yt]=[],this.h++);var At=Kt(f,x,G,ut);return-1<At?(x=f[At],A||(x.fa=!1)):(x=new Nt(x,this.src,yt,!!G,ut),x.fa=A,f.push(x)),x};function Gt(f,x){var A=x.type;if(A in f.g){var G=f.g[A],ut=Array.prototype.indexOf.call(G,x,void 0),yt;(yt=0<=ut)&&Array.prototype.splice.call(G,ut,1),yt&&(Ht(x),f.g[A].length==0&&(delete f.g[A],f.h--))}}function Kt(f,x,A,G){for(var ut=0;ut<f.length;++ut){var yt=f[ut];if(!yt.da&&yt.listener==x&&yt.capture==!!A&&yt.ha==G)return ut}return-1}var P="closure_lm_"+(1e6*Math.random()|0),dt={};function at(f,x,A,G,ut){if(G&&G.once)return V(f,x,A,G,ut);if(Array.isArray(x)){for(var yt=0;yt<x.length;yt++)at(f,x[yt],A,G,ut);return null}return A=Mt(A),f&&f[$t]?f.K(x,A,c(G)?!!G.capture:!!G,ut):N(f,x,A,!1,G,ut)}function N(f,x,A,G,ut,yt){if(!x)throw Error("Invalid event type");var At=c(ut)?!!ut.capture:!!ut,ve=xt(f);if(ve||(f[P]=ve=new Ft(f)),A=ve.add(x,A,G,At,yt),A.proxy)return A;if(G=O(),A.proxy=G,G.src=f,G.listener=A,f.addEventListener)Et||(ut=At),ut===void 0&&(ut=!1),f.addEventListener(x.toString(),G,ut);else if(f.attachEvent)f.attachEvent(Y(x.toString()),G);else if(f.addListener&&f.removeListener)f.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return A}function O(){function f(A){return x.call(f.src,f.listener,A)}const x=rt;return f}function V(f,x,A,G,ut){if(Array.isArray(x)){for(var yt=0;yt<x.length;yt++)V(f,x[yt],A,G,ut);return null}return A=Mt(A),f&&f[$t]?f.L(x,A,c(G)?!!G.capture:!!G,ut):N(f,x,A,!0,G,ut)}function Z(f,x,A,G,ut){if(Array.isArray(x))for(var yt=0;yt<x.length;yt++)Z(f,x[yt],A,G,ut);else G=c(G)?!!G.capture:!!G,A=Mt(A),f&&f[$t]?(f=f.i,x=String(x).toString(),x in f.g&&(yt=f.g[x],A=Kt(yt,A,G,ut),-1<A&&(Ht(yt[A]),Array.prototype.splice.call(yt,A,1),yt.length==0&&(delete f.g[x],f.h--)))):f&&(f=xt(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Kt(x,A,G,ut)),(A=-1<f?x[f]:null)&&K(A))}function K(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[$t])Gt(x.i,f);else{var A=f.type,G=f.proxy;x.removeEventListener?x.removeEventListener(A,G,f.capture):x.detachEvent?x.detachEvent(Y(A),G):x.addListener&&x.removeListener&&x.removeListener(G),(A=xt(x))?(Gt(A,f),A.h==0&&(A.src=null,x[P]=null)):Ht(f)}}}function Y(f){return f in dt?dt[f]:dt[f]="on"+f}function rt(f,x){if(f.da)f=!0;else{x=new vt(x,this);var A=f.listener,G=f.ha||f.src;f.fa&&K(f),f=A.call(G,x)}return f}function xt(f){return f=f[P],f instanceof Ft?f:null}var st="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(f){return typeof f=="function"?f:(f[st]||(f[st]=function(x){return f.handleEvent(x)}),f[st])}function z(){tt.call(this),this.i=new Ft(this),this.M=this,this.F=null}T(z,tt),z.prototype[$t]=!0,z.prototype.removeEventListener=function(f,x,A,G){Z(this,f,x,A,G)};function y(f,x){var A,G=f.F;if(G)for(A=[];G;G=G.F)A.push(G);if(f=f.M,G=x.type||x,typeof x=="string")x=new _t(x,f);else if(x instanceof _t)x.target=x.target||f;else{var ut=x;x=new _t(G,f),F(x,ut)}if(ut=!0,A)for(var yt=A.length-1;0<=yt;yt--){var At=x.g=A[yt];ut=C(At,G,!0,x)&&ut}if(At=x.g=f,ut=C(At,G,!0,x)&&ut,ut=C(At,G,!1,x)&&ut,A)for(yt=0;yt<A.length;yt++)At=x.g=A[yt],ut=C(At,G,!1,x)&&ut}z.prototype.N=function(){if(z.aa.N.call(this),this.i){var f=this.i,x;for(x in f.g){for(var A=f.g[x],G=0;G<A.length;G++)Ht(A[G]);delete f.g[x],f.h--}}this.F=null},z.prototype.K=function(f,x,A,G){return this.i.add(String(f),x,!1,A,G)},z.prototype.L=function(f,x,A,G){return this.i.add(String(f),x,!0,A,G)};function C(f,x,A,G){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();for(var ut=!0,yt=0;yt<x.length;++yt){var At=x[yt];if(At&&!At.da&&At.capture==A){var ve=At.listener,Xe=At.ha||At.src;At.fa&&Gt(f.i,At),ut=ve.call(Xe,G)!==!1&&ut}}return ut&&!G.defaultPrevented}function Q(f,x,A){if(typeof f=="function")A&&(f=v(f,A));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:l.setTimeout(f,x||0)}function nt(f){f.g=Q(()=>{f.g=null,f.i&&(f.i=!1,nt(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class ht extends tt{constructor(x,A){super(),this.m=x,this.l=A,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pt(f){tt.call(this),this.h=f,this.g={}}T(pt,tt);var Wt=[];function _e(f){X(f.g,function(x,A){this.g.hasOwnProperty(A)&&K(x)},f),f.g={}}pt.prototype.N=function(){pt.aa.N.call(this),_e(this)},pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ie=l.JSON.stringify,ce=l.JSON.parse,fe=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function Cs(){}Cs.prototype.h=null;function ks(f){return f.h||(f.h=f.i())}function Dr(){}var Bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oi(){_t.call(this,"d")}T(Oi,_t);function Oa(){_t.call(this,"c")}T(Oa,_t);var rr={},th=null;function co(){return th=th||new z}rr.La="serverreachability";function eh(f){_t.call(this,rr.La,f)}T(eh,_t);function sr(f){const x=co();y(x,new eh(x))}rr.STAT_EVENT="statevent";function nh(f,x){_t.call(this,rr.STAT_EVENT,f),this.stat=x}T(nh,_t);function un(f){const x=co();y(x,new nh(x,f))}rr.Ma="timingevent";function ih(f,x){_t.call(this,rr.Ma,f),this.size=x}T(ih,_t);function bs(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},x)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function Ut(f,x,A,G,ut,yt){f.info(function(){if(f.g)if(yt)for(var At="",ve=yt.split("&"),Xe=0;Xe<ve.length;Xe++){var Jt=ve[Xe].split("=");if(1<Jt.length){var Re=Jt[0];Jt=Jt[1];var rn=Re.split("_");At=2<=rn.length&&rn[1]=="type"?At+(Re+"="+Jt+"&"):At+(Re+"=redacted&")}}else At=null;else At=yt;return"XMLHTTP REQ ("+G+") [attempt "+ut+"]: "+x+`
`+A+`
`+At})}function rh(f,x,A,G,ut,yt,At){f.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ut+"]: "+x+`
`+A+`
`+yt+" "+At})}function or(f,x,A,G){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+oh(f,A)+(G?" "+G:"")})}function sh(f,x){f.info(function(){return"TIMEOUT: "+x})}yn.prototype.info=function(){};function oh(f,x){if(!f.g)return x;if(!x)return null;try{var A=JSON.parse(x);if(A){for(f=0;f<A.length;f++)if(Array.isArray(A[f])){var G=A[f];if(!(2>G.length)){var ut=G[1];if(Array.isArray(ut)&&!(1>ut.length)){var yt=ut[0];if(yt!="noop"&&yt!="stop"&&yt!="close")for(var At=1;At<ut.length;At++)ut[At]=""}}}}return ie(A)}catch{return x}}var Nr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fi;function Is(){}T(Is,Cs),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},Fi=new Is;function Bi(f,x,A,G){this.j=f,this.i=x,this.l=A,this.R=G||1,this.U=new pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ah}function ah(){this.i=null,this.g="",this.h=!1}var lh={},Ba={};function fo(f,x,A){f.L=1,f.v=zi(xi(x)),f.m=A,f.P=!0,uh(f,null)}function uh(f,x){f.F=Date.now(),po(f),f.A=xi(f.v);var A=f.A,G=f.R;Array.isArray(G)||(G=[String(G)]),Xt(A.i,"t",G),f.C=0,A=f.j.J,f.h=new ah,f.g=nl(f.j,A?x:null,!f.m),0<f.O&&(f.M=new ht(v(f.Y,f,f.g),f.O)),x=f.U,A=f.g,G=f.ca;var ut="readystatechange";Array.isArray(ut)||(ut&&(Wt[0]=ut.toString()),ut=Wt);for(var yt=0;yt<ut.length;yt++){var At=at(A,ut[yt],G||x.handleEvent,!1,x.h||x);if(!At)break;x.g[At.key]=At}x=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,x)):(f.u="GET",f.g.ea(f.A,f.u,null,x)),sr(),Ut(f.i,f.u,f.A,f.l,f.R,f.m)}Bi.prototype.ca=function(f){f=f.target;const x=this.M;x&&li(f)==3?x.j():this.Y(f)},Bi.prototype.Y=function(f){try{if(f==this.g)t:{const rn=li(this.g);var x=this.g.Ba();const xn=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||mh(this.g)))){this.J||rn!=4||x==7||(x==8||0>=xn?sr(3):sr(2)),za(this);var A=this.g.Z();this.X=A;e:if(Ps(this)){var G=mh(this.g);f="";var ut=G.length,yt=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),As(this);var At="";break e}this.h.i=new l.TextDecoder}for(x=0;x<ut;x++)this.h.h=!0,f+=this.h.i.decode(G[x],{stream:!(yt&&x==ut-1)});G.length=0,this.h.g+=f,this.C=0,At=this.h.g}else At=this.g.oa();if(this.o=A==200,rh(this.i,this.u,this.A,this.l,this.R,rn,A),this.o){if(this.T&&!this.K){e:{if(this.g){var ve,Xe=this.g;if((ve=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ve)){var Jt=ve;break e}}Jt=null}if(A=Jt)or(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ar(this,A);else{this.o=!1,this.s=3,un(12),wi(this),As(this);break t}}if(this.P){A=!0;let Yn;for(;!this.J&&this.C<At.length;)if(Yn=Jf(this,At),Yn==Ba){rn==4&&(this.s=4,un(14),A=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==lh){this.s=4,un(15),or(this.i,this.l,At,"[Invalid Chunk]"),A=!1;break}else or(this.i,this.l,Yn,null),ar(this,Yn);if(Ps(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||At.length!=0||this.h.h||(this.s=1,un(16),A=!1),this.o=this.o&&A,!A)or(this.i,this.l,At,"[Invalid Chunked Response]"),wi(this),As(this);else if(0<At.length&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.ba&&!Re.M&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+At.length),Ns(Re),Re.M=!0,un(11))}}else or(this.i,this.l,At,null),ar(this,At);rn==4&&wi(this),this.o&&!this.J&&(rn==4?el(this.j,this):(this.o=!1,po(this)))}else Ya(this.g),A==400&&0<At.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),wi(this),As(this)}}}catch{}finally{}};function Ps(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Jf(f,x){var A=f.C,G=x.indexOf(`
`,A);return G==-1?Ba:(A=Number(x.substring(A,G)),isNaN(A)?lh:(G+=1,G+A>x.length?Ba:(x=x.slice(G,G+A),f.C=G+A,x)))}Bi.prototype.cancel=function(){this.J=!0,wi(this)};function po(f){f.S=Date.now()+f.I,hh(f,f.I)}function hh(f,x){if(f.B!=null)throw Error("WatchDog timer not null");f.B=bs(v(f.ba,f),x)}function za(f){f.B&&(l.clearTimeout(f.B),f.B=null)}Bi.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(sh(this.i,this.A),this.L!=2&&(sr(),un(17)),wi(this),this.s=2,As(this)):hh(this,this.S-f)};function As(f){f.j.G==0||f.J||el(f.j,f)}function wi(f){za(f);var x=f.M;x&&typeof x.ma=="function"&&x.ma(),f.M=null,_e(f.U),f.g&&(x=f.g,f.g=null,x.abort(),x.ma())}function ar(f,x){try{var A=f.j;if(A.G!=0&&(A.g==f||Se(A.h,f))){if(!f.K&&Se(A.h,f)&&A.G==3){try{var G=A.Da.g.parse(x)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ut=G;if(ut[0]==0){t:if(!A.u){if(A.g)if(A.g.F+3e3<f.F)Os(A),wo(A);else break t;To(A),un(18)}}else A.za=ut[1],0<A.za-A.T&&37500>ut[2]&&A.F&&A.v==0&&!A.C&&(A.C=bs(v(A.Za,A),6e3));if(1>=ue(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else dr(A,11)}else if((f.K||A.g==f)&&Os(A),!M(x))for(ut=A.Da.g.parse(x),x=0;x<ut.length;x++){let Jt=ut[x];if(A.T=Jt[0],Jt=Jt[1],A.G==2)if(Jt[0]=="c"){A.K=Jt[1],A.ia=Jt[2];const Re=Jt[3];Re!=null&&(A.la=Re,A.j.info("VER="+A.la));const rn=Jt[4];rn!=null&&(A.Aa=rn,A.j.info("SVER="+A.Aa));const xn=Jt[5];xn!=null&&typeof xn=="number"&&0<xn&&(G=1.5*xn,A.L=G,A.j.info("backChannelRequestTimeoutMs_="+G)),G=A;const Yn=f.g;if(Yn){const Mi=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var yt=G.h;yt.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||(yt.j=yt.l,yt.g=new Set,yt.h&&(Fr(yt,yt.h),yt.h=null))}if(G.D){const rl=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(G.ya=rl,de(G.I,G.D,rl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-f.F,A.j.info("Handshake RTT: "+A.R+"ms")),G=A;var At=f;if(G.qa=yh(G,G.J?G.ia:null,G.W),At.K){lr(G.h,At);var ve=At,Xe=G.L;Xe&&(ve.I=Xe),ve.B&&(za(ve),po(ve)),G.g=At}else tl(G);0<A.i.length&&Eo(A)}else Jt[0]!="stop"&&Jt[0]!="close"||dr(A,7);else A.G==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?dr(A,7):Ja(A):Jt[0]!="noop"&&A.l&&A.l.ta(Jt),A.v=0)}}sr(4)}catch{}}var ch=class{constructor(f,x){this.g=f,this.map=x}};function Va(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Or(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ue(f){return f.h?1:f.g?f.g.size:0}function Se(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Fr(f,x){f.g?f.g.add(x):f.h=x}function lr(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}Va.prototype.cancel=function(){if(this.i=ur(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ur(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const A of f.g.values())x=x.concat(A.D);return x}return w(f.i)}function Ua(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var x=[],A=f.length,G=0;G<A;G++)x.push(f[G]);return x}x=[],A=0;for(G in f)x[A++]=f[G];return x}function ne(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var x=[];f=f.length;for(var A=0;A<f;A++)x.push(A);return x}x=[],A=0;for(const G in f)x[A++]=G;return x}}}function be(f,x){if(f.forEach&&typeof f.forEach=="function")f.forEach(x,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,x,void 0);else for(var A=ne(f),G=Ua(f),ut=G.length,yt=0;yt<ut;yt++)x.call(void 0,G[yt],A&&A[yt],f)}var mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _o(f,x){if(f){f=f.split("&");for(var A=0;A<f.length;A++){var G=f[A].indexOf("="),ut=null;if(0<=G){var yt=f[A].substring(0,G);ut=f[A].substring(G+1)}else yt=f[A];x(yt,ut?decodeURIComponent(ut.replace(/\+/g," ")):"")}}}function Ge(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ge){this.h=f.h,hr(this,f.j),this.o=f.o,this.g=f.g,oi(this,f.s),this.l=f.l;var x=f.i,A=new Vi;A.i=x.i,x.g&&(A.g=new Map(x.g),A.h=x.h),Ae(this,A),this.m=f.m}else f&&(x=String(f).match(mo))?(this.h=!1,hr(this,x[1]||"",!0),this.o=Ei(x[2]||""),this.g=Ei(x[3]||"",!0),oi(this,x[4]),this.l=Ei(x[5]||"",!0),Ae(this,x[6]||"",!0),this.m=Ei(x[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}Ge.prototype.toString=function(){var f=[],x=this.j;x&&f.push(cr(x,go,!0),":");var A=this.g;return(A||x=="file")&&(f.push("//"),(x=this.o)&&f.push(cr(x,go,!0),"@"),f.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&f.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(cr(A,A.charAt(0)=="/"?vo:ja,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",cr(A,Ha)),f.join("")};function xi(f){return new Ge(f)}function hr(f,x,A){f.j=A?Ei(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function oi(f,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);f.s=x}else f.s=null}function Ae(f,x,A){x instanceof Vi?(f.i=x,Te(f.i,f.h)):(A||(x=cr(x,$a)),f.i=new Vi(x,f.h))}function de(f,x,A){f.i.set(x,A)}function zi(f){return de(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ei(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function cr(f,x,A){return typeof f=="string"?(f=encodeURI(f).replace(x,Rs),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Rs(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var go=/[#\/\?@]/g,ja=/[#\?:]/g,vo=/[#\?]/g,$a=/[#\?@]/g,Ha=/#/g;function Vi(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function Ti(f){f.g||(f.g=new Map,f.h=0,f.i&&_o(f.i,function(x,A){f.add(decodeURIComponent(x.replace(/\+/g," ")),A)}))}t=Vi.prototype,t.add=function(f,x){Ti(this),this.i=null,f=hn(this,f);var A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(x),this.h+=1,this};function yo(f,x){Ti(f),x=hn(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function fh(f,x){return Ti(f),x=hn(f,x),f.g.has(x)}t.forEach=function(f,x){Ti(this),this.g.forEach(function(A,G){A.forEach(function(ut){f.call(x,ut,G,this)},this)},this)},t.na=function(){Ti(this);const f=Array.from(this.g.values()),x=Array.from(this.g.keys()),A=[];for(let G=0;G<x.length;G++){const ut=f[G];for(let yt=0;yt<ut.length;yt++)A.push(x[G])}return A},t.V=function(f){Ti(this);let x=[];if(typeof f=="string")fh(this,f)&&(x=x.concat(this.g.get(hn(this,f))));else{f=Array.from(this.g.values());for(let A=0;A<f.length;A++)x=x.concat(f[A])}return x},t.set=function(f,x){return Ti(this),this.i=null,f=hn(this,f),fh(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},t.get=function(f,x){return f?(f=this.V(f),0<f.length?String(f[0]):x):x};function Xt(f,x,A){yo(f,x),0<A.length&&(f.i=null,f.g.set(hn(f,x),w(A)),f.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(var A=0;A<x.length;A++){var G=x[A];const yt=encodeURIComponent(String(G)),At=this.V(G);for(G=0;G<At.length;G++){var ut=yt;At[G]!==""&&(ut+="="+encodeURIComponent(String(At[G]))),f.push(ut)}}return this.i=f.join("&")};function hn(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Te(f,x){x&&!f.j&&(Ti(f),f.i=null,f.g.forEach(function(A,G){var ut=G.toLowerCase();G!=ut&&(yo(this,G),Xt(this,ut,A))},f)),f.j=x}function dh(f,x){const A=new yn;if(l.Image){const G=new Image;G.onload=_(ai,A,"TestLoadImage: loaded",!0,x,G),G.onerror=_(ai,A,"TestLoadImage: error",!1,x,G),G.onabort=_(ai,A,"TestLoadImage: abort",!1,x,G),G.ontimeout=_(ai,A,"TestLoadImage: timeout",!1,x,G),l.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=f}else x(!1)}function Ga(f,x){const A=new yn,G=new AbortController,ut=setTimeout(()=>{G.abort(),ai(A,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:G.signal}).then(yt=>{clearTimeout(ut),yt.ok?ai(A,"TestPingServer: ok",!0,x):ai(A,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ut),ai(A,"TestPingServer: error",!1,x)})}function ai(f,x,A,G,ut){try{ut&&(ut.onload=null,ut.onerror=null,ut.onabort=null,ut.ontimeout=null),G(A)}catch{}}function Wa(){this.g=new fe}function fr(f,x,A){const G=A||"";try{be(f,function(ut,yt){let At=ut;c(ut)&&(At=ie(ut)),x.push(G+yt+"="+encodeURIComponent(At))})}catch(ut){throw x.push(G+"type="+encodeURIComponent("_badmap")),ut}}function Br(f){this.l=f.Ub||null,this.j=f.eb||!1}T(Br,Cs),Br.prototype.g=function(){return new Ui(this.l,this.j)},Br.prototype.i=function(f){return function(){return f}}({});function Ui(f,x){z.call(this),this.D=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ui,z),t=Ui.prototype,t.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=x,this.readyState=1,zr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(x.body=f),(this.D||l).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qn(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;We(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function We(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Qn(this):zr(this),this.readyState==3&&We(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Qn(this))},t.Qa=function(f){this.g&&(this.response=f,Qn(this))},t.ga=function(){this.g&&Qn(this)};function Qn(f){f.readyState=4,f.l=null,f.j=null,f.v=null,zr(f)}t.setRequestHeader=function(f,x){this.u.append(f,x)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var A=x.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=x.next();return f.join(`\r
`)};function zr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function qa(f){let x="";return X(f,function(A,G){x+=G,x+=":",x+=A,x+=`\r
`}),x}function Za(f,x,A){t:{for(G in A){var G=!1;break t}G=!0}G||(A=qa(A),typeof f=="string"?A!=null&&encodeURIComponent(String(A)):de(f,x,A))}function Le(f){z.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Le,z);var Ka=/^https?$/i,td=["POST","PUT"];t=Le.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,x,A,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fi.g(),this.v=this.o?ks(this.o):ks(Fi),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(yt){Qa(this,yt);return}if(f=A||"",A=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ut in G)A.set(ut,G[ut]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const yt of G.keys())A.set(yt,G.get(yt));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(A.keys()).find(yt=>yt.toLowerCase()=="content-type"),ut=l.FormData&&f instanceof l.FormData,!(0<=Array.prototype.indexOf.call(td,x,void 0))||G||ut||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[yt,At]of A)this.g.setRequestHeader(yt,At);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vr(this),this.u=!0,this.g.send(f),this.u=!1}catch(yt){Qa(this,yt)}};function Qa(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.m=5,se(f),wn(f)}function se(f){f.A||(f.A=!0,y(f,"complete"),y(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,y(this,"complete"),y(this,"abort"),wn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ph(this):this.bb())},t.bb=function(){ph(this)};function ph(f){if(f.h&&typeof a<"u"&&(!f.v[1]||li(f)!=4||f.Z()!=2)){if(f.u&&li(f)==4)Q(f.Ea,0,f);else if(y(f,"readystatechange"),li(f)==4){f.h=!1;try{const At=f.Z();t:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break t;default:x=!1}var A;if(!(A=x)){var G;if(G=At===0){var ut=String(f.D).match(mo)[1]||null;!ut&&l.self&&l.self.location&&(ut=l.self.location.protocol.slice(0,-1)),G=!Ka.test(ut?ut.toLowerCase():"")}A=G}if(A)y(f,"complete"),y(f,"success");else{f.m=6;try{var yt=2<li(f)?f.g.statusText:""}catch{yt=""}f.l=yt+" ["+f.Z()+"]",se(f)}}finally{wn(f)}}}}function wn(f,x){if(f.g){Vr(f);const A=f.g,G=f.v[0]?()=>{}:null;f.g=null,f.v=null,x||y(f,"ready");try{A.onreadystatechange=G}catch{}}}function Vr(f){f.I&&(l.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function li(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),ce(x)}};function mh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ya(f){const x={};f=(f.g&&2<=li(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<f.length;G++){if(M(f[G]))continue;var A=H(f[G]);const ut=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const yt=x[ut]||[];x[ut]=yt,yt.push(A)}U(x,function(G){return G.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(f,x,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||x}function Xa(f){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,f),this.cb=Ds("retryDelaySeedMs",1e4,f),this.Wa=Ds("forwardChannelMaxRetries",2,f),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Va(f&&f.concurrentRequestLimit),this.Da=new Wa,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xa.prototype,t.la=8,t.G=1,t.connect=function(f,x,A,G){un(0),this.W=f,this.H=x||{},A&&G!==void 0&&(this.H.OSID=A,this.H.OAID=G),this.F=this.X,this.I=yh(this,null,this.W),Eo(this)};function Ja(f){if(xo(f),f.G==3){var x=f.U++,A=xi(f.I);if(de(A,"SID",f.K),de(A,"RID",x),de(A,"TYPE","terminate"),Ur(f,A),x=new Bi(f,f.j,x),x.L=2,x.v=zi(xi(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(x.v.toString(),"")}catch{}!A&&l.Image&&(new Image().src=x.v,A=!0),A||(x.g=nl(x.j,null),x.g.ea(x.v)),x.F=Date.now(),po(x)}So(f)}function wo(f){f.g&&(Ns(f),f.g.cancel(),f.g=null)}function xo(f){wo(f),f.u&&(l.clearTimeout(f.u),f.u=null),Os(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&l.clearTimeout(f.s),f.s=null)}function Eo(f){if(!Or(f.h)&&!f.s){f.s=!0;var x=f.Ga;mt||ft(),lt||(mt(),lt=!0),ot.add(x,f),f.B=0}}function ui(f,x){return ue(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=x.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=bs(v(f.Ga,f,x),vh(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ut=new Bi(this,this.j,f);let yt=this.o;if(this.S&&(yt?(yt=S(yt),F(yt,this.S)):yt=this.S),this.m!==null||this.O||(ut.H=yt,yt=null),this.P)t:{for(var x=0,A=0;A<this.i.length;A++){e:{var G=this.i[A];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break e}G=void 0}if(G===void 0)break;if(x+=G,4096<x){x=A;break t}if(x===4096||A===this.i.length-1){x=A+1;break t}}x=1e3}else x=1e3;x=Si(this,ut,x),A=xi(this.I),de(A,"RID",f),de(A,"CVER",22),this.D&&de(A,"X-HTTP-Session-Id",this.D),Ur(this,A),yt&&(this.O?x="headers="+encodeURIComponent(String(qa(yt)))+"&"+x:this.m&&Za(A,this.m,yt)),Fr(this.h,ut),this.Ua&&de(A,"TYPE","init"),this.P?(de(A,"$req",x),de(A,"SID","null"),ut.T=!0,fo(ut,A,null)):fo(ut,A,x),this.G=2}}else this.G==3&&(f?_h(this,f):this.i.length==0||Or(this.h)||_h(this))};function _h(f,x){var A;x?A=x.l:A=f.U++;const G=xi(f.I);de(G,"SID",f.K),de(G,"RID",A),de(G,"AID",f.T),Ur(f,G),f.m&&f.o&&Za(G,f.m,f.o),A=new Bi(f,f.j,A,f.B+1),f.m===null&&(A.H=f.o),x&&(f.i=x.D.concat(f.i)),x=Si(f,A,1e3),A.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Fr(f.h,A),fo(A,G,x)}function Ur(f,x){f.H&&X(f.H,function(A,G){de(x,G,A)}),f.l&&be({},function(A,G){de(x,G,A)})}function Si(f,x,A){A=Math.min(f.i.length,A);var G=f.l?v(f.l.Na,f.l,f):null;t:{var ut=f.i;let yt=-1;for(;;){const At=["count="+A];yt==-1?0<A?(yt=ut[0].g,At.push("ofs="+yt)):yt=0:At.push("ofs="+yt);let ve=!0;for(let Xe=0;Xe<A;Xe++){let Jt=ut[Xe].g;const Re=ut[Xe].map;if(Jt-=yt,0>Jt)yt=Math.max(0,ut[Xe].g-100),ve=!1;else try{fr(Re,At,"req"+Jt+"_")}catch{G&&G(Re)}}if(ve){G=At.join("&");break t}}}return f=f.i.splice(0,A),x.D=f,G}function tl(f){if(!f.g&&!f.u){f.Y=1;var x=f.Fa;mt||ft(),lt||(mt(),lt=!0),ot.add(x,f),f.v=0}}function To(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=bs(v(f.Fa,f),vh(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,gh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=bs(v(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),wo(this),gh(this))};function Ns(f){f.A!=null&&(l.clearTimeout(f.A),f.A=null)}function gh(f){f.g=new Bi(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var x=xi(f.qa);de(x,"RID","rpc"),de(x,"SID",f.K),de(x,"AID",f.T),de(x,"CI",f.F?"0":"1"),!f.F&&f.ja&&de(x,"TO",f.ja),de(x,"TYPE","xmlhttp"),Ur(f,x),f.m&&f.o&&Za(x,f.m,f.o),f.L&&(f.g.I=f.L);var A=f.g;f=f.ia,A.L=1,A.v=zi(xi(x)),A.m=null,A.P=!0,uh(A,f)}t.Za=function(){this.C!=null&&(this.C=null,wo(this),To(this),un(19))};function Os(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function el(f,x){var A=null;if(f.g==x){Os(f),Ns(f),f.g=null;var G=2}else if(Se(f.h,x))A=x.D,lr(f.h,x),G=1;else return;if(f.G!=0){if(x.o)if(G==1){A=x.m?x.m.length:0,x=Date.now()-x.F;var ut=f.B;G=co(),y(G,new ih(G,A)),Eo(f)}else tl(f);else if(ut=x.s,ut==3||ut==0&&0<x.X||!(G==1&&ui(f,x)||G==2&&To(f)))switch(A&&0<A.length&&(x=f.h,x.i=x.i.concat(A)),ut){case 1:dr(f,5);break;case 4:dr(f,10);break;case 3:dr(f,6);break;default:dr(f,2)}}}function vh(f,x){let A=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(A*=2),A*x}function dr(f,x){if(f.j.info("Error code "+x),x==2){var A=v(f.fb,f),G=f.Xa;const ut=!G;G=new Ge(G||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||hr(G,"https"),zi(G),ut?dh(G.toString(),A):Ga(G.toString(),A)}else un(2);f.G=0,f.l&&f.l.sa(x),So(f),xo(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function So(f){if(f.G=0,f.ka=[],f.l){const x=ur(f.h);(x.length!=0||f.i.length!=0)&&(I(f.ka,x),I(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function yh(f,x,A){var G=A instanceof Ge?xi(A):new Ge(A);if(G.g!="")x&&(G.g=x+"."+G.g),oi(G,G.s);else{var ut=l.location;G=ut.protocol,x=x?x+"."+ut.hostname:ut.hostname,ut=+ut.port;var yt=new Ge(null);G&&hr(yt,G),x&&(yt.g=x),ut&&oi(yt,ut),A&&(yt.l=A),G=yt}return A=f.D,x=f.ya,A&&x&&de(G,A,x),de(G,"VER",f.la),Ur(f,G),G}function nl(f,x,A){if(x&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Ca&&!f.pa?new Le(new Br({eb:A})):new Le(f.pa),x.Ha(f.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function il(){}t=il.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pr(){}pr.prototype.g=function(f,x){return new Ve(f,x)};function Ve(f,x){z.call(this),this.g=new Xa(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(f?f["X-WebChannel-Client-Profile"]=x.va:f={"X-WebChannel-Client-Profile":x.va}),this.g.S=f,(f=x&&x.Sb)&&!M(f)&&(this.g.m=f),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!M(x)&&(this.g.D=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Ye(this)}T(Ve,z),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){Ja(this.g)},Ve.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.u&&(A={},A.__data__=ie(f),f=A);x.i.push(new ch(x.Ya++,f)),x.G==3&&Eo(x)},Ve.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,Ve.aa.N.call(this)};function wh(f){Oi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){t:{for(const A in x){f=A;break t}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}T(wh,Oi);function jr(){Oa.call(this),this.status=1}T(jr,Oa);function Ye(f){this.g=f}T(Ye,il),Ye.prototype.ua=function(){y(this.g,"a")},Ye.prototype.ta=function(f){y(this.g,new wh(f))},Ye.prototype.sa=function(f){y(this.g,new jr)},Ye.prototype.ra=function(){y(this.g,"b")},pr.prototype.createWebChannel=pr.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,cx=function(){return new pr},hx=function(){return co()},ux=rr,Qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,mc=Nr,Fa.COMPLETE="complete",lx=Fa,Dr.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",z.prototype.listen=z.prototype.K,Tl=Dr,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,ax=Le}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const pv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new tx("@firebase/firestore");function gl(){return to.logLevel}function Vt(t,...e){if(to.logLevel<=pe.DEBUG){const n=e.map(T_);to.debug(`Firestore (${ba}): ${t}`,...n)}}function Ir(t,...e){if(to.logLevel<=pe.ERROR){const n=e.map(T_);to.error(`Firestore (${ba}): ${t}`,...n)}}function ma(t,...e){if(to.logLevel<=pe.WARN){const n=e.map(T_);to.warn(`Firestore (${ba}): ${t}`,...n)}}function T_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw Ir(e),new Error(e)}function Ee(t,e){t||Yt()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jt extends ka{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mn.UNAUTHENTICATED))}shutdown(){}}class YC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class XC{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let s=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},l=h=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new fx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new Mn(e)}}class JC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tk{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new JC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ek{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const r=s=>{s.error!=null&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Vt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new ek(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ik(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function _a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new jt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new jt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new jt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new nn(0,0))}static max(){return new te(new nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Yt(),r===void 0?r=e.length-n:r>e.length-n&&Yt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends wu{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new jt(Lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends wu{construct(e,n,r){return new pn(e,n,r)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new jt(Lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new jt(Lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new jt(Lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new jt(Lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.path=e}static fromPath(e){return new qt(Pe.fromString(e))}static fromName(e){return new qt(Pe.fromString(e).popFirst(5))}static empty(){return new qt(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new Pe(e.slice()))}}function sk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new nn(n+1,0):new nn(n,r));return new ps(i,qt.empty(),e)}function ok(t){return new ps(t.readTime,t.key,-1)}class ps{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ps(te.min(),qt.empty(),-1)}static max(){return new ps(te.max(),qt.empty(),-1)}}function ak(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=qt.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(t){if(t.code!==Lt.FAILED_PRECONDITION||t.message!==lk)throw t;Vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ct((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ct?n:Ct.resolve(n)}catch(n){return Ct.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ct.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ct.reject(n)}static resolve(e){return new Ct((n,r)=>{n(e)})}static reject(e){return new Ct((n,r)=>{r(e)})}static waitFor(e){return new Ct((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},h=>r(h))}),a=!0,s===i&&n()})}static or(e){let n=Ct.resolve(!1);for(const r of e)n=n.next(i=>i?Ct.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ct((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let h=0;h<s;h++){const c=h;n(e[c]).next(p=>{a[c]=p,++l,l===s&&r(a)},p=>i(p))}})}static doWhile(e,n){return new Ct((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function hk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}S_.oe=-1;function Df(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function ck(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function px(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dn.RED,this.left=i??dn.EMPTY,this.right=s??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new dn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const e=this.left.check();if(e!==this.right.check())throw Yt();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _v(this.data.getIterator())}getIteratorFrom(e){return new _v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _n(this.comparator);return n.data=e,n}}class _v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new ti([])}unionWith(e){let n=new _n(pn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mx("Invalid base64 string: "+s):s}}(e);return new vn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const fk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=fk.exec(t);if(Ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function eo(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function L_(t){const e=t.mapValue.fields.__previous_value__;return M_(e)?L_(e):e}function xu(t){const e=ms(t.mapValue.fields.__local_write_time__.timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,r,i,s,a,l,h,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=c}}class Eu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function no(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?M_(t)?4:mk(t)?9007199254740991:pk(t)?10:11:Yt()}function er(t,e){if(t===e)return!0;const n=no(t);if(n!==no(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ms(i.timestampValue),l=ms(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return eo(i.bytesValue).isEqual(eo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ue(i.geoPointValue.latitude)===Ue(s.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ue(i.integerValue)===Ue(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ue(i.doubleValue),l=Ue(s.doubleValue);return a===l?Jc(a)===Jc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return _a(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(mv(a)!==mv(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(l[h]===void 0||!er(a[h],l[h])))return!1;return!0}(t,e);default:return Yt()}}function Tu(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function ga(t,e){if(t===e)return 0;const n=no(t),r=no(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Ue(s.integerValue||s.doubleValue),h=Ue(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(t,e);case 3:return gv(t.timestampValue,e.timestampValue);case 4:return gv(xu(t),xu(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,a){const l=eo(s),h=eo(a);return l.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),h=a.split("/");for(let c=0;c<l.length&&c<h.length;c++){const p=ge(l[c],h[c]);if(p!==0)return p}return ge(l.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ge(Ue(s.latitude),Ue(a.latitude));return l!==0?l:ge(Ue(s.longitude),Ue(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vv(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,h,c,p;const m=s.fields||{},v=a.fields||{},_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,T=(h=v.value)===null||h===void 0?void 0:h.arrayValue,w=ge(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return w!==0?w:vv(_,T)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Yh.mapValue&&a===Yh.mapValue)return 0;if(s===Yh.mapValue)return 1;if(a===Yh.mapValue)return-1;const l=s.fields||{},h=Object.keys(l),c=a.fields||{},p=Object.keys(c);h.sort(),p.sort();for(let m=0;m<h.length&&m<p.length;++m){const v=ge(h[m],p[m]);if(v!==0)return v;const _=ga(l[h[m]],c[p[m]]);if(_!==0)return _}return ge(h.length,p.length)}(t.mapValue,e.mapValue);default:throw Yt()}}function gv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=ms(t),r=ms(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function vv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ga(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function va(t){return Yp(t)}function Yp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ms(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return eo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return qt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Yp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Yp(n.fields[a])}`;return i+"}"}(t.mapValue):Yt()}function Xp(t){return!!t&&"integerValue"in t}function C_(t){return!!t&&"arrayValue"in t}function yv(t){return!!t&&"nullValue"in t}function wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _c(t){return!!t&&"mapValue"in t}function pk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function jl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return uo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_c(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(n)}setAll(e){let n=pn.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=jl(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());_c(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_c(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){uo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jn(jl(this.value))}}function _x(t){const e=[];return uo(t.fields,(n,r)=>{const i=new pn([n]);if(_c(r)){const s=_x(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new kn(e,0,te.min(),te.min(),te.min(),jn.empty(),0)}static newFoundDocument(e,n,r,i){return new kn(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new kn(e,2,n,te.min(),te.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new kn(e,3,n,te.min(),te.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.position=e,this.inclusive=n}}function xv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=qt.comparator(qt.fromName(a.referenceValue),n.key):r=ga(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ev(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n="asc"){this.field=e,this.dir=n}}function _k(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{}class tn extends gx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vk(e,n,r):n==="array-contains"?new xk(e,r):n==="in"?new Ek(e,r):n==="not-in"?new Tk(e,r):n==="array-contains-any"?new Sk(e,r):new tn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yk(e,r):new wk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ga(n,this.value)):n!==null&&no(this.value)===no(n)&&this.matchesComparison(ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends gx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nr(e,n)}matches(e){return vx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vx(t){return t.op==="and"}function yx(t){return gk(t)&&vx(t)}function gk(t){for(const e of t.filters)if(e instanceof nr)return!1;return!0}function Jp(t){if(t instanceof tn)return t.field.canonicalString()+t.op.toString()+va(t.value);if(yx(t))return t.filters.map(e=>Jp(e)).join(",");{const e=t.filters.map(n=>Jp(n)).join(",");return`${t.op}(${e})`}}function wx(t,e){return t instanceof tn?function(r,i){return i instanceof tn&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(t,e):t instanceof nr?function(r,i){return i instanceof nr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&wx(a,i.filters[l]),!0):!1}(t,e):void Yt()}function xx(t){return t instanceof tn?function(n){return`${n.field.canonicalString()} ${n.op} ${va(n.value)}`}(t):t instanceof nr?function(n){return n.op.toString()+" {"+n.getFilters().map(xx).join(" ,")+"}"}(t):"Filter"}class vk extends tn{constructor(e,n,r){super(e,n,r),this.key=qt.fromName(r.referenceValue)}matches(e){const n=qt.comparator(e.key,this.key);return this.matchesComparison(n)}}class yk extends tn{constructor(e,n){super(e,"in",n),this.keys=Ex("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wk extends tn{constructor(e,n){super(e,"not-in",n),this.keys=Ex("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ex(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>qt.fromName(r.referenceValue))}class xk extends tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return C_(n)&&Tu(n.arrayValue,this.value)}}class Ek extends tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tu(this.value.arrayValue,n)}}class Tk extends tn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Tu(this.value.arrayValue,n)}}class Sk extends tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!C_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Tu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function Tv(t,e=null,n=[],r=[],i=null,s=null,a=null){return new Mk(t,e,n,r,i,s,a)}function k_(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>va(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>va(r)).join(",")),e.ue=n}return e.ue}function b_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_k(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ev(t.startAt,e.startAt)&&Ev(t.endAt,e.endAt)}function tm(t){return qt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Lk(t,e,n,r,i,s,a,l){return new Nf(t,e,n,r,i,s,a,l)}function Of(t){return new Nf(t)}function Sv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ck(t){return t.collectionGroup!==null}function $l(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new _n(pn.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ef(s,r))}),n.has(pn.keyField().canonicalString())||e.ce.push(new ef(pn.keyField(),r))}return e.ce}function Yi(t){const e=ee(t);return e.le||(e.le=kk(e,$l(t))),e.le}function kk(t,e){if(t.limitType==="F")return Tv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ef(i.field,s)});const n=t.endAt?new tf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tf(t.startAt.position,t.startAt.inclusive):null;return Tv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function em(t,e,n){return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return b_(Yi(t),Yi(e))&&t.limitType===e.limitType}function Tx(t){return`${k_(Yi(t))}|lt:${t.limitType}`}function Po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>xx(i)).join(", ")}]`),Df(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>va(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>va(i)).join(",")),`Target(${r})`}(Yi(t))}; limitType=${t.limitType})`}function Bf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):qt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of $l(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,h){const c=xv(a,l,h);return a.inclusive?c<=0:c<0}(r.startAt,$l(r),i)||r.endAt&&!function(a,l,h){const c=xv(a,l,h);return a.inclusive?c>=0:c>0}(r.endAt,$l(r),i))}(t,e)}function bk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sx(t){return(e,n)=>{let r=!1;for(const i of $l(t)){const s=Ik(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Ik(t,e,n){const r=t.field.isKeyField()?qt.comparator(e.key,n.key):function(s,a,l){const h=a.data.field(s),c=l.data.field(s);return h!==null&&c!==null?ga(h,c):Yt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return px(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new Be(qt.comparator);function Pr(){return Pk}const Mx=new Be(qt.comparator);function Sl(...t){let e=Mx;for(const n of t)e=e.insert(n.key,n);return e}function Lx(t){let e=Mx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hs(){return Hl()}function Cx(){return Hl()}function Hl(){return new Ia(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ak=new Be(qt.comparator),Rk=new _n(qt.comparator);function le(...t){let e=Rk;for(const n of t)e=e.add(n);return e}const Dk=new _n(ge);function Nk(){return Dk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function kx(t){return{integerValue:""+t}}function Ok(t,e){return ck(e)?kx(e):I_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this._=void 0}}function Fk(t,e,n){return t instanceof nf?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&M_(s)&&(s=L_(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Su?Ix(t,e):t instanceof Mu?Px(t,e):function(i,s){const a=bx(i,s),l=Mv(a)+Mv(i.Pe);return Xp(a)&&Xp(i.Pe)?kx(l):I_(i.serializer,l)}(t,e)}function Bk(t,e,n){return t instanceof Su?Ix(t,e):t instanceof Mu?Px(t,e):n}function bx(t,e){return t instanceof rf?function(r){return Xp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nf extends zf{}class Su extends zf{constructor(e){super(),this.elements=e}}function Ix(t,e){const n=Ax(e);for(const r of t.elements)n.some(i=>er(i,r))||n.push(r);return{arrayValue:{values:n}}}class Mu extends zf{constructor(e){super(),this.elements=e}}function Px(t,e){let n=Ax(e);for(const r of t.elements)n=n.filter(i=>!er(i,r));return{arrayValue:{values:n}}}class rf extends zf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Mv(t){return Ue(t.integerValue||t.doubleValue)}function Ax(t){return C_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Su&&i instanceof Su||r instanceof Mu&&i instanceof Mu?_a(r.elements,i.elements,er):r instanceof rf&&i instanceof rf?er(r.Pe,i.Pe):r instanceof nf&&i instanceof nf}(t.transform,e.transform)}class Vk{constructor(e,n){this.version=e,this.transformResults=n}}class Xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let Vf=class{};function Rx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nx(t.key,Xi.none()):new Vu(t.key,t.data,Xi.none());{const n=t.data,r=jn.empty();let i=new _n(pn.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ts(t.key,r,new ti(i.toArray()),Xi.none())}}function Uk(t,e,n){t instanceof Vu?function(i,s,a){const l=i.value.clone(),h=Cv(i.fieldTransforms,s,a.transformResults);l.setAll(h),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ts?function(i,s,a){if(!gc(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Cv(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(Dx(i)),h.setAll(l),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Gl(t,e,n,r){return t instanceof Vu?function(s,a,l,h){if(!gc(s.precondition,a))return l;const c=s.value.clone(),p=kv(s.fieldTransforms,h,a);return c.setAll(p),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ts?function(s,a,l,h){if(!gc(s.precondition,a))return l;const c=kv(s.fieldTransforms,h,a),p=a.data;return p.setAll(Dx(s)),p.setAll(c),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,a,l){return gc(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function jk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=bx(r.transform,i||null);s!=null&&(n===null&&(n=jn.empty()),n.set(r.field,s))}return n||null}function Lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_a(r,i,(s,a)=>zk(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vu extends Vf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ts extends Vf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Dx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cv(t,e,n){const r=new Map;Ee(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,Bk(a,l,n[i]))}return r}function kv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,Fk(s,a,e))}return r}class Nx extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $k extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Uk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Cx();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const h=Rx(a,l);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(n,r)=>Lv(n,r))&&_a(this.baseMutations,e.baseMutations,(n,r)=>Lv(n,r))}}class P_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length);let i=function(){return Ak}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new P_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,he;function qk(t){switch(t){default:return Yt();case Lt.CANCELLED:case Lt.UNKNOWN:case Lt.DEADLINE_EXCEEDED:case Lt.RESOURCE_EXHAUSTED:case Lt.INTERNAL:case Lt.UNAVAILABLE:case Lt.UNAUTHENTICATED:return!1;case Lt.INVALID_ARGUMENT:case Lt.NOT_FOUND:case Lt.ALREADY_EXISTS:case Lt.PERMISSION_DENIED:case Lt.FAILED_PRECONDITION:case Lt.ABORTED:case Lt.OUT_OF_RANGE:case Lt.UNIMPLEMENTED:case Lt.DATA_LOSS:return!0}}function Ox(t){if(t===void 0)return Ir("GRPC error has no .code"),Lt.UNKNOWN;switch(t){case Ze.OK:return Lt.OK;case Ze.CANCELLED:return Lt.CANCELLED;case Ze.UNKNOWN:return Lt.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return Lt.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return Lt.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return Lt.INTERNAL;case Ze.UNAVAILABLE:return Lt.UNAVAILABLE;case Ze.UNAUTHENTICATED:return Lt.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return Lt.INVALID_ARGUMENT;case Ze.NOT_FOUND:return Lt.NOT_FOUND;case Ze.ALREADY_EXISTS:return Lt.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return Lt.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return Lt.FAILED_PRECONDITION;case Ze.ABORTED:return Lt.ABORTED;case Ze.OUT_OF_RANGE:return Lt.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return Lt.UNIMPLEMENTED;case Ze.DATA_LOSS:return Lt.DATA_LOSS;default:return Yt()}}(he=Ze||(Ze={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new qs([4294967295,4294967295],0);function bv(t){const e=Zk().encode(t),n=new ox;return n.update(e),new Uint8Array(n.digest())}function Iv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qs([n,r],0),new qs([i,s],0)]}class A_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ml(`Invalid padding: ${n}`);if(r<0)throw new Ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(qs.fromNumber(r)));return i.compare(Kk)===1&&(i=new qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=bv(e),[r,i]=Iv(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new A_(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=bv(e),[r,i]=Iv(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uf(te.min(),i,new Be(ge),Pr(),le())}}class Uu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Uu(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Fx{constructor(e,n){this.targetId=e,this.me=n}}class Bx{constructor(e,n,r=vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Pv{constructor(){this.fe=0,this.ge=Rv(),this.pe=vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Yt()}}),new Uu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Rv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Qk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pr(),this.qe=Av(),this.Qe=new Be(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Yt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(tm(s))if(r===0){const a=new qt(s.path);this.Ue(n,a,kn.newNoDocument(a,te.min()))}else Ee(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),h=l?this.Xe(l,e,a):1;if(h!==0){this.je(n);const c=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=eo(r).toUint8Array()}catch(h){if(h instanceof mx)return ma("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{l=new A_(a,i,s)}catch(h){return ma(h instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&tm(l.target)){const h=new qt(l.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,kn.newNoDocument(h,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(h=>{const c=this.Je(h);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Uf(e,n,this.Qe,this.ke,r);return this.ke=Pr(),this.qe=Av(),this.Qe=new Be(ge),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Pv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new _n(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Vt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Pv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Av(){return new Be(qt.comparator)}function Rv(){return new Be(qt.comparator)}const Yk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Xk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Jk=(()=>({and:"AND",or:"OR"}))();class tb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nm(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function sf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eb(t,e){return sf(t,e.toTimestamp())}function Ji(t){return Ee(!!t),te.fromTimestamp(function(n){const r=ms(n);return new nn(r.seconds,r.nanos)}(t))}function R_(t,e){return im(t,e).canonicalString()}function im(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Vx(t){const e=Pe.fromString(t);return Ee(Gx(e)),e}function rm(t,e){return R_(t.databaseId,e.path)}function Fd(t,e){const n=Vx(e);if(n.get(1)!==t.databaseId.projectId)throw new jt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new jt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qt(jx(n))}function Ux(t,e){return R_(t.databaseId,e)}function nb(t){const e=Vx(t);return e.length===4?Pe.emptyPath():jx(e)}function sm(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jx(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Dv(t,e,n){return{name:rm(t,e),fields:n.value.mapValue.fields}}function ib(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Yt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,p){return c.useProto3Json?(Ee(p===void 0||typeof p=="string"),vn.fromBase64String(p||"")):(Ee(p===void 0||p instanceof Buffer||p instanceof Uint8Array),vn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const p=c.code===void 0?Lt.UNKNOWN:Ox(c.code);return new jt(p,c.message||"")}(a);n=new Bx(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fd(t,r.document.name),s=Ji(r.document.updateTime),a=r.document.createTime?Ji(r.document.createTime):te.min(),l=new jn({mapValue:{fields:r.document.fields}}),h=kn.newFoundDocument(i,s,a,l),c=r.targetIds||[],p=r.removedTargetIds||[];n=new vc(c,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fd(t,r.document),s=r.readTime?Ji(r.readTime):te.min(),a=kn.newNoDocument(i,s),l=r.removedTargetIds||[];n=new vc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fd(t,r.document),s=r.removedTargetIds||[];n=new vc([],s,i,null)}else{if(!("filter"in e))return Yt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new Wk(i,s),l=r.targetId;n=new Fx(l,a)}}return n}function rb(t,e){let n;if(e instanceof Vu)n={update:Dv(t,e.key,e.value)};else if(e instanceof Nx)n={delete:rm(t,e.key)};else if(e instanceof Ts)n={update:Dv(t,e.key,e.data),updateMask:db(e.fieldMask)};else{if(!(e instanceof $k))return Yt();n={verify:rm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof nf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Su)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rf)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Yt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Yt()}(t,e.precondition)),n}function sb(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Ji(i.updateTime):Ji(s);return a.isEqual(te.min())&&(a=Ji(s)),new Vk(a,i.transformResults||[])}(n,e))):[]}function ob(t,e){return{documents:[Ux(t,e.path)]}}function ab(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ux(t,i);const s=function(c){if(c.length!==0)return Hx(nr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(p=>function(v){return{field:Ao(v.field),direction:hb(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=nm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function lb(t){let e=nb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ee(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const v=$x(m);return v instanceof nr&&yx(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(v=>function(T){return new ef(Ro(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,Df(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(m){const v=!!m.before,_=m.values||[];return new tf(_,v)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const v=!m.before,_=m.values||[];return new tf(_,v)}(n.endAt)),Lk(e,i,a,s,l,"F",h,c)}function ub(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $x(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ro(n.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ro(n.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ro(n.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ro(n.unaryFilter.field);return tn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(t):t.fieldFilter!==void 0?function(n){return tn.create(Ro(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nr.create(n.compositeFilter.filters.map(r=>$x(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt()}}(n.compositeFilter.op))}(t):Yt()}function hb(t){return Yk[t]}function cb(t){return Xk[t]}function fb(t){return Jk[t]}function Ao(t){return{fieldPath:t.canonicalString()}}function Ro(t){return pn.fromServerFormat(t.fieldPath)}function Hx(t){return t instanceof tn?function(n){if(n.op==="=="){if(wv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NAN"}};if(yv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NAN"}};if(yv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(n.field),op:cb(n.op),value:n.value}}}(t):t instanceof nr?function(n){const r=n.getFilters().map(i=>Hx(i));return r.length===1?r[0]:{compositeFilter:{op:fb(n.op),filters:r}}}(t):Yt()}function db(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,i,s=te.min(),a=te.min(),l=vn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=h}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.ct=e}}function mb(t){const e=lb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.un=new gb}addToCollectionParentIndex(e,n){return this.un.add(n),Ct.resolve()}getCollectionParents(e,n){return Ct.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ct.resolve()}deleteFieldIndex(e,n){return Ct.resolve()}deleteAllFieldIndexes(e){return Ct.resolve()}createTargetIndexes(e,n){return Ct.resolve()}getDocumentsMatchingTarget(e,n){return Ct.resolve(null)}getIndexType(e,n){return Ct.resolve(0)}getFieldIndexes(e,n){return Ct.resolve([])}getNextCollectionGroupToUpdate(e){return Ct.resolve(null)}getMinOffset(e,n){return Ct.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,n){return Ct.resolve(ps.min())}updateCollectionGroup(e,n,r){return Ct.resolve()}updateIndexEntries(e,n){return Ct.resolve()}}class gb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _n(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ya(0)}static kn(){return new ya(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.changes=new Ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ct.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gl(r.mutation,i,ti.empty(),nn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=Hs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Sl();return s.forEach((l,h)=>{a=a.insert(l,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Pr();const a=Hl(),l=function(){return Hl()}();return n.forEach((h,c)=>{const p=r.get(c.key);i.has(c.key)&&(p===void 0||p.mutation instanceof Ts)?s=s.insert(c.key,c):p!==void 0?(a.set(c.key,p.mutation.getFieldMask()),Gl(p.mutation,c,p.mutation.getFieldMask(),nn.now())):a.set(c.key,ti.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((c,p)=>a.set(c,p)),n.forEach((c,p)=>{var m;return l.set(c,new yb(p,(m=a.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Hl();let i=new Be((a,l)=>a-l),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(h=>{const c=n.get(h);if(c===null)return;let p=r.get(h)||ti.empty();p=l.applyToLocalView(c,p),r.set(h,p);const m=(i.get(l.batchId)||le()).add(h);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const h=l.getNext(),c=h.key,p=h.value,m=Cx();p.forEach(v=>{if(!s.has(v)){const _=Rx(n.get(v),r.get(v));_!==null&&m.set(v,_),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,m))}return Ct.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return qt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ck(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ct.resolve(Hs());let l=-1,h=s;return a.next(c=>Ct.forEach(c,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?Ct.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{h=h.insert(p,v)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,h,c,le())).next(p=>({batchId:l,changes:Lx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qt(n)).next(r=>{let i=Sl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Sl();return this.indexManager.getCollectionParents(e,s).next(l=>Ct.forEach(l,h=>{const c=function(m,v){return new Nf(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(p=>{p.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((h,c)=>{const p=c.getKey();a.get(p)===null&&(a=a.insert(p,kn.newInvalidDocument(p)))});let l=Sl();return a.forEach((h,c)=>{const p=s.get(h);p!==void 0&&Gl(p.mutation,c,ti.empty(),nn.now()),Bf(n,c)&&(l=l.insert(h,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ct.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ji(i.createTime)}}(n)),Ct.resolve()}getNamedQuery(e,n){return Ct.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:mb(i.bundledQuery),readTime:Ji(i.readTime)}}(n)),Ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.overlays=new Be(qt.comparator),this.Ir=new Map}getOverlay(e,n){return Ct.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hs();return Ct.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ct.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ct.resolve()}getOverlaysForCollection(e,n,r){const i=Hs(),s=n.length+1,a=new qt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const h=l.getNext().value,c=h.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Ct.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Be((c,p)=>c-p);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let p=s.get(c.largestBatchId);p===null&&(p=Hs(),s=s.insert(c.largestBatchId,p)),p.set(c.getKey(),c)}}const l=Hs(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((c,p)=>l.set(c,p)),!(l.size()>=i)););return Ct.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Gk(n,r));let s=this.Ir.get(n);s===void 0&&(s=le(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return Ct.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.Tr=new _n(on.Er),this.dr=new _n(on.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new on(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new qt(new Pe([])),r=new on(n,e),i=new on(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new qt(new Pe([])),r=new on(n,e),i=new on(n,e+1);let s=le();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new on(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return qt.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||qt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _n(on.Er)}checkEmpty(e){return Ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Hk(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new on(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ct.resolve(a)}lookupMutationBatch(e,n){return Ct.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ct.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ct.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),i=new on(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),Ct.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _n(ge);return n.forEach(i=>{const s=new on(i,0),a=new on(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),Ct.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;qt.isDocumentKey(s)||(s=s.child(""));const a=new on(new qt(s),0);let l=new _n(ge);return this.br.forEachWhile(h=>{const c=h.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(h.wr)),!0)},a),Ct.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ct.forEach(n.mutations,i=>{const s=new on(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new on(n,0),i=this.br.firstAfterOrEqual(r);return Ct.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ct.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.Mr=e,this.docs=function(){return new Be(qt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ct.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(n))}getEntries(e,n){let r=Pr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kn.newInvalidDocument(i))}),Ct.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pr();const a=n.path,l=new qt(a.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:c,value:{document:p}}=h.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||ak(ok(p),r)<=0||(i.has(p.key)||Bf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return Ct.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Yt()}Or(e,n){return Ct.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Lb(this)}getSize(e){return Ct.resolve(this.size)}}class Lb extends vb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ct.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.persistence=e,this.Nr=new Ia(n=>k_(n),b_),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new D_,this.targetCount=0,this.kr=ya.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ct.resolve()}getLastRemoteSnapshotVersion(e){return Ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ct.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ct.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ct.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ya(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ct.resolve()}updateTargetData(e,n){return this.Kn(n),Ct.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ct.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Ct.waitFor(s).next(()=>i)}getTargetCount(e){return Ct.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ct.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ct.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ct.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ct.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ct.resolve(r)}containsKey(e,n){return Ct.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new S_(0),this.Kr=!1,this.Kr=!0,this.$r=new Tb,this.referenceDelegate=e(this),this.Ur=new Cb(this),this.indexManager=new _b,this.remoteDocumentCache=function(i){return new Mb(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new pb(n),this.Gr=new xb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Eb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Sb(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Vt("MemoryPersistence","Starting transaction:",e);const i=new bb(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ct.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class bb extends uk{constructor(e){super(),this.currentSequenceNumber=e}}class N_{constructor(e){this.persistence=e,this.Jr=new D_,this.Yr=null}static Zr(e){return new N_(e)}get Xr(){if(this.Yr)return this.Yr;throw Yt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ct.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ct.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ct.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ct.forEach(this.Xr,r=>{const i=qt.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ct.or([()=>Ct.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new O_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DL()?8:hk(AL())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Ib;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(gl()<=pe.DEBUG&&Vt("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ct.resolve()):(gl()<=pe.DEBUG&&Vt("QueryEngine","Query:",Po(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(gl()<=pe.DEBUG&&Vt("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(n))):Ct.resolve())}Yi(e,n){if(Sv(n))return Ct.resolve(null);let r=Yi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=em(n,null,"F"),r=Yi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=le(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(h=>{const c=this.ts(n,l);return this.ns(n,c,a,h.readTime)?this.Yi(e,em(n,null,"F")):this.rs(e,c,n,h)}))})))}Zi(e,n,r,i){return Sv(n)||i.isEqual(te.min())?Ct.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?Ct.resolve(null):(gl()<=pe.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Po(n)),this.rs(e,a,n,sk(i,-1)).next(l=>l))})}ts(e,n){let r=new _n(Sx(e));return n.forEach((i,s)=>{Bf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return gl()<=pe.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",Po(n)),this.Ji.getDocumentsMatchingQuery(e,n,ps.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Be(ge),this._s=new Ia(s=>k_(s),b_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Rb(t,e,n,r){return new Ab(t,e,n,r)}async function Wx(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let h=le();for(const c of i){a.push(c.batchId);for(const p of c.mutations)h=h.add(p.key)}for(const c of s){l.push(c.batchId);for(const p of c.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:l}))})})}function Db(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,h,c,p){const m=c.batch,v=m.keys();let _=Ct.resolve();return v.forEach(T=>{_=_.next(()=>p.getEntry(h,T)).next(w=>{const I=c.docVersions.get(T);Ee(I!==null),w.version.compareTo(I)<0&&(m.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),p.addEntry(w)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(h,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=le();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(h=h.add(l.batch.mutations[c].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qx(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Nb(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const v=i.get(m);if(!v)return;l.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,m)));let _=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(vn.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),i=i.insert(m,_),function(w,I,E){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(v,_,p)&&l.push(n.Ur.updateTargetData(s,_))});let h=Pr(),c=le();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(Ob(s,a,e.documentUpdates).next(p=>{h=p.Ps,c=p.Is})),!r.isEqual(te.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return Ct.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,c)).next(()=>h)}).then(s=>(n.os=i,s))}function Ob(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Pr();return n.forEach((l,h)=>{const c=s.get(l);h.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),h.isNoDocument()&&h.version.isEqual(te.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!c.isValidDocument()||h.version.compareTo(c.version)>0||h.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Vt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function Fb(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bb(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ct.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Xr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function om(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!zu(a))throw a;Vt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Nv(t,e,n){const r=ee(t);let i=te.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,c,p){const m=ee(h),v=m._s.get(p);return v!==void 0?Ct.resolve(m.os.get(v)):m.Ur.getTargetData(c,p)}(r,a,Yi(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:te.min(),n?s:le())).next(l=>(zb(r,bk(e),l),{documents:l,Ts:s})))}function zb(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Ov{constructor(){this.activeTargetIds=Nk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vb{constructor(){this.so=new Ov,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ov,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Vt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Vt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh=null;function Bd(){return Xh===null?Xh=function(){return 268435456+Math.round(2147483648*Math.random())}():Xh++,"0x"+Xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class Hb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=Bd(),h=this.xo(n,r.toUriEncodedString());Vt("RestConnection",`Sending RPC '${n}' ${l}:`,h,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,a),this.No(n,h,c,i).then(p=>(Vt("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ma("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",h,"request:",i),p})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=jb[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Bd();return new Promise((a,l)=>{const h=new ax;h.setWithCredentials(!0),h.listenOnce(lx.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case mc.NO_ERROR:const p=h.getResponseJson();Vt(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case mc.TIMEOUT:Vt(Sn,`RPC '${e}' ${s} timed out`),l(new jt(Lt.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const m=h.getStatus();if(Vt(Sn,`RPC '${e}' ${s} failed with status:`,m,"response text:",h.getResponseText()),m>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const _=v==null?void 0:v.error;if(_&&_.status&&_.message){const T=function(I){const E=I.toLowerCase().replace(/_/g,"-");return Object.values(Lt).indexOf(E)>=0?E:Lt.UNKNOWN}(_.status);l(new jt(T,_.message))}else l(new jt(Lt.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new jt(Lt.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{Vt(Sn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Vt(Sn,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Bd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cx(),l=hx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(h.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const p=s.join("");Vt(Sn,`Creating RPC '${e}' stream ${i}: ${p}`,h);const m=a.createWebChannel(p,h);let v=!1,_=!1;const T=new $b({Io:I=>{_?Vt(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(v||(Vt(Sn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),Vt(Sn,`RPC '${e}' stream ${i} sending:`,I),m.send(I))},To:()=>m.close()}),w=(I,E,M)=>{I.listen(E,R=>{try{M(R)}catch(W){setTimeout(()=>{throw W},0)}})};return w(m,Tl.EventType.OPEN,()=>{_||(Vt(Sn,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),w(m,Tl.EventType.CLOSE,()=>{_||(_=!0,Vt(Sn,`RPC '${e}' stream ${i} transport closed`),T.So())}),w(m,Tl.EventType.ERROR,I=>{_||(_=!0,ma(Sn,`RPC '${e}' stream ${i} transport errored:`,I),T.So(new jt(Lt.UNAVAILABLE,"The operation could not be completed")))}),w(m,Tl.EventType.MESSAGE,I=>{var E;if(!_){const M=I.data[0];Ee(!!M);const R=M,W=R.error||((E=R[0])===null||E===void 0?void 0:E.error);if(W){Vt(Sn,`RPC '${e}' stream ${i} received error:`,W);const q=W.status;let X=function(k){const F=Ze[k];if(F!==void 0)return Ox(F)}(q),U=W.message;X===void 0&&(X=Lt.INTERNAL,U="Unknown error status: "+q+" with message "+W.message),_=!0,T.So(new jt(X,U)),m.close()}else Vt(Sn,`RPC '${e}' stream ${i} received:`,M),T.bo(M)}}),w(l,ux.STAT_EVENT,I=>{I.stat===Qp.PROXY?Vt(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Qp.NOPROXY&&Vt(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){return new tb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Vt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,r,i,s,a,l,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Lt.RESOURCE_EXHAUSTED?(Ir(n.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new jt(Lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Vt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Vt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gb extends Kx{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ib(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?Ji(a.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=sm(this.serializer),n.addTarget=function(s,a){let l;const h=a.target;if(l=tm(h)?{documents:ob(s,h)}:{query:ab(s,h)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=zx(s,a.resumeToken);const c=nm(s,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=sf(s,a.snapshotVersion.toTimestamp());const c=nm(s,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=ub(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.a_(n)}}class Wb extends Kx{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sb(e.writeResults,e.commitTime),r=Ji(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=sm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rb(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new jt(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,im(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new jt(Lt.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,im(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new jt(Lt.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Zb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ir(n),this.D_=!1):Vt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{ho(this)&&(Vt("RemoteStore","Restarting streams for network reachability change."),await async function(h){const c=ee(h);c.L_.add(4),await ju(c),c.q_.set("Unknown"),c.L_.delete(4),await $f(c)}(this))})}),this.q_=new Zb(r,i)}}async function $f(t){if(ho(t))for(const e of t.B_)await e(!0)}async function ju(t){for(const e of t.B_)await e(!1)}function Qx(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),V_(n)?z_(n):Pa(n).r_()&&B_(n,e))}function F_(t,e){const n=ee(t),r=Pa(n);n.N_.delete(e),r.r_()&&Yx(n,e),n.N_.size===0&&(r.r_()?r.o_():ho(n)&&n.q_.set("Unknown"))}function B_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pa(t).A_(e)}function Yx(t,e){t.Q_.xe(e),Pa(t).R_(e)}function z_(t){t.Q_=new Qk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pa(t).start(),t.q_.v_()}function V_(t){return ho(t)&&!Pa(t).n_()&&t.N_.size>0}function ho(t){return ee(t).L_.size===0}function Xx(t){t.Q_=void 0}async function Qb(t){t.q_.set("Online")}async function Yb(t){t.N_.forEach((e,n)=>{B_(t,e)})}async function Xb(t,e){Xx(t),V_(t)?(t.q_.M_(e),z_(t)):t.q_.set("Unknown")}async function Jb(t,e,n){if(t.q_.set("Online"),e instanceof Bx&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){Vt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await of(t,r)}else if(e instanceof vc?t.Q_.Ke(e):e instanceof Fx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await qx(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((h,c)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.N_.get(c);p&&s.N_.set(c,p.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach((h,c)=>{const p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(vn.EMPTY_BYTE_STRING,p.snapshotVersion)),Yx(s,h);const m=new Xr(p.target,h,c,p.sequenceNumber);B_(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Vt("RemoteStore","Failed to raise snapshot:",r),await of(t,r)}}async function of(t,e,n){if(!zu(e))throw e;t.L_.add(1),await ju(t),t.q_.set("Offline"),n||(n=()=>qx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Vt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $f(t)})}function Jx(t,e){return e().catch(n=>of(t,n,e))}async function Hf(t){const e=ee(t),n=_s(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tI(e);)try{const i=await Fb(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,eI(e,i)}catch(i){await of(e,i)}tE(e)&&eE(e)}function tI(t){return ho(t)&&t.O_.length<10}function eI(t,e){t.O_.push(e);const n=_s(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tE(t){return ho(t)&&!_s(t).n_()&&t.O_.length>0}function eE(t){_s(t).start()}async function nI(t){_s(t).p_()}async function iI(t){const e=_s(t);for(const n of t.O_)e.m_(n.mutations)}async function rI(t,e,n){const r=t.O_.shift(),i=P_.from(r,e,n);await Jx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Hf(t)}async function sI(t,e){e&&_s(t).V_&&await async function(r,i){if(function(a){return qk(a)&&a!==Lt.ABORTED}(i.code)){const s=r.O_.shift();_s(r).s_(),await Jx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Hf(r)}}(t,e),tE(t)&&eE(t)}async function Bv(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),Vt("RemoteStore","RemoteStore received new credentials");const r=ho(n);n.L_.add(3),await ju(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $f(n)}async function oI(t,e){const n=ee(t);e?(n.L_.delete(2),await $f(n)):e||(n.L_.add(2),await ju(n),n.q_.set("Unknown"))}function Pa(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new Gb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Qb.bind(null,t),Ro:Yb.bind(null,t),mo:Xb.bind(null,t),d_:Jb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),V_(t)?z_(t):t.q_.set("Unknown")):(await t.K_.stop(),Xx(t))})),t.K_}function _s(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new Wb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nI.bind(null,t),mo:sI.bind(null,t),f_:iI.bind(null,t),g_:rI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hf(t)):(await t.U_.stop(),t.O_.length>0&&(Vt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new U_(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new jt(Lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j_(t,e){if(Ir("AsyncQueue",`${e}: ${t}`),zu(t))return new jt(Lt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.comparator=e?(n,r)=>e(n,r)||qt.comparator(n.key,r.key):(n,r)=>qt.comparator(n.key,r.key),this.keyedMap=Sl(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new ra(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ra)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.W_=new Be(qt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Yt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wa{constructor(e,n,r,i,s,a,l,h,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=h,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new wa(e,n,ra.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class lI{constructor(){this.queries=Vv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=Vv(),s.forEach((a,l)=>{for(const h of l.j_)h.onError(r)})})(this,new jt(Lt.ABORTED,"Firestore shutting down"))}}function Vv(){return new Ia(t=>Tx(t),Ff)}async function $_(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new aI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=j_(a,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&G_(n)}async function H_(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uI(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&G_(n)}function hI(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function G_(t){t.Y_.forEach(e=>{e.next()})}var am,Uv;(Uv=am||(am={})).ea="default",Uv.Cache="cache";class W_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.key=e}}class iE{constructor(e){this.key=e}}class cI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=Sx(e),this.Ra=new ra(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new zv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const v=i.get(p),_=Bf(this.query,m)?m:null,T=!!v&&this.mutatedKeys.has(v.key),w=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let I=!1;v&&_?v.data.isEqual(_.data)?T!==w&&(r.track({type:3,doc:_}),I=!0):this.ga(v,_)||(r.track({type:2,doc:_}),I=!0,(h&&this.Aa(_,h)>0||c&&this.Aa(_,c)<0)&&(l=!0)):!v&&_?(r.track({type:0,doc:_}),I=!0):v&&!_&&(r.track({type:1,doc:v}),I=!0,(h||c)&&(l=!0)),I&&(_?(a=a.add(_),s=w?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,m)=>function(_,T){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return w(_)-w(T)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,c=h!==this.Ea;return this.Ea=h,a.length!==0||c?{snapshot:new wa(this.query,e.Ra,s,a,e.mutatedKeys,h===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new iE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new nE(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dI{constructor(e){this.key=e,this.va=!1}}class pI{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ia(l=>Tx(l),Ff),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(qt.comparator),this.Na=new Map,this.La=new D_,this.Ba={},this.ka=new Map,this.qa=ya.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mI(t,e,n=!0){const r=uE(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await rE(r,e,n,!0),i}async function _I(t,e){const n=uE(t);await rE(n,e,!0,!1)}async function rE(t,e,n,r){const i=await Bb(t.localStore,Yi(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await gI(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Qx(t.remoteStore,i),l}async function gI(t,e,n,r,i){t.Ka=(m,v,_)=>async function(w,I,E,M){let R=I.view.ma(E);R.ns&&(R=await Nv(w.localStore,I.query,!1).then(({documents:U})=>I.view.ma(U,R)));const W=M&&M.targetChanges.get(I.targetId),q=M&&M.targetMismatches.get(I.targetId)!=null,X=I.view.applyChanges(R,w.isPrimaryClient,W,q);return $v(w,I.targetId,X.wa),X.snapshot}(t,m,v,_);const s=await Nv(t.localStore,e,!0),a=new cI(e,s.Ts),l=a.ma(s.documents),h=Uu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(l,t.isPrimaryClient,h);$v(t,n,c.wa);const p=new fI(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function vI(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Ff(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await om(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&F_(r.remoteStore,i.targetId),lm(r,i.targetId)}).catch(Bu)):(lm(r,i.targetId),await om(r.localStore,i.targetId,!0))}async function yI(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),F_(n.remoteStore,r.targetId))}async function wI(t,e,n){const r=CI(t);try{const i=await function(a,l){const h=ee(a),c=nn.now(),p=l.reduce((_,T)=>_.add(T.key),le());let m,v;return h.persistence.runTransaction("Locally write mutations","readwrite",_=>{let T=Pr(),w=le();return h.cs.getEntries(_,p).next(I=>{T=I,T.forEach((E,M)=>{M.isValidDocument()||(w=w.add(E))})}).next(()=>h.localDocuments.getOverlayedDocuments(_,T)).next(I=>{m=I;const E=[];for(const M of l){const R=jk(M,m.get(M.key).overlayedDocument);R!=null&&E.push(new Ts(M.key,R,_x(R.value.mapValue),Xi.exists(!0)))}return h.mutationQueue.addMutationBatch(_,c,E,l)}).next(I=>{v=I;const E=I.applyToLocalDocumentSet(m,w);return h.documentOverlayCache.saveOverlays(_,I.batchId,E)})}).then(()=>({batchId:v.batchId,changes:Lx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let c=a.Ba[a.currentUser.toKey()];c||(c=new Be(ge)),c=c.insert(l,h),a.Ba[a.currentUser.toKey()]=c}(r,i.batchId,n),await $u(r,i.changes),await Hf(r.remoteStore)}catch(i){const s=j_(i,"Failed to persist write");n.reject(s)}}async function sE(t,e){const n=ee(t);try{const r=await Nb(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Ee(a.va):i.removedDocuments.size>0&&(Ee(a.va),a.va=!1))}),await $u(n,r,e)}catch(r){await Bu(r)}}function jv(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const h=ee(a);h.onlineState=l;let c=!1;h.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(c=!0)}),c&&G_(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xI(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Be(qt.comparator);a=a.insert(s,kn.newNoDocument(s,te.min()));const l=le().add(s),h=new Uf(te.min(),new Map,new Be(ge),a,l);await sE(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),q_(r)}else await om(r.localStore,e,!1).then(()=>lm(r,e,n)).catch(Bu)}async function EI(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await Db(n.localStore,e);aE(n,r,null),oE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $u(n,i)}catch(i){await Bu(i)}}async function TI(t,e,n){const r=ee(t);try{const i=await function(a,l){const h=ee(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let p;return h.mutationQueue.lookupMutationBatch(c,l).next(m=>(Ee(m!==null),p=m.keys(),h.mutationQueue.removeMutationBatch(c,m))).next(()=>h.mutationQueue.performConsistencyCheck(c)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(c,p,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,p)).next(()=>h.localDocuments.getDocuments(c,p))})}(r.localStore,e);aE(r,e,n),oE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $u(r,i)}catch(i){await Bu(i)}}function oE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function aE(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function lm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||lE(t,r)})}function lE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(F_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),q_(t))}function $v(t,e,n){for(const r of n)r instanceof nE?(t.La.addReference(r.key,e),SI(t,r)):r instanceof iE?(Vt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||lE(t,r.key)):Yt()}function SI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Vt("SyncEngine","New document in limbo: "+n),t.xa.add(r),q_(t))}function q_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new qt(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new dI(n)),t.Oa=t.Oa.insert(n,r),Qx(t.remoteStore,new Xr(Yi(Of(n.path)),r,"TargetPurposeLimboResolution",S_.oe))}}async function $u(t,e,n){const r=ee(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,h)=>{a.push(r.Ka(h,e,n).then(c=>{var p;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(p=n==null?void 0:n.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(c){i.push(c);const m=O_.Wi(h.targetId,c);s.push(m)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(h,c){const p=ee(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Ct.forEach(c,v=>Ct.forEach(v.$i,_=>p.persistence.referenceDelegate.addReference(m,v.targetId,_)).next(()=>Ct.forEach(v.Ui,_=>p.persistence.referenceDelegate.removeReference(m,v.targetId,_)))))}catch(m){if(!zu(m))throw m;Vt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const v=m.targetId;if(!m.fromCache){const _=p.os.get(v),T=_.snapshotVersion,w=_.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(v,w)}}}(r.localStore,s))}async function MI(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){Vt("SyncEngine","User change. New user:",e.toKey());const r=await Wx(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(h=>{h.reject(new jt(Lt.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $u(n,r.hs)}}function LI(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function uE(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xI.bind(null,e),e.Ca.d_=uI.bind(null,e.eventManager),e.Ca.$a=hI.bind(null,e.eventManager),e}function CI(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TI.bind(null,e),e}class af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Rb(this.persistence,new Pb,e.initialUser,this.serializer)}Ga(e){return new kb(N_.Zr,this.serializer)}Wa(e){return new Vb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}af.provider={build:()=>new af};class um{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MI.bind(null,this.syncEngine),await oI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lI}()}createDatastore(e){const n=jf(e.databaseInfo.databaseId),r=function(s){return new Hb(s)}(e.databaseInfo);return function(s,a,l,h){return new qb(s,a,l,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new Kb(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>jv(this.syncEngine,n,0),function(){return Fv.D()?new Fv:new Ub}())}createSyncEngine(e,n){return function(i,s,a,l,h,c,p){const m=new pI(i,s,a,l,h,c);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);Vt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ju(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}um.provider={build:()=>new um};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mn.UNAUTHENTICATED,this.clientId=dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Vt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Vt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=j_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vd(t,e){t.asyncQueue.verifyOperationInProgress(),Vt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Wx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bI(t);Vt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Bv(e.remoteStore,i)),t._onlineComponents=e}async function bI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Vt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Lt.FAILED_PRECONDITION||i.code===Lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await Vd(t,new af)}}else Vt("FirestoreClient","Using default OfflineComponentProvider"),await Vd(t,new af);return t._offlineComponents}async function hE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Vt("FirestoreClient","Using user provided OnlineComponentProvider"),await Hv(t,t._uninitializedComponentsProvider._online)):(Vt("FirestoreClient","Using default OnlineComponentProvider"),await Hv(t,new um))),t._onlineComponents}function II(t){return hE(t).then(e=>e.syncEngine)}async function lf(t){const e=await hE(t),n=e.eventManager;return n.onListen=mI.bind(null,e.syncEngine),n.onUnlisten=vI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_I.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yI.bind(null,e.syncEngine),n}function PI(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,h,c){const p=new Z_({next:v=>{p.Za(),a.enqueueAndForget(()=>H_(s,m));const _=v.docs.has(l);!_&&v.fromCache?c.reject(new jt(Lt.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&h&&h.source==="server"?c.reject(new jt(Lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new W_(Of(l.path),p,{includeMetadataChanges:!0,_a:!0});return $_(s,m)}(await lf(t),t.asyncQueue,e,n,r)),r.promise}function AI(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,h,c){const p=new Z_({next:v=>{p.Za(),a.enqueueAndForget(()=>H_(s,m)),v.fromCache&&h.source==="server"?c.reject(new jt(Lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(v)},error:v=>c.reject(v)}),m=new W_(l,p,{includeMetadataChanges:!0,_a:!0});return $_(s,m)}(await lf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e,n){if(!n)throw new jt(Lt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RI(t,e,n,r){if(e===!0&&r===!0)throw new jt(Lt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wv(t){if(!qt.isDocumentKey(t))throw new jt(Lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qv(t){if(qt.isDocumentKey(t))throw new jt(Lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function K_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Yt()}function Ai(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new jt(Lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=K_(t);throw new jt(Lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new jt(Lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new jt(Lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new jt(Lt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new jt(Lt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new jt(Lt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new jt(Lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new jt(Lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QC;switch(r.type){case"firstParty":return new tk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new jt(Lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gv.get(n);r&&(Vt("ComponentProvider","Removing Datastore"),Gv.delete(n),r.terminate())}(this),Promise.resolve()}}function DI(t,e,n,r={}){var i;const s=(t=Ai(t,Gf))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Mn.MOCK_USER;else{l=PL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new jt(Lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Mn(c)}t._authCredentials=new YC(new fx(l,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hu(this.firestore,e,this._query)}}class Zn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class hs extends Hu{constructor(e,n,r){super(e,n,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new qt(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Ss(t,e,...n){if(t=kr(t),fE("collection","path",e),t instanceof Gf){const r=Pe.fromString(e,...n);return qv(r),new hs(t,null,r)}{if(!(t instanceof Zn||t instanceof hs))throw new jt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return qv(r),new hs(t.firestore,null,r)}}function Wl(t,e,...n){if(t=kr(t),arguments.length===1&&(e=dx.newId()),fE("doc","path",e),t instanceof Gf){const r=Pe.fromString(e,...n);return Wv(r),new Zn(t,null,new qt(r))}{if(!(t instanceof Zn||t instanceof hs))throw new jt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return Wv(r),new Zn(t.firestore,t instanceof hs?t.converter:null,new qt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zx(this,"async_queue_retry"),this.Vu=()=>{const r=zd();r&&Vt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zu(e))throw e;Vt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Ir("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=U_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Yt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Qv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class io extends Gf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Kv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kv(e),this._firestoreClient=void 0,await e}}}function NI(t,e){const n=typeof t=="object"?t:VC(),r=typeof t=="string"?t:e||"(default)",i=OC(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bL("firestore");s&&DI(i,...s)}return i}function Wf(t){if(t._terminated)throw new jt(Lt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OI(t),t._firestoreClient}function OI(t){var e,n,r;const i=t._freezeSettings(),s=function(l,h,c,p){return new dk(l,h,c,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,cE(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new kI(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const h=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(vn.fromBase64String(e))}catch(n){throw new jt(Lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xa(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new jt(Lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new jt(Lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new jt(Lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=/^__.*__$/;class BI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vu(e,this.data,n,this.fieldTransforms)}}class dE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class J_{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new J_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pE(this.Cu)&&FI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jf(e)}Qu(e,n,r,i=!1){return new J_({Cu:e,methodName:n,qu:r,path:pn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mE(t){const e=t._freezeSettings(),n=jf(t._databaseId);return new zI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VI(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);tg("Data must be an object, but it was:",a,r);const l=_E(r,a);let h,c;if(s.merge)h=new ti(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=hm(e,m,n);if(!a.contains(v))throw new jt(Lt.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);vE(p,v)||p.push(v)}h=new ti(p),c=a.fieldTransforms.filter(m=>h.covers(m.field))}else h=null,c=a.fieldTransforms;return new BI(new jn(l),h,c)}class Zf extends Q_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zf}}function UI(t,e,n,r){const i=t.Qu(1,e,n);tg("Data must be an object, but it was:",i,r);const s=[],a=jn.empty();uo(r,(h,c)=>{const p=eg(e,h,n);c=kr(c);const m=i.Nu(p);if(c instanceof Zf)s.push(p);else{const v=Kf(c,m);v!=null&&(s.push(p),a.set(p,v))}});const l=new ti(s);return new dE(a,l,i.fieldTransforms)}function jI(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[hm(e,r,n)],h=[i];if(s.length%2!=0)throw new jt(Lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(hm(e,s[v])),h.push(s[v+1]);const c=[],p=jn.empty();for(let v=l.length-1;v>=0;--v)if(!vE(c,l[v])){const _=l[v];let T=h[v];T=kr(T);const w=a.Nu(_);if(T instanceof Zf)c.push(_);else{const I=Kf(T,w);I!=null&&(c.push(_),p.set(_,I))}}const m=new ti(c);return new dE(p,m,a.fieldTransforms)}function Kf(t,e){if(gE(t=kr(t)))return tg("Unsupported field value:",e,t),_E(t,e);if(t instanceof Q_)return function(r,i){if(!pE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let h=Kf(l,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=kr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ok(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nn.fromDate(r);return{timestampValue:sf(i.serializer,s)}}if(r instanceof nn){const s=new nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sf(i.serializer,s)}}if(r instanceof Y_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xa)return{bytesValue:zx(i.serializer,r._byteString)};if(r instanceof Zn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:R_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof X_)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Bu("VectorValues must only contain numeric values.");return I_(l.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${K_(r)}`)}(t,e)}function _E(t,e){const n={};return px(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(t,(r,i)=>{const s=Kf(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function gE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nn||t instanceof Y_||t instanceof xa||t instanceof Zn||t instanceof Q_||t instanceof X_)}function tg(t,e,n){if(!gE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=K_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function hm(t,e,n){if((e=kr(e))instanceof qf)return e._internalPath;if(typeof e=="string")return eg(t,e);throw uf("Field path arguments must be of type string or ",t,!1,void 0,n)}const $I=new RegExp("[~\\*/\\[\\]]");function eg(t,e,n){if(e.search($I)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qf(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uf(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new jt(Lt.INVALID_ARGUMENT,l+t+h)}function vE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HI extends yE{data(){return super.data()}}function wE(t,e){return typeof e=="string"?eg(t,e):e instanceof qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new jt(Lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GI{convertValue(e,n="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Yt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return uo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Ue(a.doubleValue));return new X_(s)}convertGeoPoint(e){return new Y_(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=L_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const n=ms(e);return new nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);Ee(Gx(r));const i=new Eu(r.get(1),r.get(3)),s=new qt(r.popFirst(5));return i.isEqual(n)||Ir(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class EE extends yE{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yc extends EE{data(e={}){return super.data(e)}}class TE{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ll(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yc(this._firestore,this._userDataWriter,r.key,r,new Ll(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new jt(Lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const h=new yc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ll(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const h=new yc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ll(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,p=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:qI(l.type),doc:h,oldIndex:c,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){t=Ai(t,Zn);const e=Ai(t.firestore,io);return PI(Wf(e),t._key).then(n=>ME(e,t,n))}class ng extends GI{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,n)}}function KI(t){t=Ai(t,Hu);const e=Ai(t.firestore,io),n=Wf(e),r=new ng(e);return xE(t._query),AI(n,t._query).then(i=>new TE(e,r,t,i))}function cm(t,e,n,...r){t=Ai(t,Zn);const i=Ai(t.firestore,io),s=mE(i);let a;return a=typeof(e=kr(e))=="string"||e instanceof qf?jI(s,"updateDoc",t._key,e,n,r):UI(s,"updateDoc",t._key,e),SE(i,[a.toMutation(t._key,Xi.exists(!0))])}function Aa(t,e){const n=Ai(t.firestore,io),r=Wl(t),i=WI(t.converter,e);return SE(n,[VI(mE(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xi.exists(!1))]).then(()=>r)}function QI(t,...e){var n,r,i;t=kr(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Qv(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Qv(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let h,c,p;if(t instanceof Zn)c=Ai(t.firestore,io),p=Of(t._key.path),h={next:m=>{e[a]&&e[a](ME(c,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Ai(t,Hu);c=Ai(m.firestore,io),p=m._query;const v=new ng(c);h={next:_=>{e[a]&&e[a](new TE(c,v,m,_))},error:e[a+1],complete:e[a+2]},xE(t._query)}return function(v,_,T,w){const I=new Z_(w),E=new W_(_,I,T);return v.asyncQueue.enqueueAndForget(async()=>$_(await lf(v),E)),()=>{I.Za(),v.asyncQueue.enqueueAndForget(async()=>H_(await lf(v),E))}}(Wf(c),p,l,h)}function SE(t,e){return function(r,i){const s=new Tr;return r.asyncQueue.enqueueAndForget(async()=>wI(await II(r),i,s)),s.promise}(Wf(t),e)}function ME(t,e,n){const r=n.docs.get(e._key),i=new ng(t);return new EE(t,i,e._key,r,new Ll(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ba=i})(zC),Xc(new vu("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new io(new XC(r.getProvider("auth-internal")),new nk(r.getProvider("app-check-internal")),function(c,p){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new jt(Lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(c.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ia(pv,"4.7.3",e),ia(pv,"4.7.3","esm2017")})();var YI="firebase",XI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ia(YI,XI,"app");const JI={apiKey:"AIzaSyBYzAhsCVeIH-Fh1HBTrjpl-r8pkS-h1TY",authDomain:"farm-job.firebaseapp.com",projectId:"farm-job",storageBucket:"farm-job.appspot.com",messagingSenderId:"352177686150",appId:"1:352177686150:web:d9e81d0a95ca14378c7307"},tP=ix(JI),gi=NI(tP);function eP({cropYear:t}){const[e,n]=Tt.useState([]),[r,i]=Tt.useState(""),[s,a]=Tt.useState("fieldName");Tt.useEffect(()=>{const c=QI(Ss(gi,"fields"),p=>{const m=p.docs.map(v=>({id:v.id,...v.data()}));n(m)});return()=>c()},[]);const l=e.filter(c=>{var p;return c.cropYear===t||((p=c.crops)==null?void 0:p[t])}).filter(c=>!r||c.farmName===r).sort((c,p)=>!c[s]||!p[s]?0:c[s].toString().localeCompare(p[s].toString())),h=[...new Set(e.map(c=>c.farmName))];return it.jsxs("div",{children:[it.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Fields  Crop Year: ",t]}),it.jsxs("div",{className:"flex items-center mb-4 gap-4",children:[it.jsx("label",{className:"text-sm",children:"Filter by Farm:"}),it.jsxs("select",{value:r,onChange:c=>i(c.target.value),className:"border p-2 text-sm rounded",children:[it.jsx("option",{value:"",children:"All Farms"}),h.map(c=>it.jsx("option",{value:c,children:c},c))]}),it.jsx("label",{className:"text-sm ml-4",children:"Sort by:"}),it.jsxs("select",{value:s,onChange:c=>a(c.target.value),className:"border p-2 text-sm rounded",children:[it.jsx("option",{value:"fieldName",children:"Field Name"}),it.jsx("option",{value:"farmName",children:"Farm Name"}),it.jsx("option",{value:"gpsAcres",children:"GPS Acres"})]})]}),it.jsxs("table",{className:"w-full table-auto text-sm border rounded overflow-hidden bg-white shadow",children:[it.jsx("thead",{className:"bg-blue-100 text-left",children:it.jsxs("tr",{children:[it.jsx("th",{className:"p-2",children:"Field"}),it.jsx("th",{className:"p-2",children:"Farm"}),it.jsx("th",{className:"p-2",children:"GPS Acres"}),it.jsx("th",{className:"p-2",children:"FSA Acres"}),it.jsx("th",{className:"p-2",children:"County"}),it.jsx("th",{className:"p-2",children:"Crop"}),it.jsx("th",{className:"p-2",children:"Boundary"})]})}),it.jsx("tbody",{children:l.map(c=>{var v,_;const p=(_=(v=c.crops)==null?void 0:v[t])==null?void 0:_.crop,m=!!c.boundary;return it.jsxs("tr",{className:"hover:bg-blue-50",children:[it.jsx("td",{className:"p-2",children:it.jsx(vL,{to:`/fields/${c.id}`,className:"text-blue-700 hover:underline font-semibold",children:c.fieldName})}),it.jsx("td",{className:"p-2",children:c.farmName}),it.jsx("td",{className:"p-2",children:c.gpsAcres}),it.jsx("td",{className:"p-2",children:c.fsaAcres}),it.jsx("td",{className:"p-2",children:c.county}),it.jsx("td",{className:"p-2",children:p?it.jsx("span",{className:"text-green-700 font-semibold",children:"Assigned"}):it.jsx("span",{className:"text-gray-400",children:""})}),it.jsx("td",{className:"p-2 text-center",children:m?it.jsx("span",{className:"text-green-600 text-lg",children:""}):it.jsx("span",{className:"text-gray-300",children:""})})]},c.id)})})]})]})}function nP(t,e){const n=Tt.useRef(e);Tt.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const iP=1;function rP(t){return Object.freeze({__version:iP,map:t})}function sP(t,e){return Object.freeze({...t,...e})}const LE=Tt.createContext(null),CE=LE.Provider;function ig(){const t=Tt.useContext(LE);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function oP(t){function e(n,r){const{instance:i,context:s}=t(n).current;return Tt.useImperativeHandle(r,()=>i),n.children==null?null:Zs.createElement(CE,{value:s},n.children)}return Tt.forwardRef(e)}function aP(t){function e(n,r){const{instance:i}=t(n).current;return Tt.useImperativeHandle(r,()=>i),null}return Tt.forwardRef(e)}function kE(t,e){const n=Tt.useRef();Tt.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function rg(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var fm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Tm,function(n){var r="1.9.4";function i(o){var u,d,g,b;for(d=1,g=arguments.length;d<g;d++){b=arguments[d];for(u in b)o[u]=b[u]}return o}var s=Object.create||function(){function o(){}return function(u){return o.prototype=u,new o}}();function a(o,u){var d=Array.prototype.slice;if(o.bind)return o.bind.apply(o,d.call(arguments,1));var g=d.call(arguments,2);return function(){return o.apply(u,g.length?g.concat(d.call(arguments)):arguments)}}var l=0;function h(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function c(o,u,d){var g,b,$,et;return et=function(){g=!1,b&&($.apply(d,b),b=!1)},$=function(){g?b=arguments:(o.apply(d,arguments),setTimeout(et,u),g=!0)},$}function p(o,u,d){var g=u[1],b=u[0],$=g-b;return o===g&&d?o:((o-b)%$+$)%$+b}function m(){return!1}function v(o,u){if(u===!1)return o;var d=Math.pow(10,u===void 0?6:u);return Math.round(o*d)/d}function _(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function T(o){return _(o).split(/\s+/)}function w(o,u){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var d in u)o.options[d]=u[d];return o.options}function I(o,u,d){var g=[];for(var b in o)g.push(encodeURIComponent(d?b.toUpperCase():b)+"="+encodeURIComponent(o[b]));return(!u||u.indexOf("?")===-1?"?":"&")+g.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function M(o,u){return o.replace(E,function(d,g){var b=u[g];if(b===void 0)throw new Error("No value provided for variable "+d);return typeof b=="function"&&(b=b(u)),b})}var R=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function W(o,u){for(var d=0;d<o.length;d++)if(o[d]===u)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var U=0;function S(o){var u=+new Date,d=Math.max(0,16-(u-U));return U=u+d,window.setTimeout(o,d)}var k=window.requestAnimationFrame||X("RequestAnimationFrame")||S,F=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function H(o,u,d){if(d&&k===S)o.call(u);else return k.call(window,a(o,u))}function D(o){o&&F.call(window,o)}var j={__proto__:null,extend:i,create:s,bind:a,get lastId(){return l},stamp:h,throttle:c,wrapNum:p,falseFn:m,formatNum:v,trim:_,splitWords:T,setOptions:w,getParamString:I,template:M,isArray:R,indexOf:W,emptyImageUrl:q,requestFn:k,cancelFn:F,requestAnimFrame:H,cancelAnimFrame:D};function B(){}B.extend=function(o){var u=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=u.__super__=this.prototype,g=s(d);g.constructor=u,u.prototype=g;for(var b in this)Object.prototype.hasOwnProperty.call(this,b)&&b!=="prototype"&&b!=="__super__"&&(u[b]=this[b]);return o.statics&&i(u,o.statics),o.includes&&(wt(o.includes),i.apply(null,[g].concat(o.includes))),i(g,o),delete g.statics,delete g.includes,g.options&&(g.options=d.options?s(d.options):{},i(g.options,o.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,et=g._initHooks.length;$<et;$++)g._initHooks[$].call(this)}},u},B.include=function(o){var u=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=u,this.mergeOptions(o.options)),this},B.mergeOptions=function(o){return i(this.prototype.options,o),this},B.addInitHook=function(o){var u=Array.prototype.slice.call(arguments,1),d=typeof o=="function"?o:function(){this[o].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function wt(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=R(o)?o:[o];for(var u=0;u<o.length;u++)o[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Rt={on:function(o,u,d){if(typeof o=="object")for(var g in o)this._on(g,o[g],u);else{o=T(o);for(var b=0,$=o.length;b<$;b++)this._on(o[b],u,d)}return this},off:function(o,u,d){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var g in o)this._off(g,o[g],u);else{o=T(o);for(var b=arguments.length===1,$=0,et=o.length;$<et;$++)b?this._off(o[$]):this._off(o[$],u,d)}return this},_on:function(o,u,d,g){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(o,u,d)===!1){d===this&&(d=void 0);var b={fn:u,ctx:d};g&&(b.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(b)}},_off:function(o,u,d){var g,b,$;if(this._events&&(g=this._events[o],!!g)){if(arguments.length===1){if(this._firingCount)for(b=0,$=g.length;b<$;b++)g[b].fn=m;delete this._events[o];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var et=this._listens(o,u,d);if(et!==!1){var ct=g[et];this._firingCount&&(ct.fn=m,this._events[o]=g=g.slice()),g.splice(et,1)}}},fire:function(o,u,d){if(!this.listens(o,d))return this;var g=i({},u,{type:o,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var b=this._events[o];if(b){this._firingCount=this._firingCount+1||1;for(var $=0,et=b.length;$<et;$++){var ct=b[$],gt=ct.fn;ct.once&&this.off(o,gt,ct.ctx),gt.call(ct.ctx||this,g)}this._firingCount--}}return d&&this._propagateEvent(g),this},listens:function(o,u,d,g){typeof o!="string"&&console.warn('"string" type argument expected');var b=u;typeof u!="function"&&(g=!!u,b=void 0,d=void 0);var $=this._events&&this._events[o];if($&&$.length&&this._listens(o,b,d)!==!1)return!0;if(g){for(var et in this._eventParents)if(this._eventParents[et].listens(o,u,d,g))return!0}return!1},_listens:function(o,u,d){if(!this._events)return!1;var g=this._events[o]||[];if(!u)return!!g.length;d===this&&(d=void 0);for(var b=0,$=g.length;b<$;b++)if(g[b].fn===u&&g[b].ctx===d)return b;return!1},once:function(o,u,d){if(typeof o=="object")for(var g in o)this._on(g,o[g],u,!0);else{o=T(o);for(var b=0,$=o.length;b<$;b++)this._on(o[b],u,d,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[h(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[h(o)],this},_propagateEvent:function(o){for(var u in this._eventParents)this._eventParents[u].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};Rt.addEventListener=Rt.on,Rt.removeEventListener=Rt.clearAllEventListeners=Rt.off,Rt.addOneTimeEventListener=Rt.once,Rt.fireEvent=Rt.fire,Rt.hasEventListeners=Rt.listens;var mt=B.extend(Rt);function lt(o,u,d){this.x=d?Math.round(o):o,this.y=d?Math.round(u):u}var ot=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};lt.prototype={clone:function(){return new lt(this.x,this.y)},add:function(o){return this.clone()._add(ft(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ft(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new lt(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new lt(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ot(this.x),this.y=ot(this.y),this},distanceTo:function(o){o=ft(o);var u=o.x-this.x,d=o.y-this.y;return Math.sqrt(u*u+d*d)},equals:function(o){return o=ft(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ft(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ft(o,u,d){return o instanceof lt?o:R(o)?new lt(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new lt(o.x,o.y):new lt(o,u,d)}function J(o,u){if(o)for(var d=u?[o,u]:o,g=0,b=d.length;g<b;g++)this.extend(d[g])}J.prototype={extend:function(o){var u,d;if(!o)return this;if(o instanceof lt||typeof o[0]=="number"||"x"in o)u=d=ft(o);else if(o=tt(o),u=o.min,d=o.max,!u||!d)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=d.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(o){return ft((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ft(this.min.x,this.max.y)},getTopRight:function(){return ft(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var u,d;return typeof o[0]=="number"||o instanceof lt?o=ft(o):o=tt(o),o instanceof J?(u=o.min,d=o.max):u=d=o,u.x>=this.min.x&&d.x<=this.max.x&&u.y>=this.min.y&&d.y<=this.max.y},intersects:function(o){o=tt(o);var u=this.min,d=this.max,g=o.min,b=o.max,$=b.x>=u.x&&g.x<=d.x,et=b.y>=u.y&&g.y<=d.y;return $&&et},overlaps:function(o){o=tt(o);var u=this.min,d=this.max,g=o.min,b=o.max,$=b.x>u.x&&g.x<d.x,et=b.y>u.y&&g.y<d.y;return $&&et},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var u=this.min,d=this.max,g=Math.abs(u.x-d.x)*o,b=Math.abs(u.y-d.y)*o;return tt(ft(u.x-g,u.y-b),ft(d.x+g,d.y+b))},equals:function(o){return o?(o=tt(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function tt(o,u){return!o||o instanceof J?o:new J(o,u)}function _t(o,u){if(o)for(var d=u?[o,u]:o,g=0,b=d.length;g<b;g++)this.extend(d[g])}_t.prototype={extend:function(o){var u=this._southWest,d=this._northEast,g,b;if(o instanceof vt)g=o,b=o;else if(o instanceof _t){if(g=o._southWest,b=o._northEast,!g||!b)return this}else return o?this.extend(Pt(o)||Et(o)):this;return!u&&!d?(this._southWest=new vt(g.lat,g.lng),this._northEast=new vt(b.lat,b.lng)):(u.lat=Math.min(g.lat,u.lat),u.lng=Math.min(g.lng,u.lng),d.lat=Math.max(b.lat,d.lat),d.lng=Math.max(b.lng,d.lng)),this},pad:function(o){var u=this._southWest,d=this._northEast,g=Math.abs(u.lat-d.lat)*o,b=Math.abs(u.lng-d.lng)*o;return new _t(new vt(u.lat-g,u.lng-b),new vt(d.lat+g,d.lng+b))},getCenter:function(){return new vt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new vt(this.getNorth(),this.getWest())},getSouthEast:function(){return new vt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof vt||"lat"in o?o=Pt(o):o=Et(o);var u=this._southWest,d=this._northEast,g,b;return o instanceof _t?(g=o.getSouthWest(),b=o.getNorthEast()):g=b=o,g.lat>=u.lat&&b.lat<=d.lat&&g.lng>=u.lng&&b.lng<=d.lng},intersects:function(o){o=Et(o);var u=this._southWest,d=this._northEast,g=o.getSouthWest(),b=o.getNorthEast(),$=b.lat>=u.lat&&g.lat<=d.lat,et=b.lng>=u.lng&&g.lng<=d.lng;return $&&et},overlaps:function(o){o=Et(o);var u=this._southWest,d=this._northEast,g=o.getSouthWest(),b=o.getNorthEast(),$=b.lat>u.lat&&g.lat<d.lat,et=b.lng>u.lng&&g.lng<d.lng;return $&&et},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,u){return o?(o=Et(o),this._southWest.equals(o.getSouthWest(),u)&&this._northEast.equals(o.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Et(o,u){return o instanceof _t?o:new _t(o,u)}function vt(o,u,d){if(isNaN(o)||isNaN(u))throw new Error("Invalid LatLng object: ("+o+", "+u+")");this.lat=+o,this.lng=+u,d!==void 0&&(this.alt=+d)}vt.prototype={equals:function(o,u){if(!o)return!1;o=Pt(o);var d=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return d<=(u===void 0?1e-9:u)},toString:function(o){return"LatLng("+v(this.lat,o)+", "+v(this.lng,o)+")"},distanceTo:function(o){return It.distance(this,Pt(o))},wrap:function(){return It.wrapLatLng(this)},toBounds:function(o){var u=180*o/40075017,d=u/Math.cos(Math.PI/180*this.lat);return Et([this.lat-u,this.lng-d],[this.lat+u,this.lng+d])},clone:function(){return new vt(this.lat,this.lng,this.alt)}};function Pt(o,u,d){return o instanceof vt?o:R(o)&&typeof o[0]!="object"?o.length===3?new vt(o[0],o[1],o[2]):o.length===2?new vt(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new vt(o.lat,"lng"in o?o.lng:o.lon,o.alt):u===void 0?null:new vt(o,u,d)}var $t={latLngToPoint:function(o,u){var d=this.projection.project(o),g=this.scale(u);return this.transformation._transform(d,g)},pointToLatLng:function(o,u){var d=this.scale(u),g=this.transformation.untransform(o,d);return this.projection.unproject(g)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var u=this.projection.bounds,d=this.scale(o),g=this.transformation.transform(u.min,d),b=this.transformation.transform(u.max,d);return new J(g,b)},infinite:!1,wrapLatLng:function(o){var u=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,d=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,g=o.alt;return new vt(d,u,g)},wrapLatLngBounds:function(o){var u=o.getCenter(),d=this.wrapLatLng(u),g=u.lat-d.lat,b=u.lng-d.lng;if(g===0&&b===0)return o;var $=o.getSouthWest(),et=o.getNorthEast(),ct=new vt($.lat-g,$.lng-b),gt=new vt(et.lat-g,et.lng-b);return new _t(ct,gt)}},It=i({},$t,{wrapLng:[-180,180],R:6371e3,distance:function(o,u){var d=Math.PI/180,g=o.lat*d,b=u.lat*d,$=Math.sin((u.lat-o.lat)*d/2),et=Math.sin((u.lng-o.lng)*d/2),ct=$*$+Math.cos(g)*Math.cos(b)*et*et,gt=2*Math.atan2(Math.sqrt(ct),Math.sqrt(1-ct));return this.R*gt}}),Nt=6378137,Ht={R:Nt,MAX_LATITUDE:85.0511287798,project:function(o){var u=Math.PI/180,d=this.MAX_LATITUDE,g=Math.max(Math.min(d,o.lat),-d),b=Math.sin(g*u);return new lt(this.R*o.lng*u,this.R*Math.log((1+b)/(1-b))/2)},unproject:function(o){var u=180/Math.PI;return new vt((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*u,o.x*u/this.R)},bounds:function(){var o=Nt*Math.PI;return new J([-o,-o],[o,o])}()};function Ft(o,u,d,g){if(R(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=u,this._c=d,this._d=g}Ft.prototype={transform:function(o,u){return this._transform(o.clone(),u)},_transform:function(o,u){return u=u||1,o.x=u*(this._a*o.x+this._b),o.y=u*(this._c*o.y+this._d),o},untransform:function(o,u){return u=u||1,new lt((o.x/u-this._b)/this._a,(o.y/u-this._d)/this._c)}};function Gt(o,u,d,g){return new Ft(o,u,d,g)}var Kt=i({},It,{code:"EPSG:3857",projection:Ht,transformation:function(){var o=.5/(Math.PI*Ht.R);return Gt(o,.5,-o,.5)}()}),P=i({},Kt,{code:"EPSG:900913"});function dt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function at(o,u){var d="",g,b,$,et,ct,gt;for(g=0,$=o.length;g<$;g++){for(ct=o[g],b=0,et=ct.length;b<et;b++)gt=ct[b],d+=(b?"L":"M")+gt.x+" "+gt.y;d+=u?Ut.svg?"z":"x":""}return d||"M0 0"}var N=document.documentElement.style,O="ActiveXObject"in window,V=O&&!document.addEventListener,Z="msLaunchUri"in navigator&&!("documentMode"in document),K=yn("webkit"),Y=yn("android"),rt=yn("android 2")||yn("android 3"),xt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=Y&&yn("Google")&&xt<537&&!("AudioNode"in window),Mt=!!window.opera,z=!Z&&yn("chrome"),y=yn("gecko")&&!K&&!Mt&&!O,C=!z&&yn("safari"),Q=yn("phantom"),nt="OTransition"in N,ht=navigator.platform.indexOf("Win")===0,pt=O&&"transition"in N,Wt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,_e="MozPerspective"in N,ie=!window.L_DISABLE_3D&&(pt||Wt||_e)&&!nt&&!Q,ce=typeof orientation<"u"||yn("mobile"),fe=ce&&K,Cs=ce&&Wt,ks=!window.PointerEvent&&window.MSPointerEvent,Dr=!!(window.PointerEvent||ks),Bn="ontouchstart"in window||!!window.TouchEvent,Oi=!window.L_NO_TOUCH&&(Bn||Dr),Oa=ce&&Mt,rr=ce&&y,th=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,co=function(){var o=!1;try{var u=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,u),window.removeEventListener("testPassiveEventSupport",m,u)}catch{}return o}(),eh=function(){return!!document.createElement("canvas").getContext}(),sr=!!(document.createElementNS&&dt("svg").createSVGRect),nh=!!sr&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),un=!sr&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var u=o.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),ih=navigator.platform.indexOf("Mac")===0,bs=navigator.platform.indexOf("Linux")===0;function yn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ut={ie:O,ielt9:V,edge:Z,webkit:K,android:Y,android23:rt,androidStock:st,opera:Mt,chrome:z,gecko:y,safari:C,phantom:Q,opera12:nt,win:ht,ie3d:pt,webkit3d:Wt,gecko3d:_e,any3d:ie,mobile:ce,mobileWebkit:fe,mobileWebkit3d:Cs,msPointer:ks,pointer:Dr,touch:Oi,touchNative:Bn,mobileOpera:Oa,mobileGecko:rr,retina:th,passiveEvents:co,canvas:eh,svg:sr,vml:un,inlineSvg:nh,mac:ih,linux:bs},rh=Ut.msPointer?"MSPointerDown":"pointerdown",or=Ut.msPointer?"MSPointerMove":"pointermove",sh=Ut.msPointer?"MSPointerUp":"pointerup",oh=Ut.msPointer?"MSPointerCancel":"pointercancel",Nr={touchstart:rh,touchmove:or,touchend:sh,touchcancel:oh},Fa={touchstart:Jf,touchmove:Ps,touchend:Ps,touchcancel:Ps},Fi={},Is=!1;function Bi(o,u,d){return u==="touchstart"&&uh(),Fa[u]?(d=Fa[u].bind(this,d),o.addEventListener(Nr[u],d,!1),d):(console.warn("wrong event specified:",u),m)}function ah(o,u,d){if(!Nr[u]){console.warn("wrong event specified:",u);return}o.removeEventListener(Nr[u],d,!1)}function lh(o){Fi[o.pointerId]=o}function Ba(o){Fi[o.pointerId]&&(Fi[o.pointerId]=o)}function fo(o){delete Fi[o.pointerId]}function uh(){Is||(document.addEventListener(rh,lh,!0),document.addEventListener(or,Ba,!0),document.addEventListener(sh,fo,!0),document.addEventListener(oh,fo,!0),Is=!0)}function Ps(o,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var d in Fi)u.touches.push(Fi[d]);u.changedTouches=[u],o(u)}}function Jf(o,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&We(u),Ps(o,u)}function po(o){var u={},d,g;for(g in o)d=o[g],u[g]=d&&d.bind?d.bind(o):d;return o=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var hh=200;function za(o,u){o.addEventListener("dblclick",u);var d=0,g;function b($){if($.detail!==1){g=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var et=zr($);if(!(et.some(function(gt){return gt instanceof HTMLLabelElement&&gt.attributes.for})&&!et.some(function(gt){return gt instanceof HTMLInputElement||gt instanceof HTMLSelectElement}))){var ct=Date.now();ct-d<=hh?(g++,g===2&&u(po($))):g=1,d=ct}}}return o.addEventListener("click",b),{dblclick:u,simDblclick:b}}function As(o,u){o.removeEventListener("dblclick",u.dblclick),o.removeEventListener("click",u.simDblclick)}var wi=hr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ar=hr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ch=ar==="webkitTransition"||ar==="OTransition"?ar+"End":"transitionend";function Va(o){return typeof o=="string"?document.getElementById(o):o}function Or(o,u){var d=o.style[u]||o.currentStyle&&o.currentStyle[u];if((!d||d==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(o,null);d=g?g[u]:null}return d==="auto"?null:d}function ue(o,u,d){var g=document.createElement(o);return g.className=u||"",d&&d.appendChild(g),g}function Se(o){var u=o.parentNode;u&&u.removeChild(o)}function Fr(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function lr(o){var u=o.parentNode;u&&u.lastChild!==o&&u.appendChild(o)}function ur(o){var u=o.parentNode;u&&u.firstChild!==o&&u.insertBefore(o,u.firstChild)}function Ua(o,u){if(o.classList!==void 0)return o.classList.contains(u);var d=_o(o);return d.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(d)}function ne(o,u){if(o.classList!==void 0)for(var d=T(u),g=0,b=d.length;g<b;g++)o.classList.add(d[g]);else if(!Ua(o,u)){var $=_o(o);mo(o,($?$+" ":"")+u)}}function be(o,u){o.classList!==void 0?o.classList.remove(u):mo(o,_((" "+_o(o)+" ").replace(" "+u+" "," ")))}function mo(o,u){o.className.baseVal===void 0?o.className=u:o.className.baseVal=u}function _o(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Ge(o,u){"opacity"in o.style?o.style.opacity=u:"filter"in o.style&&xi(o,u)}function xi(o,u){var d=!1,g="DXImageTransform.Microsoft.Alpha";try{d=o.filters.item(g)}catch{if(u===1)return}u=Math.round(u*100),d?(d.Enabled=u!==100,d.Opacity=u):o.style.filter+=" progid:"+g+"(opacity="+u+")"}function hr(o){for(var u=document.documentElement.style,d=0;d<o.length;d++)if(o[d]in u)return o[d];return!1}function oi(o,u,d){var g=u||new lt(0,0);o.style[wi]=(Ut.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(d?" scale("+d+")":"")}function Ae(o,u){o._leaflet_pos=u,Ut.any3d?oi(o,u):(o.style.left=u.x+"px",o.style.top=u.y+"px")}function de(o){return o._leaflet_pos||new lt(0,0)}var zi,Ei,cr;if("onselectstart"in document)zi=function(){Xt(window,"selectstart",We)},Ei=function(){Te(window,"selectstart",We)};else{var Rs=hr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);zi=function(){if(Rs){var o=document.documentElement.style;cr=o[Rs],o[Rs]="none"}},Ei=function(){Rs&&(document.documentElement.style[Rs]=cr,cr=void 0)}}function go(){Xt(window,"dragstart",We)}function ja(){Te(window,"dragstart",We)}var vo,$a;function Ha(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Vi(),vo=o,$a=o.style.outlineStyle,o.style.outlineStyle="none",Xt(window,"keydown",Vi))}function Vi(){vo&&(vo.style.outlineStyle=$a,vo=void 0,$a=void 0,Te(window,"keydown",Vi))}function Ti(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function yo(o){var u=o.getBoundingClientRect();return{x:u.width/o.offsetWidth||1,y:u.height/o.offsetHeight||1,boundingClientRect:u}}var fh={__proto__:null,TRANSFORM:wi,TRANSITION:ar,TRANSITION_END:ch,get:Va,getStyle:Or,create:ue,remove:Se,empty:Fr,toFront:lr,toBack:ur,hasClass:Ua,addClass:ne,removeClass:be,setClass:mo,getClass:_o,setOpacity:Ge,testProp:hr,setTransform:oi,setPosition:Ae,getPosition:de,get disableTextSelection(){return zi},get enableTextSelection(){return Ei},disableImageDrag:go,enableImageDrag:ja,preventOutline:Ha,restoreOutline:Vi,getSizedParentNode:Ti,getScale:yo};function Xt(o,u,d,g){if(u&&typeof u=="object")for(var b in u)ai(o,b,u[b],d);else{u=T(u);for(var $=0,et=u.length;$<et;$++)ai(o,u[$],d,g)}return this}var hn="_leaflet_events";function Te(o,u,d,g){if(arguments.length===1)dh(o),delete o[hn];else if(u&&typeof u=="object")for(var b in u)Wa(o,b,u[b],d);else if(u=T(u),arguments.length===2)dh(o,function(ct){return W(u,ct)!==-1});else for(var $=0,et=u.length;$<et;$++)Wa(o,u[$],d,g);return this}function dh(o,u){for(var d in o[hn]){var g=d.split(/\d/)[0];(!u||u(g))&&Wa(o,g,null,null,d)}}var Ga={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ai(o,u,d,g){var b=u+h(d)+(g?"_"+h(g):"");if(o[hn]&&o[hn][b])return this;var $=function(ct){return d.call(g||o,ct||window.event)},et=$;!Ut.touchNative&&Ut.pointer&&u.indexOf("touch")===0?$=Bi(o,u,$):Ut.touch&&u==="dblclick"?$=za(o,$):"addEventListener"in o?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?o.addEventListener(Ga[u]||u,$,Ut.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?($=function(ct){ct=ct||window.event,Ka(o,ct)&&et(ct)},o.addEventListener(Ga[u],$,!1)):o.addEventListener(u,et,!1):o.attachEvent("on"+u,$),o[hn]=o[hn]||{},o[hn][b]=$}function Wa(o,u,d,g,b){b=b||u+h(d)+(g?"_"+h(g):"");var $=o[hn]&&o[hn][b];if(!$)return this;!Ut.touchNative&&Ut.pointer&&u.indexOf("touch")===0?ah(o,u,$):Ut.touch&&u==="dblclick"?As(o,$):"removeEventListener"in o?o.removeEventListener(Ga[u]||u,$,!1):o.detachEvent("on"+u,$),o[hn][b]=null}function fr(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Br(o){return ai(o,"wheel",fr),this}function Ui(o){return Xt(o,"mousedown touchstart dblclick contextmenu",fr),o._leaflet_disable_click=!0,this}function We(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Qn(o){return We(o),fr(o),this}function zr(o){if(o.composedPath)return o.composedPath();for(var u=[],d=o.target;d;)u.push(d),d=d.parentNode;return u}function qa(o,u){if(!u)return new lt(o.clientX,o.clientY);var d=yo(u),g=d.boundingClientRect;return new lt((o.clientX-g.left)/d.x-u.clientLeft,(o.clientY-g.top)/d.y-u.clientTop)}var Za=Ut.linux&&Ut.chrome?window.devicePixelRatio:Ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Le(o){return Ut.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Za:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Ka(o,u){var d=u.relatedTarget;if(!d)return!0;try{for(;d&&d!==o;)d=d.parentNode}catch{return!1}return d!==o}var td={__proto__:null,on:Xt,off:Te,stopPropagation:fr,disableScrollPropagation:Br,disableClickPropagation:Ui,preventDefault:We,stop:Qn,getPropagationPath:zr,getMousePosition:qa,getWheelDelta:Le,isExternalTarget:Ka,addListener:Xt,removeListener:Te},Qa=mt.extend({run:function(o,u,d,g){this.stop(),this._el=o,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=de(o),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(o){var u=+new Date-this._startTime,d=this._duration*1e3;u<d?this._runFrame(this._easeOut(u/d),o):(this._runFrame(1),this._complete())},_runFrame:function(o,u){var d=this._startPos.add(this._offset.multiplyBy(o));u&&d._round(),Ae(this._el,d),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),se=mt.extend({options:{crs:Kt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,u){u=w(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Pt(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ar&&Ut.any3d&&!Ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xt(this._proxy,ch,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,u,d){if(u=u===void 0?this._zoom:this._limitZoom(u),o=this._limitCenter(Pt(o),u,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=i({animate:d.animate},d.zoom),d.pan=i({animate:d.animate,duration:d.duration},d.pan));var g=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,u,d.zoom):this._tryAnimatedPan(o,d.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(o,u,d.pan&&d.pan.noMoveStart),this},setZoom:function(o,u){return this._loaded?this.setView(this.getCenter(),o,{zoom:u}):(this._zoom=o,this)},zoomIn:function(o,u){return o=o||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,u)},zoomOut:function(o,u){return o=o||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,u)},setZoomAround:function(o,u,d){var g=this.getZoomScale(u),b=this.getSize().divideBy(2),$=o instanceof lt?o:this.latLngToContainerPoint(o),et=$.subtract(b).multiplyBy(1-1/g),ct=this.containerPointToLatLng(b.add(et));return this.setView(ct,u,{zoom:d})},_getBoundsCenterZoom:function(o,u){u=u||{},o=o.getBounds?o.getBounds():Et(o);var d=ft(u.paddingTopLeft||u.padding||[0,0]),g=ft(u.paddingBottomRight||u.padding||[0,0]),b=this.getBoundsZoom(o,!1,d.add(g));if(b=typeof u.maxZoom=="number"?Math.min(u.maxZoom,b):b,b===1/0)return{center:o.getCenter(),zoom:b};var $=g.subtract(d).divideBy(2),et=this.project(o.getSouthWest(),b),ct=this.project(o.getNorthEast(),b),gt=this.unproject(et.add(ct).divideBy(2).add($),b);return{center:gt,zoom:b}},fitBounds:function(o,u){if(o=Et(o),!o.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(o,u);return this.setView(d.center,d.zoom,u)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,u){return this.setView(o,this._zoom,{pan:u})},panBy:function(o,u){if(o=ft(o).round(),u=u||{},!o.x&&!o.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){ne(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,d,u.duration||.25,u.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,u,d){if(d=d||{},d.animate===!1||!Ut.any3d)return this.setView(o,u,d);this._stop();var g=this.project(this.getCenter()),b=this.project(o),$=this.getSize(),et=this._zoom;o=Pt(o),u=u===void 0?et:u;var ct=Math.max($.x,$.y),gt=ct*this.getZoomScale(et,u),St=b.distanceTo(g)||1,Bt=1.42,Zt=Bt*Bt;function re(qe){var Ph=qe?-1:1,B2=qe?gt:ct,z2=gt*gt-ct*ct+Ph*Zt*Zt*St*St,V2=2*B2*Zt*St,sd=z2/V2,zg=Math.sqrt(sd*sd+1)-sd,U2=zg<1e-9?-18:Math.log(zg);return U2}function Pn(qe){return(Math.exp(qe)-Math.exp(-qe))/2}function sn(qe){return(Math.exp(qe)+Math.exp(-qe))/2}function hi(qe){return Pn(qe)/sn(qe)}var zn=re(0);function ko(qe){return ct*(sn(zn)/sn(zn+Bt*qe))}function D2(qe){return ct*(sn(zn)*hi(zn+Bt*qe)-Pn(zn))/Zt}function N2(qe){return 1-Math.pow(1-qe,1.5)}var O2=Date.now(),Fg=(re(1)-zn)/Bt,F2=d.duration?1e3*d.duration:1e3*Fg*.8;function Bg(){var qe=(Date.now()-O2)/F2,Ph=N2(qe)*Fg;qe<=1?(this._flyToFrame=H(Bg,this),this._move(this.unproject(g.add(b.subtract(g).multiplyBy(D2(Ph)/St)),et),this.getScaleZoom(ct/ko(Ph),et),{flyTo:!0})):this._move(o,u)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Bg.call(this),this},flyToBounds:function(o,u){var d=this._getBoundsCenterZoom(o,u);return this.flyTo(d.center,d.zoom,u)},setMaxBounds:function(o){return o=Et(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var u=this.options.minZoom;return this.options.minZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var u=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,u){this._enforcingBounds=!0;var d=this.getCenter(),g=this._limitCenter(d,this._zoom,Et(o));return d.equals(g)||this.panTo(g,u),this._enforcingBounds=!1,this},panInside:function(o,u){u=u||{};var d=ft(u.paddingTopLeft||u.padding||[0,0]),g=ft(u.paddingBottomRight||u.padding||[0,0]),b=this.project(this.getCenter()),$=this.project(o),et=this.getPixelBounds(),ct=tt([et.min.add(d),et.max.subtract(g)]),gt=ct.getSize();if(!ct.contains($)){this._enforcingBounds=!0;var St=$.subtract(ct.getCenter()),Bt=ct.extend($).getSize().subtract(gt);b.x+=St.x<0?-Bt.x:Bt.x,b.y+=St.y<0?-Bt.y:Bt.y,this.panTo(this.unproject(b),u),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),g=u.divideBy(2).round(),b=d.divideBy(2).round(),$=g.subtract(b);return!$.x&&!$.y?this:(o.animate&&o.pan?this.panBy($):(o.pan&&this._rawPanBy($),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,d,o):navigator.geolocation.getCurrentPosition(u,d,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var u=o.code,d=o.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var u=o.coords.latitude,d=o.coords.longitude,g=new vt(u,d),b=g.toBounds(o.coords.accuracy*2),$=this._locateOptions;if($.setView){var et=this.getBoundsZoom(b);this.setView(g,$.maxZoom?Math.min(et,$.maxZoom):et)}var ct={latlng:g,bounds:b,timestamp:o.timestamp};for(var gt in o.coords)typeof o.coords[gt]=="number"&&(ct[gt]=o.coords[gt]);this.fire("locationfound",ct)}},addHandler:function(o,u){if(!u)return this;var d=this[o]=new u(this);return this._handlers.push(d),this.options[o]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Se(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,u){var d="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),g=ue("div",d,u||this._mapPane);return o&&(this._panes[o]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),u=this.unproject(o.getBottomLeft()),d=this.unproject(o.getTopRight());return new _t(u,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,u,d){o=Et(o),d=ft(d||[0,0]);var g=this.getZoom()||0,b=this.getMinZoom(),$=this.getMaxZoom(),et=o.getNorthWest(),ct=o.getSouthEast(),gt=this.getSize().subtract(d),St=tt(this.project(ct,g),this.project(et,g)).getSize(),Bt=Ut.any3d?this.options.zoomSnap:1,Zt=gt.x/St.x,re=gt.y/St.y,Pn=u?Math.max(Zt,re):Math.min(Zt,re);return g=this.getScaleZoom(Pn,g),Bt&&(g=Math.round(g/(Bt/100))*(Bt/100),g=u?Math.ceil(g/Bt)*Bt:Math.floor(g/Bt)*Bt),Math.max(b,Math.min($,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new lt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,u){var d=this._getTopLeftPoint(o,u);return new J(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,u){var d=this.options.crs;return u=u===void 0?this._zoom:u,d.scale(o)/d.scale(u)},getScaleZoom:function(o,u){var d=this.options.crs;u=u===void 0?this._zoom:u;var g=d.zoom(o*d.scale(u));return isNaN(g)?1/0:g},project:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Pt(o),u)},unproject:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ft(o),u)},layerPointToLatLng:function(o){var u=ft(o).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(o){var u=this.project(Pt(o))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Pt(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Et(o))},distance:function(o,u){return this.options.crs.distance(Pt(o),Pt(u))},containerPointToLayerPoint:function(o){return ft(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ft(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var u=this.containerPointToLayerPoint(ft(o));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Pt(o)))},mouseEventToContainerPoint:function(o){return qa(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var u=this._container=Va(o);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xt(u,"scroll",this._onScroll,this),this._containerId=h(u)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut.any3d,ne(o,"leaflet-container"+(Ut.touch?" leaflet-touch":"")+(Ut.retina?" leaflet-retina":"")+(Ut.ielt9?" leaflet-oldie":"")+(Ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Or(o,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ae(this._mapPane,new lt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ne(o.markerPane,"leaflet-zoom-hide"),ne(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,u,d){Ae(this._mapPane,new lt(0,0));var g=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var b=this._zoom!==u;this._moveStart(b,d)._move(o,u)._moveEnd(b),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(o,u){return o&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(o,u,d,g){u===void 0&&(u=this._zoom);var b=this._zoom!==u;return this._zoom=u,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),g?d&&d.pinch&&this.fire("zoom",d):((b||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ae(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[h(this._container)]=this;var u=o?Te:Xt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ut.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,u){for(var d=[],g,b=u==="mouseout"||u==="mouseover",$=o.target||o.srcElement,et=!1;$;){if(g=this._targets[h($)],g&&(u==="click"||u==="preclick")&&this._draggableMoved(g)){et=!0;break}if(g&&g.listens(u,!0)&&(b&&!Ka($,o)||(d.push(g),b))||$===this._container)break;$=$.parentNode}return!d.length&&!et&&!b&&this.listens(u,!0)&&(d=[this]),d},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var u=o.target||o.srcElement;if(!(!this._loaded||u._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(u))){var d=o.type;d==="mousedown"&&Ha(u),this._fireDOMEvent(o,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,u,d){if(o.type==="click"){var g=i({},o);g.type="preclick",this._fireDOMEvent(g,g.type,d)}var b=this._findEventTargets(o,u);if(d){for(var $=[],et=0;et<d.length;et++)d[et].listens(u,!0)&&$.push(d[et]);b=$.concat(b)}if(b.length){u==="contextmenu"&&We(o);var ct=b[0],gt={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var St=ct.getLatLng&&(!ct._radius||ct._radius<=10);gt.containerPoint=St?this.latLngToContainerPoint(ct.getLatLng()):this.mouseEventToContainerPoint(o),gt.layerPoint=this.containerPointToLayerPoint(gt.containerPoint),gt.latlng=St?ct.getLatLng():this.layerPointToLatLng(gt.layerPoint)}for(et=0;et<b.length;et++)if(b[et].fire(u,gt,!0),gt.originalEvent._stopped||b[et].options.bubblingMouseEvents===!1&&W(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,u=this._handlers.length;o<u;o++)this._handlers[o].disable()},whenReady:function(o,u){return this._loaded?o.call(u||this,{target:this}):this.on("load",o,u),this},_getMapPanePos:function(){return de(this._mapPane)||new lt(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,u){var d=o&&u!==void 0?this._getNewPixelOrigin(o,u):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,u){var d=this.getSize()._divideBy(2);return this.project(o,u)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,u,d){var g=this._getNewPixelOrigin(d,u);return this.project(o,u)._subtract(g)},_latLngBoundsToNewLayerBounds:function(o,u,d){var g=this._getNewPixelOrigin(d,u);return tt([this.project(o.getSouthWest(),u)._subtract(g),this.project(o.getNorthWest(),u)._subtract(g),this.project(o.getSouthEast(),u)._subtract(g),this.project(o.getNorthEast(),u)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,u,d){if(!d)return o;var g=this.project(o,u),b=this.getSize().divideBy(2),$=new J(g.subtract(b),g.add(b)),et=this._getBoundsOffset($,d,u);return Math.abs(et.x)<=1&&Math.abs(et.y)<=1?o:this.unproject(g.add(et),u)},_limitOffset:function(o,u){if(!u)return o;var d=this.getPixelBounds(),g=new J(d.min.add(o),d.max.add(o));return o.add(this._getBoundsOffset(g,u))},_getBoundsOffset:function(o,u,d){var g=tt(this.project(u.getNorthEast(),d),this.project(u.getSouthWest(),d)),b=g.min.subtract(o.min),$=g.max.subtract(o.max),et=this._rebound(b.x,-$.x),ct=this._rebound(b.y,-$.y);return new lt(et,ct)},_rebound:function(o,u){return o+u>0?Math.round(o-u)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(u))},_limitZoom:function(o){var u=this.getMinZoom(),d=this.getMaxZoom(),g=Ut.any3d?this.options.zoomSnap:1;return g&&(o=Math.round(o/g)*g),Math.max(u,Math.min(d,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,u){var d=this._getCenterOffset(o)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,u),!0)},_createAnimProxy:function(){var o=this._proxy=ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(u){var d=wi,g=this._proxy.style[d];oi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),g===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),u=this.getZoom();oi(this._proxy,this.project(o,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,u,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(u),b=this._getCenterOffset(o)._divideBy(1-1/g);return d.animate!==!0&&!this.getSize().contains(b)?!1:(H(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(o,u,!0)},this),!0)},_animateZoom:function(o,u,d,g){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=u,ne(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:u,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ph(o,u){return new se(o,u)}var wn=B.extend({options:{position:"topright"},initialize:function(o){w(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var u=this._map;return u&&u.removeControl(this),this.options.position=o,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var u=this._container=this.onAdd(o),d=this.getPosition(),g=o._controlCorners[d];return ne(u,"leaflet-control"),d.indexOf("bottom")!==-1?g.insertBefore(u,g.firstChild):g.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Vr=function(o){return new wn(o)};se.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},u="leaflet-",d=this._controlContainer=ue("div",u+"control-container",this._container);function g(b,$){var et=u+b+" "+u+$;o[b+$]=ue("div",et,d)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Se(this._controlCorners[o]);Se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var li=wn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,u,d,g){return d<g?-1:g<d?1:0}},initialize:function(o,u,d){w(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in o)this._addLayer(o[g],g);for(g in u)this._addLayer(u[g],g,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return wn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,u){return this._addLayer(o,u),this._map?this._update():this},addOverlay:function(o,u){return this._addLayer(o,u,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var u=this._getLayer(h(o));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){ne(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ne(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",u=this._container=ue("div",o),d=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Ui(u),Br(u);var g=this._section=ue("section",o+"-list");d&&(this._map.on("click",this.collapse,this),Xt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var b=this._layersLink=ue("a",o+"-toggle",u);b.href="#",b.title="Layers",b.setAttribute("role","button"),Xt(b,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){We($),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ue("div",o+"-base",g),this._separator=ue("div",o+"-separator",g),this._overlaysList=ue("div",o+"-overlays",g),u.appendChild(g)},_getLayer:function(o){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&h(this._layers[u].layer)===o)return this._layers[u]},_addLayer:function(o,u,d){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:u,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(g,b){return this.options.sortFunction(g.layer,b.layer,g.name,b.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fr(this._baseLayersList),Fr(this._overlaysList),this._layerControlInputs=[];var o,u,d,g,b=0;for(d=0;d<this._layers.length;d++)g=this._layers[d],this._addItem(g),u=u||g.overlay,o=o||!g.overlay,b+=g.overlay?0:1;return this.options.hideSingleBase&&(o=o&&b>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=u&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var u=this._getLayer(h(o.target)),d=u.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;d&&this._map.fire(d,u)},_createRadioElement:function(o,u){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(u?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=d,g.firstChild},_addItem:function(o){var u=document.createElement("label"),d=this._map.hasLayer(o.layer),g;o.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=d):g=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(g),g.layerId=h(o.layer),Xt(g,"click",this._onInputClick,this);var b=document.createElement("span");b.innerHTML=" "+o.name;var $=document.createElement("span");u.appendChild($),$.appendChild(g),$.appendChild(b);var et=o.overlay?this._overlaysList:this._baseLayersList;return et.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,u,d,g=[],b=[];this._handlingClick=!0;for(var $=o.length-1;$>=0;$--)u=o[$],d=this._getLayer(u.layerId).layer,u.checked?g.push(d):u.checked||b.push(d);for($=0;$<b.length;$++)this._map.hasLayer(b[$])&&this._map.removeLayer(b[$]);for($=0;$<g.length;$++)this._map.hasLayer(g[$])||this._map.addLayer(g[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,u,d,g=this._map.getZoom(),b=o.length-1;b>=0;b--)u=o[b],d=this._getLayer(u.layerId).layer,u.disabled=d.options.minZoom!==void 0&&g<d.options.minZoom||d.options.maxZoom!==void 0&&g>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Xt(o,"click",We),this.expand();var u=this;setTimeout(function(){Te(o,"click",We),u._preventClick=!1})}}),mh=function(o,u,d){return new li(o,u,d)},Ya=wn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var u="leaflet-control-zoom",d=ue("div",u+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,u+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,u+"-out",d,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,u,d,g,b){var $=ue("a",d,g);return $.innerHTML=o,$.href="#",$.title=u,$.setAttribute("role","button"),$.setAttribute("aria-label",u),Ui($),Xt($,"click",Qn),Xt($,"click",b,this),Xt($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var o=this._map,u="leaflet-disabled";be(this._zoomInButton,u),be(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ne(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ne(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});se.mergeOptions({zoomControl:!0}),se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ya,this.addControl(this.zoomControl))});var Ds=function(o){return new Ya(o)},Xa=wn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var u="leaflet-control-scale",d=ue("div",u),g=this.options;return this._addScales(g,u+"-line",d),o.on(g.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),d},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,u,d){o.metric&&(this._mScale=ue("div",u,d)),o.imperial&&(this._iScale=ue("div",u,d))},_update:function(){var o=this._map,u=o.getSize().y/2,d=o.distance(o.containerPointToLatLng([0,u]),o.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(d)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var u=this._getRoundNum(o),d=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,d,u/o)},_updateImperial:function(o){var u=o*3.2808399,d,g,b;u>5280?(d=u/5280,g=this._getRoundNum(d),this._updateScale(this._iScale,g+" mi",g/d)):(b=this._getRoundNum(u),this._updateScale(this._iScale,b+" ft",b/u))},_updateScale:function(o,u,d){o.style.width=Math.round(this.options.maxWidth*d)+"px",o.innerHTML=u},_getRoundNum:function(o){var u=Math.pow(10,(Math.floor(o)+"").length-1),d=o/u;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,u*d}}),Ja=function(o){return new Xa(o)},wo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',xo=wn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ut.inlineSvg?wo+" ":"")+"Leaflet</a>"},initialize:function(o){w(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=ue("div","leaflet-control-attribution"),Ui(this._container);for(var u in o._layers)o._layers[u].getAttribution&&this.addAttribution(o._layers[u].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var u in this._attributions)this._attributions[u]&&o.push(u);var d=[];this.options.prefix&&d.push(this.options.prefix),o.length&&d.push(o.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});se.mergeOptions({attributionControl:!0}),se.addInitHook(function(){this.options.attributionControl&&new xo().addTo(this)});var Eo=function(o){return new xo(o)};wn.Layers=li,wn.Zoom=Ya,wn.Scale=Xa,wn.Attribution=xo,Vr.layers=mh,Vr.zoom=Ds,Vr.scale=Ja,Vr.attribution=Eo;var ui=B.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ui.addTo=function(o,u){return o.addHandler(u,this),this};var _h={Events:Rt},Ur=Ut.touch?"touchstart mousedown":"mousedown",Si=mt.extend({options:{clickTolerance:3},initialize:function(o,u,d,g){w(this,g),this._element=o,this._dragStartTarget=u||o,this._preventOutline=d},enable:function(){this._enabled||(Xt(this._dragStartTarget,Ur,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Si._dragging===this&&this.finishDrag(!0),Te(this._dragStartTarget,Ur,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Ua(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Si._dragging===this&&this.finishDrag();return}if(!(Si._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Si._dragging=this,this._preventOutline&&Ha(this._element),go(),zi(),!this._moving)){this.fire("down");var u=o.touches?o.touches[0]:o,d=Ti(this._element);this._startPoint=new lt(u.clientX,u.clientY),this._startPos=de(this._element),this._parentScale=yo(d);var g=o.type==="mousedown";Xt(document,g?"mousemove":"touchmove",this._onMove,this),Xt(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var u=o.touches&&o.touches.length===1?o.touches[0]:o,d=new lt(u.clientX,u.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,We(o),this._moved||(this.fire("dragstart"),this._moved=!0,ne(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ne(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ae(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Te(document,"mousemove touchmove",this._onMove,this),Te(document,"mouseup touchend touchcancel",this._onUp,this),ja(),Ei();var u=this._moved&&this._moving;this._moving=!1,Si._dragging=!1,u&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function tl(o,u,d){var g,b=[1,4,2,8],$,et,ct,gt,St,Bt,Zt,re;for($=0,Bt=o.length;$<Bt;$++)o[$]._code=Ve(o[$],u);for(ct=0;ct<4;ct++){for(Zt=b[ct],g=[],$=0,Bt=o.length,et=Bt-1;$<Bt;et=$++)gt=o[$],St=o[et],gt._code&Zt?St._code&Zt||(re=pr(St,gt,Zt,u,d),re._code=Ve(re,u),g.push(re)):(St._code&Zt&&(re=pr(St,gt,Zt,u,d),re._code=Ve(re,u),g.push(re)),g.push(gt));o=g}return o}function To(o,u){var d,g,b,$,et,ct,gt,St,Bt;if(!o||o.length===0)throw new Error("latlngs not passed");Ye(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Zt=Pt([0,0]),re=Et(o),Pn=re.getNorthWest().distanceTo(re.getSouthWest())*re.getNorthEast().distanceTo(re.getNorthWest());Pn<1700&&(Zt=Ns(o));var sn=o.length,hi=[];for(d=0;d<sn;d++){var zn=Pt(o[d]);hi.push(u.project(Pt([zn.lat-Zt.lat,zn.lng-Zt.lng])))}for(ct=gt=St=0,d=0,g=sn-1;d<sn;g=d++)b=hi[d],$=hi[g],et=b.y*$.x-$.y*b.x,gt+=(b.x+$.x)*et,St+=(b.y+$.y)*et,ct+=et*3;ct===0?Bt=hi[0]:Bt=[gt/ct,St/ct];var ko=u.unproject(ft(Bt));return Pt([ko.lat+Zt.lat,ko.lng+Zt.lng])}function Ns(o){for(var u=0,d=0,g=0,b=0;b<o.length;b++){var $=Pt(o[b]);u+=$.lat,d+=$.lng,g++}return Pt([u/g,d/g])}var gh={__proto__:null,clipPolygon:tl,polygonCenter:To,centroid:Ns};function Os(o,u){if(!u||!o.length)return o.slice();var d=u*u;return o=yh(o,d),o=dr(o,d),o}function el(o,u,d){return Math.sqrt(jr(o,u,d,!0))}function vh(o,u,d){return jr(o,u,d)}function dr(o,u){var d=o.length,g=typeof Uint8Array!=void 0+""?Uint8Array:Array,b=new g(d);b[0]=b[d-1]=1,So(o,b,u,0,d-1);var $,et=[];for($=0;$<d;$++)b[$]&&et.push(o[$]);return et}function So(o,u,d,g,b){var $=0,et,ct,gt;for(ct=g+1;ct<=b-1;ct++)gt=jr(o[ct],o[g],o[b],!0),gt>$&&(et=ct,$=gt);$>d&&(u[et]=1,So(o,u,d,g,et),So(o,u,d,et,b))}function yh(o,u){for(var d=[o[0]],g=1,b=0,$=o.length;g<$;g++)wh(o[g],o[b])>u&&(d.push(o[g]),b=g);return b<$-1&&d.push(o[$-1]),d}var nl;function il(o,u,d,g,b){var $=g?nl:Ve(o,d),et=Ve(u,d),ct,gt,St;for(nl=et;;){if(!($|et))return[o,u];if($&et)return!1;ct=$||et,gt=pr(o,u,ct,d,b),St=Ve(gt,d),ct===$?(o=gt,$=St):(u=gt,et=St)}}function pr(o,u,d,g,b){var $=u.x-o.x,et=u.y-o.y,ct=g.min,gt=g.max,St,Bt;return d&8?(St=o.x+$*(gt.y-o.y)/et,Bt=gt.y):d&4?(St=o.x+$*(ct.y-o.y)/et,Bt=ct.y):d&2?(St=gt.x,Bt=o.y+et*(gt.x-o.x)/$):d&1&&(St=ct.x,Bt=o.y+et*(ct.x-o.x)/$),new lt(St,Bt,b)}function Ve(o,u){var d=0;return o.x<u.min.x?d|=1:o.x>u.max.x&&(d|=2),o.y<u.min.y?d|=4:o.y>u.max.y&&(d|=8),d}function wh(o,u){var d=u.x-o.x,g=u.y-o.y;return d*d+g*g}function jr(o,u,d,g){var b=u.x,$=u.y,et=d.x-b,ct=d.y-$,gt=et*et+ct*ct,St;return gt>0&&(St=((o.x-b)*et+(o.y-$)*ct)/gt,St>1?(b=d.x,$=d.y):St>0&&(b+=et*St,$+=ct*St)),et=o.x-b,ct=o.y-$,g?et*et+ct*ct:new lt(b,$)}function Ye(o){return!R(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function f(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ye(o)}function x(o,u){var d,g,b,$,et,ct,gt,St;if(!o||o.length===0)throw new Error("latlngs not passed");Ye(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Bt=Pt([0,0]),Zt=Et(o),re=Zt.getNorthWest().distanceTo(Zt.getSouthWest())*Zt.getNorthEast().distanceTo(Zt.getNorthWest());re<1700&&(Bt=Ns(o));var Pn=o.length,sn=[];for(d=0;d<Pn;d++){var hi=Pt(o[d]);sn.push(u.project(Pt([hi.lat-Bt.lat,hi.lng-Bt.lng])))}for(d=0,g=0;d<Pn-1;d++)g+=sn[d].distanceTo(sn[d+1])/2;if(g===0)St=sn[0];else for(d=0,$=0;d<Pn-1;d++)if(et=sn[d],ct=sn[d+1],b=et.distanceTo(ct),$+=b,$>g){gt=($-g)/b,St=[ct.x-gt*(ct.x-et.x),ct.y-gt*(ct.y-et.y)];break}var zn=u.unproject(ft(St));return Pt([zn.lat+Bt.lat,zn.lng+Bt.lng])}var A={__proto__:null,simplify:Os,pointToSegmentDistance:el,closestPointOnSegment:vh,clipSegment:il,_getEdgeIntersection:pr,_getBitCode:Ve,_sqClosestPointOnSegment:jr,isFlat:Ye,_flat:f,polylineCenter:x},G={project:function(o){return new lt(o.lng,o.lat)},unproject:function(o){return new vt(o.y,o.x)},bounds:new J([-180,-90],[180,90])},ut={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var u=Math.PI/180,d=this.R,g=o.lat*u,b=this.R_MINOR/d,$=Math.sqrt(1-b*b),et=$*Math.sin(g),ct=Math.tan(Math.PI/4-g/2)/Math.pow((1-et)/(1+et),$/2);return g=-d*Math.log(Math.max(ct,1e-10)),new lt(o.lng*u*d,g)},unproject:function(o){for(var u=180/Math.PI,d=this.R,g=this.R_MINOR/d,b=Math.sqrt(1-g*g),$=Math.exp(-o.y/d),et=Math.PI/2-2*Math.atan($),ct=0,gt=.1,St;ct<15&&Math.abs(gt)>1e-7;ct++)St=b*Math.sin(et),St=Math.pow((1-St)/(1+St),b/2),gt=Math.PI/2-2*Math.atan($*St)-et,et+=gt;return new vt(et*u,o.x*u/d)}},yt={__proto__:null,LonLat:G,Mercator:ut,SphericalMercator:Ht},At=i({},It,{code:"EPSG:3395",projection:ut,transformation:function(){var o=.5/(Math.PI*ut.R);return Gt(o,.5,-o,.5)}()}),ve=i({},It,{code:"EPSG:4326",projection:G,transformation:Gt(1/180,1,-1/180,.5)}),Xe=i({},$t,{projection:G,transformation:Gt(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,u){var d=u.lng-o.lng,g=u.lat-o.lat;return Math.sqrt(d*d+g*g)},infinite:!0});$t.Earth=It,$t.EPSG3395=At,$t.EPSG3857=Kt,$t.EPSG900913=P,$t.EPSG4326=ve,$t.Simple=Xe;var Jt=mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[h(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[h(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var u=o.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var d=this.getEvents();u.on(d,this),this.once("remove",function(){u.off(d,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});se.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var u=h(o);return this._layers[u]?this:(this._layers[u]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var u=h(o);return this._layers[u]?(this._loaded&&o.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return h(o)in this._layers},eachLayer:function(o,u){for(var d in this._layers)o.call(u,this._layers[d]);return this},_addLayers:function(o){o=o?R(o)?o:[o]:[];for(var u=0,d=o.length;u<d;u++)this.addLayer(o[u])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[h(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var u=h(o);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,u=-1/0,d=this._getZoomSpan();for(var g in this._zoomBoundLayers){var b=this._zoomBoundLayers[g].options;o=b.minZoom===void 0?o:Math.min(o,b.minZoom),u=b.maxZoom===void 0?u:Math.max(u,b.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=o===1/0?void 0:o,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Re=Jt.extend({initialize:function(o,u){w(this,u),this._layers={};var d,g;if(o)for(d=0,g=o.length;d<g;d++)this.addLayer(o[d])},addLayer:function(o){var u=this.getLayerId(o);return this._layers[u]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var u=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(o){var u=typeof o=="number"?o:this.getLayerId(o);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var u=Array.prototype.slice.call(arguments,1),d,g;for(d in this._layers)g=this._layers[d],g[o]&&g[o].apply(g,u);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,u){for(var d in this._layers)o.call(u,this._layers[d]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return h(o)}}),rn=function(o,u){return new Re(o,u)},xn=Re.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Re.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Re.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new _t;for(var u in this._layers){var d=this._layers[u];o.extend(d.getBounds?d.getBounds():d.getLatLng())}return o}}),Yn=function(o,u){return new xn(o,u)},Mi=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){w(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,u){var d=this._getIconUrl(o);if(!d){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(d,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(g,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(o,u){var d=this.options,g=d[u+"Size"];typeof g=="number"&&(g=[g,g]);var b=ft(g),$=ft(u==="shadow"&&d.shadowAnchor||d.iconAnchor||b&&b.divideBy(2,!0));o.className="leaflet-marker-"+u+" "+(d.className||""),$&&(o.style.marginLeft=-$.x+"px",o.style.marginTop=-$.y+"px"),b&&(o.style.width=b.x+"px",o.style.height=b.y+"px")},_createImg:function(o,u){return u=u||document.createElement("img"),u.src=o,u},_getIconUrl:function(o){return Ut.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function rl(o){return new Mi(o)}var sl=Mi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof sl.imagePath!="string"&&(sl.imagePath=this._detectIconPath()),(this.options.imagePath||sl.imagePath)+Mi.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var u=function(d,g,b){var $=g.exec(d);return $&&$[b]};return o=u(o,/^url\((['"])?(.+)\1\)$/,2),o&&u(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=ue("div","leaflet-default-icon-path",document.body),u=Or(o,"background-image")||Or(o,"backgroundImage");if(document.body.removeChild(o),u=this._stripUrl(u),u)return u;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),vg=ui.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Si(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ne(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var u=this._marker,d=u._map,g=this._marker.options.autoPanSpeed,b=this._marker.options.autoPanPadding,$=de(u._icon),et=d.getPixelBounds(),ct=d.getPixelOrigin(),gt=tt(et.min._subtract(ct).add(b),et.max._subtract(ct).subtract(b));if(!gt.contains($)){var St=ft((Math.max(gt.max.x,$.x)-gt.max.x)/(et.max.x-gt.max.x)-(Math.min(gt.min.x,$.x)-gt.min.x)/(et.min.x-gt.min.x),(Math.max(gt.max.y,$.y)-gt.max.y)/(et.max.y-gt.max.y)-(Math.min(gt.min.y,$.y)-gt.min.y)/(et.min.y-gt.min.y)).multiplyBy(g);d.panBy(St,{animate:!1}),this._draggable._newPos._add(St),this._draggable._startPos._add(St),Ae(u._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=H(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,o)))},_onDrag:function(o){var u=this._marker,d=u._shadow,g=de(u._icon),b=u._map.layerPointToLatLng(g);d&&Ae(d,g),u._latlng=b,o.latlng=b,o.oldLatLng=this._oldLatLng,u.fire("move",o).fire("drag",o)},_onDragEnd:function(o){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),xh=Jt.extend({options:{icon:new sl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,u){w(this,u),this._latlng=Pt(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var u=this._latlng;return this._latlng=Pt(o),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=o.icon.createIcon(this._icon),g=!1;d!==this._icon&&(this._icon&&this._removeIcon(),g=!0,o.title&&(d.title=o.title),d.tagName==="IMG"&&(d.alt=o.alt||"")),ne(d,u),o.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xt(d,"focus",this._panOnFocus,this);var b=o.icon.createShadow(this._shadow),$=!1;b!==this._shadow&&(this._removeShadow(),$=!0),b&&(ne(b,u),b.alt=""),this._shadow=b,o.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),b&&$&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(this._icon,"focus",this._panOnFocus,this),Se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Se(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ae(this._icon,o),this._shadow&&Ae(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(ne(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vg)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vg(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Ge(this._icon,o),this._shadow&&Ge(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var u=this.options.icon.options,d=u.iconSize?ft(u.iconSize):ft(0,0),g=u.iconAnchor?ft(u.iconAnchor):ft(0,0);o.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:d.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _2(o,u){return new xh(o,u)}var $r=Jt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return w(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Eh=$r.extend({options:{fill:!0,radius:10},initialize:function(o,u){w(this,u),this._latlng=Pt(o),this._radius=this.options.radius},setLatLng:function(o){var u=this._latlng;return this._latlng=Pt(o),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var u=o&&o.radius||this._radius;return $r.prototype.setStyle.call(this,o),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,u=this._radiusY||o,d=this._clickTolerance(),g=[o+d,u+d];this._pxBounds=new J(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function g2(o,u){return new Eh(o,u)}var ed=Eh.extend({initialize:function(o,u,d){if(typeof u=="number"&&(u=i({},d,{radius:u})),w(this,u),this._latlng=Pt(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new _t(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:$r.prototype.setStyle,_project:function(){var o=this._latlng.lng,u=this._latlng.lat,d=this._map,g=d.options.crs;if(g.distance===It.distance){var b=Math.PI/180,$=this._mRadius/It.R/b,et=d.project([u+$,o]),ct=d.project([u-$,o]),gt=et.add(ct).divideBy(2),St=d.unproject(gt).lat,Bt=Math.acos((Math.cos($*b)-Math.sin(u*b)*Math.sin(St*b))/(Math.cos(u*b)*Math.cos(St*b)))/b;(isNaN(Bt)||Bt===0)&&(Bt=$/Math.cos(Math.PI/180*u)),this._point=gt.subtract(d.getPixelOrigin()),this._radius=isNaN(Bt)?0:gt.x-d.project([St,o-Bt]).x,this._radiusY=gt.y-et.y}else{var Zt=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Zt).x}this._updateBounds()}});function v2(o,u,d){return new ed(o,u,d)}var mr=$r.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,u){w(this,u),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var u=1/0,d=null,g=jr,b,$,et=0,ct=this._parts.length;et<ct;et++)for(var gt=this._parts[et],St=1,Bt=gt.length;St<Bt;St++){b=gt[St-1],$=gt[St];var Zt=g(o,b,$,!0);Zt<u&&(u=Zt,d=g(o,b,$))}return d&&(d.distance=Math.sqrt(u)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,u){return u=u||this._defaultShape(),o=Pt(o),u.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new _t,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Ye(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var u=[],d=Ye(o),g=0,b=o.length;g<b;g++)d?(u[g]=Pt(o[g]),this._bounds.extend(u[g])):u[g]=this._convertLatLngs(o[g]);return u},_project:function(){var o=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),u=new lt(o,o);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(o,u,d){var g=o[0]instanceof vt,b=o.length,$,et;if(g){for(et=[],$=0;$<b;$++)et[$]=this._map.latLngToLayerPoint(o[$]),d.extend(et[$]);u.push(et)}else for($=0;$<b;$++)this._projectLatlngs(o[$],u,d)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,d,g,b,$,et,ct,gt;for(d=0,b=0,$=this._rings.length;d<$;d++)for(gt=this._rings[d],g=0,et=gt.length;g<et-1;g++)ct=il(gt[g],gt[g+1],o,g,!0),ct&&(u[b]=u[b]||[],u[b].push(ct[0]),(ct[1]!==gt[g+1]||g===et-2)&&(u[b].push(ct[1]),b++))}},_simplifyPoints:function(){for(var o=this._parts,u=this.options.smoothFactor,d=0,g=o.length;d<g;d++)o[d]=Os(o[d],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,u){var d,g,b,$,et,ct,gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(d=0,$=this._parts.length;d<$;d++)for(ct=this._parts[d],g=0,et=ct.length,b=et-1;g<et;b=g++)if(!(!u&&g===0)&&el(o,ct[b],ct[g])<=gt)return!0;return!1}});function y2(o,u){return new mr(o,u)}mr._flat=f;var Mo=mr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return To(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var u=mr.prototype._convertLatLngs.call(this,o),d=u.length;return d>=2&&u[0]instanceof vt&&u[0].equals(u[d-1])&&u.pop(),u},_setLatLngs:function(o){mr.prototype._setLatLngs.call(this,o),Ye(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ye(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,u=this.options.weight,d=new lt(u,u);if(o=new J(o.min.subtract(d),o.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,b=this._rings.length,$;g<b;g++)$=tl(this._rings[g],o,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var u=!1,d,g,b,$,et,ct,gt,St;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for($=0,gt=this._parts.length;$<gt;$++)for(d=this._parts[$],et=0,St=d.length,ct=St-1;et<St;ct=et++)g=d[et],b=d[ct],g.y>o.y!=b.y>o.y&&o.x<(b.x-g.x)*(o.y-g.y)/(b.y-g.y)+g.x&&(u=!u);return u||mr.prototype._containsPoint.call(this,o,!0)}});function w2(o,u){return new Mo(o,u)}var _r=xn.extend({initialize:function(o,u){w(this,u),this._layers={},o&&this.addData(o)},addData:function(o){var u=R(o)?o:o.features,d,g,b;if(u){for(d=0,g=u.length;d<g;d++)b=u[d],(b.geometries||b.geometry||b.features||b.coordinates)&&this.addData(b);return this}var $=this.options;if($.filter&&!$.filter(o))return this;var et=Th(o,$);return et?(et.feature=Lh(o),et.defaultOptions=et.options,this.resetStyle(et),$.onEachFeature&&$.onEachFeature(o,et),this.addLayer(et)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(u){this._setLayerStyle(u,o)},this)},_setLayerStyle:function(o,u){o.setStyle&&(typeof u=="function"&&(u=u(o.feature)),o.setStyle(u))}});function Th(o,u){var d=o.type==="Feature"?o.geometry:o,g=d?d.coordinates:null,b=[],$=u&&u.pointToLayer,et=u&&u.coordsToLatLng||nd,ct,gt,St,Bt;if(!g&&!d)return null;switch(d.type){case"Point":return ct=et(g),yg($,o,ct,u);case"MultiPoint":for(St=0,Bt=g.length;St<Bt;St++)ct=et(g[St]),b.push(yg($,o,ct,u));return new xn(b);case"LineString":case"MultiLineString":return gt=Sh(g,d.type==="LineString"?0:1,et),new mr(gt,u);case"Polygon":case"MultiPolygon":return gt=Sh(g,d.type==="Polygon"?1:2,et),new Mo(gt,u);case"GeometryCollection":for(St=0,Bt=d.geometries.length;St<Bt;St++){var Zt=Th({geometry:d.geometries[St],type:"Feature",properties:o.properties},u);Zt&&b.push(Zt)}return new xn(b);case"FeatureCollection":for(St=0,Bt=d.features.length;St<Bt;St++){var re=Th(d.features[St],u);re&&b.push(re)}return new xn(b);default:throw new Error("Invalid GeoJSON object.")}}function yg(o,u,d,g){return o?o(u,d):new xh(d,g&&g.markersInheritOptions&&g)}function nd(o){return new vt(o[1],o[0],o[2])}function Sh(o,u,d){for(var g=[],b=0,$=o.length,et;b<$;b++)et=u?Sh(o[b],u-1,d):(d||nd)(o[b]),g.push(et);return g}function id(o,u){return o=Pt(o),o.alt!==void 0?[v(o.lng,u),v(o.lat,u),v(o.alt,u)]:[v(o.lng,u),v(o.lat,u)]}function Mh(o,u,d,g){for(var b=[],$=0,et=o.length;$<et;$++)b.push(u?Mh(o[$],Ye(o[$])?0:u-1,d,g):id(o[$],g));return!u&&d&&b.length>0&&b.push(b[0].slice()),b}function Lo(o,u){return o.feature?i({},o.feature,{geometry:u}):Lh(u)}function Lh(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var rd={toGeoJSON:function(o){return Lo(this,{type:"Point",coordinates:id(this.getLatLng(),o)})}};xh.include(rd),ed.include(rd),Eh.include(rd),mr.include({toGeoJSON:function(o){var u=!Ye(this._latlngs),d=Mh(this._latlngs,u?1:0,!1,o);return Lo(this,{type:(u?"Multi":"")+"LineString",coordinates:d})}}),Mo.include({toGeoJSON:function(o){var u=!Ye(this._latlngs),d=u&&!Ye(this._latlngs[0]),g=Mh(this._latlngs,d?2:u?1:0,!0,o);return u||(g=[g]),Lo(this,{type:(d?"Multi":"")+"Polygon",coordinates:g})}}),Re.include({toMultiPoint:function(o){var u=[];return this.eachLayer(function(d){u.push(d.toGeoJSON(o).geometry.coordinates)}),Lo(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(o){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(o);var d=u==="GeometryCollection",g=[];return this.eachLayer(function(b){if(b.toGeoJSON){var $=b.toGeoJSON(o);if(d)g.push($.geometry);else{var et=Lh($);et.type==="FeatureCollection"?g.push.apply(g,et.features):g.push(et)}}}),d?Lo(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function wg(o,u){return new _r(o,u)}var x2=wg,Ch=Jt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,u,d){this._url=o,this._bounds=Et(u),w(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ne(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&lr(this._image),this},bringToBack:function(){return this._map&&ur(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Et(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",u=this._image=o?this._url:ue("img");if(ne(u,"leaflet-image-layer"),this._zoomAnimated&&ne(u,"leaflet-zoom-animated"),this.options.className&&ne(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onload=a(this.fire,this,"load"),u.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(o){var u=this._map.getZoomScale(o.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;oi(this._image,d,u)},_reset:function(){var o=this._image,u=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=u.getSize();Ae(o,u.min),o.style.width=d.x+"px",o.style.height=d.y+"px"},_updateOpacity:function(){Ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),E2=function(o,u,d){return new Ch(o,u,d)},xg=Ch.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",u=this._image=o?this._url:ue("video");if(ne(u,"leaflet-image-layer"),this._zoomAnimated&&ne(u,"leaflet-zoom-animated"),this.options.className&&ne(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onloadeddata=a(this.fire,this,"load"),o){for(var d=u.getElementsByTagName("source"),g=[],b=0;b<d.length;b++)g.push(d[b].src);this._url=d.length>0?g:[u.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var et=ue("source");et.src=this._url[$],u.appendChild(et)}}});function T2(o,u,d){return new xg(o,u,d)}var Eg=Ch.extend({_initImage:function(){var o=this._image=this._url;ne(o,"leaflet-image-layer"),this._zoomAnimated&&ne(o,"leaflet-zoom-animated"),this.options.className&&ne(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function S2(o,u,d){return new Eg(o,u,d)}var ji=Jt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,u){o&&(o instanceof vt||R(o))?(this._latlng=Pt(o),w(this,u)):(w(this,o),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Ge(this._container,1),this.bringToFront(),this.options.interactive&&(ne(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Ge(this._container,0),this._removeTimeout=setTimeout(a(Se,void 0,this._container),200)):Se(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Pt(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lr(this._container),this},bringToBack:function(){return this._map&&ur(this._container),this},_prepareOpen:function(o){var u=this._source;if(!u._map)return!1;if(u instanceof xn){u=null;var d=this._source._layers;for(var g in d)if(d[g]._map){u=d[g];break}if(!u)return!1;this._source=u}if(!o)if(u.getCenter)o=u.getCenter();else if(u.getLatLng)o=u.getLatLng();else if(u.getBounds)o=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")o.innerHTML=u;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),u=ft(this.options.offset),d=this._getAnchor();this._zoomAnimated?Ae(this._container,o.add(d)):u=u.add(o).add(d);var g=this._containerBottom=-u.y,b=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=g+"px",this._container.style.left=b+"px"}},_getAnchor:function(){return[0,0]}});se.include({_initOverlay:function(o,u,d,g){var b=u;return b instanceof o||(b=new o(g).setContent(u)),d&&b.setLatLng(d),b}}),Jt.include({_initOverlay:function(o,u,d,g){var b=d;return b instanceof o?(w(b,g),b._source=this):(b=u&&!g?u:new o(g,this),b.setContent(d)),b}});var kh=ji.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,ji.prototype.openOn.call(this,o)},onAdd:function(o){ji.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $r||this._source.on("preclick",fr))},onRemove:function(o){ji.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $r||this._source.off("preclick",fr))},getEvents:function(){var o=ji.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",u=this._container=ue("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ue("div",o+"-content-wrapper",u);if(this._contentNode=ue("div",o+"-content",d),Ui(u),Br(this._contentNode),Xt(u,"contextmenu",fr),this._tipContainer=ue("div",o+"-tip-container",u),this._tip=ue("div",o+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=ue("a",o+"-close-button",u);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Xt(g,"click",function(b){We(b),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,u=o.style;u.width="",u.whiteSpace="nowrap";var d=o.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),u.width=d+1+"px",u.whiteSpace="",u.height="";var g=o.offsetHeight,b=this.options.maxHeight,$="leaflet-popup-scrolled";b&&g>b?(u.height=b+"px",ne(o,$)):be(o,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),d=this._getAnchor();Ae(this._container,u.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,u=parseInt(Or(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+u,g=this._containerWidth,b=new lt(this._containerLeft,-d-this._containerBottom);b._add(de(this._container));var $=o.layerPointToContainerPoint(b),et=ft(this.options.autoPanPadding),ct=ft(this.options.autoPanPaddingTopLeft||et),gt=ft(this.options.autoPanPaddingBottomRight||et),St=o.getSize(),Bt=0,Zt=0;$.x+g+gt.x>St.x&&(Bt=$.x+g-St.x+gt.x),$.x-Bt-ct.x<0&&(Bt=$.x-ct.x),$.y+d+gt.y>St.y&&(Zt=$.y+d-St.y+gt.y),$.y-Zt-ct.y<0&&(Zt=$.y-ct.y),(Bt||Zt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Bt,Zt]))}},_getAnchor:function(){return ft(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),M2=function(o,u){return new kh(o,u)};se.mergeOptions({closePopupOnClick:!0}),se.include({openPopup:function(o,u,d){return this._initOverlay(kh,o,u,d).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Jt.include({bindPopup:function(o,u){return this._popup=this._initOverlay(kh,this._popup,o,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof xn||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Qn(o);var u=o.layer||o.target;if(this._popup._source===u&&!(u instanceof $r)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=u,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var bh=ji.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){ji.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){ji.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=ji.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",u=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ue("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var u,d,g=this._map,b=this._container,$=g.latLngToContainerPoint(g.getCenter()),et=g.layerPointToContainerPoint(o),ct=this.options.direction,gt=b.offsetWidth,St=b.offsetHeight,Bt=ft(this.options.offset),Zt=this._getAnchor();ct==="top"?(u=gt/2,d=St):ct==="bottom"?(u=gt/2,d=0):ct==="center"?(u=gt/2,d=St/2):ct==="right"?(u=0,d=St/2):ct==="left"?(u=gt,d=St/2):et.x<$.x?(ct="right",u=0,d=St/2):(ct="left",u=gt+(Bt.x+Zt.x)*2,d=St/2),o=o.subtract(ft(u,d,!0)).add(Bt).add(Zt),be(b,"leaflet-tooltip-right"),be(b,"leaflet-tooltip-left"),be(b,"leaflet-tooltip-top"),be(b,"leaflet-tooltip-bottom"),ne(b,"leaflet-tooltip-"+ct),Ae(b,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Ge(this._container,o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(u)},_getAnchor:function(){return ft(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),L2=function(o,u){return new bh(o,u)};se.include({openTooltip:function(o,u,d){return this._initOverlay(bh,o,u,d).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Jt.include({bindTooltip:function(o,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(bh,this._tooltip,o,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var u=o?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[u](d),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof xn||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&(Xt(u,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Xt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var u=o.latlng,d,g;this._tooltip.options.sticky&&o.originalEvent&&(d=this._map.mouseEventToContainerPoint(o.originalEvent),g=this._map.containerPointToLayerPoint(d),u=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(u)}});var Tg=Mi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var u=o&&o.tagName==="DIV"?o:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Fr(u),u.appendChild(d.html)):u.innerHTML=d.html!==!1?d.html:"",d.bgPos){var g=ft(d.bgPos);u.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function C2(o){return new Tg(o)}Mi.Default=sl;var ol=Jt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){w(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Se(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ur(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof lt?o:new lt(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var u=this.getPane().children,d=-o(-1/0,1/0),g=0,b=u.length,$;g<b;g++)$=u[g].style.zIndex,u[g]!==this._container&&$&&(d=o(d,+$));isFinite(d)&&(this.options.zIndex=d+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ut.ielt9){Ge(this._container,this.options.opacity);var o=+new Date,u=!1,d=!1;for(var g in this._tiles){var b=this._tiles[g];if(!(!b.current||!b.loaded)){var $=Math.min(1,(o-b.loaded)/200);Ge(b.el,$),$<1?u=!0:(b.active?d=!0:this._onOpaqueTile(b),b.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),u&&(D(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,u=this.options.maxZoom;if(o!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===o?(this._levels[d].el.style.zIndex=u-Math.abs(o-d),this._onUpdateLevel(d)):(Se(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var g=this._levels[o],b=this._map;return g||(g=this._levels[o]={},g.el=ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=u,g.origin=b.project(b.unproject(b.getPixelOrigin()),o).round(),g.zoom=o,this._setZoomTransform(g,b.getCenter(),b.getZoom()),m(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,u,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)u=this._tiles[o],u.retain=u.current;for(o in this._tiles)if(u=this._tiles[o],u.current&&!u.active){var g=u.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var u in this._tiles)this._tiles[u].coords.z===o&&this._removeTile(u)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Se(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,u,d,g){var b=Math.floor(o/2),$=Math.floor(u/2),et=d-1,ct=new lt(+b,+$);ct.z=+et;var gt=this._tileCoordsToKey(ct),St=this._tiles[gt];return St&&St.active?(St.retain=!0,!0):(St&&St.loaded&&(St.retain=!0),et>g?this._retainParent(b,$,et,g):!1)},_retainChildren:function(o,u,d,g){for(var b=2*o;b<2*o+2;b++)for(var $=2*u;$<2*u+2;$++){var et=new lt(b,$);et.z=d+1;var ct=this._tileCoordsToKey(et),gt=this._tiles[ct];if(gt&&gt.active){gt.retain=!0;continue}else gt&&gt.loaded&&(gt.retain=!0);d+1<g&&this._retainChildren(b,$,d+1,g)}},_resetView:function(o){var u=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var u=this.options;return u.minNativeZoom!==void 0&&o<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<o?u.maxNativeZoom:o},_setView:function(o,u,d,g){var b=Math.round(u);this.options.maxZoom!==void 0&&b>this.options.maxZoom||this.options.minZoom!==void 0&&b<this.options.minZoom?b=void 0:b=this._clampZoom(b);var $=this.options.updateWhenZooming&&b!==this._tileZoom;(!g||$)&&(this._tileZoom=b,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),b!==void 0&&this._update(o),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(o,u)},_setZoomTransforms:function(o,u){for(var d in this._levels)this._setZoomTransform(this._levels[d],o,u)},_setZoomTransform:function(o,u,d){var g=this._map.getZoomScale(d,o.zoom),b=o.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(u,d)).round();Ut.any3d?oi(o.el,b,g):Ae(o.el,b)},_resetGrid:function(){var o=this._map,u=o.options.crs,d=this._tileSize=this.getTileSize(),g=this._tileZoom,b=this._map.getPixelWorldBounds(this._tileZoom);b&&(this._globalTileRange=this._pxBoundsToTileRange(b)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,u.wrapLng[0]],g).x/d.x),Math.ceil(o.project([0,u.wrapLng[1]],g).x/d.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([u.wrapLat[0],0],g).y/d.x),Math.ceil(o.project([u.wrapLat[1],0],g).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var u=this._map,d=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),g=u.getZoomScale(d,this._tileZoom),b=u.project(o,this._tileZoom).floor(),$=u.getSize().divideBy(g*2);return new J(b.subtract($),b.add($))},_update:function(o){var u=this._map;if(u){var d=this._clampZoom(u.getZoom());if(o===void 0&&(o=u.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(o),b=this._pxBoundsToTileRange(g),$=b.getCenter(),et=[],ct=this.options.keepBuffer,gt=new J(b.getBottomLeft().subtract([ct,-ct]),b.getTopRight().add([ct,-ct]));if(!(isFinite(b.min.x)&&isFinite(b.min.y)&&isFinite(b.max.x)&&isFinite(b.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var St in this._tiles){var Bt=this._tiles[St].coords;(Bt.z!==this._tileZoom||!gt.contains(new lt(Bt.x,Bt.y)))&&(this._tiles[St].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(o,d);return}for(var Zt=b.min.y;Zt<=b.max.y;Zt++)for(var re=b.min.x;re<=b.max.x;re++){var Pn=new lt(re,Zt);if(Pn.z=this._tileZoom,!!this._isValidTile(Pn)){var sn=this._tiles[this._tileCoordsToKey(Pn)];sn?sn.current=!0:et.push(Pn)}}if(et.sort(function(zn,ko){return zn.distanceTo($)-ko.distanceTo($)}),et.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hi=document.createDocumentFragment();for(re=0;re<et.length;re++)this._addTile(et[re],hi);this._level.el.appendChild(hi)}}}},_isValidTile:function(o){var u=this._map.options.crs;if(!u.infinite){var d=this._globalTileRange;if(!u.wrapLng&&(o.x<d.min.x||o.x>d.max.x)||!u.wrapLat&&(o.y<d.min.y||o.y>d.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(o);return Et(this.options.bounds).overlaps(g)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var u=this._map,d=this.getTileSize(),g=o.scaleBy(d),b=g.add(d),$=u.unproject(g,o.z),et=u.unproject(b,o.z);return[$,et]},_tileCoordsToBounds:function(o){var u=this._tileCoordsToNwSe(o),d=new _t(u[0],u[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var u=o.split(":"),d=new lt(+u[0],+u[1]);return d.z=+u[2],d},_removeTile:function(o){var u=this._tiles[o];u&&(Se(u.el),delete this._tiles[o],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ne(o,"leaflet-tile");var u=this.getTileSize();o.style.width=u.x+"px",o.style.height=u.y+"px",o.onselectstart=m,o.onmousemove=m,Ut.ielt9&&this.options.opacity<1&&Ge(o,this.options.opacity)},_addTile:function(o,u){var d=this._getTilePos(o),g=this._tileCoordsToKey(o),b=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(b),this.createTile.length<2&&H(a(this._tileReady,this,o,null,b)),Ae(b,d),this._tiles[g]={el:b,coords:o,current:!0},u.appendChild(b),this.fire("tileloadstart",{tile:b,coords:o})},_tileReady:function(o,u,d){u&&this.fire("tileerror",{error:u,tile:d,coords:o});var g=this._tileCoordsToKey(o);d=this._tiles[g],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Ge(d.el,0),D(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),u||(ne(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ut.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var u=new lt(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return u.z=o.z,u},_pxBoundsToTileRange:function(o){var u=this.getTileSize();return new J(o.min.unscaleBy(u).floor(),o.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function k2(o){return new ol(o)}var Co=ol.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,u){this._url=o,u=w(this,u),u.detectRetina&&Ut.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,u){return this._url===o&&u===void 0&&(u=!0),this._url=o,u||this.redraw(),this},createTile:function(o,u){var d=document.createElement("img");return Xt(d,"load",a(this._tileOnLoad,this,u,d)),Xt(d,"error",a(this._tileOnError,this,u,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(o),d},getTileUrl:function(o){var u={r:Ut.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-o.y;this.options.tms&&(u.y=d),u["-y"]=d}return M(this._url,i(u,this.options))},_tileOnLoad:function(o,u){Ut.ielt9?setTimeout(a(o,this,null,u),0):o(null,u)},_tileOnError:function(o,u,d){var g=this.options.errorTileUrl;g&&u.getAttribute("src")!==g&&(u.src=g),o(d,u)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,u=this.options.maxZoom,d=this.options.zoomReverse,g=this.options.zoomOffset;return d&&(o=u-o),o+g},_getSubdomain:function(o){var u=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var o,u;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(u=this._tiles[o].el,u.onload=m,u.onerror=m,!u.complete)){u.src=q;var d=this._tiles[o].coords;Se(u),delete this._tiles[o],this.fire("tileabort",{tile:u,coords:d})}},_removeTile:function(o){var u=this._tiles[o];if(u)return u.el.setAttribute("src",q),ol.prototype._removeTile.call(this,o)},_tileReady:function(o,u,d){if(!(!this._map||d&&d.getAttribute("src")===q))return ol.prototype._tileReady.call(this,o,u,d)}});function Sg(o,u){return new Co(o,u)}var Mg=Co.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,u){this._url=o;var d=i({},this.defaultWmsParams);for(var g in u)g in this.options||(d[g]=u[g]);u=w(this,u);var b=u.detectRetina&&Ut.retina?2:1,$=this.getTileSize();d.width=$.x*b,d.height=$.y*b,this.wmsParams=d},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Co.prototype.onAdd.call(this,o)},getTileUrl:function(o){var u=this._tileCoordsToNwSe(o),d=this._crs,g=tt(d.project(u[0]),d.project(u[1])),b=g.min,$=g.max,et=(this._wmsVersion>=1.3&&this._crs===ve?[b.y,b.x,$.y,$.x]:[b.x,b.y,$.x,$.y]).join(","),ct=Co.prototype.getTileUrl.call(this,o);return ct+I(this.wmsParams,ct,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+et},setParams:function(o,u){return i(this.wmsParams,o),u||this.redraw(),this}});function b2(o,u){return new Mg(o,u)}Co.WMS=Mg,Sg.wms=b2;var gr=Jt.extend({options:{padding:.1},initialize:function(o){w(this,o),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ne(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,u){var d=this._map.getZoomScale(u,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),b=this._map.project(this._center,u),$=g.multiplyBy(-d).add(b).subtract(this._map._getNewPixelOrigin(o,u));Ut.any3d?oi(this._container,$,d):Ae(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,u=this._map.getSize(),d=this._map.containerPointToLayerPoint(u.multiplyBy(-o)).round();this._bounds=new J(d,d.add(u.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Lg=gr.extend({options:{tolerance:0},getEvents:function(){var o=gr.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Xt(o,"mousemove",this._onMouseMove,this),Xt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,Se(this._container),Te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var u in this._layers)o=this._layers[u],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var o=this._bounds,u=this._container,d=o.getSize(),g=Ut.retina?2:1;Ae(u,o.min),u.width=g*d.x,u.height=g*d.y,u.style.width=d.x+"px",u.style.height=d.y+"px",Ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){gr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[h(o)]=o;var u=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var u=o._order,d=u.next,g=u.prev;d?d.prev=g:this._drawLast=g,g?g.next=d:this._drawFirst=d,delete o._order,delete this._layers[h(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var u=o.options.dashArray.split(/[, ]+/),d=[],g,b;for(b=0;b<u.length;b++){if(g=Number(u[b]),isNaN(g))return;d.push(g)}o.options._dashArray=d}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var u=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(o._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(o._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var u=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,u=this._redrawBounds;if(this._ctx.save(),u){var d=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)o=g.layer,(!u||o._pxBounds&&o._pxBounds.intersects(u))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,u){if(this._drawing){var d,g,b,$,et=o._parts,ct=et.length,gt=this._ctx;if(ct){for(gt.beginPath(),d=0;d<ct;d++){for(g=0,b=et[d].length;g<b;g++)$=et[d][g],gt[g?"lineTo":"moveTo"]($.x,$.y);u&&gt.closePath()}this._fillStroke(gt,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var u=o._point,d=this._ctx,g=Math.max(Math.round(o._radius),1),b=(Math.max(Math.round(o._radiusY),1)||g)/g;b!==1&&(d.save(),d.scale(1,b)),d.beginPath(),d.arc(u.x,u.y/b,g,0,Math.PI*2,!1),b!==1&&d.restore(),this._fillStroke(d,o)}},_fillStroke:function(o,u){var d=u.options;d.fill&&(o.globalAlpha=d.fillOpacity,o.fillStyle=d.fillColor||d.color,o.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(o.setLineDash&&o.setLineDash(u.options&&u.options._dashArray||[]),o.globalAlpha=d.opacity,o.lineWidth=d.weight,o.strokeStyle=d.color,o.lineCap=d.lineCap,o.lineJoin=d.lineJoin,o.stroke())},_onClick:function(o){for(var u=this._map.mouseEventToLayerPoint(o),d,g,b=this._drawFirst;b;b=b.next)d=b.layer,d.options.interactive&&d._containsPoint(u)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(d))&&(g=d);this._fireEvent(g?[g]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,u)}},_handleMouseOut:function(o){var u=this._hoveredLayer;u&&(be(this._container,"leaflet-interactive"),this._fireEvent([u],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,u){if(!this._mouseHoverThrottled){for(var d,g,b=this._drawFirst;b;b=b.next)d=b.layer,d.options.interactive&&d._containsPoint(u)&&(g=d);g!==this._hoveredLayer&&(this._handleMouseOut(o),g&&(ne(this._container,"leaflet-interactive"),this._fireEvent([g],o,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,u,d){this._map._fireDOMEvent(u,d||u.type,o)},_bringToFront:function(o){var u=o._order;if(u){var d=u.next,g=u.prev;if(d)d.prev=g;else return;g?g.next=d:d&&(this._drawFirst=d),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(o)}},_bringToBack:function(o){var u=o._order;if(u){var d=u.next,g=u.prev;if(g)g.next=d;else return;d?d.prev=g:g&&(this._drawLast=g),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(o)}}});function Cg(o){return Ut.canvas?new Lg(o):null}var al=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),I2={_initContainer:function(){this._container=ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gr.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var u=o._container=al("shape");ne(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",o._path=al("path"),u.appendChild(o._path),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){var u=o._container;this._container.appendChild(u),o.options.interactive&&o.addInteractiveTarget(u)},_removePath:function(o){var u=o._container;Se(u),o.removeInteractiveTarget(u),delete this._layers[h(o)]},_updateStyle:function(o){var u=o._stroke,d=o._fill,g=o.options,b=o._container;b.stroked=!!g.stroke,b.filled=!!g.fill,g.stroke?(u||(u=o._stroke=al("stroke")),b.appendChild(u),u.weight=g.weight+"px",u.color=g.color,u.opacity=g.opacity,g.dashArray?u.dashStyle=R(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=g.lineCap.replace("butt","flat"),u.joinstyle=g.lineJoin):u&&(b.removeChild(u),o._stroke=null),g.fill?(d||(d=o._fill=al("fill")),b.appendChild(d),d.color=g.fillColor||g.color,d.opacity=g.fillOpacity):d&&(b.removeChild(d),o._fill=null)},_updateCircle:function(o){var u=o._point.round(),d=Math.round(o._radius),g=Math.round(o._radiusY||d);this._setPath(o,o._empty()?"M0 0":"AL "+u.x+","+u.y+" "+d+","+g+" 0,"+65535*360)},_setPath:function(o,u){o._path.v=u},_bringToFront:function(o){lr(o._container)},_bringToBack:function(o){ur(o._container)}},Ih=Ut.vml?al:dt,ll=gr.extend({_initContainer:function(){this._container=Ih("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ih("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Se(this._container),Te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var o=this._bounds,u=o.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,d.setAttribute("width",u.x),d.setAttribute("height",u.y)),Ae(d,o.min),d.setAttribute("viewBox",[o.min.x,o.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(o){var u=o._path=Ih("path");o.options.className&&ne(u,o.options.className),o.options.interactive&&ne(u,"leaflet-interactive"),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Se(o._path),o.removeInteractiveTarget(o._path),delete this._layers[h(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var u=o._path,d=o.options;u&&(d.stroke?(u.setAttribute("stroke",d.color),u.setAttribute("stroke-opacity",d.opacity),u.setAttribute("stroke-width",d.weight),u.setAttribute("stroke-linecap",d.lineCap),u.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?u.setAttribute("stroke-dasharray",d.dashArray):u.removeAttribute("stroke-dasharray"),d.dashOffset?u.setAttribute("stroke-dashoffset",d.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),d.fill?(u.setAttribute("fill",d.fillColor||d.color),u.setAttribute("fill-opacity",d.fillOpacity),u.setAttribute("fill-rule",d.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(o,u){this._setPath(o,at(o._parts,u))},_updateCircle:function(o){var u=o._point,d=Math.max(Math.round(o._radius),1),g=Math.max(Math.round(o._radiusY),1)||d,b="a"+d+","+g+" 0 1,0 ",$=o._empty()?"M0 0":"M"+(u.x-d)+","+u.y+b+d*2+",0 "+b+-d*2+",0 ";this._setPath(o,$)},_setPath:function(o,u){o._path.setAttribute("d",u)},_bringToFront:function(o){lr(o._path)},_bringToBack:function(o){ur(o._path)}});Ut.vml&&ll.include(I2);function kg(o){return Ut.svg||Ut.vml?new ll(o):null}se.include({getRenderer:function(o){var u=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var u=this._paneRenderers[o];return u===void 0&&(u=this._createRenderer({pane:o}),this._paneRenderers[o]=u),u},_createRenderer:function(o){return this.options.preferCanvas&&Cg(o)||kg(o)}});var bg=Mo.extend({initialize:function(o,u){Mo.prototype.initialize.call(this,this._boundsToLatLngs(o),u)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Et(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function P2(o,u){return new bg(o,u)}ll.create=Ih,ll.pointsToPath=at,_r.geometryToLayer=Th,_r.coordsToLatLng=nd,_r.coordsToLatLngs=Sh,_r.latLngToCoords=id,_r.latLngsToCoords=Mh,_r.getFeature=Lo,_r.asFeature=Lh,se.mergeOptions({boxZoom:!0});var Ig=ui.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),zi(),go(),this._startPoint=this._map.mouseEventToContainerPoint(o),Xt(document,{contextmenu:Qn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=ue("div","leaflet-zoom-box",this._container),ne(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var u=new J(this._point,this._startPoint),d=u.getSize();Ae(this._box,u.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Se(this._box),be(this._container,"leaflet-crosshair")),Ei(),ja(),Te(document,{contextmenu:Qn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var u=new _t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});se.addInitHook("addHandler","boxZoom",Ig),se.mergeOptions({doubleClickZoom:!0});var Pg=ui.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var u=this._map,d=u.getZoom(),g=u.options.zoomDelta,b=o.originalEvent.shiftKey?d-g:d+g;u.options.doubleClickZoom==="center"?u.setZoom(b):u.setZoomAround(o.containerPoint,b)}});se.addInitHook("addHandler","doubleClickZoom",Pg),se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ag=ui.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Si(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ne(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Et(this._map.options.maxBounds);this._offsetLimit=tt(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var u=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(u),this._prunePositions(u)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,u){return o-(o-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;o.x<u.min.x&&(o.x=this._viscousLimit(o.x,u.min.x)),o.y<u.min.y&&(o.y=this._viscousLimit(o.y,u.min.y)),o.x>u.max.x&&(o.x=this._viscousLimit(o.x,u.max.x)),o.y>u.max.y&&(o.y=this._viscousLimit(o.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,u=Math.round(o/2),d=this._initialWorldOffset,g=this._draggable._newPos.x,b=(g-u+d)%o+u-d,$=(g+u+d)%o-u-d,et=Math.abs(b+d)<Math.abs($+d)?b:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=et},_onDragEnd:function(o){var u=this._map,d=u.options,g=!d.inertia||o.noInertia||this._times.length<2;if(u.fire("dragend",o),g)u.fire("moveend");else{this._prunePositions(+new Date);var b=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,et=d.easeLinearity,ct=b.multiplyBy(et/$),gt=ct.distanceTo([0,0]),St=Math.min(d.inertiaMaxSpeed,gt),Bt=ct.multiplyBy(St/gt),Zt=St/(d.inertiaDeceleration*et),re=Bt.multiplyBy(-Zt/2).round();!re.x&&!re.y?u.fire("moveend"):(re=u._limitOffset(re,u.options.maxBounds),H(function(){u.panBy(re,{duration:Zt,easeLinearity:et,noMoveStart:!0,animate:!0})}))}}});se.addInitHook("addHandler","dragging",Ag),se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Rg=ui.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Xt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,u=document.documentElement,d=o.scrollTop||u.scrollTop,g=o.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(g,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var u=this._panKeys={},d=this.keyCodes,g,b;for(g=0,b=d.left.length;g<b;g++)u[d.left[g]]=[-1*o,0];for(g=0,b=d.right.length;g<b;g++)u[d.right[g]]=[o,0];for(g=0,b=d.down.length;g<b;g++)u[d.down[g]]=[0,o];for(g=0,b=d.up.length;g<b;g++)u[d.up[g]]=[0,-1*o]},_setZoomDelta:function(o){var u=this._zoomKeys={},d=this.keyCodes,g,b;for(g=0,b=d.zoomIn.length;g<b;g++)u[d.zoomIn[g]]=o;for(g=0,b=d.zoomOut.length;g<b;g++)u[d.zoomOut[g]]=-o},_addHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var u=o.keyCode,d=this._map,g;if(u in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(g=this._panKeys[u],o.shiftKey&&(g=ft(g).multiplyBy(3)),d.options.maxBounds&&(g=d._limitOffset(ft(g),d.options.maxBounds)),d.options.worldCopyJump){var b=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(g)));d.panTo(b)}else d.panBy(g)}else if(u in this._zoomKeys)d.setZoom(d.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Qn(o)}}});se.addInitHook("addHandler","keyboard",Rg),se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dg=ui.extend({addHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var u=Le(o),d=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var g=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),g),Qn(o)},_performZoom:function(){var o=this._map,u=o.getZoom(),d=this._map.options.zoomSnap||0;o._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),b=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,$=d?Math.ceil(b/d)*d:b,et=o._limitZoom(u+(this._delta>0?$:-$))-u;this._delta=0,this._startTime=null,et&&(o.options.scrollWheelZoom==="center"?o.setZoom(u+et):o.setZoomAround(this._lastMousePos,u+et))}});se.addInitHook("addHandler","scrollWheelZoom",Dg);var A2=600;se.mergeOptions({tapHold:Ut.touchNative&&Ut.safari&&Ut.mobile,tapTolerance:15});var Ng=ui.extend({addHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var u=o.touches[0];this._startPos=this._newPos=new lt(u.clientX,u.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Xt(document,"touchend",We),Xt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),A2),Xt(document,"touchend touchcancel contextmenu",this._cancel,this),Xt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Te(document,"touchend",We),Te(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)},_onMove:function(o){var u=o.touches[0];this._newPos=new lt(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,u){var d=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});d._simulated=!0,u.target.dispatchEvent(d)}});se.addInitHook("addHandler","tapHold",Ng),se.mergeOptions({touchZoom:Ut.touch,bounceAtZoomLimits:!0});var Og=ui.extend({addHooks:function(){ne(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var u=this._map;if(!(!o.touches||o.touches.length!==2||u._animatingZoom||this._zooming)){var d=u.mouseEventToContainerPoint(o.touches[0]),g=u.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(d.add(g)._divideBy(2))),this._startDist=d.distanceTo(g),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend touchcancel",this._onTouchEnd,this),We(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var u=this._map,d=u.mouseEventToContainerPoint(o.touches[0]),g=u.mouseEventToContainerPoint(o.touches[1]),b=d.distanceTo(g)/this._startDist;if(this._zoom=u.getScaleZoom(b,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&b<1||this._zoom>u.getMaxZoom()&&b>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,b===1)return}else{var $=d._add(g)._divideBy(2)._subtract(this._centerPoint);if(b===1&&$.x===0&&$.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var et=a(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(et,this,!0),We(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});se.addInitHook("addHandler","touchZoom",Og),se.BoxZoom=Ig,se.DoubleClickZoom=Pg,se.Drag=Ag,se.Keyboard=Rg,se.ScrollWheelZoom=Dg,se.TapHold=Ng,se.TouchZoom=Og,n.Bounds=J,n.Browser=Ut,n.CRS=$t,n.Canvas=Lg,n.Circle=ed,n.CircleMarker=Eh,n.Class=B,n.Control=wn,n.DivIcon=Tg,n.DivOverlay=ji,n.DomEvent=td,n.DomUtil=fh,n.Draggable=Si,n.Evented=mt,n.FeatureGroup=xn,n.GeoJSON=_r,n.GridLayer=ol,n.Handler=ui,n.Icon=Mi,n.ImageOverlay=Ch,n.LatLng=vt,n.LatLngBounds=_t,n.Layer=Jt,n.LayerGroup=Re,n.LineUtil=A,n.Map=se,n.Marker=xh,n.Mixin=_h,n.Path=$r,n.Point=lt,n.PolyUtil=gh,n.Polygon=Mo,n.Polyline=mr,n.Popup=kh,n.PosAnimation=Qa,n.Projection=yt,n.Rectangle=bg,n.Renderer=gr,n.SVG=ll,n.SVGOverlay=Eg,n.TileLayer=Co,n.Tooltip=bh,n.Transformation=Ft,n.Util=j,n.VideoOverlay=xg,n.bind=a,n.bounds=tt,n.canvas=Cg,n.circle=v2,n.circleMarker=g2,n.control=Vr,n.divIcon=C2,n.extend=i,n.featureGroup=Yn,n.geoJSON=wg,n.geoJson=x2,n.gridLayer=k2,n.icon=rl,n.imageOverlay=E2,n.latLng=Pt,n.latLngBounds=Et,n.layerGroup=rn,n.map=ph,n.marker=_2,n.point=ft,n.polygon=w2,n.polyline=y2,n.popup=M2,n.rectangle=P2,n.setOptions=w,n.stamp=h,n.svg=kg,n.svgOverlay=S2,n.tileLayer=Sg,n.tooltip=L2,n.transformation=Gt,n.version=r,n.videoOverlay=T2;var R2=window.L;n.noConflict=function(){return window.L=R2,this},window.L=n})})(fm,fm.exports);var Ra=fm.exports;const Yv=Pu(Ra);function bE(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function IE(t,e){return e==null?function(r,i){const s=Tt.useRef();return s.current||(s.current=t(r,i)),s}:function(r,i){const s=Tt.useRef();s.current||(s.current=t(r,i));const a=Tt.useRef(r),{instance:l}=s.current;return Tt.useEffect(function(){a.current!==r&&(e(l,r,a.current),a.current=r)},[l,r,i]),s}}function PE(t,e){Tt.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function lP(t){return function(n){const r=ig(),i=t(rg(n,r),r);return nP(r.map,n.attribution),kE(i.current,n.eventHandlers),PE(i.current,r),i}}function uP(t,e){const n=Tt.useRef();Tt.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}function hP(t){return function(n){const r=ig(),i=t(rg(n,r),r);return kE(i.current,n.eventHandlers),PE(i.current,r),uP(i.current,n),i}}function cP(t,e){const n=IE(t,e),r=hP(n);return oP(r)}function fP(t,e){const n=IE(t,e),r=lP(n);return aP(r)}function dP(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}const pP=cP(function({data:e,...n},r){const i=new Ra.GeoJSON(e,n);return bE(i,sP(r,{overlayContainer:i}))},function(e,n,r){n.style!==r.style&&(n.style==null?e.resetStyle():e.setStyle(n.style))});function dm(){return dm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dm.apply(this,arguments)}function mP({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:s,placeholder:a,style:l,whenReady:h,zoom:c,...p},m){const[v]=Tt.useState({className:i,id:s,style:l}),[_,T]=Tt.useState(null);Tt.useImperativeHandle(m,()=>(_==null?void 0:_.map)??null,[_]);const w=Tt.useCallback(E=>{if(E!==null&&_===null){const M=new Ra.Map(E,p);n!=null&&c!=null?M.setView(n,c):t!=null&&M.fitBounds(t,e),h!=null&&M.whenReady(h),T(rP(M))}},[]);Tt.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const I=_?Zs.createElement(CE,{value:_},r):a??null;return Zs.createElement("div",dm({},v,{ref:w}),I)}const pm=Tt.forwardRef(mP),mm=fP(function({url:e,...n},r){const i=new Ra.TileLayer(e,rg(n,r));return bE(i,r)},function(e,n,r){dP(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});var AE={exports:{}},_P="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gP=_P,vP=gP;function RE(){}function DE(){}DE.resetWarningCache=RE;var yP=function(){function t(r,i,s,a,l,h){if(h!==vP){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:DE,resetWarningCache:RE};return n.PropTypes=n,n};AE.exports=yP();var ae=AE.exports;(function(t,e,n){function r(i,s){for(;(i=i.parentElement)&&!i.classList.contains(s););return i}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(i,s){this._map=i,this._container=i._container,this._overlayPane=i._panes.overlayPane,this._popupPane=i._panes.popupPane,s&&s.shapeOptions&&(s.shapeOptions=L.Util.extend({},this.options.shapeOptions,s.shapeOptions)),L.setOptions(this,s);var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(L.DomUtil.disableTextSelection(),i.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(i){L.setOptions(this,i)},_fireCreatedEvent:function(i){this._map.fire(L.Draw.Event.CREATED,{layer:i,layerType:this.type})},_cancelDrawing:function(i){i.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(i,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,i,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var i=this._markers.pop(),s=this._poly,a=s.getLatLngs(),l=a.splice(-1,1)[0];this._poly.setLatLngs(a),this._markerGroup.removeLayer(i),s.getLatLngs().length<2&&this._map.removeLayer(s),this._vertexChanged(l,!1)}},addVertex:function(i){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(i))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(i)),this._poly.addLatLng(i),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(i,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var i=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),s=this._poly.newLatLngIntersects(i[i.length-1]);if(!this.options.allowIntersection&&s||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(i){var s=this._map.mouseEventToLayerPoint(i.originalEvent),a=this._map.layerPointToLatLng(s);this._currentLatLng=a,this._updateTooltip(a),this._updateGuide(s),this._mouseMarker.setLatLng(a),L.DomEvent.preventDefault(i.originalEvent)},_vertexChanged:function(i,s){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(i,s),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(i){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(i),this._clickHandled=!0,this._disableNewMarkers();var s=i.originalEvent,a=s.clientX,l=s.clientY;this._startPoint.call(this,a,l)}},_startPoint:function(i,s){this._mouseDownOrigin=L.point(i,s)},_onMouseUp:function(i){var s=i.originalEvent,a=s.clientX,l=s.clientY;this._endPoint.call(this,a,l,i),this._clickHandled=null},_endPoint:function(i,s,a){if(this._mouseDownOrigin){var l=L.point(i,s).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(a.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(a.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(l)<9*(t.devicePixelRatio||1)&&this.addVertex(a.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(i){var s,a,l=i.originalEvent;!l.touches||!l.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(s=l.touches[0].clientX,a=l.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,s,a),this._endPoint.call(this,s,a,i),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(i){var s;if(this._markers.length>0){var a;if(this.type===L.Draw.Polyline.TYPE)a=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;a=this._markers[0]}var l=this._map.latLngToContainerPoint(a.getLatLng()),h=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),c=this._map.latLngToContainerPoint(h.getLatLng());s=l.distanceTo(c)}else s=1/0;return s},_updateFinishHandler:function(){var i=this._markers.length;i>1&&this._markers[i-1].on("click",this._finishShape,this),i>2&&this._markers[i-2].off("click",this._finishShape,this)},_createMarker:function(i){var s=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(s),s},_updateGuide:function(i){var s=this._markers?this._markers.length:0;s>0&&(i=i||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[s-1].getLatLng()),i))},_updateTooltip:function(i){var s=this._getTooltipText();i&&this._tooltip.updatePosition(i),this._errorShown||this._tooltip.updateContent(s)},_drawGuide:function(i,s){var a,l,h,c=Math.floor(Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2))),p=this.options.guidelineDistance,m=this.options.maxGuideLineLength,v=c>m?c-m:p;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));v<c;v+=this.options.guidelineDistance)a=v/c,l={x:Math.floor(i.x*(1-a)+a*s.x),y:Math.floor(i.y*(1-a)+a*s.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,l)},_updateGuideColor:function(i){if(this._guidesContainer)for(var s=0,a=this._guidesContainer.childNodes.length;s<a;s++)this._guidesContainer.childNodes[s].style.backgroundColor=i},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var i,s,a=this.options.showLength;return this._markers.length===0?i={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(s=a?this._getMeasurementString():"",i=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:s}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:s}),i},_updateRunningMeasure:function(i,s){var a,l,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(a=h-(s?2:1),l=L.GeometryUtil.isVersion07x()?i.distanceTo(this._markers[a].getLatLng())*(this.options.factor||1):this._map.distance(i,this._markers[a].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=l*(s?1:-1))},_getMeasurementString:function(){var i,s=this._currentLatLng,a=this._markers[this._markers.length-1].getLatLng();return i=L.GeometryUtil.isVersion07x()?a&&s&&s.distanceTo?this._measurementRunningTotal+s.distanceTo(a)*(this.options.factor||1):this._measurementRunningTotal||0:a&&s?this._measurementRunningTotal+this._map.distance(s,a)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(i,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var i=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(i,s){L.Draw.Polyline.prototype.initialize.call(this,i,s),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var i=this._markers.length;i===1&&this._markers[0].on("click",this._finishShape,this),i>2&&(this._markers[i-1].on("dblclick",this._finishShape,this),i>3&&this._markers[i-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var i,s;return this._markers.length===0?i=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(i=L.drawLocal.draw.handlers.polygon.tooltip.cont,s=this._getMeasurementString()):(i=L.drawLocal.draw.handlers.polygon.tooltip.end,s=this._getMeasurementString()),{text:i,subtext:s}},_getMeasurementString:function(){var i=this._area,s="";return i||this.options.showLength?(this.options.showLength&&(s=L.Draw.Polyline.prototype._getMeasurementString.call(this)),i&&(s+="<br>"+L.GeometryUtil.readableArea(i,this.options.metric,this.options.precision)),s):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(i,s){var a;!this.options.allowIntersection&&this.options.showArea&&(a=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(a)),L.Draw.Polyline.prototype._vertexChanged.call(this,i,s)},_cleanUpShape:function(){var i=this._markers.length;i>0&&(this._markers[0].off("click",this._finishShape,this),i>2&&this._markers[i-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(i,s){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,i,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(i){this._isDrawing=!0,this._startLatLng=i.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(i.originalEvent)},_onMouseMove:function(i){var s=i.latlng;this._tooltip.updatePosition(s),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(s))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(i,s){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,s)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(i){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!r(i.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(i){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,i)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,i),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_getTooltipText:function(){var i,s,a,l=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,c=this.options.showArea;return h&&(i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),s=L.GeometryUtil.geodesicArea(i),a=c?L.GeometryUtil.readableArea(s,this.options.metric):""),{text:l.text,subtext:a}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(i,s){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(i){var s=i.latlng;this._tooltip.updatePosition(s),this._mouseMarker.setLatLng(s),this._marker?(s=this._mouseMarker.getLatLng(),this._marker.setLatLng(s)):(this._marker=this._createMarker(s),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(i){return new L.Marker(i,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(i){this._onMouseMove(i),this._onClick()},_fireCreatedEvent:function(){var i=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(i,s){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,s)},_fireCreatedEvent:function(){var i=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)},_createMarker:function(i){return new L.CircleMarker(i,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(i,s){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,s)},_drawShape:function(i){if(L.GeometryUtil.isVersion07x())var s=this._startLatLng.distanceTo(i);else var s=this._map.distance(this._startLatLng,i);this._shape?this._shape.setRadius(s):(this._shape=new L.Circle(this._startLatLng,s,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_onMouseMove:function(i){var s,a=i.latlng,l=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(a),this._isDrawing){this._drawShape(a),s=this._shape.getRadius().toFixed(1);var c="";l&&(c=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(s,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:c})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(i,s){this._marker=i,L.setOptions(this,s)},addHooks:function(){var i=this._marker;i.dragging.enable(),i.on("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},removeHooks:function(){var i=this._marker;i.dragging.disable(),i.off("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},_onDragEnd:function(i){var s=i.target;s.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:s})},_toggleMarkerHighlight:function(){var i=this._marker._icon;i&&(i.style.display="none",L.DomUtil.hasClass(i,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,-4)):(L.DomUtil.addClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,4)),i.style.display="")},_offsetMarker:function(i,s){var a=parseInt(i.style.marginTop,10)-s,l=parseInt(i.style.marginLeft,10)-s;i.style.marginTop=a+"px",i.style.marginLeft=l+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(i){this.latlngs=[i._latlngs],i._holes&&(this.latlngs=this.latlngs.concat(i._holes)),this._poly=i,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(i){for(var s=0;s<this._verticesHandlers.length;s++)i(this._verticesHandlers[s])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(i){i.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(i){i.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(i){i.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var i=0;i<this.latlngs.length;i++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[i],this._poly.options.poly))},_updateLatLngs:function(i){this.latlngs=[i.layer._latlngs],i.layer._holes&&(this.latlngs=this.latlngs.concat(i.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(i,s,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=i,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this._latlngs=s,L.setOptions(this,a)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var i=this._poly,s=i._path;i instanceof L.Polygon||(i.options.fill=!1,i.options.editing&&(i.options.editing.fill=!1)),s&&i.options.editing&&i.options.editing.className&&(i.options.original.className&&i.options.original.className.split(" ").forEach(function(a){L.DomUtil.removeClass(s,a)}),i.options.editing.className.split(" ").forEach(function(a){L.DomUtil.addClass(s,a)})),i.setStyle(i.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var i=this._poly,s=i._path;s&&i.options.editing&&i.options.editing.className&&(i.options.editing.className.split(" ").forEach(function(a){L.DomUtil.removeClass(s,a)}),i.options.original.className&&i.options.original.className.split(" ").forEach(function(a){L.DomUtil.addClass(s,a)})),i.setStyle(i.options.original),i._map&&(i._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var i,s,a,l,h=this._defaultShape();for(i=0,a=h.length;i<a;i++)l=this._createMarker(h[i],i),l.on("click",this._onMarkerClick,this),l.on("contextmenu",this._onContextMenu,this),this._markers.push(l);var c,p;for(i=0,s=a-1;i<a;s=i++)(i!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(c=this._markers[s],p=this._markers[i],this._createMiddleMarker(c,p),this._updatePrevNext(c,p))},_createMarker:function(i,s){var a=new L.Marker.Touch(i,{draggable:!0,icon:this.options.icon});return a._origLatLng=i,a._index=s,a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(a),a},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var i=this._defaultShape(),s=[].splice.apply(i,arguments);return this._poly._convertLatLngs(i,!0),this._poly.redraw(),s},_removeMarker:function(i){var s=i._index;this._markerGroup.removeLayer(i),this._markers.splice(s,1),this._spliceLatLngs(s,1),this._updateIndexes(s,-1),i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(i){var s=i.target,a=this._poly,l=L.LatLngUtil.cloneLatLng(s._origLatLng);if(L.extend(s._origLatLng,s._latlng),a.options.poly){var h=a._map._editTooltip;if(!a.options.poly.allowIntersection&&a.intersects()){L.extend(s._origLatLng,l),s.setLatLng(l);var c=a.options.color;a.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){a.setStyle({color:c}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}s._middleLeft&&s._middleLeft.setLatLng(this._getMiddleLatLng(s._prev,s)),s._middleRight&&s._middleRight.setLatLng(this._getMiddleLatLng(s,s._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var p=this._poly.getLatLngs();this._poly._convertLatLngs(p,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(i){var s=L.Polygon&&this._poly instanceof L.Polygon?4:3,a=i.target;this._defaultShape().length<s||(this._removeMarker(a),this._updatePrevNext(a._prev,a._next),a._middleLeft&&this._markerGroup.removeLayer(a._middleLeft),a._middleRight&&this._markerGroup.removeLayer(a._middleRight),a._prev&&a._next?this._createMiddleMarker(a._prev,a._next):a._prev?a._next||(a._prev._middleRight=null):a._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(i){var s=i.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:s,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(i){var s=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),a=this._map.layerPointToLatLng(s),l=i.target;L.extend(l._origLatLng,a),l._middleLeft&&l._middleLeft.setLatLng(this._getMiddleLatLng(l._prev,l)),l._middleRight&&l._middleRight.setLatLng(this._getMiddleLatLng(l,l._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(i,s){this._markerGroup.eachLayer(function(a){a._index>i&&(a._index+=s)})},_createMiddleMarker:function(i,s){var a,l,h,c=this._getMiddleLatLng(i,s),p=this._createMarker(c);p.setOpacity(.6),i._middleRight=s._middleLeft=p,l=function(){p.off("touchmove",l,this);var m=s._index;p._index=m,p.off("click",a,this).on("click",this._onMarkerClick,this),c.lat=p.getLatLng().lat,c.lng=p.getLatLng().lng,this._spliceLatLngs(m,0,c),this._markers.splice(m,0,p),p.setOpacity(1),this._updateIndexes(m,1),s._index++,this._updatePrevNext(i,p),this._updatePrevNext(p,s),this._poly.fire("editstart")},h=function(){p.off("dragstart",l,this),p.off("dragend",h,this),p.off("touchmove",l,this),this._createMiddleMarker(i,p),this._createMiddleMarker(p,s)},a=function(){l.call(this),h.call(this),this._fireEdit()},p.on("click",a,this).on("dragstart",l,this).on("dragend",h,this).on("touchmove",l,this),this._markerGroup.addLayer(p)},_updatePrevNext:function(i,s){i&&(i._next=s),s&&(s._prev=i)},_getMiddleLatLng:function(i,s){var a=this._poly._map,l=a.project(i.getLatLng()),h=a.project(s.getLatLng());return a.unproject(l._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(i,s){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=i,L.Util.setOptions(this,s)},addHooks:function(){var i=this._shape;this._shape._map&&(this._map=this._shape._map,i.setStyle(i.options.editing),i._map&&(this._map=i._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var i=this._shape;if(i.setStyle(i.options.original),i._map){this._unbindMarker(this._moveMarker);for(var s=0,a=this._resizeMarkers.length;s<a;s++)this._unbindMarker(this._resizeMarkers[s]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(i,s){var a=new L.Marker.Touch(i,{draggable:!0,icon:s,zIndexOffset:10});return this._bindMarker(a),this._markerGroup.addLayer(a),a},_bindMarker:function(i){i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(i){i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(i){i.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(i){var s=i.target,a=s.getLatLng();s===this._moveMarker?this._move(a):this._resize(a),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(i){i.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(i){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i),typeof this._getCorners=="function"){var s=this._getCorners(),a=i.target,l=a._cornerIndex;a.setOpacity(0),this._oppositeCorner=s[(l+2)%4],this._toggleCornerMarkers(0,l)}this._shape.fire("editstart")},_onTouchMove:function(i){var s=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),a=this._map.layerPointToLatLng(s);return i.target===this._moveMarker?this._move(a):this._resize(a),this._shape.redraw(),!1},_onTouchEnd:function(i){i.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getBounds(),s=i.getCenter();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){var i=this._getCorners();this._resizeMarkers=[];for(var s=0,a=i.length;s<a;s++)this._resizeMarkers.push(this._createMarker(i[s],this.options.resizeIcon)),this._resizeMarkers[s]._cornerIndex=s},_onMarkerDragStart:function(i){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i);var s=this._getCorners(),a=i.target,l=a._cornerIndex;this._oppositeCorner=s[(l+2)%4],this._toggleCornerMarkers(0,l)},_onMarkerDragEnd:function(i){var s,a,l=i.target;l===this._moveMarker&&(s=this._shape.getBounds(),a=s.getCenter(),l.setLatLng(a)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,i)},_move:function(i){for(var s,a=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),l=this._shape.getBounds(),h=l.getCenter(),c=[],p=0,m=a.length;p<m;p++)s=[a[p].lat-h.lat,a[p].lng-h.lng],c.push([i.lat+s[0],i.lng+s[1]]);this._shape.setLatLngs(c),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(i){var s;this._shape.setBounds(L.latLngBounds(i,this._oppositeCorner)),s=this._shape.getBounds(),this._moveMarker.setLatLng(s.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var i=this._shape.getBounds();return[i.getNorthWest(),i.getNorthEast(),i.getSouthEast(),i.getSouthWest()]},_toggleCornerMarkers:function(i){for(var s=0,a=this._resizeMarkers.length;s<a;s++)this._resizeMarkers[s].setOpacity(i)},_repositionCornerMarkers:function(){for(var i=this._getCorners(),s=0,a=this._resizeMarkers.length;s<a;s++)this._resizeMarkers[s].setLatLng(i[s])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getLatLng();this._moveMarker=this._createMarker(i,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(i){if(this._resizeMarkers.length){var s=this._getResizeMarkerPoint(i);this._resizeMarkers[0].setLatLng(s)}this._shape.setLatLng(i),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var i=this._shape.getLatLng(),s=this._getResizeMarkerPoint(i);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(s,this.options.resizeIcon))},_getResizeMarkerPoint:function(i){var s=this._shape._radius*Math.cos(Math.PI/4),a=this._map.project(i);return this._map.unproject([a.x+s,a.y-s])},_resize:function(i){var s=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=s.distanceTo(i):radius=this._map.distance(s,i),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(i,s){var a={};if(i.touches!==void 0){if(!i.touches.length)return;a=i.touches[0]}else if(i.pointerType!=="touch"||(a=i,!this._filterClick(i)))return;var l=this._map.mouseEventToContainerPoint(a),h=this._map.mouseEventToLayerPoint(a),c=this._map.layerPointToLatLng(h);this._map.fire(s,{latlng:c,layerPoint:h,containerPoint:l,pageX:a.pageX,pageY:a.pageY,originalEvent:i})},_filterClick:function(i){var s=i.timeStamp||i.originalEvent.timeStamp,a=L.DomEvent._lastClick&&s-L.DomEvent._lastClick;return a&&a>100&&a<500||i.target._simulatedClick&&!i._simulated?(L.DomEvent.stop(i),!1):(L.DomEvent._lastClick=s,!0)},_onTouchStart:function(i){this._map._loaded&&this._touchEvent(i,"touchstart")},_onTouchEnd:function(i){this._map._loaded&&this._touchEvent(i,"touchend")},_onTouchCancel:function(i){if(this._map._loaded){var s="touchcancel";this._detectIE()&&(s="pointercancel"),this._touchEvent(i,s)}},_onTouchLeave:function(i){this._map._loaded&&this._touchEvent(i,"touchleave")},_onTouchMove:function(i){this._map._loaded&&this._touchEvent(i,"touchmove")},_detectIE:function(){var i=t.navigator.userAgent,s=i.indexOf("MSIE ");if(s>0)return parseInt(i.substring(s+5,i.indexOf(".",s)),10);if(i.indexOf("Trident/")>0){var a=i.indexOf("rv:");return parseInt(i.substring(a+3,i.indexOf(".",a)),10)}var l=i.indexOf("Edge/");return l>0&&parseInt(i.substring(l+5,i.indexOf(".",l)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var i=this._icon,s=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?s.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):s.concat(["touchcancel"]),L.DomUtil.addClass(i,"leaflet-clickable"),L.DomEvent.on(i,"click",this._onMouseClick,this),L.DomEvent.on(i,"keypress",this._onKeyPress,this);for(var a=0;a<s.length;a++)L.DomEvent.on(i,s[a],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var i=t.navigator.userAgent,s=i.indexOf("MSIE ");if(s>0)return parseInt(i.substring(s+5,i.indexOf(".",s)),10);if(i.indexOf("Trident/")>0){var a=i.indexOf("rv:");return parseInt(i.substring(a+3,i.indexOf(".",a)),10)}var l=i.indexOf("Edge/");return l>0&&parseInt(i.substring(l+5,i.indexOf(".",l)),10)}}),L.LatLngUtil={cloneLatLngs:function(i){for(var s=[],a=0,l=i.length;a<l;a++)Array.isArray(i[a])?s.push(L.LatLngUtil.cloneLatLngs(i[a])):s.push(this.cloneLatLng(i[a]));return s},cloneLatLng:function(i){return L.latLng(i.lat,i.lng)}},function(){var i={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(s){var a,l,h=s.length,c=0,p=Math.PI/180;if(h>2){for(var m=0;m<h;m++)a=s[m],l=s[(m+1)%h],c+=(l.lng-a.lng)*p*(2+Math.sin(a.lat*p)+Math.sin(l.lat*p));c=6378137*c*6378137/2}return Math.abs(c)},formattedNumber:function(s,a){var l=parseFloat(s).toFixed(a),h=L.drawLocal.format&&L.drawLocal.format.numeric,c=h&&h.delimiters,p=c&&c.thousands,m=c&&c.decimal;if(p||m){var v=l.split(".");l=p?v[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p):v[0],m=m||".",v.length>1&&(l=l+m+v[1])}return l},readableArea:function(s,a,p){var h,c,p=L.Util.extend({},i,p);return a?(c=["ha","m"],type=typeof a,type==="string"?c=[a]:type!=="boolean"&&(c=a),h=s>=1e6&&c.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*s,p.km)+" km":s>=1e4&&c.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*s,p.ha)+" ha":L.GeometryUtil.formattedNumber(s,p.m)+" m"):(s/=.836127,h=s>=3097600?L.GeometryUtil.formattedNumber(s/3097600,p.mi)+" mi":s>=4840?L.GeometryUtil.formattedNumber(s/4840,p.ac)+" acres":L.GeometryUtil.formattedNumber(s,p.yd)+" yd"),h},readableDistance:function(s,a,l,h,m){var p,m=L.Util.extend({},i,m);switch(a?typeof a=="string"?a:"metric":l?"feet":h?"nauticalMile":"yards"){case"metric":p=s>1e3?L.GeometryUtil.formattedNumber(s/1e3,m.km)+" km":L.GeometryUtil.formattedNumber(s,m.m)+" m";break;case"feet":s*=3.28083,p=L.GeometryUtil.formattedNumber(s,m.ft)+" ft";break;case"nauticalMile":s*=.53996,p=L.GeometryUtil.formattedNumber(s/1e3,m.nm)+" nm";break;case"yards":default:s*=1.09361,p=s>1760?L.GeometryUtil.formattedNumber(s/1760,m.mi)+" miles":L.GeometryUtil.formattedNumber(s,m.yd)+" yd"}return p},isVersion07x:function(){var s=L.version.split(".");return parseInt(s[0],10)===0&&parseInt(s[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(i,s,a,l){return this._checkCounterclockwise(i,a,l)!==this._checkCounterclockwise(s,a,l)&&this._checkCounterclockwise(i,s,a)!==this._checkCounterclockwise(i,s,l)},_checkCounterclockwise:function(i,s,a){return(a.y-i.y)*(s.x-i.x)>(s.y-i.y)*(a.x-i.x)}}),L.Polyline.include({intersects:function(){var i,s,a,l=this._getProjectedPoints(),h=l?l.length:0;if(this._tooFewPointsForIntersection())return!1;for(i=h-1;i>=3;i--)if(s=l[i-1],a=l[i],this._lineSegmentsIntersectsRange(s,a,i-2))return!0;return!1},newLatLngIntersects:function(i,s){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(i),s)},newPointIntersects:function(i,s){var a=this._getProjectedPoints(),l=a?a.length:0,h=a?a[l-1]:null,c=l-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,i,c,s?1:0)},_tooFewPointsForIntersection:function(i){var s=this._getProjectedPoints(),a=s?s.length:0;return a+=i||0,!s||a<=3},_lineSegmentsIntersectsRange:function(i,s,a,l){var h,c,p=this._getProjectedPoints();l=l||0;for(var m=a;m>l;m--)if(h=p[m-1],c=p[m],L.LineUtil.segmentsIntersect(i,s,h,c))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var i=[],s=this._defaultShape(),a=0;a<s.length;a++)i.push(this._map.latLngToLayerPoint(s[a]));return i}}),L.Polygon.include({intersects:function(){var i,s,a,l,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(i=h.length,s=h[0],a=h[i-1],l=i-2,this._lineSegmentsIntersectsRange(a,s,l,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(i){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,i);var s;this._toolbars={},L.DrawToolbar&&this.options.draw&&(s=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=s,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(s=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=s,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(i){var s,a=L.DomUtil.create("div","leaflet-draw"),l=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(s=this._toolbars[h].addToolbar(i))&&(l||(L.DomUtil.hasClass(s,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(s.childNodes[0],"leaflet-draw-toolbar-top"),l=!0),a.appendChild(s));return a},onRemove:function(){for(var i in this._toolbars)this._toolbars.hasOwnProperty(i)&&this._toolbars[i].removeToolbar()},setDrawingOptions:function(i){for(var s in this._toolbars)this._toolbars[s]instanceof L.DrawToolbar&&this._toolbars[s].setOptions(i)},_toolbarEnabled:function(i){var s=i.target;for(var a in this._toolbars)this._toolbars[a]!==s&&this._toolbars[a].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(i){L.setOptions(this,i),this._modes={},this._actionButtons=[],this._activeMode=null;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(i){var s,a=L.DomUtil.create("div","leaflet-draw-section"),l=0,h=this._toolbarClass||"",c=this.getModeHandlers(i);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=i,s=0;s<c.length;s++)c[s].enabled&&this._initModeHandler(c[s].handler,this._toolbarContainer,l++,h,c[s].title);if(l)return this._lastButtonIndex=--l,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),a.appendChild(this._toolbarContainer),a.appendChild(this._actionsContainer),a},removeToolbar:function(){for(var i in this._modes)this._modes.hasOwnProperty(i)&&(this._disposeButton(this._modes[i].button,this._modes[i].handler.enable,this._modes[i].handler),this._modes[i].handler.disable(),this._modes[i].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var s=0,a=this._actionButtons.length;s<a;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(i,s,a,l,h){var c=i.type;this._modes[c]={},this._modes[c].handler=i,this._modes[c].button=this._createButton({type:c,title:h,className:l+"-"+c,container:s,callback:this._modes[c].handler.enable,context:this._modes[c].handler}),this._modes[c].buttonIndex=a,this._modes[c].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(i){var s=L.DomUtil.create("a",i.className||"",i.container),a=L.DomUtil.create("span","sr-only",i.container);s.href="#",s.appendChild(a),i.title&&(s.title=i.title,a.innerHTML=i.title),i.text&&(s.innerHTML=i.text,a.innerHTML=i.text);var l=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(s,"click",L.DomEvent.stopPropagation).on(s,"mousedown",L.DomEvent.stopPropagation).on(s,"dblclick",L.DomEvent.stopPropagation).on(s,"touchstart",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.preventDefault).on(s,l,i.callback,i.context),s},_disposeButton:function(i,s){var a=this._detectIOS()?"touchstart":"click";L.DomEvent.off(i,"click",L.DomEvent.stopPropagation).off(i,"mousedown",L.DomEvent.stopPropagation).off(i,"dblclick",L.DomEvent.stopPropagation).off(i,"touchstart",L.DomEvent.stopPropagation).off(i,"click",L.DomEvent.preventDefault).off(i,a,s)},_handlerActivated:function(i){this.disable(),this._activeMode=this._modes[i.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(i){var s,a,l,h,c=this._actionsContainer,p=this.getActions(i),m=p.length;for(a=0,l=this._actionButtons.length;a<l;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback);for(this._actionButtons=[];c.firstChild;)c.removeChild(c.firstChild);for(var v=0;v<m;v++)"enabled"in p[v]&&!p[v].enabled||(s=L.DomUtil.create("li","",c),h=this._createButton({title:p[v].title,text:p[v].text,container:s,callback:p[v].callback,context:p[v].context}),this._actionButtons.push({button:h,callback:p[v].callback}))},_showActionsToolbar:function(){var i=this._activeMode.buttonIndex,s=this._lastButtonIndex,a=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=a+"px",i===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),i===s&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(i){this._map=i,this._popupPane=i._panes.popupPane,this._visible=!1,this._container=i.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(i){return this._container?(i.subtext=i.subtext||"",i.subtext.length!==0||this._singleLineLabel?i.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(i.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+i.subtext+"</span><br />":"")+"<span>"+i.text+"</span>",i.text||i.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(i){var s=this._map.latLngToLayerPoint(i),a=this._container;return this._container&&(this._visible&&(a.style.visibility="inherit"),L.DomUtil.setPosition(a,s)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(i){for(var s in this.options)this.options.hasOwnProperty(s)&&i[s]&&(i[s]=L.extend({},this.options[s],i[s]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,i)},getModeHandlers:function(i){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(i,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(i,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(i,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(i,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(i,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(i,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(i){return[{enabled:i.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:i.completeShape,context:i},{enabled:i.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:i.deleteLastVertex,context:i},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(i){L.setOptions(this,i);for(var s in this._modes)this._modes.hasOwnProperty(s)&&i.hasOwnProperty(s)&&this._modes[s].handler.setOptions(i[s])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(i){i.edit&&(i.edit.selectedPathOptions===void 0&&(i.edit.selectedPathOptions=this.options.edit.selectedPathOptions),i.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,i.edit.selectedPathOptions)),i.remove&&(i.remove=L.extend({},this.options.remove,i.remove)),i.poly&&(i.poly=L.extend({},this.options.poly,i.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,i),this._selectedFeatureCount=0},getModeHandlers:function(i){var s=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(i,{featureGroup:s,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(i,{featureGroup:s}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(i){var s=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return i.removeAllLayers&&s.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),s},addToolbar:function(i){var s=L.Toolbar.prototype.addToolbar.call(this,i);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),s},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var i,s=this.options.featureGroup,a=s.getLayers().length!==0;this.options.edit&&(i=this._modes[L.EditToolbar.Edit.TYPE].button,a?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",a?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(i=this._modes[L.EditToolbar.Delete.TYPE].button,a?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",a?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(i,s){if(L.Handler.prototype.initialize.call(this,i),L.setOptions(this,s),this._featureGroup=s.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),i._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(i){this._revertLayer(i)},this)},save:function(){var i=new L.LayerGroup;this._featureGroup.eachLayer(function(s){s.edited&&(i.addLayer(s),s.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:i})},_backupLayer:function(i){var s=L.Util.stamp(i);this._uneditedLayerProps[s]||(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?this._uneditedLayerProps[s]={latlngs:L.LatLngUtil.cloneLatLngs(i.getLatLngs())}:i instanceof L.Circle?this._uneditedLayerProps[s]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng()),radius:i.getRadius()}:(i instanceof L.Marker||i instanceof L.CircleMarker)&&(this._uneditedLayerProps[s]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(i){var s=L.Util.stamp(i);i.edited=!1,this._uneditedLayerProps.hasOwnProperty(s)&&(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?i.setLatLngs(this._uneditedLayerProps[s].latlngs):i instanceof L.Circle?(i.setLatLng(this._uneditedLayerProps[s].latlng),i.setRadius(this._uneditedLayerProps[s].radius)):(i instanceof L.Marker||i instanceof L.CircleMarker)&&i.setLatLng(this._uneditedLayerProps[s].latlng),i.fire("revert-edited",{layer:i}))},_enableLayerEdit:function(i){var s,a,l=i.layer||i.target||i;this._backupLayer(l),this.options.poly&&(a=L.Util.extend({},this.options.poly),l.options.poly=a),this.options.selectedPathOptions&&(s=L.Util.extend({},this.options.selectedPathOptions),s.maintainColor&&(s.color=l.options.color,s.fillColor=l.options.fillColor),l.options.original=L.extend({},l.options),l.options.editing=s),l instanceof L.Marker?(l.editing&&l.editing.enable(),l.dragging.enable(),l.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):l.editing.enable()},_disableLayerEdit:function(i){var s=i.layer||i.target||i;s.edited=!1,s.editing&&s.editing.disable(),delete s.options.editing,delete s.options.original,this._selectedPathOptions&&(s instanceof L.Marker?this._toggleMarkerHighlight(s):(s.setStyle(s.options.previousOptions),delete s.options.previousOptions)),s instanceof L.Marker?(s.dragging.disable(),s.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):s.editing.disable()},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_onMarkerDragEnd:function(i){var s=i.target;s.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:s})},_onTouchMove:function(i){var s=i.originalEvent.changedTouches[0],a=this._map.mouseEventToLayerPoint(s),l=this._map.layerPointToLatLng(a);i.target.setLatLng(l)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(i,s){if(L.Handler.prototype.initialize.call(this,i),L.Util.setOptions(this,s),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(i){this._deletableLayers.addLayer(i),i.fire("revert-deleted",{layer:i})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(i){this._removeLayer({layer:i})},this),this.save()},_enableLayerDelete:function(i){(i.layer||i.target||i).on("click",this._removeLayer,this)},_disableLayerDelete:function(i){var s=i.layer||i.target||i;s.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(s)},_removeLayer:function(i){var s=i.layer||i.target||i;this._deletableLayers.removeLayer(s),this._deletedLayers.addLayer(s),s.fire("deleted")},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var wP=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n};const Xv=Pu(wP);function Jv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ql(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jv(Object(n),!0).forEach(function(r){xP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vs={onEdited:"draw:edited",onDrawStart:"draw:drawstart",onDrawStop:"draw:drawstop",onDrawVertex:"draw:drawvertex",onEditStart:"draw:editstart",onEditMove:"draw:editmove",onEditResize:"draw:editresize",onEditVertex:"draw:editvertex",onEditStop:"draw:editstop",onDeleted:"draw:deleted",onDeleteStart:"draw:deletestart",onDeleteStop:"draw:deletestop"};function NE(t){var e=ig(),n=Tt.useRef(),r=Tt.useRef(t),i=function(a){var l=t.onCreated,h=e.layerContainer||e.map;h.addLayer(a.layer),l&&l(a)};return Zs.useEffect(function(){var s=e.map,a=t.onMounted;for(var l in Vs)s.on(Vs[l],function(h){var c=Object.keys(Vs).filter(function(m){return Vs[m]===h.type});if(c.length===1){var p=c[0];t[p]&&t[p](h)}});return s.on(Yv.Draw.Event.CREATED,i),n.current=ty(t,e),s.addControl(n.current),a&&a(n.current),function(){s.off(Yv.Draw.Event.CREATED,i);for(var h in Vs)t[h]&&s.off(Vs[h],t[h]);n.current.remove(s)}},[t.onCreated,t.onDeleted,t.onEdited]),Zs.useEffect(function(){if(!(Xv(t.draw,r.current.draw)&&Xv(t.edit,r.current.edit)&&t.position===r.current.position)){var s=e.map;n.current.remove(s),n.current=ty(t,e),n.current.addTo(s);var a=t.onMounted;return a&&a(n.current),function(){n.current.remove(s)}}},[t.draw,t.edit,t.position,t.onCreated,t.onDeleted,t.onEdited]),null}function ty(t,e){var n=e.layerContainer,r=t.draw,i=t.edit,s=t.position,a={edit:ql(ql({},i),{},{featureGroup:n})};return r&&(a.draw=ql({},r)),s&&(a.position=s),new Ra.Control.Draw(a)}NE.propTypes=ql(ql({},Object.keys(Vs).reduce(function(t,e){return t[e]=ae.PropTypes.func,t},{})),{},{onCreated:ae.PropTypes.func,onMounted:ae.PropTypes.func,draw:ae.PropTypes.shape({polyline:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool]),polygon:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool]),rectangle:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool]),circle:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool]),marker:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool])}),edit:ae.PropTypes.shape({edit:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool]),remove:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool]),poly:ae.PropTypes.oneOfType([ae.PropTypes.object,ae.PropTypes.bool]),allowIntersection:ae.PropTypes.bool}),position:ae.PropTypes.oneOf(["topright","topleft","bottomright","bottomleft"]),leaflet:ae.PropTypes.shape({map:ae.PropTypes.instanceOf(Ra.Map),layerContainer:ae.PropTypes.shape({addLayer:ae.PropTypes.func.isRequired,removeLayer:ae.PropTypes.func.isRequired})})});function EP(){var M,R,W,q,X,U,S;const{fieldId:t}=WM(),e=w_(),[n,r]=Tt.useState(null),[i,s]=Tt.useState(!1),[a,l]=Tt.useState(!1),[h,c]=Tt.useState({}),[p,m]=Tt.useState(new Date().getFullYear());Tt.useEffect(()=>{(async()=>{const F=Wl(gi,"fields",t),H=await ZI(F);if(H.exists()){const D={id:H.id,...H.data()};r(D),c(D)}})()},[t]);const v=async()=>{const k=Wl(gi,"fields",t);await cm(k,h),s(!1),r(h)},_=()=>{c(n),s(!1)},T=async k=>{const F=Wl(gi,"fields",t),H={...n,boundary:{geojson:k,year:p}};await cm(F,H),r(H),l(!1)};if(!n)return it.jsx("div",{children:"Loading field..."});const w=((R=(M=n.crops)==null?void 0:M[p])==null?void 0:R.crop)||"",I=((q=(W=n.crops)==null?void 0:W[p])==null?void 0:q.variety)||"",E=["fieldName","farmName","gpsAcres","fsaAcres","county","farmNumber","tractNumber","fsaFieldNumber","operator","operatorRentShare","operatorExpenseShare","landowner","landownerRentShare","landownerExpenseShare"];return it.jsxs("div",{children:[it.jsxs("div",{className:"flex justify-between mb-6",children:[it.jsxs("h2",{className:"text-xl font-bold",children:[n.fieldName,"  Field Details"]}),it.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[it.jsx("button",{onClick:()=>m(k=>k-1),className:"text-blue-600 font-bold",children:""}),it.jsx("span",{className:"font-semibold text-gray-700",children:p}),it.jsx("button",{onClick:()=>m(k=>k+1),className:"text-blue-600 font-bold",children:""})]})]}),it.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6",children:E.map(k=>it.jsxs("div",{className:"bg-white p-3 rounded shadow",children:[it.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:k}),i?it.jsx("input",{className:"border p-1 rounded w-full",value:h[k]||"",onChange:F=>c({...h,[k]:F.target.value})}):it.jsx("div",{className:"font-medium",children:n[k]})]},k))}),it.jsxs("div",{className:"bg-white p-4 rounded shadow col-span-2 mb-6",children:[it.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:[" Crop Assignment  ",p]}),it.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i?it.jsxs("select",{value:((U=(X=h.crops)==null?void 0:X[p])==null?void 0:U.crop)||"",onChange:k=>c(F=>{var H;return{...F,crops:{...F.crops,[p]:{...(H=F.crops)==null?void 0:H[p],crop:k.target.value}}}}),className:"border p-2 rounded",children:[it.jsx("option",{value:"",children:"Select Crop"}),it.jsx("option",{value:"Rice",children:"Rice"}),it.jsx("option",{value:"Soybeans",children:"Soybeans"}),it.jsx("option",{value:"Corn",children:"Corn"})]}):it.jsxs("div",{className:"font-medium",children:["Crop: ",w||""]}),it.jsxs("div",{className:"font-medium text-gray-700",children:["Variety: ",it.jsx("span",{className:"text-gray-800 font-semibold",children:I||" (from job)"})]})]})]}),it.jsxs("div",{className:"mb-6",children:[i?it.jsxs(it.Fragment,{children:[it.jsx("button",{onClick:v,className:"bg-green-600 text-white text-sm px-4 py-2 rounded shadow mr-2",children:"Save Changes"}),it.jsx("button",{onClick:_,className:"bg-gray-500 text-white text-sm px-4 py-2 rounded shadow",children:"Cancel"})]}):it.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white text-sm px-4 py-2 rounded shadow mr-2",children:"Edit Field Info"}),it.jsx("button",{onClick:()=>e("/"),className:"bg-gray-400 text-white text-sm px-4 py-2 rounded shadow",children:" Back to Fields"})]}),it.jsxs("div",{className:"bg-white p-3 rounded shadow col-span-2 mb-6",children:[it.jsxs("div",{className:"flex justify-between items-center mb-2",children:[it.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" Boundary Map"}),it.jsx("button",{onClick:()=>l(!0),className:"text-sm text-blue-700 hover:underline",children:" Edit Boundary"})]}),(S=n.boundary)!=null&&S.geojson?it.jsxs(pm,{style:{height:300},bounds:[[0,0],[0,0]],scrollWheelZoom:!1,children:[it.jsx(mm,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),it.jsx(pP,{data:n.boundary.geojson})]}):it.jsx("p",{className:"text-gray-500 italic",children:"No boundary assigned to this field yet."})]}),a&&it.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-700 text-white",children:[it.jsx("h2",{className:"text-lg font-semibold",children:"Draw/Edit Boundary"}),it.jsx("button",{onClick:()=>l(!1),className:"text-xl",children:""})]}),it.jsxs(pm,{style:{flex:1},center:[35,-91],zoom:13,children:[it.jsx(mm,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),it.jsx(NE,{position:"topright",draw:{rectangle:!1,circle:!1,circlemarker:!1,marker:!1,polyline:!1},onCreated:k=>T(k.layer.toGeoJSON().geometry),onEdited:k=>{const F=k.layers.getLayers();F.length>0&&T(F[0].toGeoJSON().geometry)},onDeleted:()=>T(null)})]})]}),it.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6",children:[it.jsx("div",{className:"bg-white p-3 rounded shadow col-span-2",children:" Job History"}),it.jsx("div",{className:"bg-white p-3 rounded shadow col-span-2",children:" Notes + Observations"})]})]})}var OE={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(Tm,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,l={},h=0,c={};function p(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var F=q(k);F.chunkSize=parseInt(F.chunkSize),k.step||k.chunk||(F.chunkSize=null),this._handle=new w(F),(this._handle.streamer=this)._config=F}).call(this,S),this.parseChunk=function(k,F){var H=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<H){let j=this._config.newline;j||(D=this._config.quoteChar||'"',j=this._handle.guessLineEndings(k,D)),k=[...k.split(j).slice(H)].join(j)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(k))!==void 0&&(k=D),this.isFirstChunk=!1,this._halted=!1;var H=this._partialLine+k,D=(this._partialLine="",this._handle.parse(H,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=D.meta.cursor,H=(this._finished||(this._partialLine=H.substring(k-this._baseIndex),this._baseIndex=k),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:D,workerId:c.WORKER_ID,finished:H});else if(U(this._config.chunk)&&!F){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!H||!U(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(k){U(this._config.error)?this._config.error(k):a&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:k,finished:!1})}}function m(S){var k;(S=S||{}).chunkSize||(S.chunkSize=c.RemoteChunkSize),p.call(this,S),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),s||(k.onload=X(this._chunkLoaded,this),k.onerror=X(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var F,H=this._config.downloadRequestHeaders;for(F in H)k.setRequestHeader(F,H[F])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+D));try{k.send(this._config.downloadRequestBody)}catch(j){this._chunkError(j.message)}s&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(F=>(F=F.getResponseHeader("Content-Range"))!==null?parseInt(F.substring(F.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(F){F=k.statusText||F,this._sendError(new Error(F))}}function v(S){(S=S||{}).chunkSize||(S.chunkSize=c.LocalChunkSize),p.call(this,S);var k,F,H=typeof FileReader<"u";this.stream=function(D){this._input=D,F=D.slice||D.webkitSlice||D.mozSlice,H?((k=new FileReader).onload=X(this._chunkLoaded,this),k.onerror=X(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,j=(this._config.chunkSize&&(j=Math.min(this._start+this._config.chunkSize,this._input.size),D=F.call(D,this._start,j)),k.readAsText(D,this._config.encoding));H||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(k.error)}}function _(S){var k;p.call(this,S=S||{}),this.stream=function(F){return k=F,this._nextChunk()},this._nextChunk=function(){var F,H;if(!this._finished)return F=this._config.chunkSize,k=F?(H=k.substring(0,F),k.substring(F)):(H=k,""),this._finished=!k,this.parseChunk(H)}}function T(S){p.call(this,S=S||{});var k=[],F=!0,H=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){H&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):F=!0},this._streamData=X(function(D){try{k.push(typeof D=="string"?D:D.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(j){this._streamError(j)}},this),this._streamError=X(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=X(function(){this._streamCleanUp(),H=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(S){var k,F,H,D,j=Math.pow(2,53),B=-j,wt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Rt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,mt=this,lt=0,ot=0,ft=!1,J=!1,tt=[],_t={data:[],errors:[],meta:{}};function Et(It){return S.skipEmptyLines==="greedy"?It.join("").trim()==="":It.length===1&&It[0].length===0}function vt(){if(_t&&H&&($t("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),H=!1),S.skipEmptyLines&&(_t.data=_t.data.filter(function(Gt){return!Et(Gt)})),Pt()){let Gt=function(Kt,P){U(S.transformHeader)&&(Kt=S.transformHeader(Kt,P)),tt.push(Kt)};var Ft=Gt;if(_t)if(Array.isArray(_t.data[0])){for(var It=0;Pt()&&It<_t.data.length;It++)_t.data[It].forEach(Gt);_t.data.splice(0,1)}else _t.data.forEach(Gt)}function Nt(Gt,Kt){for(var P=S.header?{}:[],dt=0;dt<Gt.length;dt++){var at=dt,N=Gt[dt],N=((O,V)=>(Z=>(S.dynamicTypingFunction&&S.dynamicTyping[Z]===void 0&&(S.dynamicTyping[Z]=S.dynamicTypingFunction(Z)),(S.dynamicTyping[Z]||S.dynamicTyping)===!0))(O)?V==="true"||V==="TRUE"||V!=="false"&&V!=="FALSE"&&((Z=>{if(wt.test(Z)&&(Z=parseFloat(Z),B<Z&&Z<j))return 1})(V)?parseFloat(V):Rt.test(V)?new Date(V):V===""?null:V):V)(at=S.header?dt>=tt.length?"__parsed_extra":tt[dt]:at,N=S.transform?S.transform(N,at):N);at==="__parsed_extra"?(P[at]=P[at]||[],P[at].push(N)):P[at]=N}return S.header&&(dt>tt.length?$t("FieldMismatch","TooManyFields","Too many fields: expected "+tt.length+" fields but parsed "+dt,ot+Kt):dt<tt.length&&$t("FieldMismatch","TooFewFields","Too few fields: expected "+tt.length+" fields but parsed "+dt,ot+Kt)),P}var Ht;_t&&(S.header||S.dynamicTyping||S.transform)&&(Ht=1,!_t.data.length||Array.isArray(_t.data[0])?(_t.data=_t.data.map(Nt),Ht=_t.data.length):_t.data=Nt(_t.data,0),S.header&&_t.meta&&(_t.meta.fields=tt),ot+=Ht)}function Pt(){return S.header&&tt.length===0}function $t(It,Nt,Ht,Ft){It={type:It,code:Nt,message:Ht},Ft!==void 0&&(It.row=Ft),_t.errors.push(It)}U(S.step)&&(D=S.step,S.step=function(It){_t=It,Pt()?vt():(vt(),_t.data.length!==0&&(lt+=It.data.length,S.preview&&lt>S.preview?F.abort():(_t.data=_t.data[0],D(_t,mt))))}),this.parse=function(It,Nt,Ht){var Ft=S.quoteChar||'"',Ft=(S.newline||(S.newline=this.guessLineEndings(It,Ft)),H=!1,S.delimiter?U(S.delimiter)&&(S.delimiter=S.delimiter(It),_t.meta.delimiter=S.delimiter):((Ft=((Gt,Kt,P,dt,at)=>{var N,O,V,Z;at=at||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var K=0;K<at.length;K++){for(var Y,rt=at[K],xt=0,st=0,Mt=0,z=(V=void 0,new E({comments:dt,delimiter:rt,newline:Kt,preview:10}).parse(Gt)),y=0;y<z.data.length;y++)P&&Et(z.data[y])?Mt++:(Y=z.data[y].length,st+=Y,V===void 0?V=Y:0<Y&&(xt+=Math.abs(Y-V),V=Y));0<z.data.length&&(st/=z.data.length-Mt),(O===void 0||xt<=O)&&(Z===void 0||Z<st)&&1.99<st&&(O=xt,N=rt,Z=st)}return{successful:!!(S.delimiter=N),bestDelimiter:N}})(It,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=Ft.bestDelimiter:(H=!0,S.delimiter=c.DefaultDelimiter),_t.meta.delimiter=S.delimiter),q(S));return S.preview&&S.header&&Ft.preview++,k=It,F=new E(Ft),_t=F.parse(k,Nt,Ht),vt(),ft?{meta:{paused:!0}}:_t||{meta:{paused:!1}}},this.paused=function(){return ft},this.pause=function(){ft=!0,F.abort(),k=U(S.chunk)?"":k.substring(F.getCharIndex())},this.resume=function(){mt.streamer._halted?(ft=!1,mt.streamer.parseChunk(k,!0)):setTimeout(mt.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,F.abort(),_t.meta.aborted=!0,U(S.complete)&&S.complete(_t),k=""},this.guessLineEndings=function(Gt,Ft){Gt=Gt.substring(0,1048576);var Ft=new RegExp(I(Ft)+"([^]*?)"+I(Ft),"gm"),Ht=(Gt=Gt.replace(Ft,"")).split("\r"),Ft=Gt.split(`
`),Gt=1<Ft.length&&Ft[0].length<Ht[0].length;if(Ht.length===1||Gt)return`
`;for(var Kt=0,P=0;P<Ht.length;P++)Ht[P][0]===`
`&&Kt++;return Kt>=Ht.length/2?`\r
`:"\r"}}function I(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(S){var k=(S=S||{}).delimiter,F=S.newline,H=S.comments,D=S.step,j=S.preview,B=S.fastMode,wt=null,Rt=!1,mt=S.quoteChar==null?'"':S.quoteChar,lt=mt;if(S.escapeChar!==void 0&&(lt=S.escapeChar),(typeof k!="string"||-1<c.BAD_DELIMITERS.indexOf(k))&&(k=","),H===k)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||-1<c.BAD_DELIMITERS.indexOf(H))&&(H=!1),F!==`
`&&F!=="\r"&&F!==`\r
`&&(F=`
`);var ot=0,ft=!1;this.parse=function(J,tt,_t){if(typeof J!="string")throw new Error("Input must be a string");var Et=J.length,vt=k.length,Pt=F.length,$t=H.length,It=U(D),Nt=[],Ht=[],Ft=[],Gt=ot=0;if(!J)return xt();if(B||B!==!1&&J.indexOf(mt)===-1){for(var Kt=J.split(F),P=0;P<Kt.length;P++){if(Ft=Kt[P],ot+=Ft.length,P!==Kt.length-1)ot+=F.length;else if(_t)return xt();if(!H||Ft.substring(0,$t)!==H){if(It){if(Nt=[],Z(Ft.split(k)),st(),ft)return xt()}else Z(Ft.split(k));if(j&&j<=P)return Nt=Nt.slice(0,j),xt(!0)}}return xt()}for(var dt=J.indexOf(k,ot),at=J.indexOf(F,ot),N=new RegExp(I(lt)+I(mt),"g"),O=J.indexOf(mt,ot);;)if(J[ot]===mt)for(O=ot,ot++;;){if((O=J.indexOf(mt,O+1))===-1)return _t||Ht.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Nt.length,index:ot}),Y();if(O===Et-1)return Y(J.substring(ot,O).replace(N,mt));if(mt===lt&&J[O+1]===lt)O++;else if(mt===lt||O===0||J[O-1]!==lt){dt!==-1&&dt<O+1&&(dt=J.indexOf(k,O+1));var V=K((at=at!==-1&&at<O+1?J.indexOf(F,O+1):at)===-1?dt:Math.min(dt,at));if(J.substr(O+1+V,vt)===k){Ft.push(J.substring(ot,O).replace(N,mt)),J[ot=O+1+V+vt]!==mt&&(O=J.indexOf(mt,ot)),dt=J.indexOf(k,ot),at=J.indexOf(F,ot);break}if(V=K(at),J.substring(O+1+V,O+1+V+Pt)===F){if(Ft.push(J.substring(ot,O).replace(N,mt)),rt(O+1+V+Pt),dt=J.indexOf(k,ot),O=J.indexOf(mt,ot),It&&(st(),ft))return xt();if(j&&Nt.length>=j)return xt(!0);break}Ht.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Nt.length,index:ot}),O++}}else if(H&&Ft.length===0&&J.substring(ot,ot+$t)===H){if(at===-1)return xt();ot=at+Pt,at=J.indexOf(F,ot),dt=J.indexOf(k,ot)}else if(dt!==-1&&(dt<at||at===-1))Ft.push(J.substring(ot,dt)),ot=dt+vt,dt=J.indexOf(k,ot);else{if(at===-1)break;if(Ft.push(J.substring(ot,at)),rt(at+Pt),It&&(st(),ft))return xt();if(j&&Nt.length>=j)return xt(!0)}return Y();function Z(Mt){Nt.push(Mt),Gt=ot}function K(Mt){var z=0;return z=Mt!==-1&&(Mt=J.substring(O+1,Mt))&&Mt.trim()===""?Mt.length:z}function Y(Mt){return _t||(Mt===void 0&&(Mt=J.substring(ot)),Ft.push(Mt),ot=Et,Z(Ft),It&&st()),xt()}function rt(Mt){ot=Mt,Z(Ft),Ft=[],at=J.indexOf(F,ot)}function xt(Mt){if(S.header&&!tt&&Nt.length&&!Rt){var z=Nt[0],y={},C=new Set(z);let Q=!1;for(let nt=0;nt<z.length;nt++){let ht=z[nt];if(y[ht=U(S.transformHeader)?S.transformHeader(ht,nt):ht]){let pt,Wt=y[ht];for(;pt=ht+"_"+Wt,Wt++,C.has(pt););C.add(pt),z[nt]=pt,y[ht]++,Q=!0,(wt=wt===null?{}:wt)[pt]=ht}else y[ht]=1,z[nt]=ht;C.add(ht)}Q&&console.warn("Duplicate headers found and renamed."),Rt=!0}return{data:Nt,errors:Ht,meta:{delimiter:k,linebreak:F,aborted:ft,truncated:!!Mt,cursor:Gt+(tt||0),renamedHeaders:wt}}}function st(){D(xt()),Nt=[],Ht=[]}},this.abort=function(){ft=!0},this.getCharIndex=function(){return ot}}function M(S){var k=S.data,F=l[k.workerId],H=!1;if(k.error)F.userError(k.error,k.file);else if(k.results&&k.results.data){var D={abort:function(){H=!0,R(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(U(F.userStep)){for(var j=0;j<k.results.data.length&&(F.userStep({data:k.results.data[j],errors:k.results.errors,meta:k.results.meta},D),!H);j++);delete k.results}else U(F.userChunk)&&(F.userChunk(k.results,D,k.file),delete k.results)}k.finished&&!H&&R(k.workerId,k.results)}function R(S,k){var F=l[S];U(F.userComplete)&&F.userComplete(k),F.terminate(),delete l[S]}function W(){throw new Error("Not implemented.")}function q(S){if(typeof S!="object"||S===null)return S;var k,F=Array.isArray(S)?[]:{};for(k in S)F[k]=q(S[k]);return F}function X(S,k){return function(){S.apply(k,arguments)}}function U(S){return typeof S=="function"}return c.parse=function(S,k){var F=(k=k||{}).dynamicTyping||!1;if(U(F)&&(k.dynamicTypingFunction=F,F={}),k.dynamicTyping=F,k.transform=!!U(k.transform)&&k.transform,!k.worker||!c.WORKERS_SUPPORTED)return F=null,c.NODE_STREAM_INPUT,typeof S=="string"?(S=(H=>H.charCodeAt(0)!==65279?H:H.slice(1))(S),F=new(k.download?m:_)(k)):S.readable===!0&&U(S.read)&&U(S.on)?F=new T(k):(r.File&&S instanceof File||S instanceof Object)&&(F=new v(k)),F.stream(S);(F=(()=>{var H;return!!c.WORKERS_SUPPORTED&&(H=(()=>{var D=r.URL||r.webkitURL||null,j=n.toString();return c.BLOB_URL||(c.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof window !== 'undefined') { return window; } return {}; })(); window.IS_PAPA_WORKER=true; ","(",j,")();"],{type:"text/javascript"})))})(),(H=new r.Worker(H)).onmessage=M,H.id=h++,l[H.id]=H)})()).userStep=k.step,F.userChunk=k.chunk,F.userComplete=k.complete,F.userError=k.error,k.step=U(k.step),k.chunk=U(k.chunk),k.complete=U(k.complete),k.error=U(k.error),delete k.worker,F.postMessage({input:S,config:k,workerId:F.id})},c.unparse=function(S,k){var F=!1,H=!0,D=",",j=`\r
`,B='"',wt=B+B,Rt=!1,mt=null,lt=!1,ot=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||c.BAD_DELIMITERS.filter(function(tt){return k.delimiter.indexOf(tt)!==-1}).length||(D=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(F=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(Rt=k.skipEmptyLines),typeof k.newline=="string"&&(j=k.newline),typeof k.quoteChar=="string"&&(B=k.quoteChar),typeof k.header=="boolean"&&(H=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");mt=k.columns}k.escapeChar!==void 0&&(wt=k.escapeChar+B),k.escapeFormulae instanceof RegExp?lt=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(lt=/^[=+\-@\t\r].*$/)}})(),new RegExp(I(B),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return ft(null,S,Rt);if(typeof S[0]=="object")return ft(mt||Object.keys(S[0]),S,Rt)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||mt),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),ft(S.fields||[],S.data||[],Rt);throw new Error("Unable to serialize unrecognized input");function ft(tt,_t,Et){var vt="",Pt=(typeof tt=="string"&&(tt=JSON.parse(tt)),typeof _t=="string"&&(_t=JSON.parse(_t)),Array.isArray(tt)&&0<tt.length),$t=!Array.isArray(_t[0]);if(Pt&&H){for(var It=0;It<tt.length;It++)0<It&&(vt+=D),vt+=J(tt[It],It);0<_t.length&&(vt+=j)}for(var Nt=0;Nt<_t.length;Nt++){var Ht=(Pt?tt:_t[Nt]).length,Ft=!1,Gt=Pt?Object.keys(_t[Nt]).length===0:_t[Nt].length===0;if(Et&&!Pt&&(Ft=Et==="greedy"?_t[Nt].join("").trim()==="":_t[Nt].length===1&&_t[Nt][0].length===0),Et==="greedy"&&Pt){for(var Kt=[],P=0;P<Ht;P++){var dt=$t?tt[P]:P;Kt.push(_t[Nt][dt])}Ft=Kt.join("").trim()===""}if(!Ft){for(var at=0;at<Ht;at++){0<at&&!Gt&&(vt+=D);var N=Pt&&$t?tt[at]:at;vt+=J(_t[Nt][N],at)}Nt<_t.length-1&&(!Et||0<Ht&&!Gt)&&(vt+=j)}}return vt}function J(tt,_t){var Et,vt;return tt==null?"":tt.constructor===Date?JSON.stringify(tt).slice(1,25):(vt=!1,lt&&typeof tt=="string"&&lt.test(tt)&&(tt="'"+tt,vt=!0),Et=tt.toString().replace(ot,wt),(vt=vt||F===!0||typeof F=="function"&&F(tt,_t)||Array.isArray(F)&&F[_t]||((Pt,$t)=>{for(var It=0;It<$t.length;It++)if(-1<Pt.indexOf($t[It]))return!0;return!1})(Et,c.BAD_DELIMITERS)||-1<Et.indexOf(D)||Et.charAt(0)===" "||Et.charAt(Et.length-1)===" ")?B+Et+B:Et)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=E,c.ParserHandle=w,c.NetworkStreamer=m,c.FileStreamer=v,c.StringStreamer=_,c.ReadableStreamStreamer=T,r.jQuery&&((i=r.jQuery).fn.parse=function(S){var k=S.config||{},F=[];return this.each(function(j){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)F.push({file:this.files[B],inputElem:this,instanceConfig:i.extend({},k)})}),H(),this;function H(){if(F.length===0)U(S.complete)&&S.complete();else{var j,B,wt,Rt,mt=F[0];if(U(S.before)){var lt=S.before(mt.file,mt.inputElem);if(typeof lt=="object"){if(lt.action==="abort")return j="AbortError",B=mt.file,wt=mt.inputElem,Rt=lt.reason,void(U(S.error)&&S.error({name:j},B,wt,Rt));if(lt.action==="skip")return void D();typeof lt.config=="object"&&(mt.instanceConfig=i.extend(mt.instanceConfig,lt.config))}else if(lt==="skip")return void D()}var ot=mt.instanceConfig.complete;mt.instanceConfig.complete=function(ft){U(ot)&&ot(ft,mt.file,mt.inputElem),D()},c.parse(mt.file,mt.instanceConfig)}}function D(){F.splice(0,1),H()}}),a&&(r.onmessage=function(S){S=S.data,c.WORKER_ID===void 0&&S&&(c.WORKER_ID=S.workerId),typeof S.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(S.input,S.config),finished:!0}):(r.File&&S.input instanceof File||S.input instanceof Object)&&(S=c.parse(S.input,S.config))&&r.postMessage({workerId:c.WORKER_ID,results:S,finished:!0})}),(m.prototype=Object.create(p.prototype)).constructor=m,(v.prototype=Object.create(p.prototype)).constructor=v,(_.prototype=Object.create(_.prototype)).constructor=_,(T.prototype=Object.create(p.prototype)).constructor=T,c})})(OE);var TP=OE.exports;const Gu=Pu(TP);function SP(){const[t,e]=Tt.useState(null),n=async r=>{const i=r.target.files[0];i&&Gu.parse(i,{header:!0,skipEmptyLines:!0,complete:async function(s){const a=s.data;let l=0,h=0;for(const c of a)try{await Aa(Ss(gi,"fields"),{...c,gpsAcres:parseFloat(c.gpsAcres),fsaAcres:parseFloat(c.fsaAcres),operatorRentShare:parseFloat(c.operatorRentShare),operatorExpenseShare:parseFloat(c.operatorExpenseShare),landownerRentShare:parseFloat(c.landownerRentShare),landownerExpenseShare:parseFloat(c.landownerExpenseShare),cropYear:new Date().getFullYear()}),l++}catch(p){console.error("Import failed for row:",c,p),h++}e(`Imported ${l} fields. ${h} failed.`)}})};return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Import Fields from CSV"}),it.jsx("input",{type:"file",accept:".csv",onChange:n,className:"mb-4"}),t&&it.jsx("p",{className:"text-green-700 font-semibold",children:t}),it.jsxs("p",{className:"text-sm text-gray-600",children:["Make sure your file matches the ",it.jsx("strong",{children:"fields-template.csv"})," format exactly."]})]})}function MP(){return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Map Viewer"}),it.jsx(pm,{center:[34.789,-91.687],zoom:10,scrollWheelZoom:!0,style:{height:"600px",width:"100%",borderRadius:"0.5rem"},children:it.jsx(mm,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})]})}const LP={};var ro=1,so=2,sa=3,CP=4,_m=5,ey=6378137,kP=6356752314e-3,ny=.0066943799901413165,Zl=484813681109536e-20,kt=Math.PI/2,bP=.16666666666666666,IP=.04722222222222222,PP=.022156084656084655,Dt=1e-10,fn=.017453292519943295,Zi=57.29577951308232,ye=Math.PI/4,Lu=Math.PI*2,je=3.14159265359,Kn={};Kn.greenwich=0;Kn.lisbon=-9.131906111111;Kn.paris=2.337229166667;Kn.bogota=-74.080916666667;Kn.madrid=-3.687938888889;Kn.rome=12.452333333333;Kn.bern=7.439583333333;Kn.jakarta=106.807719444444;Kn.ferro=-17.666666666667;Kn.brussels=4.367975;Kn.stockholm=18.058277777778;Kn.athens=23.7163375;Kn.oslo=10.722916666667;const AP={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var iy=/[\s_\-\/\(\)]/g;function gs(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(iy,""),i=-1,s,a;++i<n.length;)if(s=n[i],a=s.toLowerCase().replace(iy,""),a===r)return t[s]}function gm(t){var e={},n=t.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,h){var c=h.split("=");return c.push(!0),l[c[0].toLowerCase()]=c[1],l},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(l){e.rf=parseFloat(l)},lat_0:function(l){e.lat0=l*fn},lat_1:function(l){e.lat1=l*fn},lat_2:function(l){e.lat2=l*fn},lat_ts:function(l){e.lat_ts=l*fn},lon_0:function(l){e.long0=l*fn},lon_1:function(l){e.long1=l*fn},lon_2:function(l){e.long2=l*fn},alpha:function(l){e.alpha=parseFloat(l)*fn},gamma:function(l){e.rectified_grid_angle=parseFloat(l)},lonc:function(l){e.longc=l*fn},x_0:function(l){e.x0=parseFloat(l)},y_0:function(l){e.y0=parseFloat(l)},k_0:function(l){e.k0=parseFloat(l)},k:function(l){e.k0=parseFloat(l)},a:function(l){e.a=parseFloat(l)},b:function(l){e.b=parseFloat(l)},r:function(l){e.a=e.b=parseFloat(l)},r_a:function(){e.R_A=!0},zone:function(l){e.zone=parseInt(l,10)},south:function(){e.utmSouth=!0},towgs84:function(l){e.datum_params=l.split(",").map(function(h){return parseFloat(h)})},to_meter:function(l){e.to_meter=parseFloat(l)},units:function(l){e.units=l;var h=gs(AP,l);h&&(e.to_meter=h.to_meter)},from_greenwich:function(l){e.from_greenwich=l*fn},pm:function(l){var h=gs(Kn,l);e.from_greenwich=(h||parseFloat(l))*fn},nadgrids:function(l){l==="@null"?e.datumCode="none":e.nadgrids=l},axis:function(l){var h="ewnsud";l.length===3&&h.indexOf(l.substr(0,1))!==-1&&h.indexOf(l.substr(1,1))!==-1&&h.indexOf(l.substr(2,1))!==-1&&(e.axis=l)},approx:function(){e.approx=!0}};for(r in n)i=n[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Cu=1,FE=2,BE=3,hf=4,zE=5,sg=-1,RP=/\s/,DP=/[A-Za-z]/,NP=/[A-Za-z84_]/,Qf=/[,\]]/,VE=/[\d\.E\-\+]/;function Rr(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Cu}Rr.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==hf)for(;RP.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Cu:return this.neutral(t);case FE:return this.keyword(t);case hf:return this.quoted(t);case zE:return this.afterquote(t);case BE:return this.number(t);case sg:return}};Rr.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=hf;return}if(Qf.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Rr.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Cu;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Cu,this.currentObject=this.stack.pop(),this.currentObject||(this.state=sg);return}};Rr.prototype.number=function(t){if(VE.test(t)){this.word+=t;return}if(Qf.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Rr.prototype.quoted=function(t){if(t==='"'){this.state=zE;return}this.word+=t};Rr.prototype.keyword=function(t){if(NP.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Cu;return}if(Qf.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Rr.prototype.neutral=function(t){if(DP.test(t)){this.word=t,this.state=FE;return}if(t==='"'){this.word="",this.state=hf;return}if(VE.test(t)){this.word=t,this.state=BE;return}if(Qf.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Rr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===sg)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function OP(t){var e=new Rr(t);return e.output()}function Ud(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(s,a){return qo(a,s),s},r);e&&(t[e]=i)}function qo(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},qo(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&qo(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&qo(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Ud(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Ud(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return qo(t,e[n]);return Ud(e,n,t)}}var FP=.017453292519943295,BP=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function zP(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function Hi(t){return t*FP}function UE(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];BP.indexOf(i)!==-1&&VP(t[i]),typeof t[i]=="object"&&UE(t[i])}}function VP(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var s=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;t.type==="GEOGCS"&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function l(p){var m=t.to_meter||1;return p*m}var h=function(p){return zP(t,p)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Hi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Hi],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",Hi],["lat0","latitude_of_origin",Hi],["lat0","standard_parallel_1",Hi],["lat1","standard_parallel_1",Hi],["lat2","standard_parallel_2",Hi],["azimuth","Azimuth"],["alpha","azimuth",Hi],["srsCode","name"]];c.forEach(h),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Hi(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Hi(t.lat0>0?90:-90))}function jE(t){var e=OP(t),n=e[0],r={};return qo(e,r),UE(r),r[n]}function An(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?An[t]=gm(arguments[1]):An[t]=jE(arguments[1]):An[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){Array.isArray(r)?An.apply(e,r):An(r)});if(typeof t=="string"){if(t in An)return An[t]}else"EPSG"in t?An["EPSG:"+t.EPSG]=t:"ESRI"in t?An["ESRI:"+t.ESRI]=t:"IAU2000"in t?An["IAU2000:"+t.IAU2000]=t:console.log(t);return}}LP(An);function UP(t){return typeof t=="string"}function jP(t){return t in An}var $P=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function HP(t){return $P.some(function(e){return t.indexOf(e)>-1})}var GP=["3857","900913","3785","102113"];function WP(t){var e=gs(t,"authority");if(e){var n=gs(e,"epsg");return n&&GP.indexOf(n)>-1}}function qP(t){var e=gs(t,"extension");if(e)return gs(e,"proj4")}function ZP(t){return t[0]==="+"}function KP(t){if(UP(t)){if(jP(t))return An[t];if(HP(t)){var e=jE(t);if(WP(e))return An["EPSG:3857"];var n=qP(e);return n?gm(n):e}if(ZP(t))return gm(t)}else return t}function ry(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function ir(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function Wu(t){return t<0?-1:1}function Ot(t){return Math.abs(t)<=je?t:t-Wu(t)*Lu}function Ri(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(kt-e))/r}function ku(t,e){for(var n=.5*t,r,i,s=kt-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(s),i=kt-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function QP(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ir(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function YP(t){var e=t.x,n=t.y;if(n*Zi>90&&n*Zi<-90&&e*Zi>180&&e*Zi<-180)return null;var r,i;if(Math.abs(Math.abs(n)-kt)<=Dt)return null;if(this.sphere)r=this.x0+this.a*this.k0*Ot(e-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(ye+.5*n));else{var s=Math.sin(n),a=Ri(this.e,n,s);r=this.x0+this.a*this.k0*Ot(e-this.long0),i=this.y0-this.a*this.k0*Math.log(a)}return t.x=r,t.y=i,t}function XP(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=kt-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(i=ku(this.e,s),i===-9999)return null}return r=Ot(this.long0+e/(this.a*this.k0)),t.x=r,t.y=i,t}var JP=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const tA={init:QP,forward:YP,inverse:XP,names:JP};function eA(){}function sy(t){return t}var nA=["longlat","identity"];const iA={init:eA,forward:sy,inverse:sy,names:nA};var rA=[tA,iA],wc={},cf=[];function $E(t,e){var n=cf.length;return t.names?(cf[n]=t,t.names.forEach(function(r){wc[r.toLowerCase()]=n}),this):(console.log(e),!0)}function sA(t){if(!t)return!1;var e=t.toLowerCase();if(typeof wc[e]<"u"&&cf[wc[e]])return cf[wc[e]]}function oA(){rA.forEach($E)}const aA={start:oA,add:$E,get:sA};var Qt={};Qt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Qt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Qt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Qt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Qt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Qt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Qt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Qt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Qt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Qt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Qt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Qt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Qt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Qt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Qt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Qt.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Qt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Qt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Qt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Qt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Qt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Qt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Qt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Qt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Qt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Qt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Qt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Qt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Qt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Qt.hough={a:6378270,rf:297,ellipseName:"Hough"};Qt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Qt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Qt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Qt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Qt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Qt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Qt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Qt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Qt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Qt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Qt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Qt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var lA=Qt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Qt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function uA(t,e,n,r){var i=t*t,s=e*e,a=(i-s)/i,l=0;r?(t*=1-a*(bP+a*(IP+a*PP)),i=t*t,a=0):l=Math.sqrt(a);var h=(i-s)/s;return{es:a,e:l,ep2:h}}function hA(t,e,n,r,i){if(!t){var s=gs(Qt,r);s||(s=lA),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<Dt)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var xc={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var cA in xc){var oy=xc[cA];xc[oy.datumName]=oy}function fA(t,e,n,r,i,s,a){var l={};return t===void 0||t==="none"?l.datum_type=_m:l.datum_type=CP,e&&(l.datum_params=e.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=ro),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=so,l.datum_params[3]*=Zl,l.datum_params[4]*=Zl,l.datum_params[5]*=Zl,l.datum_params[6]=l.datum_params[6]/1e6+1)),a&&(l.datum_type=sa,l.grids=a),l.a=n,l.b=r,l.es=i,l.ep2=s,l}var HE={};function dA(t,e){var n=new DataView(e),r=_A(n),i=gA(n,r),s=vA(n,i,r),a={header:i,subgrids:s};return HE[t]=a,a}function pA(t){if(t===void 0)return null;var e=t.split(",");return e.map(mA)}function mA(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:HE[t]||null,isNull:!1}}function Zo(t){return t/3600*Math.PI/180}function _A(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function gA(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:vm(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function vm(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function vA(t,e,n){for(var r=176,i=[],s=0;s<e.nSubgrids;s++){var a=wA(t,r,n),l=xA(t,r,a,n),h=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),c=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[Zo(a.lowerLongitude),Zo(a.lowerLatitude)],del:[Zo(a.longitudeInterval),Zo(a.latitudeInterval)],lim:[h,c],count:a.gridNodeCount,cvs:yA(l)}),r+=176+a.gridNodeCount*16}return i}function yA(t){return t.map(function(e){return[Zo(e.longitudeShift),Zo(e.latitudeShift)]})}function wA(t,e,n){return{name:vm(t,e+8,e+16).trim(),parent:vm(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function xA(t,e,n,r){for(var i=e+176,s=16,a=[],l=0;l<n.gridNodeCount;l++){var h={latitudeShift:t.getFloat32(i+l*s,r),longitudeShift:t.getFloat32(i+l*s+4,r),latitudeAccuracy:t.getFloat32(i+l*s+8,r),longitudeAccuracy:t.getFloat32(i+l*s+12,r)};a.push(h)}return a}function tr(t,e){if(!(this instanceof tr))return new tr(t);e=e||function(c){if(c)throw c};var n=KP(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=tr.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var i=gs(xc,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=hA(n.a,n.b,n.rf,n.ellps,n.sphere),a=uA(s.a,s.b,s.rf,n.R_A),l=pA(n.nadgrids),h=n.datum||fA(n.datumCode,n.datum_params,s.a,s.b,a.es,a.ep2,l);ry(this,n),ry(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=h,this.init(),e(null,this)}tr.projections=aA;tr.projections.start();function EA(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===ro?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===so?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function GE(t,e,n){var r=t.x,i=t.y,s=t.z?t.z:0,a,l,h,c;if(i<-kt&&i>-1.001*kt)i=-kt;else if(i>kt&&i<1.001*kt)i=kt;else{if(i<-kt)return{x:-1/0,y:-1/0,z:t.z};if(i>kt)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),l=Math.sin(i),c=Math.cos(i),h=l*l,a=n/Math.sqrt(1-e*h),{x:(a+s)*c*Math.cos(r),y:(a+s)*c*Math.sin(r),z:(a*(1-e)+s)*l}}function WE(t,e,n,r){var i=1e-12,s=i*i,a=30,l,h,c,p,m,v,_,T,w,I,E,M,R,W=t.x,q=t.y,X=t.z?t.z:0,U,S,k;if(l=Math.sqrt(W*W+q*q),h=Math.sqrt(W*W+q*q+X*X),l/n<i){if(U=0,h/n<i)return S=kt,k=-r,{x:t.x,y:t.y,z:t.z}}else U=Math.atan2(q,W);c=X/h,p=l/h,m=1/Math.sqrt(1-e*(2-e)*p*p),T=p*(1-e)*m,w=c*m,R=0;do R++,_=n/Math.sqrt(1-e*w*w),k=l*T+X*w-_*(1-e*w*w),v=e*_/(_+k),m=1/Math.sqrt(1-v*(2-v)*p*p),I=p*(1-v)*m,E=c*m,M=E*T-I*w,T=I,w=E;while(M*M>s&&R<a);return S=Math.atan(E/Math.abs(I)),{x:U,y:S,z:k}}function TA(t,e,n){if(e===ro)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===so){var r=n[0],i=n[1],s=n[2],a=n[3],l=n[4],h=n[5],c=n[6];return{x:c*(t.x-h*t.y+l*t.z)+r,y:c*(h*t.x+t.y-a*t.z)+i,z:c*(-l*t.x+a*t.y+t.z)+s}}}function SA(t,e,n){if(e===ro)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===so){var r=n[0],i=n[1],s=n[2],a=n[3],l=n[4],h=n[5],c=n[6],p=(t.x-r)/c,m=(t.y-i)/c,v=(t.z-s)/c;return{x:p+h*m-l*v,y:-h*p+m+a*v,z:l*p-a*m+v}}}function Jh(t){return t===ro||t===so}function MA(t,e,n){if(EA(t,e)||t.datum_type===_m||e.datum_type===_m)return n;var r=t.a,i=t.es;if(t.datum_type===sa){var s=ay(t,!1,n);if(s!==0)return;r=ey,i=ny}var a=e.a,l=e.b,h=e.es;if(e.datum_type===sa&&(a=ey,l=kP,h=ny),i===h&&r===a&&!Jh(t.datum_type)&&!Jh(e.datum_type))return n;if(n=GE(n,i,r),Jh(t.datum_type)&&(n=TA(n,t.datum_type,t.datum_params)),Jh(e.datum_type)&&(n=SA(n,e.datum_type,e.datum_params)),n=WE(n,h,a,l),e.datum_type===sa){var c=ay(e,!0,n);if(c!==0)return}return n}function ay(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[];t:for(var a=0;a<t.grids.length;a++){var l=t.grids[a];if(s.push(l.name),l.isNull){i=r;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var h=l.grid.subgrids,c=0,p=h.length;c<p;c++){var m=h[c],v=(Math.abs(m.del[1])+Math.abs(m.del[0]))/1e4,_=m.ll[0]-v,T=m.ll[1]-v,w=m.ll[0]+(m.lim[0]-1)*m.del[0]+v,I=m.ll[1]+(m.lim[1]-1)*m.del[1]+v;if(!(T>r.y||_>r.x||I<r.y||w<r.x)&&(i=LA(r,e,m),!isNaN(i.x)))break t}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Zi+" "+r.y*Zi+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function LA(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Ot(i.x-Math.PI)+Math.PI;var s=ly(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,l=1e-12,h,c;do{if(c=ly(s,n),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:i.x-(c.x+s.x),y:i.y-(c.y+s.y)},s.x+=h.x,s.y+=h.y}while(a--&&Math.abs(h.x)>l&&Math.abs(h.y)>l);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Ot(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function ly(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var h={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var c={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var p={x:e.cvs[a][0],y:e.cvs[a][1]},m=i.x*i.y,v=i.x*(1-i.y),_=(1-i.x)*(1-i.y),T=(1-i.x)*i.y;return s.x=_*l.x+v*h.x+T*p.x+m*c.x,s.y=_*l.y+v*h.y+T*p.y+m*c.y,s}function uy(t,e,n){var r=n.x,i=n.y,s=n.z||0,a,l,h,c={};for(h=0;h<3;h++)if(!(e&&h===2&&n.z===void 0))switch(h===0?(a=r,"ew".indexOf(t.axis[h])!==-1?l="x":l="y"):h===1?(a=i,"ns".indexOf(t.axis[h])!==-1?l="y":l="x"):(a=s,l="z"),t.axis[h]){case"e":c[l]=a;break;case"w":c[l]=-a;break;case"n":c[l]=a;break;case"s":c[l]=-a;break;case"u":n[l]!==void 0&&(c.z=a);break;case"d":n[l]!==void 0&&(c.z=-a);break;default:return null}return c}function qE(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function CA(t){hy(t.x),hy(t.y)}function hy(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function kA(t,e){return(t.datum.datum_type===ro||t.datum.datum_type===so||t.datum.datum_type===sa)&&e.datumCode!=="WGS84"||(e.datum.datum_type===ro||e.datum.datum_type===so||e.datum.datum_type===sa)&&t.datumCode!=="WGS84"}function ff(t,e,n,r){var i;Array.isArray(n)?n=qE(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(CA(n),t.datum&&e.datum&&kA(t,e)&&(i=new tr("WGS84"),n=ff(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=uy(t,!1,n)),t.projName==="longlat")n={x:n.x*fn,y:n.y*fn,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=MA(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Zi,y:n.y*Zi,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?uy(e,!0,n):(n&&!s&&delete n.z,n)}var cy=tr("WGS84");function jd(t,e,n,r){var i,s,a;return Array.isArray(n)?(i=ff(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(s=ff(t,e,n,r),a=Object.keys(n),a.length===2||a.forEach(function(l){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;s[l]=n[l]}),s)}function fy(t){return t instanceof tr?t:t.oProj?t.oProj:tr(t)}function ii(t,e,n){t=fy(t);var r=!1,i;return typeof e>"u"?(e=t,t=cy,r=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=cy,r=!0),e=fy(e),n?jd(t,e,n):(i={forward:function(s,a){return jd(t,e,s,a)},inverse:function(s,a){return jd(e,t,s,a)}},r&&(i.oProj=e),i)}var dy=6,ZE="AJSAJS",KE="AFAFAF",Ko=65,Vn=73,ci=79,Cl=86,kl=90;const bA={forward:QE,inverse:IA,toPoint:YE};function QE(t,e){return e=e||5,RA(PA({lat:t[1],lon:t[0]}),e)}function IA(t){var e=og(JE(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function YE(t){var e=og(JE(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function $d(t){return t*(Math.PI/180)}function py(t){return 180*(t/Math.PI)}function PA(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,s=.9996,a,l,h,c,p,m,v,_=$d(e),T=$d(n),w,I;I=Math.floor((n+180)/6)+1,n===180&&(I=60),e>=56&&e<64&&n>=3&&n<12&&(I=32),e>=72&&e<84&&(n>=0&&n<9?I=31:n>=9&&n<21?I=33:n>=21&&n<33?I=35:n>=33&&n<42&&(I=37)),a=(I-1)*6-180+3,w=$d(a),l=i/(1-i),h=r/Math.sqrt(1-i*Math.sin(_)*Math.sin(_)),c=Math.tan(_)*Math.tan(_),p=l*Math.cos(_)*Math.cos(_),m=Math.cos(_)*(T-w),v=r*((1-i/4-3*i*i/64-5*i*i*i/256)*_-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*_)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*_)-35*i*i*i/3072*Math.sin(6*_));var E=s*h*(m+(1-c+p)*m*m*m/6+(5-18*c+c*c+72*p-58*l)*m*m*m*m*m/120)+5e5,M=s*(v+h*Math.tan(_)*(m*m/2+(5-c+9*p+4*p*p)*m*m*m*m/24+(61-58*c+c*c+600*p-330*l)*m*m*m*m*m*m/720));return e<0&&(M+=1e7),{northing:Math.round(M),easting:Math.round(E),zoneNumber:I,zoneLetter:AA(e)}}function og(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,l=.00669438,h,c=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),p,m,v,_,T,w,I,E,M,R=n-5e5,W=e;r<"N"&&(W-=1e7),I=(i-1)*6-180+3,h=l/(1-l),w=W/s,E=w/(a*(1-l/4-3*l*l/64-5*l*l*l/256)),M=E+(3*c/2-27*c*c*c/32)*Math.sin(2*E)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*E)+151*c*c*c/96*Math.sin(6*E),p=a/Math.sqrt(1-l*Math.sin(M)*Math.sin(M)),m=Math.tan(M)*Math.tan(M),v=h*Math.cos(M)*Math.cos(M),_=a*(1-l)/Math.pow(1-l*Math.sin(M)*Math.sin(M),1.5),T=R/(p*s);var q=M-p*Math.tan(M)/_*(T*T/2-(5+3*m+10*v-4*v*v-9*h)*T*T*T*T/24+(61+90*m+298*v+45*m*m-252*h-3*v*v)*T*T*T*T*T*T/720);q=py(q);var X=(T-(1+2*m+v)*T*T*T/6+(5-2*v+28*m-3*v*v+8*h+24*m*m)*T*T*T*T*T/120)/Math.cos(M);X=I+py(X);var U;if(t.accuracy){var S=og({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});U={top:S.lat,right:S.lon,bottom:q,left:X}}else U={lat:q,lon:X};return U}function AA(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function RA(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+DA(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function DA(t,e,n){var r=XE(n),i=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return NA(i,s,r)}function XE(t){var e=t%dy;return e===0&&(e=dy),e}function NA(t,e,n){var r=n-1,i=ZE.charCodeAt(r),s=KE.charCodeAt(r),a=i+t-1,l=s+e,h=!1;a>kl&&(a=a-kl+Ko-1,h=!0),(a===Vn||i<Vn&&a>Vn||(a>Vn||i<Vn)&&h)&&a++,(a===ci||i<ci&&a>ci||(a>ci||i<ci)&&h)&&(a++,a===Vn&&a++),a>kl&&(a=a-kl+Ko-1),l>Cl?(l=l-Cl+Ko-1,h=!0):h=!1,(l===Vn||s<Vn&&l>Vn||(l>Vn||s<Vn)&&h)&&l++,(l===ci||s<ci&&l>ci||(l>ci||s<ci)&&h)&&(l++,l===Vn&&l++),l>Cl&&(l=l-Cl+Ko-1);var c=String.fromCharCode(a)+String.fromCharCode(l);return c}function JE(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,s=0;!/[A-Z]/.test(i=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var l=t.charAt(s++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+t;n=t.substring(s,s+=2);for(var h=XE(a),c=OA(n.charAt(0),h),p=FA(n.charAt(1),h);p<BA(l);)p+=2e6;var m=e-s;if(m%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var v=m/2,_=0,T=0,w,I,E,M,R;return v>0&&(w=1e5/Math.pow(10,v),I=t.substring(s,s+v),_=parseFloat(I)*w,E=t.substring(s+v),T=parseFloat(E)*w),M=_+c,R=T+p,{easting:M,northing:R,zoneLetter:l,zoneNumber:a,accuracy:w}}function OA(t,e){for(var n=ZE.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===Vn&&n++,n===ci&&n++,n>kl){if(i)throw"Bad character: "+t;n=Ko,i=!0}r+=1e5}return r}function FA(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=KE.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===Vn&&n++,n===ci&&n++,n>Cl){if(i)throw"Bad character: "+t;n=Ko,i=!0}r+=1e5}return r}function BA(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Ea(t,e,n){if(!(this instanceof Ea))return new Ea(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ea.fromMGRS=function(t){return new Ea(YE(t))};Ea.prototype.toMGRS=function(t){return QE([this.x,this.y],t)};var zA=1,VA=.25,my=.046875,_y=.01953125,gy=.01068115234375,UA=.75,jA=.46875,$A=.013020833333333334,HA=.007120768229166667,GA=.3645833333333333,WA=.005696614583333333,qA=.3076171875;function ag(t){var e=[];e[0]=zA-t*(VA+t*(my+t*(_y+t*gy))),e[1]=t*(UA-t*(my+t*(_y+t*gy)));var n=t*t;return e[2]=n*(jA-t*($A+t*HA)),n*=t,e[3]=n*(GA-t*WA),e[4]=n*t*qA,e}function Da(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var ZA=20;function lg(t,e,n){for(var r=1/(1-e),i=t,s=ZA;s;--s){var a=Math.sin(i),l=1-e*a*a;if(l=(Da(i,a,Math.cos(i),n)-t)*(l*Math.sqrt(l))*r,i-=l,Math.abs(l)<Dt)return i}return i}function KA(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=ag(this.es),this.ml0=Da(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function QA(t){var e=t.x,n=t.y,r=Ot(e-this.long0),i,s,a,l=Math.sin(n),h=Math.cos(n);if(this.es){var p=h*r,m=Math.pow(p,2),v=this.ep2*Math.pow(h,2),_=Math.pow(v,2),T=Math.abs(h)>Dt?Math.tan(n):0,w=Math.pow(T,2),I=Math.pow(w,2);i=1-this.es*Math.pow(l,2),p=p/Math.sqrt(i);var E=Da(n,l,h,this.en);s=this.a*(this.k0*p*(1+m/6*(1-w+v+m/20*(5-18*w+I+14*v-58*w*v+m/42*(61+179*I-I*w-479*w)))))+this.x0,a=this.a*(this.k0*(E-this.ml0+l*r*p/2*(1+m/12*(5-w+9*v+4*_+m/30*(61+I-58*w+270*v-330*w*v+m/56*(1385+543*I-I*w-3111*w))))))+this.y0}else{var c=h*Math.sin(r);if(Math.abs(Math.abs(c)-1)<Dt)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,a=h*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(a),c>=1){if(c-1>Dt)return 93;a=0}else a=Math.acos(a);n<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=s,t.y=a,t}function YA(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=lg(e,this.es,this.en),Math.abs(n)<kt){var m=Math.sin(n),v=Math.cos(n),_=Math.abs(v)>Dt?Math.tan(n):0,T=this.ep2*Math.pow(v,2),w=Math.pow(T,2),I=Math.pow(_,2),E=Math.pow(I,2);e=1-this.es*Math.pow(m,2);var M=s*Math.sqrt(e)/this.k0,R=Math.pow(M,2);e=e*_,r=n-e*R/(1-this.es)*.5*(1-R/12*(5+3*I-9*T*I+T-4*w-R/30*(61+90*I-252*T*I+45*E+46*T-R/56*(1385+3633*I+4095*E+1574*E*I)))),i=Ot(this.long0+M*(1-R/6*(1+2*I+T-R/20*(5+28*I+24*E+8*T*I+6*T-R/42*(61+662*I+1320*E+720*E*I))))/v)}else r=kt*Wu(a),i=0;else{var l=Math.exp(s/this.k0),h=.5*(l-1/l),c=this.lat0+a/this.k0,p=Math.cos(c);e=Math.sqrt((1-Math.pow(p,2))/(1+Math.pow(h,2))),r=Math.asin(e),a<0&&(r=-r),h===0&&p===0?i=0:i=Ot(Math.atan2(h,p)+this.long0)}return t.x=i,t.y=r,t}var XA=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ec={init:KA,forward:QA,inverse:YA,names:XA};function t2(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function $n(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function JA(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function tR(t){var e=Math.abs(t);return e=JA(e*(1+e/($n(1,e)+1))),t<0?-e:e}function ug(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],s=0,a;--r>=0;)a=-s+n*i+t[r],s=i,i=a;return e+a*Math.sin(2*e)}function eR(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],s=0,a;--r>=0;)a=-s+n*i+t[r],s=i,i=a;return Math.sin(e)*a}function nR(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function e2(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),s=t2(n),a=nR(n),l=2*i*a,h=-2*r*s,c=t.length-1,p=t[c],m=0,v=0,_=0,T,w;--c>=0;)T=v,w=m,v=p,m=_,p=-T+l*v-h*m+t[c],_=-w+h*v+l*m;return l=r*a,h=i*s,[l*p-h*_,l*_+h*p]}function iR(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ec.init.apply(this),this.forward=Ec.forward,this.inverse=Ec.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=ug(this.cbg,this.lat0);this.Zb=-this.Qn*(r+eR(this.gtu,2*r))}function rR(t){var e=Ot(t.x-this.long0),n=t.y;n=ug(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(s*i,$n(r,i*a)),e=tR(Math.tan(e));var l=e2(this.gtu,2*n,2*e);n=n+l[0],e=e+l[1];var h,c;return Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*n+this.Zb)+this.y0):(h=1/0,c=1/0),t.x=h,t.y=c,t}function sR(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=e2(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(t2(e));var a=Math.sin(n),l=Math.cos(n),h=Math.sin(e),c=Math.cos(e);n=Math.atan2(a*c,$n(h,c*l)),e=Math.atan2(h,c*l),r=Ot(e+this.long0),i=ug(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var oR=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Tc={init:iR,forward:rR,inverse:sR,names:oR};function aR(t,e){if(t===void 0){if(t=Math.floor((Ot(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var lR="etmerc";function uR(){var t=aR(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*fn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Tc.init.apply(this),this.forward=Tc.forward,this.inverse=Tc.inverse}var hR=["Universal Transverse Mercator System","utm"];const cR={init:uR,names:hR,dependsOn:lR};function hg(t,e){return Math.pow((1-t)/(1+t),e)}var fR=20;function dR(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ye)/(Math.pow(Math.tan(.5*this.lat0+ye),this.C)*hg(this.e*t,this.ratexp))}function pR(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ye),this.C)*hg(this.e*Math.sin(n),this.ratexp))-kt,t.x=this.C*e,t}function mR(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+ye)/this.K,1/this.C),s=fR;s>0&&(r=2*Math.atan(i*hg(this.e*Math.sin(t.y),-.5*this.e))-kt,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null}var _R=["gauss"];const cg={init:dR,forward:pR,inverse:mR,names:_R};function gR(){cg.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function vR(t){var e,n,r,i;return t.x=Ot(t.x-this.long0),cg.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function yR(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=$n(t.x,t.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,cg.inverse.apply(this,[t]),t.x=Ot(t.x+this.long0),t}var wR=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const xR={init:gR,forward:vR,inverse:yR,names:wR};function ER(t,e,n){return e*=n,Math.tan(.5*(kt+t))*Math.pow((1-e)/(1+e),.5*n)}function TR(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Dt&&(this.k0=.5*(1+Wu(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Dt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Dt&&Math.abs(Math.cos(this.lat_ts))>Dt&&(this.k0=.5*this.cons*ir(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ri(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ir(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-kt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function SR(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),s,a,l,h,c,p,m=Ot(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Dt&&Math.abs(n+this.lat0)<=Dt?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(m)),t.x=this.a*s*i*Math.sin(m)+this.x0,t.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(m))+this.y0,t):(a=2*Math.atan(this.ssfn_(n,r,this.e))-kt,h=Math.cos(a),l=Math.sin(a),Math.abs(this.coslat0)<=Dt?(c=Ri(this.e,n*this.con,this.con*r),p=2*this.a*this.k0*c/this.cons,t.x=this.x0+p*Math.sin(e-this.long0),t.y=this.y0-this.con*p*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Dt?(s=2*this.a*this.k0/(1+h*Math.cos(m)),t.y=s*l):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*h*Math.cos(m))),t.y=s*(this.cosX0*l-this.sinX0*h*Math.cos(m))+this.y0),t.x=s*h*Math.sin(m)+this.x0,t))}function MR(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var l=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=Dt?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(l)*this.sinlat0+t.y*Math.sin(l)*this.coslat0/a),Math.abs(this.coslat0)<Dt?this.lat0>0?e=Ot(this.long0+Math.atan2(t.x,-1*t.y)):e=Ot(this.long0+Math.atan2(t.x,t.y)):e=Ot(this.long0+Math.atan2(t.x*Math.sin(l),a*this.coslat0*Math.cos(l)-t.y*this.sinlat0*Math.sin(l))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=Dt){if(a<=Dt)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*ku(this.e,r),e=this.con*Ot(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Dt?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=Ot(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*ku(this.e,Math.tan(.5*(kt+s)));return t.x=e,t.y=n,t}var LR=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const CR={init:TR,forward:SR,inverse:MR,names:LR,ssfn_:ER};function kR(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+a*e)/(1-a*e));this.K=l-this.alpha*h+this.alpha*a/2*c}function bR(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),l=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,t.x=this.R*a+this.x0,t}function IR(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),l=this.lambda0+a/this.alpha,h=0,c=s,p=-1e3,m=0;Math.abs(c-p)>1e-7;){if(++m>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),p=c,c=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=l,t.y=c,t}var PR=["somerc"];const AR={init:kR,forward:bR,inverse:IR,names:PR};var Do=1e-7;function RR(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function DR(){var t,e,n,r,i,s,a,l,h,c,p=0,m,v=0,_=0,T=0,w=0,I=0,E=0;this.no_off=RR(this),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var R=!1;if("rectified_grid_angle"in this&&(R=!0),M&&(E=this.alpha),R&&(p=this.rectified_grid_angle*fn),M||R)v=this.longc;else if(_=this.long1,w=this.lat1,T=this.long2,I=this.lat2,Math.abs(w-I)<=Do||(t=Math.abs(w))<=Do||Math.abs(t-kt)<=Do||Math.abs(Math.abs(this.lat0)-kt)<=Do||Math.abs(Math.abs(I)-kt)<=Do)throw new Error;var W=1-this.es;e=Math.sqrt(W),Math.abs(this.lat0)>Dt?(l=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*l*l,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/W),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ri(this.e,this.lat0,l),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),M||R?(M?(m=Math.asin(Math.sin(E)/r),R||(p=E)):(m=p,E=Math.asin(r*Math.sin(m))),this.lam0=v-Math.asin(.5*(i-1/i)*Math.tan(m))/this.B):(s=Math.pow(Ri(this.e,w,Math.sin(w)),this.B),a=Math.pow(Ri(this.e,I,Math.sin(I)),this.B),i=this.E/s,h=(a-s)/(a+s),c=this.E*this.E,c=(c-a*s)/(c+a*s),t=_-T,t<-Math.pi?T-=Lu:t>Math.pi&&(T+=Lu),this.lam0=Ot(.5*(_+T)-Math.atan(c*Math.tan(.5*this.B*(_-T))/h)/this.B),m=Math.atan(2*Math.sin(this.B*Ot(_-this.lam0))/(i-1/i)),p=E=Math.asin(r*Math.sin(m))),this.singam=Math.sin(m),this.cosgam=Math.cos(m),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(E))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*m,this.v_pole_n=this.ArB*Math.log(Math.tan(ye-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(ye+i))}function NR(t){var e={},n,r,i,s,a,l,h,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-kt)>Dt){if(a=this.E/Math.pow(Ri(this.e,t.y,Math.sin(t.y)),this.B),l=1/a,n=.5*(a-l),r=.5*(a+l),s=Math.sin(this.B*t.x),i=(n*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<Dt)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),l=Math.cos(this.B*t.x),Math.abs(l)<Do?h=this.A*t.x:h=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,l)}else c=t.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*t.y;return this.no_rot?(e.x=h,e.y=c):(h-=this.u_0,e.x=c*this.cosrot+h*this.sinrot,e.y=h*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function OR(t){var e,n,r,i,s,a,l,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),l=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(l)-1)<Dt)h.x=0,h.y=l<0?-kt:kt;else{if(h.y=this.E/Math.sqrt((1+l)/(1-l)),h.y=ku(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h}var FR=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const BR={init:DR,forward:NR,inverse:OR,names:FR};function zR(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Dt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=ir(this.e,e,n),i=Ri(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),l=ir(this.e,s,a),h=Ri(this.e,this.lat2,s),c=Ri(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Dt?this.ns=Math.log(r/l)/Math.log(i/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function VR(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Dt&&(n=Wu(n)*(kt-2*Dt));var r=Math.abs(Math.abs(n)-kt),i,s;if(r>Dt)i=Ri(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;s=0}var a=this.ns*Ot(e-this.long0);return t.x=this.k0*(s*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,t}function UR(t){var e,n,r,i,s,a=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+l*l),n=1):(e=-Math.sqrt(a*a+l*l),n=-1);var h=0;if(e!==0&&(h=Math.atan2(n*a,n*l)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=ku(this.e,r),i===-9999)return null}else i=-kt;return s=Ot(h/this.ns+this.long0),t.x=s,t.y=i,t}var jR=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const $R={init:zR,forward:VR,inverse:UR,names:jR};function HR(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function GR(t){var e,n,r,i,s,a,l,h=t.x,c=t.y,p=Ot(h-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-p*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=l*Math.cos(a)/1,t.x=l*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function WR(t){var e,n,r,i,s,a,l,h,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,l=e,h=0;var p=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-t.y)<1e-10&&(h=1),l=t.y,p+=1;while(h===0&&p<15);return p>=15?null:t}var qR=["Krovak","krovak"];const ZR={init:HR,forward:GR,inverse:WR,names:qR};function Dn(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function qu(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Zu(t){return .375*t*(1+.25*t*(1+.46875*t))}function Ku(t){return .05859375*t*t*(1+.75*t)}function Qu(t){return t*t*t*(35/3072)}function Ta(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function Ms(t){return Math.abs(t)<kt?t:t-Wu(t)*Math.PI}function df(t,e,n,r,i){var s,a;s=t/e;for(var l=0;l<15;l++)if(a=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function KR(){this.sphere||(this.e0=qu(this.es),this.e1=Zu(this.es),this.e2=Ku(this.es),this.e3=Qu(this.es),this.ml0=this.a*Dn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function QR(t){var e,n,r=t.x,i=t.y;if(r=Ot(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),l=Ta(this.a,this.e,s),h=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),p=c*c,m=this.es*a*a/(1-this.es),v=this.a*Dn(this.e0,this.e1,this.e2,this.e3,i);e=l*c*(1-p*h*(1/6-(8-h+8*m)*p/120)),n=v-this.ml0+l*s/a*p*(.5+(5-h+6*m)*p/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function YR(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var s=n+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+n,l=df(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-kt)<=Dt)return t.x=this.long0,t.y=kt,n<0&&(t.y*=-1),t;var h=Ta(this.a,this.e,Math.sin(l)),c=h*h*h/this.a/this.a*(1-this.es),p=Math.pow(Math.tan(l),2),m=e*this.a/h,v=m*m;r=l-h*Math.tan(l)/c*m*m*(.5-(1+3*p)*m*m/24),i=m*(1-v*(p/3+(1+3*p)*p*v/15))/Math.cos(l)}return t.x=Ot(i+this.long0),t.y=Ms(r),t}var XR=["Cassini","Cassini_Soldner","cass"];const JR={init:KR,forward:QR,inverse:YR,names:XR};function cs(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var t3=1,e3=2,n3=3,i3=4;function r3(){var t=Math.abs(this.lat0);if(Math.abs(t-kt)<Dt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Dt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=cs(this.e,1),this.mmf=.5/(1-this.es),this.apa=d3(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=cs(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function s3(t){var e,n,r,i,s,a,l,h,c,p,m=t.x,v=t.y;if(m=Ot(m-this.long0),this.sphere){if(s=Math.sin(v),p=Math.cos(v),r=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+p*r:1+this.sinph0*s+this.cosph0*p*r,n<=Dt)return null;n=Math.sqrt(2/n),e=n*p*Math.sin(m),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*p*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(v+this.lat0)<Dt)return null;n=ye-v*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(m),n*=r}}else{switch(l=0,h=0,c=0,r=Math.cos(m),i=Math.sin(m),s=Math.sin(v),a=cs(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=a/this.qp,h=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:c=1+this.sinb1*l+this.cosb1*h*r;break;case this.EQUIT:c=1+h*r;break;case this.N_POLE:c=kt+v,a=this.qp-a;break;case this.S_POLE:c=v-kt,a=this.qp+a;break}if(Math.abs(c)<Dt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?n=this.ymf*c*(this.cosb1*l-this.sinb1*h*r):n=(c=Math.sqrt(2/(1+h*r)))*l*this.ymf,e=this.xmf*c*h*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function o3(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,s,a,l,h,c;if(this.sphere){var p=0,m,v=0;if(m=Math.sqrt(e*e+n*n),i=m*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(i),p=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(m)<=Dt?0:Math.asin(n*v/m),e*=v,n=p*m;break;case this.OBLIQ:i=Math.abs(m)<=Dt?this.lat0:Math.asin(p*this.sinph0+n*v*this.cosph0/m),e*=v*this.cosph0,n=(p-Math.sin(i)*this.sinph0)*m;break;case this.N_POLE:n=-n,i=kt-i;break;case this.S_POLE:i-=kt;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,h=Math.sqrt(e*e+n*n),h<Dt)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*h/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(c=s*this.sinb1+n*a*this.cosb1/h,l=this.qp*c,n=h*this.cosb1*s-n*this.sinb1*a):(c=n*a/h,l=this.qp*c,n=h*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),l=e*e+n*n,!l)return t.x=this.long0,t.y=this.lat0,t;c=1-l/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,n),i=p3(Math.asin(c),this.apa)}return t.x=Ot(this.long0+r),t.y=i,t}var a3=.3333333333333333,l3=.17222222222222222,u3=.10257936507936508,h3=.06388888888888888,c3=.0664021164021164,f3=.016415012942191543;function d3(t){var e,n=[];return n[0]=t*a3,e=t*t,n[0]+=e*l3,n[1]=e*h3,e*=t,n[0]+=e*u3,n[1]+=e*c3,n[2]=e*f3,n}function p3(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var m3=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const _3={init:r3,forward:s3,inverse:o3,names:m3,S_POLE:t3,N_POLE:e3,EQUIT:n3,OBLIQ:i3};function vs(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function g3(){Math.abs(this.lat1+this.lat2)<Dt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ir(this.e3,this.sin_po,this.cos_po),this.qs1=cs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ir(this.e3,this.sin_po,this.cos_po),this.qs2=cs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=cs(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Dt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function v3(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=cs(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Ot(e-this.long0),a=i*Math.sin(s)+this.x0,l=this.rh-i*Math.cos(s)+this.y0;return t.x=a,t.y=l,t}function y3(t){var e,n,r,i,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),s=Ot(i/this.ns0+this.long0),t.x=s,t.y=a,t}function w3(t,e){var n,r,i,s,a,l=vs(.5*e);if(t<Dt)return l;for(var h=t*t,c=1;c<=25;c++)if(n=Math.sin(l),r=Math.cos(l),i=t*n,s=1-i*i,a=.5*s*s/r*(e/(1-h)-n/s+.5/t*Math.log((1-i)/(1+i))),l=l+a,Math.abs(a)<=1e-7)return l;return null}var x3=["Albers_Conic_Equal_Area","Albers","aea"];const E3={init:g3,forward:v3,inverse:y3,names:x3,phi1z:w3};function T3(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function S3(t){var e,n,r,i,s,a,l,h,c=t.x,p=t.y;return r=Ot(c-this.long0),e=Math.sin(p),n=Math.cos(p),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,s=1,a>0||Math.abs(a)<=Dt?(l=this.x0+this.a*s*n*Math.sin(r)/a,h=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)/a):(l=this.x0+this.infinity_dist*n*Math.sin(r),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=l,t.y=h,t}function M3(t){var e,n,r,i,s,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=vs(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=Ot(this.long0+s)):(a=this.phic0,s=0),t.x=s,t.y=a,t}var L3=["gnom"];const C3={init:T3,forward:S3,inverse:M3,names:L3};function k3(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*kt:kt;for(var r=Math.asin(.5*e),i,s,a,l,h=0;h<30;h++)if(s=Math.sin(r),a=Math.cos(r),l=t*s,i=Math.pow(1-l*l,2)/(2*a)*(e/(1-t*t)-s/(1-l*l)+.5/t*Math.log((1-l)/(1+l))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function b3(){this.sphere||(this.k0=ir(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function I3(t){var e=t.x,n=t.y,r,i,s=Ot(e-this.long0);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=cs(this.e,Math.sin(n));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return t.x=r,t.y=i,t}function P3(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Ot(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=k3(this.e,2*t.y*this.k0/this.a),e=Ot(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var A3=["cea"];const R3={init:b3,forward:I3,inverse:P3,names:A3};function D3(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function N3(t){var e=t.x,n=t.y,r=Ot(e-this.long0),i=Ms(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function O3(t){var e=t.x,n=t.y;return t.x=Ot(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Ms(this.lat0+(n-this.y0)/this.a),t}var F3=["Equirectangular","Equidistant_Cylindrical","eqc"];const B3={init:D3,forward:N3,inverse:O3,names:F3};var vy=20;function z3(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qu(this.es),this.e1=Zu(this.es),this.e2=Ku(this.es),this.e3=Qu(this.es),this.ml0=this.a*Dn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function V3(t){var e=t.x,n=t.y,r,i,s,a=Ot(e-this.long0);if(s=a*Math.sin(n),this.sphere)Math.abs(n)<=Dt?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(n),i=this.a*(Ms(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=Dt)r=this.a*a,i=-1*this.ml0;else{var l=Ta(this.a,this.e,Math.sin(n))/Math.tan(n);r=l*Math.sin(s),i=this.a*Dn(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+l*(1-Math.cos(s))}return t.x=r+this.x0,t.y=i+this.y0,t}function U3(t){var e,n,r,i,s,a,l,h,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Dt)e=Ot(r/this.a+this.long0),n=0;else{a=this.lat0+i/this.a,l=r*r/this.a/this.a+a*a,h=a;var p;for(s=vy;s;--s)if(p=Math.tan(h),c=-1*(a*(h*p+1)-h-.5*(h*h+l)*p)/((h-a)/p-1),h+=c,Math.abs(c)<=Dt){n=h;break}e=Ot(this.long0+Math.asin(r*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=Dt)n=0,e=Ot(this.long0+r/this.a);else{a=(this.ml0+i)/this.a,l=r*r/this.a/this.a+a*a,h=a;var m,v,_,T,w;for(s=vy;s;--s)if(w=this.e*Math.sin(h),m=Math.sqrt(1-w*w)*Math.tan(h),v=this.a*Dn(this.e0,this.e1,this.e2,this.e3,h),_=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),T=v/this.a,c=(a*(m*T+1)-T-.5*m*(T*T+l))/(this.es*Math.sin(2*h)*(T*T+l-2*a*T)/(4*m)+(a-T)*(m*_-2/Math.sin(2*h))-_),h-=c,Math.abs(c)<=Dt){n=h;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ot(this.long0+Math.asin(r*m/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var j3=["Polyconic","poly"];const $3={init:z3,forward:V3,inverse:U3,names:j3};function H3(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function G3(t){var e,n=t.x,r=t.y,i=r-this.lat0,s=n-this.long0,a=i/Zl*1e-5,l=s,h=1,c=0;for(e=1;e<=10;e++)h=h*a,c=c+this.A[e]*h;var p=c,m=l,v=1,_=0,T,w,I=0,E=0;for(e=1;e<=6;e++)T=v*p-_*m,w=_*p+v*m,v=T,_=w,I=I+this.B_re[e]*v-this.B_im[e]*_,E=E+this.B_im[e]*v+this.B_re[e]*_;return t.x=E*this.a+this.x0,t.y=I*this.a+this.y0,t}function W3(t){var e,n=t.x,r=t.y,i=n-this.x0,s=r-this.y0,a=s/this.a,l=i/this.a,h=1,c=0,p,m,v=0,_=0;for(e=1;e<=6;e++)p=h*a-c*l,m=c*a+h*l,h=p,c=m,v=v+this.C_re[e]*h-this.C_im[e]*c,_=_+this.C_im[e]*h+this.C_re[e]*c;for(var T=0;T<this.iterations;T++){var w=v,I=_,E,M,R=a,W=l;for(e=2;e<=6;e++)E=w*v-I*_,M=I*v+w*_,w=E,I=M,R=R+(e-1)*(this.B_re[e]*w-this.B_im[e]*I),W=W+(e-1)*(this.B_im[e]*w+this.B_re[e]*I);w=1,I=0;var q=this.B_re[1],X=this.B_im[1];for(e=2;e<=6;e++)E=w*v-I*_,M=I*v+w*_,w=E,I=M,q=q+e*(this.B_re[e]*w-this.B_im[e]*I),X=X+e*(this.B_im[e]*w+this.B_re[e]*I);var U=q*q+X*X;v=(R*q+W*X)/U,_=(W*q-R*X)/U}var S=v,k=_,F=1,H=0;for(e=1;e<=9;e++)F=F*S,H=H+this.D[e]*F;var D=this.lat0+H*Zl*1e5,j=this.long0+k;return t.x=j,t.y=D,t}var q3=["New_Zealand_Map_Grid","nzmg"];const Z3={init:H3,forward:G3,inverse:W3,names:q3};function K3(){}function Q3(t){var e=t.x,n=t.y,r=Ot(e-this.long0),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t}function Y3(t){t.x-=this.x0,t.y-=this.y0;var e=Ot(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var X3=["Miller_Cylindrical","mill"];const J3={init:K3,forward:Q3,inverse:Y3,names:X3};var t4=20;function e4(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ag(this.es)}function n4(t){var e,n,r=t.x,i=t.y;if(r=Ot(r-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=t4;a;--a){var l=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=l,Math.abs(l)<Dt)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var h=Math.sin(i),c=Math.cos(i);n=this.a*Da(i,h,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t}function i4(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=vs((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=vs(Math.sin(e)/this.n)),r=Ot(r+this.long0),e=Ms(e)):(e=lg(t.y/this.a,this.es,this.en),i=Math.abs(e),i<kt?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Ot(n)):i-Dt<kt&&(r=this.long0)),t.x=r,t.y=e,t}var r4=["Sinusoidal","sinu"];const s4={init:e4,forward:n4,inverse:i4,names:r4};function o4(){}function a4(t){for(var e=t.x,n=t.y,r=Ot(e-this.long0),i=n,s=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Dt)break}i/=2,Math.PI/2-Math.abs(n)<Dt&&(r=0);var l=.900316316158*this.a*r*Math.cos(i)+this.x0,h=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=l,t.y=h,t}function l4(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Ot(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var u4=["Mollweide","moll"];const h4={init:o4,forward:a4,inverse:l4,names:u4};function c4(){Math.abs(this.lat1+this.lat2)<Dt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qu(this.es),this.e1=Zu(this.es),this.e2=Ku(this.es),this.e3=Qu(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ir(this.e,this.sinphi,this.cosphi),this.ml1=Dn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Dt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ir(this.e,this.sinphi,this.cosphi),this.ml2=Dn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Dn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function f4(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=Dn(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var s=this.ns*Ot(e-this.long0),a=this.x0+r*Math.sin(s),l=this.y0+this.rh-r*Math.cos(s);return t.x=a,t.y=l,t}function d4(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Ot(this.long0+s/this.ns),r=Ms(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=df(a,this.e0,this.e1,this.e2,this.e3),i=Ot(this.long0+s/this.ns),t.x=i,t.y=r,t}var p4=["Equidistant_Conic","eqdc"];const m4={init:c4,forward:f4,inverse:d4,names:p4};function _4(){this.R=this.a}function g4(t){var e=t.x,n=t.y,r=Ot(e-this.long0),i,s;Math.abs(n)<=Dt&&(i=this.x0+this.R*r,s=this.y0);var a=vs(2*Math.abs(n/Math.PI));(Math.abs(r)<=Dt||Math.abs(Math.abs(n)-kt)<=Dt)&&(i=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var l=.5*Math.abs(Math.PI/r-r/Math.PI),h=l*l,c=Math.sin(a),p=Math.cos(a),m=p/(c+p-1),v=m*m,_=m*(2/c-1),T=_*_,w=Math.PI*this.R*(l*(m-T)+Math.sqrt(h*(m-T)*(m-T)-(T+h)*(v-T)))/(T+h);r<0&&(w=-w),i=this.x0+w;var I=h+m;return w=Math.PI*this.R*(_*I-l*Math.sqrt((T+h)*(h+1)-I*I))/(T+h),n>=0?s=this.y0+w:s=this.y0-w,t.x=i,t.y=s,t}function v4(t){var e,n,r,i,s,a,l,h,c,p,m,v,_;return t.x-=this.x0,t.y-=this.y0,m=Math.PI*this.R,r=t.x/m,i=t.y/m,s=r*r+i*i,a=-Math.abs(i)*(1+s),l=a-2*i*i+r*r,h=-2*a+1+2*i*i+s*s,_=i*i/h+(2*l*l*l/h/h/h-9*a*l/h/h)/27,c=(a-l*l/3/h)/h,p=2*Math.sqrt(-c/3),m=3*_/c/p,Math.abs(m)>1&&(m>=0?m=1:m=-1),v=Math.acos(m)/3,t.y>=0?n=(-p*Math.cos(v+Math.PI/3)-l/3/h)*Math.PI:n=-(-p*Math.cos(v+Math.PI/3)-l/3/h)*Math.PI,Math.abs(r)<Dt?e=this.long0:e=Ot(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r),t.x=e,t.y=n,t}var y4=["Van_der_Grinten_I","VanDerGrinten","vandg"];const w4={init:_4,forward:g4,inverse:v4,names:y4};function x4(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function E4(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),s=Ot(e-this.long0),a,l,h,c,p,m,v,_,T,w,I,E,M,R,W,q,X,U,S,k,F,H,D;return this.sphere?Math.abs(this.sin_p12-1)<=Dt?(t.x=this.x0+this.a*(kt-n)*Math.sin(s),t.y=this.y0-this.a*(kt-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=Dt?(t.x=this.x0+this.a*(kt+n)*Math.sin(s),t.y=this.y0+this.a*(kt+n)*Math.cos(s),t):(U=this.sin_p12*r+this.cos_p12*i*Math.cos(s),q=Math.acos(U),X=q?q/Math.sin(q):1,t.x=this.x0+this.a*X*i*Math.sin(s),t.y=this.y0+this.a*X*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),t):(a=qu(this.es),l=Zu(this.es),h=Ku(this.es),c=Qu(this.es),Math.abs(this.sin_p12-1)<=Dt?(p=this.a*Dn(a,l,h,c,kt),m=this.a*Dn(a,l,h,c,n),t.x=this.x0+(p-m)*Math.sin(s),t.y=this.y0-(p-m)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=Dt?(p=this.a*Dn(a,l,h,c,kt),m=this.a*Dn(a,l,h,c,n),t.x=this.x0+(p+m)*Math.sin(s),t.y=this.y0+(p+m)*Math.cos(s),t):(v=r/i,_=Ta(this.a,this.e,this.sin_p12),T=Ta(this.a,this.e,r),w=Math.atan((1-this.es)*v+this.es*_*this.sin_p12/(T*i)),I=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(w)-this.sin_p12*Math.cos(s)),I===0?S=Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):Math.abs(Math.abs(I)-Math.PI)<=Dt?S=-Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):S=Math.asin(Math.sin(s)*Math.cos(w)/Math.sin(I)),E=this.e*this.sin_p12/Math.sqrt(1-this.es),M=this.e*this.cos_p12*Math.cos(I)/Math.sqrt(1-this.es),R=E*M,W=M*M,k=S*S,F=k*S,H=F*S,D=H*S,q=_*S*(1-k*W*(1-W)/6+F/8*R*(1-2*W)+H/120*(W*(4-7*W)-3*E*E*(1-7*W))-D/48*R),t.x=this.x0+q*Math.sin(I),t.y=this.y0+q*Math.cos(I),t))}function T4(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,a,l,h,c,p,m,v,_,T,w,I,E,M,R,W,q,X,U,S;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*kt*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=Dt?a=this.lat0:(a=vs(i*this.sin_p12+t.y*r*this.cos_p12/e),l=Math.abs(this.lat0)-kt,Math.abs(l)<=Dt?this.lat0>=0?s=Ot(this.long0+Math.atan2(t.x,-t.y)):s=Ot(this.long0-Math.atan2(-t.x,t.y)):s=Ot(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=s,t.y=a,t)):(h=qu(this.es),c=Zu(this.es),p=Ku(this.es),m=Qu(this.es),Math.abs(this.sin_p12-1)<=Dt?(v=this.a*Dn(h,c,p,m,kt),e=Math.sqrt(t.x*t.x+t.y*t.y),_=v-e,a=df(_/this.a,h,c,p,m),s=Ot(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=a,t):Math.abs(this.sin_p12+1)<=Dt?(v=this.a*Dn(h,c,p,m,kt),e=Math.sqrt(t.x*t.x+t.y*t.y),_=e-v,a=df(_/this.a,h,c,p,m),s=Ot(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),I=Math.atan2(t.x,t.y),T=Ta(this.a,this.e,this.sin_p12),E=Math.cos(I),M=this.e*this.cos_p12*E,R=-M*M/(1-this.es),W=3*this.es*(1-R)*this.sin_p12*this.cos_p12*E/(1-this.es),q=e/T,X=q-R*(1+R)*Math.pow(q,3)/6-W*(1+3*R)*Math.pow(q,4)/24,U=1-R*X*X/2-q*X*X*X/6,w=Math.asin(this.sin_p12*Math.cos(X)+this.cos_p12*Math.sin(X)*E),s=Ot(this.long0+Math.asin(Math.sin(I)*Math.sin(X)/Math.cos(w))),S=Math.sin(w),a=Math.atan2((S-this.es*U*this.sin_p12)*Math.tan(w),S*(1-this.es)),t.x=s,t.y=a,t))}var S4=["Azimuthal_Equidistant","aeqd"];const M4={init:x4,forward:E4,inverse:T4,names:S4};function L4(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function C4(t){var e,n,r,i,s,a,l,h,c=t.x,p=t.y;return r=Ot(c-this.long0),e=Math.sin(p),n=Math.cos(p),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,s=1,(a>0||Math.abs(a)<=Dt)&&(l=this.a*s*n*Math.sin(r),h=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)),t.x=l,t.y=h,t}function k4(t){var e,n,r,i,s,a,l;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=vs(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=Dt?(l=this.lat0,t.x=a,t.y=l,t):(l=vs(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-kt,Math.abs(s)<=Dt?(this.lat0>=0?a=Ot(this.long0+Math.atan2(t.x,-t.y)):a=Ot(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=l,t):(a=Ot(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=l,t))}var b4=["ortho"];const I4={init:L4,forward:C4,inverse:k4,names:b4};var De={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},we={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function P4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=kt-ye/2?this.face=De.TOP:this.lat0<=-(kt-ye/2)?this.face=De.BOTTOM:Math.abs(this.long0)<=ye?this.face=De.FRONT:Math.abs(this.long0)<=kt+ye?this.face=this.long0>0?De.RIGHT:De.LEFT:this.face=De.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function A4(t){var e={x:0,y:0},n,r,i,s,a,l,h={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===De.TOP)s=kt-n,r>=ye&&r<=kt+ye?(h.value=we.AREA_0,i=r-kt):r>kt+ye||r<=-(kt+ye)?(h.value=we.AREA_1,i=r>0?r-je:r+je):r>-(kt+ye)&&r<=-ye?(h.value=we.AREA_2,i=r+kt):(h.value=we.AREA_3,i=r);else if(this.face===De.BOTTOM)s=kt+n,r>=ye&&r<=kt+ye?(h.value=we.AREA_0,i=-r+kt):r<ye&&r>=-ye?(h.value=we.AREA_1,i=-r):r<-ye&&r>=-(kt+ye)?(h.value=we.AREA_2,i=-r-kt):(h.value=we.AREA_3,i=r>0?-r+je:-r-je);else{var c,p,m,v,_,T,w;this.face===De.RIGHT?r=oa(r,+kt):this.face===De.BACK?r=oa(r,+je):this.face===De.LEFT&&(r=oa(r,-kt)),v=Math.sin(n),_=Math.cos(n),T=Math.sin(r),w=Math.cos(r),c=_*w,p=_*T,m=v,this.face===De.FRONT?(s=Math.acos(c),i=tc(s,m,p,h)):this.face===De.RIGHT?(s=Math.acos(p),i=tc(s,m,-c,h)):this.face===De.BACK?(s=Math.acos(-c),i=tc(s,m,-p,h)):this.face===De.LEFT?(s=Math.acos(-p),i=tc(s,m,c,h)):(s=i=0,h.value=we.AREA_0)}return l=Math.atan(12/je*(i+Math.acos(Math.sin(i)*Math.cos(ye))-kt)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(i))))),h.value===we.AREA_1?l+=kt:h.value===we.AREA_2?l+=je:h.value===we.AREA_3&&(l+=1.5*je),e.x=a*Math.cos(l),e.y=a*Math.sin(l),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function R4(t){var e={lam:0,phi:0},n,r,i,s,a,l,h,c,p,m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=we.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=we.AREA_1,n-=kt):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=we.AREA_2,n=n<0?n+je:n-je):(m.value=we.AREA_3,n+=kt),p=je/12*Math.tan(n),a=Math.sin(p)/(Math.cos(p)-1/Math.sqrt(2)),l=Math.atan(a),i=Math.cos(n),s=Math.tan(r),h=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(l)))),h<-1?h=-1:h>1&&(h=1),this.face===De.TOP)c=Math.acos(h),e.phi=kt-c,m.value===we.AREA_0?e.lam=l+kt:m.value===we.AREA_1?e.lam=l<0?l+je:l-je:m.value===we.AREA_2?e.lam=l-kt:e.lam=l;else if(this.face===De.BOTTOM)c=Math.acos(h),e.phi=c-kt,m.value===we.AREA_0?e.lam=-l+kt:m.value===we.AREA_1?e.lam=-l:m.value===we.AREA_2?e.lam=-l-kt:e.lam=l<0?-l-je:-l+je;else{var v,_,T;v=h,p=v*v,p>=1?T=0:T=Math.sqrt(1-p)*Math.sin(l),p+=T*T,p>=1?_=0:_=Math.sqrt(1-p),m.value===we.AREA_1?(p=_,_=-T,T=p):m.value===we.AREA_2?(_=-_,T=-T):m.value===we.AREA_3&&(p=_,_=T,T=-p),this.face===De.RIGHT?(p=v,v=-_,_=p):this.face===De.BACK?(v=-v,_=-_):this.face===De.LEFT&&(p=v,v=_,_=-p),e.phi=Math.acos(-T)-kt,e.lam=Math.atan2(_,v),this.face===De.RIGHT?e.lam=oa(e.lam,-kt):this.face===De.BACK?e.lam=oa(e.lam,-je):this.face===De.LEFT&&(e.lam=oa(e.lam,+kt))}if(this.es!==0){var w,I,E;w=e.phi<0?1:0,I=Math.tan(e.phi),E=this.b/Math.sqrt(I*I+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-E*E)/(this.one_minus_f*E)),w&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function tc(t,e,n,r){var i;return t<Dt?(r.value=we.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=ye?r.value=we.AREA_0:i>ye&&i<=kt+ye?(r.value=we.AREA_1,i-=kt):i>kt+ye||i<=-(kt+ye)?(r.value=we.AREA_2,i=i>=0?i-je:i+je):(r.value=we.AREA_3,i+=kt)),i}function oa(t,e){var n=t+e;return n<-je?n+=Lu:n>+je&&(n-=Lu),n}var D4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const N4={init:P4,forward:A4,inverse:R4,names:D4};var ym=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],bl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],n2=.8487,i2=1.3523,r2=Zi/5,O4=1/r2,Qo=18,pf=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},F4=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function B4(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<n)break}return i}function z4(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function V4(t){var e=Ot(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*r2);r<0?r=0:r>=Qo&&(r=Qo-1),n=Zi*(n-O4*r);var i={x:pf(ym[r],n)*e,y:pf(bl[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*n2+this.x0,i.y=i.y*this.a*i2+this.y0,i}function U4(t){var e={x:(t.x-this.x0)/(this.a*n2),y:Math.abs(t.y-this.y0)/(this.a*i2)};if(e.y>=1)e.x/=ym[Qo][0],e.y=t.y<0?-kt:kt;else{var n=Math.floor(e.y*Qo);for(n<0?n=0:n>=Qo&&(n=Qo-1);;)if(bl[n][0]>e.y)--n;else if(bl[n+1][0]<=e.y)++n;else break;var r=bl[n],i=5*(e.y-r[0])/(bl[n+1][0]-r[0]);i=B4(function(s){return(pf(r,s)-e.y)/F4(r,s)},i,Dt,100),e.x/=pf(ym[n],i),e.y=(5*n+i)*fn,t.y<0&&(e.y=-e.y)}return e.x=Ot(e.x+this.long0),e}var j4=["Robinson","robin"];const $4={init:z4,forward:V4,inverse:U4,names:j4};function H4(){this.name="geocent"}function G4(t){var e=GE(t,this.es,this.a);return e}function W4(t){var e=WE(t,this.es,this.a,this.b);return e}var q4=["Geocentric","geocentric","geocent","Geocent"];const Z4={init:H4,forward:G4,inverse:W4,names:q4};var Ln={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},vl={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function K4(){if(Object.keys(vl).forEach((function(n){if(typeof this[n]>"u")this[n]=vl[n].def;else{if(vl[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);vl[n].num&&(this[n]=parseFloat(this[n]))}vl[n].degrees&&(this[n]=this[n]*fn)}).bind(this)),Math.abs(Math.abs(this.lat0)-kt)<Dt?this.mode=this.lat0<0?Ln.S_POLE:Ln.N_POLE:Math.abs(this.lat0)<Dt?this.mode=Ln.EQUIT:(this.mode=Ln.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Q4(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,s;switch(this.mode){case Ln.OBLIQ:s=this.sinph0*e+this.cosph0*n*r;break;case Ln.EQUIT:s=n*r;break;case Ln.S_POLE:s=-e;break;case Ln.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*n*Math.sin(t.x),this.mode){case Ln.OBLIQ:s*=this.cosph0*e-this.sinph0*n*r;break;case Ln.EQUIT:s*=e;break;case Ln.N_POLE:s*=-(n*r);break;case Ln.S_POLE:s*=n*r;break}var a,l;return a=s*this.cg+i*this.sg,l=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*l,s=a*l,t.x=i*this.a,t.y=s*this.a,t}function Y4(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var s=$n(t.x,t.y);if(Math.abs(s)<Dt)e.x=0,e.y=t.y;else{var a,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-l*l),this.mode){case Ln.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*l*this.cosph0/s),t.y=(a-this.sinph0*Math.sin(e.y))*s,t.x*=l*this.cosph0;break;case Ln.EQUIT:e.y=Math.asin(t.y*l/s),t.y=a*s,t.x*=l;break;case Ln.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case Ln.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var X4=["Tilted_Perspective","tpers"];const J4={init:K4,forward:Q4,inverse:Y4,names:X4};function tD(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function eD(t){var e=t.x,n=t.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var l=this.radius_p/$n(this.radius_p*Math.cos(n),Math.sin(n));if(i=l*Math.cos(e)*Math.cos(n),s=l*Math.sin(e)*Math.cos(n),a=l*Math.sin(n),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/$n(a,r)),t.y=this.radius_g_1*Math.atan(a/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(a/$n(s,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/$n(a,r)),t.y=this.radius_g_1*Math.atan(a/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(a/$n(s,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function nD(t){var e=-1,n=0,r=0,i,s,a,l;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*$n(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*$n(1,n));var h=r/this.radius_p;if(i=n*n+h*h+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;l=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+l*e,n*=l,r*=l,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;l=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+l*e,n*=l,r*=l,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var iD=["Geostationary Satellite View","Geostationary_Satellite","geos"];const rD={init:tD,forward:eD,inverse:nD,names:iD};var Kl=1.340264,Ql=-.081106,Yl=893e-6,Xl=.003796,mf=Math.sqrt(3)/2;function sD(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function oD(t){var e=Ot(t.x-this.long0),n=t.y,r=Math.asin(mf*Math.sin(n)),i=r*r,s=i*i*i;return t.x=e*Math.cos(r)/(mf*(Kl+3*Ql*i+s*(7*Yl+9*Xl*i))),t.y=r*(Kl+Ql*i+s*(Yl+Xl*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function aD(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,s,a,l,h,c;for(c=0;c<n&&(i=r*r,s=i*i*i,a=r*(Kl+Ql*i+s*(Yl+Xl*i))-t.y,l=Kl+3*Ql*i+s*(7*Yl+9*Xl*i),r-=h=a/l,!(Math.abs(h)<e));++c);return i=r*r,s=i*i*i,t.x=mf*t.x*(Kl+3*Ql*i+s*(7*Yl+9*Xl*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/mf),t.x=Ot(t.x+this.long0),t}var lD=["eqearth","Equal Earth","Equal_Earth"];const uD={init:sD,forward:oD,inverse:aD,names:lD};var bu=1e-10;function hD(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<bu)throw new Error;this.es?(this.en=ag(this.es),this.m1=Da(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=fD,this.forward=cD):(Math.abs(this.phi1)+bu>=kt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=pD,this.forward=dD)}function cD(t){var e=Ot(t.x-(this.long0||0)),n=t.y,r,i,s;return r=this.am1+this.m1-Da(n,i=Math.sin(n),s=Math.cos(n),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),t.x=r*Math.sin(i),t.y=this.am1-r*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function fD(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,i;if(n=$n(t.x,t.y=this.am1-t.y),i=lg(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<kt)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-kt)<=bu)r=0;else throw new Error;return t.x=Ot(r+(this.long0||0)),t.y=Ms(i),t}function dD(t){var e=Ot(t.x-(this.long0||0)),n=t.y,r,i;return i=this.cphi1+this.phi1-n,Math.abs(i)>bu?(t.x=i*Math.sin(r=e*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function pD(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=$n(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>kt)throw new Error;return Math.abs(Math.abs(n)-kt)<=bu?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=Ot(e+(this.long0||0)),t.y=Ms(n),t}var mD=["bonne","Bonne (Werner lat_1=90)"];const _D={init:hD,names:mD};function gD(t){t.Proj.projections.add(Ec),t.Proj.projections.add(Tc),t.Proj.projections.add(cR),t.Proj.projections.add(xR),t.Proj.projections.add(CR),t.Proj.projections.add(AR),t.Proj.projections.add(BR),t.Proj.projections.add($R),t.Proj.projections.add(ZR),t.Proj.projections.add(JR),t.Proj.projections.add(_3),t.Proj.projections.add(E3),t.Proj.projections.add(C3),t.Proj.projections.add(R3),t.Proj.projections.add(B3),t.Proj.projections.add($3),t.Proj.projections.add(Z3),t.Proj.projections.add(J3),t.Proj.projections.add(s4),t.Proj.projections.add(h4),t.Proj.projections.add(m4),t.Proj.projections.add(w4),t.Proj.projections.add(M4),t.Proj.projections.add(I4),t.Proj.projections.add(N4),t.Proj.projections.add($4),t.Proj.projections.add(Z4),t.Proj.projections.add(J4),t.Proj.projections.add(rD),t.Proj.projections.add(uD),t.Proj.projections.add(_D)}ii.defaultDatum="WGS84";ii.Proj=tr;ii.WGS84=new ii.Proj("WGS84");ii.Point=Ea;ii.toPoint=qE;ii.defs=An;ii.nadgrid=dA;ii.transform=ff;ii.mgrs=bA;ii.version="__VERSION__";gD(ii);const vD=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"})),yD=H2(vD);function ec(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var s2={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function a(c,p){if(!i[c]){if(!r[c]){var m=typeof ec=="function"&&ec;if(!p&&m)return m(c,!0);if(l)return l(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var _=i[c]={exports:{}};r[c][0].call(_.exports,function(T){var w=r[c][1][T];return a(w||T)},_,_.exports,n,r,i,s)}return i[c].exports}for(var l=typeof ec=="function"&&ec,h=0;h<s.length;h++)a(s[h]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(h){for(var c,p,m,v,_,T,w,I=[],E=0,M=h.length,R=M,W=s.getTypeOf(h)!=="string";E<h.length;)R=M-E,m=W?(c=h[E++],p=E<M?h[E++]:0,E<M?h[E++]:0):(c=h.charCodeAt(E++),p=E<M?h.charCodeAt(E++):0,E<M?h.charCodeAt(E++):0),v=c>>2,_=(3&c)<<4|p>>4,T=1<R?(15&p)<<2|m>>6:64,w=2<R?63&m:64,I.push(l.charAt(v)+l.charAt(_)+l.charAt(T)+l.charAt(w));return I.join("")},i.decode=function(h){var c,p,m,v,_,T,w=0,I=0,E="data:";if(h.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var M,R=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===l.charAt(64)&&R--,h.charAt(h.length-2)===l.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(M=a.uint8array?new Uint8Array(0|R):new Array(0|R);w<h.length;)c=l.indexOf(h.charAt(w++))<<2|(v=l.indexOf(h.charAt(w++)))>>4,p=(15&v)<<4|(_=l.indexOf(h.charAt(w++)))>>2,m=(3&_)<<6|(T=l.indexOf(h.charAt(w++))),M[I++]=c,_!==64&&(M[I++]=p),T!==64&&(M[I++]=m);return M}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),h=n("./stream/DataLengthProbe");function c(p,m,v,_,T){this.compressedSize=p,this.uncompressedSize=m,this.crc32=v,this.compression=_,this.compressedContent=T}c.prototype={getContentWorker:function(){var p=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(p,m,v){return p.pipe(new l).pipe(new h("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new h("compressedSize")).withStreamInfo("compression",m)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),a=function(){for(var l,h=[],c=0;c<256;c++){l=c;for(var p=0;p<8;p++)l=1&l?3988292384^l>>>1:l>>>1;h[c]=l}return h}();r.exports=function(l,h){return l!==void 0&&l.length?s.getTypeOf(l)!=="string"?function(c,p,m,v){var _=a,T=v+m;c^=-1;for(var w=v;w<T;w++)c=c>>>8^_[255&(c^p[w])];return-1^c}(0|h,l,l.length,0):function(c,p,m,v){var _=a,T=v+m;c^=-1;for(var w=v;w<T;w++)c=c>>>8^_[255&(c^p.charCodeAt(w))];return-1^c}(0|h,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),l=n("./utils"),h=n("./stream/GenericWorker"),c=s?"uint8array":"array";function p(m,v){h.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}i.magic="\b\0",l.inherits(p,h),p.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(c,m.data),!1)},p.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},i.compressWorker=function(m){return new p("Deflate",m)},i.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(_,T){var w,I="";for(w=0;w<T;w++)I+=String.fromCharCode(255&_),_>>>=8;return I}function a(_,T,w,I,E,M){var R,W,q=_.file,X=_.compression,U=M!==c.utf8encode,S=l.transformTo("string",M(q.name)),k=l.transformTo("string",c.utf8encode(q.name)),F=q.comment,H=l.transformTo("string",M(F)),D=l.transformTo("string",c.utf8encode(F)),j=k.length!==q.name.length,B=D.length!==F.length,wt="",Rt="",mt="",lt=q.dir,ot=q.date,ft={crc32:0,compressedSize:0,uncompressedSize:0};T&&!w||(ft.crc32=_.crc32,ft.compressedSize=_.compressedSize,ft.uncompressedSize=_.uncompressedSize);var J=0;T&&(J|=8),U||!j&&!B||(J|=2048);var tt=0,_t=0;lt&&(tt|=16),E==="UNIX"?(_t=798,tt|=function(vt,Pt){var $t=vt;return vt||($t=Pt?16893:33204),(65535&$t)<<16}(q.unixPermissions,lt)):(_t=20,tt|=function(vt){return 63&(vt||0)}(q.dosPermissions)),R=ot.getUTCHours(),R<<=6,R|=ot.getUTCMinutes(),R<<=5,R|=ot.getUTCSeconds()/2,W=ot.getUTCFullYear()-1980,W<<=4,W|=ot.getUTCMonth()+1,W<<=5,W|=ot.getUTCDate(),j&&(Rt=s(1,1)+s(p(S),4)+k,wt+="up"+s(Rt.length,2)+Rt),B&&(mt=s(1,1)+s(p(H),4)+D,wt+="uc"+s(mt.length,2)+mt);var Et="";return Et+=`
\0`,Et+=s(J,2),Et+=X.magic,Et+=s(R,2),Et+=s(W,2),Et+=s(ft.crc32,4),Et+=s(ft.compressedSize,4),Et+=s(ft.uncompressedSize,4),Et+=s(S.length,2),Et+=s(wt.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Et+S+wt,dirRecord:m.CENTRAL_FILE_HEADER+s(_t,2)+Et+s(H.length,2)+"\0\0\0\0"+s(tt,4)+s(I,4)+S+wt+H}}var l=n("../utils"),h=n("../stream/GenericWorker"),c=n("../utf8"),p=n("../crc32"),m=n("../signature");function v(_,T,w,I){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=T,this.zipPlatform=w,this.encodeFileName=I,this.streamFiles=_,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(v,h),v.prototype.push=function(_){var T=_.meta.percent||0,w=this.entriesCount,I=this._sources.length;this.accumulate?this.contentBuffer.push(_):(this.bytesWritten+=_.data.length,h.prototype.push.call(this,{data:_.data,meta:{currentFile:this.currentFile,percent:w?(T+100*(w-I-1))/w:100}}))},v.prototype.openedSource=function(_){this.currentSourceOffset=this.bytesWritten,this.currentFile=_.file.name;var T=this.streamFiles&&!_.file.dir;if(T){var w=a(_,T,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(_){this.accumulate=!1;var T=this.streamFiles&&!_.file.dir,w=a(_,T,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),T)this.push({data:function(I){return m.DATA_DESCRIPTOR+s(I.crc32,4)+s(I.compressedSize,4)+s(I.uncompressedSize,4)}(_),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var _=this.bytesWritten,T=0;T<this.dirRecords.length;T++)this.push({data:this.dirRecords[T],meta:{percent:100}});var w=this.bytesWritten-_,I=function(E,M,R,W,q){var X=l.transformTo("string",q(W));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(E,2)+s(E,2)+s(M,4)+s(R,4)+s(X.length,2)+X}(this.dirRecords.length,w,_,this.zipComment,this.encodeFileName);this.push({data:I,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(_){this._sources.push(_);var T=this;return _.on("data",function(w){T.processChunk(w)}),_.on("end",function(){T.closedSource(T.previous.streamInfo),T._sources.length?T.prepareNextSource():T.end()}),_.on("error",function(w){T.error(w)}),this},v.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(_){var T=this._sources;if(!h.prototype.error.call(this,_))return!1;for(var w=0;w<T.length;w++)try{T[w].error(_)}catch{}return!0},v.prototype.lock=function(){h.prototype.lock.call(this);for(var _=this._sources,T=0;T<_.length;T++)_[T].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(l,h,c){var p=new a(h.streamFiles,c,h.platform,h.encodeFileName),m=0;try{l.forEach(function(v,_){m++;var T=function(M,R){var W=M||R,q=s[W];if(!q)throw new Error(W+" is not a valid compression method !");return q}(_.options.compression,h.compression),w=_.options.compressionOptions||h.compressionOptions||{},I=_.dir,E=_.date;_._compressWorker(T,w).withStreamInfo("file",{name:v,dir:I,date:E,comment:_.comment||"",unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(v){p.error(v)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var l in this)typeof this[l]!="function"&&(a[l]=this[l]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,l){return new s().loadAsync(a,l)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),l=n("./utf8"),h=n("./zipEntries"),c=n("./stream/Crc32Probe"),p=n("./nodejsUtils");function m(v){return new a.Promise(function(_,T){var w=v.decompressed.getContentWorker().pipe(new c);w.on("error",function(I){T(I)}).on("end",function(){w.streamInfo.crc32!==v.decompressed.crc32?T(new Error("Corrupted zip : CRC32 mismatch")):_()}).resume()})}r.exports=function(v,_){var T=this;return _=s.extend(_||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),p.isNode&&p.isStream(v)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,_.optimizedBinaryString,_.base64).then(function(w){var I=new h(_);return I.load(w),I}).then(function(w){var I=[a.Promise.resolve(w)],E=w.files;if(_.checkCRC32)for(var M=0;M<E.length;M++)I.push(m(E[M]));return a.Promise.all(I)}).then(function(w){for(var I=w.shift(),E=I.files,M=0;M<E.length;M++){var R=E[M],W=R.fileNameStr,q=s.resolve(R.fileNameStr);T.file(q,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:_.createFolders}),R.dir||(T.file(q).unsafeOriginalName=W)}return I.zipComment.length&&(T.comment=I.zipComment),T})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function l(h,c){a.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(l,a),l.prototype._bindStream=function(h){var c=this;(this._stream=h).pause(),h.on("data",function(p){c.push({data:p,meta:{percent:0}})}).on("error",function(p){c.isPaused?this.generatedError=p:c.error(p)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},l.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function a(l,h,c){s.call(this,h),this._helper=l;var p=this;l.on("data",function(m,v){p.push(m)||p._helper.pause(),c&&c(v)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(q,X,U){var S,k=l.getTypeOf(X),F=l.extend(U||{},p);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(q=E(q)),F.createFolders&&(S=I(q))&&M.call(this,S,!0);var H=k==="string"&&F.binary===!1&&F.base64===!1;U&&U.binary!==void 0||(F.binary=!H),(X instanceof m&&X.uncompressedSize===0||F.dir||!X||X.length===0)&&(F.base64=!1,F.binary=!0,X="",F.compression="STORE",k="string");var D=null;D=X instanceof m||X instanceof h?X:T.isNode&&T.isStream(X)?new w(q,X):l.prepareContent(q,X,F.binary,F.optimizedBinaryString,F.base64);var j=new v(q,D,F);this.files[q]=j}var a=n("./utf8"),l=n("./utils"),h=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),p=n("./defaults"),m=n("./compressedObject"),v=n("./zipObject"),_=n("./generate"),T=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),I=function(q){q.slice(-1)==="/"&&(q=q.substring(0,q.length-1));var X=q.lastIndexOf("/");return 0<X?q.substring(0,X):""},E=function(q){return q.slice(-1)!=="/"&&(q+="/"),q},M=function(q,X){return X=X!==void 0?X:p.createFolders,q=E(q),this.files[q]||s.call(this,q,null,{dir:!0,createFolders:X}),this.files[q]};function R(q){return Object.prototype.toString.call(q)==="[object RegExp]"}var W={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(q){var X,U,S;for(X in this.files)S=this.files[X],(U=X.slice(this.root.length,X.length))&&X.slice(0,this.root.length)===this.root&&q(U,S)},filter:function(q){var X=[];return this.forEach(function(U,S){q(U,S)&&X.push(S)}),X},file:function(q,X,U){if(arguments.length!==1)return q=this.root+q,s.call(this,q,X,U),this;if(R(q)){var S=q;return this.filter(function(F,H){return!H.dir&&S.test(F)})}var k=this.files[this.root+q];return k&&!k.dir?k:null},folder:function(q){if(!q)return this;if(R(q))return this.filter(function(k,F){return F.dir&&q.test(k)});var X=this.root+q,U=M.call(this,X),S=this.clone();return S.root=U.name,S},remove:function(q){q=this.root+q;var X=this.files[q];if(X||(q.slice(-1)!=="/"&&(q+="/"),X=this.files[q]),X&&!X.dir)delete this.files[q];else for(var U=this.filter(function(k,F){return F.name.slice(0,q.length)===q}),S=0;S<U.length;S++)delete this.files[U[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(q){var X,U={};try{if((U=l.extend(q||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");l.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var S=U.comment||this.comment||"";X=_.generateWorker(this,U,S)}catch(k){(X=new h("error")).error(k)}return new c(X,U.type||"string",U.mimeType)},generateAsync:function(q,X){return this.generateInternalStream(q).accumulate(X)},generateNodeStream:function(q,X){return(q=q||{}).type||(q.type="nodebuffer"),this.generateInternalStream(q).toNodejsStream(X)}};r.exports=W},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function a(l){s.call(this,l);for(var h=0;h<this.data.length;h++)l[h]=255&l[h]}n("../utils").inherits(a,s),a.prototype.byteAt=function(l){return this.data[this.zero+l]},a.prototype.lastIndexOfSignature=function(l){for(var h=l.charCodeAt(0),c=l.charCodeAt(1),p=l.charCodeAt(2),m=l.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===h&&this.data[v+1]===c&&this.data[v+2]===p&&this.data[v+3]===m)return v-this.zero;return-1},a.prototype.readAndCheckSignature=function(l){var h=l.charCodeAt(0),c=l.charCodeAt(1),p=l.charCodeAt(2),m=l.charCodeAt(3),v=this.readData(4);return h===v[0]&&c===v[1]&&p===v[2]&&m===v[3]},a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var h,c=0;for(this.checkOffset(l),h=this.index+l-1;h>=this.index;h--)c=(c<<8)+this.byteAt(h);return this.index+=l,c},readString:function(l){return s.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function a(l){s.call(this,l)}n("../utils").inherits(a,s),a.prototype.readData=function(l){this.checkOffset(l);var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function a(l){s.call(this,l)}n("../utils").inherits(a,s),a.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},a.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},a.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},a.prototype.readData=function(l){this.checkOffset(l);var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function a(l){s.call(this,l)}n("../utils").inherits(a,s),a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),l=n("./ArrayReader"),h=n("./StringReader"),c=n("./NodeBufferReader"),p=n("./Uint8ArrayReader");r.exports=function(m){var v=s.getTypeOf(m);return s.checkSupport(v),v!=="string"||a.uint8array?v==="nodebuffer"?new c(m):a.uint8array?new p(s.transformTo("uint8array",m)):new l(s.transformTo("array",m)):new h(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function l(h){s.call(this,"ConvertWorker to "+h),this.destType=h}a.inherits(l,s),l.prototype.processChunk=function(h){this.push({data:a.transformTo(this.destType,h.data),meta:h.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,s),l.prototype.processChunk=function(h){this.streamInfo.crc32=a(h.data,this.streamInfo.crc32||0),this.push(h)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function l(h){a.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}s.inherits(l,a),l.prototype.processChunk=function(h){if(h){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+h.data.length}a.prototype.processChunk.call(this,h)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function l(h){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(p){c.dataIsReady=!0,c.data=p,c.max=p&&p.length||0,c.type=s.getTypeOf(p),c.isPaused||c._tickAndRepeat()},function(p){c.error(p)})}s.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,c);break;case"uint8array":h=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":h=this.data.slice(this.index,c)}return this.index=c,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,l){return this._listeners[a].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,l){if(this._listeners[a])for(var h=0;h<this._listeners[a].length;h++)this._listeners[a][h].call(this,l)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var l=this;return a.on("data",function(h){l.processChunk(h)}),a.on("end",function(){l.end()}),a.on("error",function(h){l.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,l){return this.extraStreamInfo[a]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),l=n("./GenericWorker"),h=n("../base64"),c=n("../support"),p=n("../external"),m=null;if(c.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(T,w){return new p.Promise(function(I,E){var M=[],R=T._internalType,W=T._outputType,q=T._mimeType;T.on("data",function(X,U){M.push(X),w&&w(U)}).on("error",function(X){M=[],E(X)}).on("end",function(){try{var X=function(U,S,k){switch(U){case"blob":return s.newBlob(s.transformTo("arraybuffer",S),k);case"base64":return h.encode(S);default:return s.transformTo(U,S)}}(W,function(U,S){var k,F=0,H=null,D=0;for(k=0;k<S.length;k++)D+=S[k].length;switch(U){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(H=new Uint8Array(D),k=0;k<S.length;k++)H.set(S[k],F),F+=S[k].length;return H;case"nodebuffer":return Buffer.concat(S);default:throw new Error("concat : unsupported type '"+U+"'")}}(R,M),q);I(X)}catch(U){E(U)}M=[]}).resume()})}function _(T,w,I){var E=w;switch(w){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=w,this._mimeType=I,s.checkSupport(E),this._worker=T.pipe(new a(E)),T.lock()}catch(M){this._worker=new l("error"),this._worker.error(M)}}_.prototype={accumulate:function(T){return v(this,T)},on:function(T,w){var I=this;return T==="data"?this._worker.on(T,function(E){w.call(I,E.data,E.meta)}):this._worker.on(T,function(){s.delay(w,arguments,I)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(T){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},T)}},r.exports=_},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),l=n("./nodejsUtils"),h=n("./stream/GenericWorker"),c=new Array(256),p=0;p<256;p++)c[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;c[254]=c[254]=1;function m(){h.call(this,"utf-8 decode"),this.leftOver=null}function v(){h.call(this,"utf-8 encode")}i.utf8encode=function(_){return a.nodebuffer?l.newBufferFrom(_,"utf-8"):function(T){var w,I,E,M,R,W=T.length,q=0;for(M=0;M<W;M++)(64512&(I=T.charCodeAt(M)))==55296&&M+1<W&&(64512&(E=T.charCodeAt(M+1)))==56320&&(I=65536+(I-55296<<10)+(E-56320),M++),q+=I<128?1:I<2048?2:I<65536?3:4;for(w=a.uint8array?new Uint8Array(q):new Array(q),M=R=0;R<q;M++)(64512&(I=T.charCodeAt(M)))==55296&&M+1<W&&(64512&(E=T.charCodeAt(M+1)))==56320&&(I=65536+(I-55296<<10)+(E-56320),M++),I<128?w[R++]=I:(I<2048?w[R++]=192|I>>>6:(I<65536?w[R++]=224|I>>>12:(w[R++]=240|I>>>18,w[R++]=128|I>>>12&63),w[R++]=128|I>>>6&63),w[R++]=128|63&I);return w}(_)},i.utf8decode=function(_){return a.nodebuffer?s.transformTo("nodebuffer",_).toString("utf-8"):function(T){var w,I,E,M,R=T.length,W=new Array(2*R);for(w=I=0;w<R;)if((E=T[w++])<128)W[I++]=E;else if(4<(M=c[E]))W[I++]=65533,w+=M-1;else{for(E&=M===2?31:M===3?15:7;1<M&&w<R;)E=E<<6|63&T[w++],M--;1<M?W[I++]=65533:E<65536?W[I++]=E:(E-=65536,W[I++]=55296|E>>10&1023,W[I++]=56320|1023&E)}return W.length!==I&&(W.subarray?W=W.subarray(0,I):W.length=I),s.applyFromCharCode(W)}(_=s.transformTo(a.uint8array?"uint8array":"array",_))},s.inherits(m,h),m.prototype.processChunk=function(_){var T=s.transformTo(a.uint8array?"uint8array":"array",_.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var w=T;(T=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),T.set(w,this.leftOver.length)}else T=this.leftOver.concat(T);this.leftOver=null}var I=function(M,R){var W;for((R=R||M.length)>M.length&&(R=M.length),W=R-1;0<=W&&(192&M[W])==128;)W--;return W<0||W===0?R:W+c[M[W]]>R?W:R}(T),E=T;I!==T.length&&(a.uint8array?(E=T.subarray(0,I),this.leftOver=T.subarray(I,T.length)):(E=T.slice(0,I),this.leftOver=T.slice(I,T.length))),this.push({data:i.utf8decode(E),meta:_.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=m,s.inherits(v,h),v.prototype.processChunk=function(_){this.push({data:i.utf8encode(_.data),meta:_.meta})},i.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),l=n("./nodejsUtils"),h=n("./external");function c(w){return w}function p(w,I){for(var E=0;E<w.length;++E)I[E]=255&w.charCodeAt(E);return I}n("setimmediate"),i.newBlob=function(w,I){i.checkSupport("blob");try{return new Blob([w],{type:I})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(w),E.getBlob(I)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(w,I,E){var M=[],R=0,W=w.length;if(W<=E)return String.fromCharCode.apply(null,w);for(;R<W;)I==="array"||I==="nodebuffer"?M.push(String.fromCharCode.apply(null,w.slice(R,Math.min(R+E,W)))):M.push(String.fromCharCode.apply(null,w.subarray(R,Math.min(R+E,W)))),R+=E;return M.join("")},stringifyByChar:function(w){for(var I="",E=0;E<w.length;E++)I+=String.fromCharCode(w[E]);return I},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function v(w){var I=65536,E=i.getTypeOf(w),M=!0;if(E==="uint8array"?M=m.applyCanBeUsed.uint8array:E==="nodebuffer"&&(M=m.applyCanBeUsed.nodebuffer),M)for(;1<I;)try{return m.stringifyByChunk(w,E,I)}catch{I=Math.floor(I/2)}return m.stringifyByChar(w)}function _(w,I){for(var E=0;E<w.length;E++)I[E]=w[E];return I}i.applyFromCharCode=v;var T={};T.string={string:c,array:function(w){return p(w,new Array(w.length))},arraybuffer:function(w){return T.string.uint8array(w).buffer},uint8array:function(w){return p(w,new Uint8Array(w.length))},nodebuffer:function(w){return p(w,l.allocBuffer(w.length))}},T.array={string:v,array:c,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return l.newBufferFrom(w)}},T.arraybuffer={string:function(w){return v(new Uint8Array(w))},array:function(w){return _(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:c,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return l.newBufferFrom(new Uint8Array(w))}},T.uint8array={string:v,array:function(w){return _(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:c,nodebuffer:function(w){return l.newBufferFrom(w)}},T.nodebuffer={string:v,array:function(w){return _(w,new Array(w.length))},arraybuffer:function(w){return T.nodebuffer.uint8array(w).buffer},uint8array:function(w){return _(w,new Uint8Array(w.length))},nodebuffer:c},i.transformTo=function(w,I){if(I=I||"",!w)return I;i.checkSupport(w);var E=i.getTypeOf(I);return T[E][w](I)},i.resolve=function(w){for(var I=w.split("/"),E=[],M=0;M<I.length;M++){var R=I[M];R==="."||R===""&&M!==0&&M!==I.length-1||(R===".."?E.pop():E.push(R))}return E.join("/")},i.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":s.nodebuffer&&l.isBuffer(w)?"nodebuffer":s.uint8array&&w instanceof Uint8Array?"uint8array":s.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(w){if(!s[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(w){var I,E,M="";for(E=0;E<(w||"").length;E++)M+="\\x"+((I=w.charCodeAt(E))<16?"0":"")+I.toString(16).toUpperCase();return M},i.delay=function(w,I,E){setImmediate(function(){w.apply(E||null,I||[])})},i.inherits=function(w,I){function E(){}E.prototype=I.prototype,w.prototype=new E},i.extend=function(){var w,I,E={};for(w=0;w<arguments.length;w++)for(I in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],I)&&E[I]===void 0&&(E[I]=arguments[w][I]);return E},i.prepareContent=function(w,I,E,M,R){return h.Promise.resolve(I).then(function(W){return s.blob&&(W instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(W))!==-1)&&typeof FileReader<"u"?new h.Promise(function(q,X){var U=new FileReader;U.onload=function(S){q(S.target.result)},U.onerror=function(S){X(S.target.error)},U.readAsArrayBuffer(W)}):W}).then(function(W){var q=i.getTypeOf(W);return q?(q==="arraybuffer"?W=i.transformTo("uint8array",W):q==="string"&&(R?W=a.decode(W):E&&M!==!0&&(W=function(X){return p(X,s.uint8array?new Uint8Array(X.length):new Array(X.length))}(W))),W):h.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),l=n("./signature"),h=n("./zipEntry"),c=n("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(v)+", expected "+a.pretty(m)+")")}},isSignature:function(m,v){var _=this.reader.index;this.reader.setIndex(m);var T=this.reader.readString(4)===v;return this.reader.setIndex(_),T},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),v=c.uint8array?"uint8array":"array",_=a.transformTo(v,m);this.zipComment=this.loadOptions.decodeFileName(_)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,_,T=this.zip64EndOfCentralSize-44;0<T;)m=this.reader.readInt(2),v=this.reader.readInt(4),_=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:_}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)v=this.files[m],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(m=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var _=this.centralDirOffset+this.centralDirSize;this.zip64&&(_+=20,_+=12+this.zip64EndOfCentralSize);var T=v-_;if(0<T)this.isSignature(v,l.CENTRAL_FILE_HEADER)||(this.reader.zero=T);else if(T<0)throw new Error("Corrupted zip: missing "+Math.abs(T)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),l=n("./compressedObject"),h=n("./crc32"),c=n("./utf8"),p=n("./compressions"),m=n("./support");function v(_,T){this.options=_,this.loadOptions=T}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(_){var T,w;if(_.skip(22),this.fileNameLength=_.readInt(2),w=_.readInt(2),this.fileName=_.readData(this.fileNameLength),_.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((T=function(I){for(var E in p)if(Object.prototype.hasOwnProperty.call(p,E)&&p[E].magic===I)return p[E];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,T,_.readData(this.compressedSize))},readCentralPart:function(_){this.versionMadeBy=_.readInt(2),_.skip(2),this.bitFlag=_.readInt(2),this.compressionMethod=_.readString(2),this.date=_.readDate(),this.crc32=_.readInt(4),this.compressedSize=_.readInt(4),this.uncompressedSize=_.readInt(4);var T=_.readInt(2);if(this.extraFieldsLength=_.readInt(2),this.fileCommentLength=_.readInt(2),this.diskNumberStart=_.readInt(2),this.internalFileAttributes=_.readInt(2),this.externalFileAttributes=_.readInt(4),this.localHeaderOffset=_.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");_.skip(T),this.readExtraFields(_),this.parseZIP64ExtraField(_),this.fileComment=_.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var _=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),_==0&&(this.dosPermissions=63&this.externalFileAttributes),_==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var _=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=_.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=_.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=_.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=_.readInt(4))}},readExtraFields:function(_){var T,w,I,E=_.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});_.index+4<E;)T=_.readInt(2),w=_.readInt(2),I=_.readData(w),this.extraFields[T]={id:T,length:w,value:I};_.setIndex(E)},handleUTF8:function(){var _=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var T=this.findExtraFieldUnicodePath();if(T!==null)this.fileNameStr=T;else{var w=a.transformTo(_,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var I=this.findExtraFieldUnicodeComment();if(I!==null)this.fileCommentStr=I;else{var E=a.transformTo(_,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var _=this.extraFields[28789];if(_){var T=s(_.value);return T.readInt(1)!==1||h(this.fileName)!==T.readInt(4)?null:c.utf8decode(T.readData(_.length-5))}return null},findExtraFieldUnicodeComment:function(){var _=this.extraFields[25461];if(_){var T=s(_.value);return T.readInt(1)!==1||h(this.fileComment)!==T.readInt(4)?null:c.utf8decode(T.readData(_.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(T,w,I){this.name=T,this.dir=I.dir,this.date=I.date,this.comment=I.comment,this.unixPermissions=I.unixPermissions,this.dosPermissions=I.dosPermissions,this._data=w,this._dataBinary=I.binary,this.options={compression:I.compression,compressionOptions:I.compressionOptions}}var a=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),h=n("./utf8"),c=n("./compressedObject"),p=n("./stream/GenericWorker");s.prototype={internalStream:function(T){var w=null,I="string";try{if(!T)throw new Error("No output type specified.");var E=(I=T.toLowerCase())==="string"||I==="text";I!=="binarystring"&&I!=="text"||(I="string"),w=this._decompressWorker();var M=!this._dataBinary;M&&!E&&(w=w.pipe(new h.Utf8EncodeWorker)),!M&&E&&(w=w.pipe(new h.Utf8DecodeWorker))}catch(R){(w=new p("error")).error(R)}return new a(w,I,"")},async:function(T,w){return this.internalStream(T).accumulate(w)},nodeStream:function(T,w){return this.internalStream(T||"nodebuffer").toNodejsStream(w)},_compressWorker:function(T,w){if(this._data instanceof c&&this._data.compression.magic===T.magic)return this._data.getCompressedWorker();var I=this._decompressWorker();return this._dataBinary||(I=I.pipe(new h.Utf8EncodeWorker)),c.createWorkerFrom(I,T,w)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof p?this._data:new l(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},_=0;_<m.length;_++)s.prototype[m[_]]=v;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a,l,h=s.MutationObserver||s.WebKitMutationObserver;if(h){var c=0,p=new h(T),m=s.document.createTextNode("");p.observe(m,{characterData:!0}),a=function(){m.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var w=s.document.createElement("script");w.onreadystatechange=function(){T(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:function(){setTimeout(T,0)};else{var v=new s.MessageChannel;v.port1.onmessage=T,a=function(){v.port2.postMessage(0)}}var _=[];function T(){var w,I;l=!0;for(var E=_.length;E;){for(I=_,_=[],w=-1;++w<E;)I[w]();E=_.length}l=!1}r.exports=function(w){_.push(w)!==1||l||a()}}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var l={},h=["REJECTED"],c=["FULFILLED"],p=["PENDING"];function m(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,E!==a&&w(this,E)}function v(E,M,R){this.promise=E,typeof M=="function"&&(this.onFulfilled=M,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function _(E,M,R){s(function(){var W;try{W=M(R)}catch(q){return l.reject(E,q)}W===E?l.reject(E,new TypeError("Cannot resolve promise with itself")):l.resolve(E,W)})}function T(E){var M=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof M=="function")return function(){M.apply(E,arguments)}}function w(E,M){var R=!1;function W(U){R||(R=!0,l.reject(E,U))}function q(U){R||(R=!0,l.resolve(E,U))}var X=I(function(){M(q,W)});X.status==="error"&&W(X.value)}function I(E,M){var R={};try{R.value=E(M),R.status="success"}catch(W){R.status="error",R.value=W}return R}(r.exports=m).prototype.finally=function(E){if(typeof E!="function")return this;var M=this.constructor;return this.then(function(R){return M.resolve(E()).then(function(){return R})},function(R){return M.resolve(E()).then(function(){throw R})})},m.prototype.catch=function(E){return this.then(null,E)},m.prototype.then=function(E,M){if(typeof E!="function"&&this.state===c||typeof M!="function"&&this.state===h)return this;var R=new this.constructor(a);return this.state!==p?_(R,this.state===c?E:M,this.outcome):this.queue.push(new v(R,E,M)),R},v.prototype.callFulfilled=function(E){l.resolve(this.promise,E)},v.prototype.otherCallFulfilled=function(E){_(this.promise,this.onFulfilled,E)},v.prototype.callRejected=function(E){l.reject(this.promise,E)},v.prototype.otherCallRejected=function(E){_(this.promise,this.onRejected,E)},l.resolve=function(E,M){var R=I(T,M);if(R.status==="error")return l.reject(E,R.value);var W=R.value;if(W)w(E,W);else{E.state=c,E.outcome=M;for(var q=-1,X=E.queue.length;++q<X;)E.queue[q].callFulfilled(M)}return E},l.reject=function(E,M){E.state=h,E.outcome=M;for(var R=-1,W=E.queue.length;++R<W;)E.queue[R].callRejected(M);return E},m.resolve=function(E){return E instanceof this?E:l.resolve(new this(a),E)},m.reject=function(E){var M=new this(a);return l.reject(M,E)},m.all=function(E){var M=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=E.length,W=!1;if(!R)return this.resolve([]);for(var q=new Array(R),X=0,U=-1,S=new this(a);++U<R;)k(E[U],U);return S;function k(F,H){M.resolve(F).then(function(D){q[H]=D,++X!==R||W||(W=!0,l.resolve(S,q))},function(D){W||(W=!0,l.reject(S,D))})}},m.race=function(E){var M=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=E.length,W=!1;if(!R)return this.resolve([]);for(var q=-1,X=new this(a);++q<R;)U=E[q],M.resolve(U).then(function(S){W||(W=!0,l.resolve(X,S))},function(S){W||(W=!0,l.reject(X,S))});var U;return X}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),l=n("./utils/strings"),h=n("./zlib/messages"),c=n("./zlib/zstream"),p=Object.prototype.toString,m=0,v=-1,_=0,T=8;function w(E){if(!(this instanceof w))return new w(E);this.options=a.assign({level:v,method:T,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},E||{});var M=this.options;M.raw&&0<M.windowBits?M.windowBits=-M.windowBits:M.gzip&&0<M.windowBits&&M.windowBits<16&&(M.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var R=s.deflateInit2(this.strm,M.level,M.method,M.windowBits,M.memLevel,M.strategy);if(R!==m)throw new Error(h[R]);if(M.header&&s.deflateSetHeader(this.strm,M.header),M.dictionary){var W;if(W=typeof M.dictionary=="string"?l.string2buf(M.dictionary):p.call(M.dictionary)==="[object ArrayBuffer]"?new Uint8Array(M.dictionary):M.dictionary,(R=s.deflateSetDictionary(this.strm,W))!==m)throw new Error(h[R]);this._dict_set=!0}}function I(E,M){var R=new w(M);if(R.push(E,!0),R.err)throw R.msg||h[R.err];return R.result}w.prototype.push=function(E,M){var R,W,q=this.strm,X=this.options.chunkSize;if(this.ended)return!1;W=M===~~M?M:M===!0?4:0,typeof E=="string"?q.input=l.string2buf(E):p.call(E)==="[object ArrayBuffer]"?q.input=new Uint8Array(E):q.input=E,q.next_in=0,q.avail_in=q.input.length;do{if(q.avail_out===0&&(q.output=new a.Buf8(X),q.next_out=0,q.avail_out=X),(R=s.deflate(q,W))!==1&&R!==m)return this.onEnd(R),!(this.ended=!0);q.avail_out!==0&&(q.avail_in!==0||W!==4&&W!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(a.shrinkBuf(q.output,q.next_out))):this.onData(a.shrinkBuf(q.output,q.next_out)))}while((0<q.avail_in||q.avail_out===0)&&R!==1);return W===4?(R=s.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===m):W!==2||(this.onEnd(m),!(q.avail_out=0))},w.prototype.onData=function(E){this.chunks.push(E)},w.prototype.onEnd=function(E){E===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},i.Deflate=w,i.deflate=I,i.deflateRaw=function(E,M){return(M=M||{}).raw=!0,I(E,M)},i.gzip=function(E,M){return(M=M||{}).gzip=!0,I(E,M)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),l=n("./utils/strings"),h=n("./zlib/constants"),c=n("./zlib/messages"),p=n("./zlib/zstream"),m=n("./zlib/gzheader"),v=Object.prototype.toString;function _(w){if(!(this instanceof _))return new _(w);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},w||{});var I=this.options;I.raw&&0<=I.windowBits&&I.windowBits<16&&(I.windowBits=-I.windowBits,I.windowBits===0&&(I.windowBits=-15)),!(0<=I.windowBits&&I.windowBits<16)||w&&w.windowBits||(I.windowBits+=32),15<I.windowBits&&I.windowBits<48&&!(15&I.windowBits)&&(I.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var E=s.inflateInit2(this.strm,I.windowBits);if(E!==h.Z_OK)throw new Error(c[E]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function T(w,I){var E=new _(I);if(E.push(w,!0),E.err)throw E.msg||c[E.err];return E.result}_.prototype.push=function(w,I){var E,M,R,W,q,X,U=this.strm,S=this.options.chunkSize,k=this.options.dictionary,F=!1;if(this.ended)return!1;M=I===~~I?I:I===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof w=="string"?U.input=l.binstring2buf(w):v.call(w)==="[object ArrayBuffer]"?U.input=new Uint8Array(w):U.input=w,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new a.Buf8(S),U.next_out=0,U.avail_out=S),(E=s.inflate(U,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&k&&(X=typeof k=="string"?l.string2buf(k):v.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,E=s.inflateSetDictionary(this.strm,X)),E===h.Z_BUF_ERROR&&F===!0&&(E=h.Z_OK,F=!1),E!==h.Z_STREAM_END&&E!==h.Z_OK)return this.onEnd(E),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&E!==h.Z_STREAM_END&&(U.avail_in!==0||M!==h.Z_FINISH&&M!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=l.utf8border(U.output,U.next_out),W=U.next_out-R,q=l.buf2string(U.output,R),U.next_out=W,U.avail_out=S-W,W&&a.arraySet(U.output,U.output,R,W,0),this.onData(q)):this.onData(a.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(F=!0)}while((0<U.avail_in||U.avail_out===0)&&E!==h.Z_STREAM_END);return E===h.Z_STREAM_END&&(M=h.Z_FINISH),M===h.Z_FINISH?(E=s.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h.Z_OK):M!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(U.avail_out=0))},_.prototype.onData=function(w){this.chunks.push(w)},_.prototype.onEnd=function(w){w===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Inflate=_,i.inflate=T,i.inflateRaw=function(w,I){return(I=I||{}).raw=!0,T(w,I)},i.ungzip=T},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(h){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var p=c.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])}}return h},i.shrinkBuf=function(h,c){return h.length===c?h:h.subarray?h.subarray(0,c):(h.length=c,h)};var a={arraySet:function(h,c,p,m,v){if(c.subarray&&h.subarray)h.set(c.subarray(p,p+m),v);else for(var _=0;_<m;_++)h[v+_]=c[p+_]},flattenChunks:function(h){var c,p,m,v,_,T;for(c=m=0,p=h.length;c<p;c++)m+=h[c].length;for(T=new Uint8Array(m),c=v=0,p=h.length;c<p;c++)_=h[c],T.set(_,v),v+=_.length;return T}},l={arraySet:function(h,c,p,m,v){for(var _=0;_<m;_++)h[v+_]=c[p+_]},flattenChunks:function(h){return[].concat.apply([],h)}};i.setTyped=function(h){h?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var h=new s.Buf8(256),c=0;c<256;c++)h[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function p(m,v){if(v<65537&&(m.subarray&&l||!m.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(m,v));for(var _="",T=0;T<v;T++)_+=String.fromCharCode(m[T]);return _}h[254]=h[254]=1,i.string2buf=function(m){var v,_,T,w,I,E=m.length,M=0;for(w=0;w<E;w++)(64512&(_=m.charCodeAt(w)))==55296&&w+1<E&&(64512&(T=m.charCodeAt(w+1)))==56320&&(_=65536+(_-55296<<10)+(T-56320),w++),M+=_<128?1:_<2048?2:_<65536?3:4;for(v=new s.Buf8(M),w=I=0;I<M;w++)(64512&(_=m.charCodeAt(w)))==55296&&w+1<E&&(64512&(T=m.charCodeAt(w+1)))==56320&&(_=65536+(_-55296<<10)+(T-56320),w++),_<128?v[I++]=_:(_<2048?v[I++]=192|_>>>6:(_<65536?v[I++]=224|_>>>12:(v[I++]=240|_>>>18,v[I++]=128|_>>>12&63),v[I++]=128|_>>>6&63),v[I++]=128|63&_);return v},i.buf2binstring=function(m){return p(m,m.length)},i.binstring2buf=function(m){for(var v=new s.Buf8(m.length),_=0,T=v.length;_<T;_++)v[_]=m.charCodeAt(_);return v},i.buf2string=function(m,v){var _,T,w,I,E=v||m.length,M=new Array(2*E);for(_=T=0;_<E;)if((w=m[_++])<128)M[T++]=w;else if(4<(I=h[w]))M[T++]=65533,_+=I-1;else{for(w&=I===2?31:I===3?15:7;1<I&&_<E;)w=w<<6|63&m[_++],I--;1<I?M[T++]=65533:w<65536?M[T++]=w:(w-=65536,M[T++]=55296|w>>10&1023,M[T++]=56320|1023&w)}return p(M,T)},i.utf8border=function(m,v){var _;for((v=v||m.length)>m.length&&(v=m.length),_=v-1;0<=_&&(192&m[_])==128;)_--;return _<0||_===0?v:_+h[m[_]]>v?_:v}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,a,l,h){for(var c=65535&s|0,p=s>>>16&65535|0,m=0;l!==0;){for(l-=m=2e3<l?2e3:l;p=p+(c=c+a[h++]|0)|0,--m;);c%=65521,p%=65521}return c|p<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var a,l=[],h=0;h<256;h++){a=h;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[h]=a}return l}();r.exports=function(a,l,h,c){var p=s,m=c+h;a^=-1;for(var v=c;v<m;v++)a=a>>>8^p[255&(a^l[v])];return-1^a}},{}],46:[function(n,r,i){var s,a=n("../utils/common"),l=n("./trees"),h=n("./adler32"),c=n("./crc32"),p=n("./messages"),m=0,v=4,_=0,T=-2,w=-1,I=4,E=2,M=8,R=9,W=286,q=30,X=19,U=2*W+1,S=15,k=3,F=258,H=F+k+1,D=42,j=113,B=1,wt=2,Rt=3,mt=4;function lt(P,dt){return P.msg=p[dt],dt}function ot(P){return(P<<1)-(4<P?9:0)}function ft(P){for(var dt=P.length;0<=--dt;)P[dt]=0}function J(P){var dt=P.state,at=dt.pending;at>P.avail_out&&(at=P.avail_out),at!==0&&(a.arraySet(P.output,dt.pending_buf,dt.pending_out,at,P.next_out),P.next_out+=at,dt.pending_out+=at,P.total_out+=at,P.avail_out-=at,dt.pending-=at,dt.pending===0&&(dt.pending_out=0))}function tt(P,dt){l._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,dt),P.block_start=P.strstart,J(P.strm)}function _t(P,dt){P.pending_buf[P.pending++]=dt}function Et(P,dt){P.pending_buf[P.pending++]=dt>>>8&255,P.pending_buf[P.pending++]=255&dt}function vt(P,dt){var at,N,O=P.max_chain_length,V=P.strstart,Z=P.prev_length,K=P.nice_match,Y=P.strstart>P.w_size-H?P.strstart-(P.w_size-H):0,rt=P.window,xt=P.w_mask,st=P.prev,Mt=P.strstart+F,z=rt[V+Z-1],y=rt[V+Z];P.prev_length>=P.good_match&&(O>>=2),K>P.lookahead&&(K=P.lookahead);do if(rt[(at=dt)+Z]===y&&rt[at+Z-1]===z&&rt[at]===rt[V]&&rt[++at]===rt[V+1]){V+=2,at++;do;while(rt[++V]===rt[++at]&&rt[++V]===rt[++at]&&rt[++V]===rt[++at]&&rt[++V]===rt[++at]&&rt[++V]===rt[++at]&&rt[++V]===rt[++at]&&rt[++V]===rt[++at]&&rt[++V]===rt[++at]&&V<Mt);if(N=F-(Mt-V),V=Mt-F,Z<N){if(P.match_start=dt,K<=(Z=N))break;z=rt[V+Z-1],y=rt[V+Z]}}while((dt=st[dt&xt])>Y&&--O!=0);return Z<=P.lookahead?Z:P.lookahead}function Pt(P){var dt,at,N,O,V,Z,K,Y,rt,xt,st=P.w_size;do{if(O=P.window_size-P.lookahead-P.strstart,P.strstart>=st+(st-H)){for(a.arraySet(P.window,P.window,st,st,0),P.match_start-=st,P.strstart-=st,P.block_start-=st,dt=at=P.hash_size;N=P.head[--dt],P.head[dt]=st<=N?N-st:0,--at;);for(dt=at=st;N=P.prev[--dt],P.prev[dt]=st<=N?N-st:0,--at;);O+=st}if(P.strm.avail_in===0)break;if(Z=P.strm,K=P.window,Y=P.strstart+P.lookahead,rt=O,xt=void 0,xt=Z.avail_in,rt<xt&&(xt=rt),at=xt===0?0:(Z.avail_in-=xt,a.arraySet(K,Z.input,Z.next_in,xt,Y),Z.state.wrap===1?Z.adler=h(Z.adler,K,xt,Y):Z.state.wrap===2&&(Z.adler=c(Z.adler,K,xt,Y)),Z.next_in+=xt,Z.total_in+=xt,xt),P.lookahead+=at,P.lookahead+P.insert>=k)for(V=P.strstart-P.insert,P.ins_h=P.window[V],P.ins_h=(P.ins_h<<P.hash_shift^P.window[V+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[V+k-1])&P.hash_mask,P.prev[V&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=V,V++,P.insert--,!(P.lookahead+P.insert<k)););}while(P.lookahead<H&&P.strm.avail_in!==0)}function $t(P,dt){for(var at,N;;){if(P.lookahead<H){if(Pt(P),P.lookahead<H&&dt===m)return B;if(P.lookahead===0)break}if(at=0,P.lookahead>=k&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+k-1])&P.hash_mask,at=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),at!==0&&P.strstart-at<=P.w_size-H&&(P.match_length=vt(P,at)),P.match_length>=k)if(N=l._tr_tally(P,P.strstart-P.match_start,P.match_length-k),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=k){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+k-1])&P.hash_mask,at=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else N=l._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(N&&(tt(P,!1),P.strm.avail_out===0))return B}return P.insert=P.strstart<k-1?P.strstart:k-1,dt===v?(tt(P,!0),P.strm.avail_out===0?Rt:mt):P.last_lit&&(tt(P,!1),P.strm.avail_out===0)?B:wt}function It(P,dt){for(var at,N,O;;){if(P.lookahead<H){if(Pt(P),P.lookahead<H&&dt===m)return B;if(P.lookahead===0)break}if(at=0,P.lookahead>=k&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+k-1])&P.hash_mask,at=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=k-1,at!==0&&P.prev_length<P.max_lazy_match&&P.strstart-at<=P.w_size-H&&(P.match_length=vt(P,at),P.match_length<=5&&(P.strategy===1||P.match_length===k&&4096<P.strstart-P.match_start)&&(P.match_length=k-1)),P.prev_length>=k&&P.match_length<=P.prev_length){for(O=P.strstart+P.lookahead-k,N=l._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-k),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=O&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+k-1])&P.hash_mask,at=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=k-1,P.strstart++,N&&(tt(P,!1),P.strm.avail_out===0))return B}else if(P.match_available){if((N=l._tr_tally(P,0,P.window[P.strstart-1]))&&tt(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return B}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(N=l._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<k-1?P.strstart:k-1,dt===v?(tt(P,!0),P.strm.avail_out===0?Rt:mt):P.last_lit&&(tt(P,!1),P.strm.avail_out===0)?B:wt}function Nt(P,dt,at,N,O){this.good_length=P,this.max_lazy=dt,this.nice_length=at,this.max_chain=N,this.func=O}function Ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*U),this.dyn_dtree=new a.Buf16(2*(2*q+1)),this.bl_tree=new a.Buf16(2*(2*X+1)),ft(this.dyn_ltree),ft(this.dyn_dtree),ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(S+1),this.heap=new a.Buf16(2*W+1),ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*W+1),ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ft(P){var dt;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=E,(dt=P.state).pending=0,dt.pending_out=0,dt.wrap<0&&(dt.wrap=-dt.wrap),dt.status=dt.wrap?D:j,P.adler=dt.wrap===2?0:1,dt.last_flush=m,l._tr_init(dt),_):lt(P,T)}function Gt(P){var dt=Ft(P);return dt===_&&function(at){at.window_size=2*at.w_size,ft(at.head),at.max_lazy_match=s[at.level].max_lazy,at.good_match=s[at.level].good_length,at.nice_match=s[at.level].nice_length,at.max_chain_length=s[at.level].max_chain,at.strstart=0,at.block_start=0,at.lookahead=0,at.insert=0,at.match_length=at.prev_length=k-1,at.match_available=0,at.ins_h=0}(P.state),dt}function Kt(P,dt,at,N,O,V){if(!P)return T;var Z=1;if(dt===w&&(dt=6),N<0?(Z=0,N=-N):15<N&&(Z=2,N-=16),O<1||R<O||at!==M||N<8||15<N||dt<0||9<dt||V<0||I<V)return lt(P,T);N===8&&(N=9);var K=new Ht;return(P.state=K).strm=P,K.wrap=Z,K.gzhead=null,K.w_bits=N,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=O+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+k-1)/k),K.window=new a.Buf8(2*K.w_size),K.head=new a.Buf16(K.hash_size),K.prev=new a.Buf16(K.w_size),K.lit_bufsize=1<<O+6,K.pending_buf_size=4*K.lit_bufsize,K.pending_buf=new a.Buf8(K.pending_buf_size),K.d_buf=1*K.lit_bufsize,K.l_buf=3*K.lit_bufsize,K.level=dt,K.strategy=V,K.method=at,Gt(P)}s=[new Nt(0,0,0,0,function(P,dt){var at=65535;for(at>P.pending_buf_size-5&&(at=P.pending_buf_size-5);;){if(P.lookahead<=1){if(Pt(P),P.lookahead===0&&dt===m)return B;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var N=P.block_start+at;if((P.strstart===0||P.strstart>=N)&&(P.lookahead=P.strstart-N,P.strstart=N,tt(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-H&&(tt(P,!1),P.strm.avail_out===0))return B}return P.insert=0,dt===v?(tt(P,!0),P.strm.avail_out===0?Rt:mt):(P.strstart>P.block_start&&(tt(P,!1),P.strm.avail_out),B)}),new Nt(4,4,8,4,$t),new Nt(4,5,16,8,$t),new Nt(4,6,32,32,$t),new Nt(4,4,16,16,It),new Nt(8,16,32,32,It),new Nt(8,16,128,128,It),new Nt(8,32,128,256,It),new Nt(32,128,258,1024,It),new Nt(32,258,258,4096,It)],i.deflateInit=function(P,dt){return Kt(P,dt,M,15,8,0)},i.deflateInit2=Kt,i.deflateReset=Gt,i.deflateResetKeep=Ft,i.deflateSetHeader=function(P,dt){return P&&P.state?P.state.wrap!==2?T:(P.state.gzhead=dt,_):T},i.deflate=function(P,dt){var at,N,O,V;if(!P||!P.state||5<dt||dt<0)return P?lt(P,T):T;if(N=P.state,!P.output||!P.input&&P.avail_in!==0||N.status===666&&dt!==v)return lt(P,P.avail_out===0?-5:T);if(N.strm=P,at=N.last_flush,N.last_flush=dt,N.status===D)if(N.wrap===2)P.adler=0,_t(N,31),_t(N,139),_t(N,8),N.gzhead?(_t(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),_t(N,255&N.gzhead.time),_t(N,N.gzhead.time>>8&255),_t(N,N.gzhead.time>>16&255),_t(N,N.gzhead.time>>24&255),_t(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),_t(N,255&N.gzhead.os),N.gzhead.extra&&N.gzhead.extra.length&&(_t(N,255&N.gzhead.extra.length),_t(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(P.adler=c(P.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=69):(_t(N,0),_t(N,0),_t(N,0),_t(N,0),_t(N,0),_t(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),_t(N,3),N.status=j);else{var Z=M+(N.w_bits-8<<4)<<8;Z|=(2<=N.strategy||N.level<2?0:N.level<6?1:N.level===6?2:3)<<6,N.strstart!==0&&(Z|=32),Z+=31-Z%31,N.status=j,Et(N,Z),N.strstart!==0&&(Et(N,P.adler>>>16),Et(N,65535&P.adler)),P.adler=1}if(N.status===69)if(N.gzhead.extra){for(O=N.pending;N.gzindex<(65535&N.gzhead.extra.length)&&(N.pending!==N.pending_buf_size||(N.gzhead.hcrc&&N.pending>O&&(P.adler=c(P.adler,N.pending_buf,N.pending-O,O)),J(P),O=N.pending,N.pending!==N.pending_buf_size));)_t(N,255&N.gzhead.extra[N.gzindex]),N.gzindex++;N.gzhead.hcrc&&N.pending>O&&(P.adler=c(P.adler,N.pending_buf,N.pending-O,O)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=73)}else N.status=73;if(N.status===73)if(N.gzhead.name){O=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>O&&(P.adler=c(P.adler,N.pending_buf,N.pending-O,O)),J(P),O=N.pending,N.pending===N.pending_buf_size)){V=1;break}V=N.gzindex<N.gzhead.name.length?255&N.gzhead.name.charCodeAt(N.gzindex++):0,_t(N,V)}while(V!==0);N.gzhead.hcrc&&N.pending>O&&(P.adler=c(P.adler,N.pending_buf,N.pending-O,O)),V===0&&(N.gzindex=0,N.status=91)}else N.status=91;if(N.status===91)if(N.gzhead.comment){O=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>O&&(P.adler=c(P.adler,N.pending_buf,N.pending-O,O)),J(P),O=N.pending,N.pending===N.pending_buf_size)){V=1;break}V=N.gzindex<N.gzhead.comment.length?255&N.gzhead.comment.charCodeAt(N.gzindex++):0,_t(N,V)}while(V!==0);N.gzhead.hcrc&&N.pending>O&&(P.adler=c(P.adler,N.pending_buf,N.pending-O,O)),V===0&&(N.status=103)}else N.status=103;if(N.status===103&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&J(P),N.pending+2<=N.pending_buf_size&&(_t(N,255&P.adler),_t(N,P.adler>>8&255),P.adler=0,N.status=j)):N.status=j),N.pending!==0){if(J(P),P.avail_out===0)return N.last_flush=-1,_}else if(P.avail_in===0&&ot(dt)<=ot(at)&&dt!==v)return lt(P,-5);if(N.status===666&&P.avail_in!==0)return lt(P,-5);if(P.avail_in!==0||N.lookahead!==0||dt!==m&&N.status!==666){var K=N.strategy===2?function(Y,rt){for(var xt;;){if(Y.lookahead===0&&(Pt(Y),Y.lookahead===0)){if(rt===m)return B;break}if(Y.match_length=0,xt=l._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,xt&&(tt(Y,!1),Y.strm.avail_out===0))return B}return Y.insert=0,rt===v?(tt(Y,!0),Y.strm.avail_out===0?Rt:mt):Y.last_lit&&(tt(Y,!1),Y.strm.avail_out===0)?B:wt}(N,dt):N.strategy===3?function(Y,rt){for(var xt,st,Mt,z,y=Y.window;;){if(Y.lookahead<=F){if(Pt(Y),Y.lookahead<=F&&rt===m)return B;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=k&&0<Y.strstart&&(st=y[Mt=Y.strstart-1])===y[++Mt]&&st===y[++Mt]&&st===y[++Mt]){z=Y.strstart+F;do;while(st===y[++Mt]&&st===y[++Mt]&&st===y[++Mt]&&st===y[++Mt]&&st===y[++Mt]&&st===y[++Mt]&&st===y[++Mt]&&st===y[++Mt]&&Mt<z);Y.match_length=F-(z-Mt),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=k?(xt=l._tr_tally(Y,1,Y.match_length-k),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(xt=l._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),xt&&(tt(Y,!1),Y.strm.avail_out===0))return B}return Y.insert=0,rt===v?(tt(Y,!0),Y.strm.avail_out===0?Rt:mt):Y.last_lit&&(tt(Y,!1),Y.strm.avail_out===0)?B:wt}(N,dt):s[N.level].func(N,dt);if(K!==Rt&&K!==mt||(N.status=666),K===B||K===Rt)return P.avail_out===0&&(N.last_flush=-1),_;if(K===wt&&(dt===1?l._tr_align(N):dt!==5&&(l._tr_stored_block(N,0,0,!1),dt===3&&(ft(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),J(P),P.avail_out===0))return N.last_flush=-1,_}return dt!==v?_:N.wrap<=0?1:(N.wrap===2?(_t(N,255&P.adler),_t(N,P.adler>>8&255),_t(N,P.adler>>16&255),_t(N,P.adler>>24&255),_t(N,255&P.total_in),_t(N,P.total_in>>8&255),_t(N,P.total_in>>16&255),_t(N,P.total_in>>24&255)):(Et(N,P.adler>>>16),Et(N,65535&P.adler)),J(P),0<N.wrap&&(N.wrap=-N.wrap),N.pending!==0?_:1)},i.deflateEnd=function(P){var dt;return P&&P.state?(dt=P.state.status)!==D&&dt!==69&&dt!==73&&dt!==91&&dt!==103&&dt!==j&&dt!==666?lt(P,T):(P.state=null,dt===j?lt(P,-3):_):T},i.deflateSetDictionary=function(P,dt){var at,N,O,V,Z,K,Y,rt,xt=dt.length;if(!P||!P.state||(V=(at=P.state).wrap)===2||V===1&&at.status!==D||at.lookahead)return T;for(V===1&&(P.adler=h(P.adler,dt,xt,0)),at.wrap=0,xt>=at.w_size&&(V===0&&(ft(at.head),at.strstart=0,at.block_start=0,at.insert=0),rt=new a.Buf8(at.w_size),a.arraySet(rt,dt,xt-at.w_size,at.w_size,0),dt=rt,xt=at.w_size),Z=P.avail_in,K=P.next_in,Y=P.input,P.avail_in=xt,P.next_in=0,P.input=dt,Pt(at);at.lookahead>=k;){for(N=at.strstart,O=at.lookahead-(k-1);at.ins_h=(at.ins_h<<at.hash_shift^at.window[N+k-1])&at.hash_mask,at.prev[N&at.w_mask]=at.head[at.ins_h],at.head[at.ins_h]=N,N++,--O;);at.strstart=N,at.lookahead=k-1,Pt(at)}return at.strstart+=at.lookahead,at.block_start=at.strstart,at.insert=at.lookahead,at.lookahead=0,at.match_length=at.prev_length=k-1,at.match_available=0,P.next_in=K,P.input=Y,P.avail_in=Z,at.wrap=V,_},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,a){var l,h,c,p,m,v,_,T,w,I,E,M,R,W,q,X,U,S,k,F,H,D,j,B,wt;l=s.state,h=s.next_in,B=s.input,c=h+(s.avail_in-5),p=s.next_out,wt=s.output,m=p-(a-s.avail_out),v=p+(s.avail_out-257),_=l.dmax,T=l.wsize,w=l.whave,I=l.wnext,E=l.window,M=l.hold,R=l.bits,W=l.lencode,q=l.distcode,X=(1<<l.lenbits)-1,U=(1<<l.distbits)-1;t:do{R<15&&(M+=B[h++]<<R,R+=8,M+=B[h++]<<R,R+=8),S=W[M&X];e:for(;;){if(M>>>=k=S>>>24,R-=k,(k=S>>>16&255)===0)wt[p++]=65535&S;else{if(!(16&k)){if(!(64&k)){S=W[(65535&S)+(M&(1<<k)-1)];continue e}if(32&k){l.mode=12;break t}s.msg="invalid literal/length code",l.mode=30;break t}F=65535&S,(k&=15)&&(R<k&&(M+=B[h++]<<R,R+=8),F+=M&(1<<k)-1,M>>>=k,R-=k),R<15&&(M+=B[h++]<<R,R+=8,M+=B[h++]<<R,R+=8),S=q[M&U];n:for(;;){if(M>>>=k=S>>>24,R-=k,!(16&(k=S>>>16&255))){if(!(64&k)){S=q[(65535&S)+(M&(1<<k)-1)];continue n}s.msg="invalid distance code",l.mode=30;break t}if(H=65535&S,R<(k&=15)&&(M+=B[h++]<<R,(R+=8)<k&&(M+=B[h++]<<R,R+=8)),_<(H+=M&(1<<k)-1)){s.msg="invalid distance too far back",l.mode=30;break t}if(M>>>=k,R-=k,(k=p-m)<H){if(w<(k=H-k)&&l.sane){s.msg="invalid distance too far back",l.mode=30;break t}if(j=E,(D=0)===I){if(D+=T-k,k<F){for(F-=k;wt[p++]=E[D++],--k;);D=p-H,j=wt}}else if(I<k){if(D+=T+I-k,(k-=I)<F){for(F-=k;wt[p++]=E[D++],--k;);if(D=0,I<F){for(F-=k=I;wt[p++]=E[D++],--k;);D=p-H,j=wt}}}else if(D+=I-k,k<F){for(F-=k;wt[p++]=E[D++],--k;);D=p-H,j=wt}for(;2<F;)wt[p++]=j[D++],wt[p++]=j[D++],wt[p++]=j[D++],F-=3;F&&(wt[p++]=j[D++],1<F&&(wt[p++]=j[D++]))}else{for(D=p-H;wt[p++]=wt[D++],wt[p++]=wt[D++],wt[p++]=wt[D++],2<(F-=3););F&&(wt[p++]=wt[D++],1<F&&(wt[p++]=wt[D++]))}break}}break}}while(h<c&&p<v);h-=F=R>>3,M&=(1<<(R-=F<<3))-1,s.next_in=h,s.next_out=p,s.avail_in=h<c?c-h+5:5-(h-c),s.avail_out=p<v?v-p+257:257-(p-v),l.hold=M,l.bits=R}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),l=n("./crc32"),h=n("./inffast"),c=n("./inftrees"),p=1,m=2,v=0,_=-2,T=1,w=852,I=592;function E(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function M(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(D){var j;return D&&D.state?(j=D.state,D.total_in=D.total_out=j.total=0,D.msg="",j.wrap&&(D.adler=1&j.wrap),j.mode=T,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new s.Buf32(w),j.distcode=j.distdyn=new s.Buf32(I),j.sane=1,j.back=-1,v):_}function W(D){var j;return D&&D.state?((j=D.state).wsize=0,j.whave=0,j.wnext=0,R(D)):_}function q(D,j){var B,wt;return D&&D.state?(wt=D.state,j<0?(B=0,j=-j):(B=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?_:(wt.window!==null&&wt.wbits!==j&&(wt.window=null),wt.wrap=B,wt.wbits=j,W(D))):_}function X(D,j){var B,wt;return D?(wt=new M,(D.state=wt).window=null,(B=q(D,j))!==v&&(D.state=null),B):_}var U,S,k=!0;function F(D){if(k){var j;for(U=new s.Buf32(512),S=new s.Buf32(32),j=0;j<144;)D.lens[j++]=8;for(;j<256;)D.lens[j++]=9;for(;j<280;)D.lens[j++]=7;for(;j<288;)D.lens[j++]=8;for(c(p,D.lens,0,288,U,0,D.work,{bits:9}),j=0;j<32;)D.lens[j++]=5;c(m,D.lens,0,32,S,0,D.work,{bits:5}),k=!1}D.lencode=U,D.lenbits=9,D.distcode=S,D.distbits=5}function H(D,j,B,wt){var Rt,mt=D.state;return mt.window===null&&(mt.wsize=1<<mt.wbits,mt.wnext=0,mt.whave=0,mt.window=new s.Buf8(mt.wsize)),wt>=mt.wsize?(s.arraySet(mt.window,j,B-mt.wsize,mt.wsize,0),mt.wnext=0,mt.whave=mt.wsize):(wt<(Rt=mt.wsize-mt.wnext)&&(Rt=wt),s.arraySet(mt.window,j,B-wt,Rt,mt.wnext),(wt-=Rt)?(s.arraySet(mt.window,j,B-wt,wt,0),mt.wnext=wt,mt.whave=mt.wsize):(mt.wnext+=Rt,mt.wnext===mt.wsize&&(mt.wnext=0),mt.whave<mt.wsize&&(mt.whave+=Rt))),0}i.inflateReset=W,i.inflateReset2=q,i.inflateResetKeep=R,i.inflateInit=function(D){return X(D,15)},i.inflateInit2=X,i.inflate=function(D,j){var B,wt,Rt,mt,lt,ot,ft,J,tt,_t,Et,vt,Pt,$t,It,Nt,Ht,Ft,Gt,Kt,P,dt,at,N,O=0,V=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return _;(B=D.state).mode===12&&(B.mode=13),lt=D.next_out,Rt=D.output,ft=D.avail_out,mt=D.next_in,wt=D.input,ot=D.avail_in,J=B.hold,tt=B.bits,_t=ot,Et=ft,dt=v;t:for(;;)switch(B.mode){case T:if(B.wrap===0){B.mode=13;break}for(;tt<16;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(2&B.wrap&&J===35615){V[B.check=0]=255&J,V[1]=J>>>8&255,B.check=l(B.check,V,2,0),tt=J=0,B.mode=2;break}if(B.flags=0,B.head&&(B.head.done=!1),!(1&B.wrap)||(((255&J)<<8)+(J>>8))%31){D.msg="incorrect header check",B.mode=30;break}if((15&J)!=8){D.msg="unknown compression method",B.mode=30;break}if(tt-=4,P=8+(15&(J>>>=4)),B.wbits===0)B.wbits=P;else if(P>B.wbits){D.msg="invalid window size",B.mode=30;break}B.dmax=1<<P,D.adler=B.check=1,B.mode=512&J?10:12,tt=J=0;break;case 2:for(;tt<16;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(B.flags=J,(255&B.flags)!=8){D.msg="unknown compression method",B.mode=30;break}if(57344&B.flags){D.msg="unknown header flags set",B.mode=30;break}B.head&&(B.head.text=J>>8&1),512&B.flags&&(V[0]=255&J,V[1]=J>>>8&255,B.check=l(B.check,V,2,0)),tt=J=0,B.mode=3;case 3:for(;tt<32;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}B.head&&(B.head.time=J),512&B.flags&&(V[0]=255&J,V[1]=J>>>8&255,V[2]=J>>>16&255,V[3]=J>>>24&255,B.check=l(B.check,V,4,0)),tt=J=0,B.mode=4;case 4:for(;tt<16;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}B.head&&(B.head.xflags=255&J,B.head.os=J>>8),512&B.flags&&(V[0]=255&J,V[1]=J>>>8&255,B.check=l(B.check,V,2,0)),tt=J=0,B.mode=5;case 5:if(1024&B.flags){for(;tt<16;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}B.length=J,B.head&&(B.head.extra_len=J),512&B.flags&&(V[0]=255&J,V[1]=J>>>8&255,B.check=l(B.check,V,2,0)),tt=J=0}else B.head&&(B.head.extra=null);B.mode=6;case 6:if(1024&B.flags&&(ot<(vt=B.length)&&(vt=ot),vt&&(B.head&&(P=B.head.extra_len-B.length,B.head.extra||(B.head.extra=new Array(B.head.extra_len)),s.arraySet(B.head.extra,wt,mt,vt,P)),512&B.flags&&(B.check=l(B.check,wt,vt,mt)),ot-=vt,mt+=vt,B.length-=vt),B.length))break t;B.length=0,B.mode=7;case 7:if(2048&B.flags){if(ot===0)break t;for(vt=0;P=wt[mt+vt++],B.head&&P&&B.length<65536&&(B.head.name+=String.fromCharCode(P)),P&&vt<ot;);if(512&B.flags&&(B.check=l(B.check,wt,vt,mt)),ot-=vt,mt+=vt,P)break t}else B.head&&(B.head.name=null);B.length=0,B.mode=8;case 8:if(4096&B.flags){if(ot===0)break t;for(vt=0;P=wt[mt+vt++],B.head&&P&&B.length<65536&&(B.head.comment+=String.fromCharCode(P)),P&&vt<ot;);if(512&B.flags&&(B.check=l(B.check,wt,vt,mt)),ot-=vt,mt+=vt,P)break t}else B.head&&(B.head.comment=null);B.mode=9;case 9:if(512&B.flags){for(;tt<16;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(J!==(65535&B.check)){D.msg="header crc mismatch",B.mode=30;break}tt=J=0}B.head&&(B.head.hcrc=B.flags>>9&1,B.head.done=!0),D.adler=B.check=0,B.mode=12;break;case 10:for(;tt<32;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}D.adler=B.check=E(J),tt=J=0,B.mode=11;case 11:if(B.havedict===0)return D.next_out=lt,D.avail_out=ft,D.next_in=mt,D.avail_in=ot,B.hold=J,B.bits=tt,2;D.adler=B.check=1,B.mode=12;case 12:if(j===5||j===6)break t;case 13:if(B.last){J>>>=7&tt,tt-=7&tt,B.mode=27;break}for(;tt<3;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}switch(B.last=1&J,tt-=1,3&(J>>>=1)){case 0:B.mode=14;break;case 1:if(F(B),B.mode=20,j!==6)break;J>>>=2,tt-=2;break t;case 2:B.mode=17;break;case 3:D.msg="invalid block type",B.mode=30}J>>>=2,tt-=2;break;case 14:for(J>>>=7&tt,tt-=7&tt;tt<32;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if((65535&J)!=(J>>>16^65535)){D.msg="invalid stored block lengths",B.mode=30;break}if(B.length=65535&J,tt=J=0,B.mode=15,j===6)break t;case 15:B.mode=16;case 16:if(vt=B.length){if(ot<vt&&(vt=ot),ft<vt&&(vt=ft),vt===0)break t;s.arraySet(Rt,wt,mt,vt,lt),ot-=vt,mt+=vt,ft-=vt,lt+=vt,B.length-=vt;break}B.mode=12;break;case 17:for(;tt<14;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(B.nlen=257+(31&J),J>>>=5,tt-=5,B.ndist=1+(31&J),J>>>=5,tt-=5,B.ncode=4+(15&J),J>>>=4,tt-=4,286<B.nlen||30<B.ndist){D.msg="too many length or distance symbols",B.mode=30;break}B.have=0,B.mode=18;case 18:for(;B.have<B.ncode;){for(;tt<3;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}B.lens[Z[B.have++]]=7&J,J>>>=3,tt-=3}for(;B.have<19;)B.lens[Z[B.have++]]=0;if(B.lencode=B.lendyn,B.lenbits=7,at={bits:B.lenbits},dt=c(0,B.lens,0,19,B.lencode,0,B.work,at),B.lenbits=at.bits,dt){D.msg="invalid code lengths set",B.mode=30;break}B.have=0,B.mode=19;case 19:for(;B.have<B.nlen+B.ndist;){for(;Nt=(O=B.lencode[J&(1<<B.lenbits)-1])>>>16&255,Ht=65535&O,!((It=O>>>24)<=tt);){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(Ht<16)J>>>=It,tt-=It,B.lens[B.have++]=Ht;else{if(Ht===16){for(N=It+2;tt<N;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(J>>>=It,tt-=It,B.have===0){D.msg="invalid bit length repeat",B.mode=30;break}P=B.lens[B.have-1],vt=3+(3&J),J>>>=2,tt-=2}else if(Ht===17){for(N=It+3;tt<N;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}tt-=It,P=0,vt=3+(7&(J>>>=It)),J>>>=3,tt-=3}else{for(N=It+7;tt<N;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}tt-=It,P=0,vt=11+(127&(J>>>=It)),J>>>=7,tt-=7}if(B.have+vt>B.nlen+B.ndist){D.msg="invalid bit length repeat",B.mode=30;break}for(;vt--;)B.lens[B.have++]=P}}if(B.mode===30)break;if(B.lens[256]===0){D.msg="invalid code -- missing end-of-block",B.mode=30;break}if(B.lenbits=9,at={bits:B.lenbits},dt=c(p,B.lens,0,B.nlen,B.lencode,0,B.work,at),B.lenbits=at.bits,dt){D.msg="invalid literal/lengths set",B.mode=30;break}if(B.distbits=6,B.distcode=B.distdyn,at={bits:B.distbits},dt=c(m,B.lens,B.nlen,B.ndist,B.distcode,0,B.work,at),B.distbits=at.bits,dt){D.msg="invalid distances set",B.mode=30;break}if(B.mode=20,j===6)break t;case 20:B.mode=21;case 21:if(6<=ot&&258<=ft){D.next_out=lt,D.avail_out=ft,D.next_in=mt,D.avail_in=ot,B.hold=J,B.bits=tt,h(D,Et),lt=D.next_out,Rt=D.output,ft=D.avail_out,mt=D.next_in,wt=D.input,ot=D.avail_in,J=B.hold,tt=B.bits,B.mode===12&&(B.back=-1);break}for(B.back=0;Nt=(O=B.lencode[J&(1<<B.lenbits)-1])>>>16&255,Ht=65535&O,!((It=O>>>24)<=tt);){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(Nt&&!(240&Nt)){for(Ft=It,Gt=Nt,Kt=Ht;Nt=(O=B.lencode[Kt+((J&(1<<Ft+Gt)-1)>>Ft)])>>>16&255,Ht=65535&O,!(Ft+(It=O>>>24)<=tt);){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}J>>>=Ft,tt-=Ft,B.back+=Ft}if(J>>>=It,tt-=It,B.back+=It,B.length=Ht,Nt===0){B.mode=26;break}if(32&Nt){B.back=-1,B.mode=12;break}if(64&Nt){D.msg="invalid literal/length code",B.mode=30;break}B.extra=15&Nt,B.mode=22;case 22:if(B.extra){for(N=B.extra;tt<N;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}B.length+=J&(1<<B.extra)-1,J>>>=B.extra,tt-=B.extra,B.back+=B.extra}B.was=B.length,B.mode=23;case 23:for(;Nt=(O=B.distcode[J&(1<<B.distbits)-1])>>>16&255,Ht=65535&O,!((It=O>>>24)<=tt);){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(!(240&Nt)){for(Ft=It,Gt=Nt,Kt=Ht;Nt=(O=B.distcode[Kt+((J&(1<<Ft+Gt)-1)>>Ft)])>>>16&255,Ht=65535&O,!(Ft+(It=O>>>24)<=tt);){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}J>>>=Ft,tt-=Ft,B.back+=Ft}if(J>>>=It,tt-=It,B.back+=It,64&Nt){D.msg="invalid distance code",B.mode=30;break}B.offset=Ht,B.extra=15&Nt,B.mode=24;case 24:if(B.extra){for(N=B.extra;tt<N;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}B.offset+=J&(1<<B.extra)-1,J>>>=B.extra,tt-=B.extra,B.back+=B.extra}if(B.offset>B.dmax){D.msg="invalid distance too far back",B.mode=30;break}B.mode=25;case 25:if(ft===0)break t;if(vt=Et-ft,B.offset>vt){if((vt=B.offset-vt)>B.whave&&B.sane){D.msg="invalid distance too far back",B.mode=30;break}Pt=vt>B.wnext?(vt-=B.wnext,B.wsize-vt):B.wnext-vt,vt>B.length&&(vt=B.length),$t=B.window}else $t=Rt,Pt=lt-B.offset,vt=B.length;for(ft<vt&&(vt=ft),ft-=vt,B.length-=vt;Rt[lt++]=$t[Pt++],--vt;);B.length===0&&(B.mode=21);break;case 26:if(ft===0)break t;Rt[lt++]=B.length,ft--,B.mode=21;break;case 27:if(B.wrap){for(;tt<32;){if(ot===0)break t;ot--,J|=wt[mt++]<<tt,tt+=8}if(Et-=ft,D.total_out+=Et,B.total+=Et,Et&&(D.adler=B.check=B.flags?l(B.check,Rt,Et,lt-Et):a(B.check,Rt,Et,lt-Et)),Et=ft,(B.flags?J:E(J))!==B.check){D.msg="incorrect data check",B.mode=30;break}tt=J=0}B.mode=28;case 28:if(B.wrap&&B.flags){for(;tt<32;){if(ot===0)break t;ot--,J+=wt[mt++]<<tt,tt+=8}if(J!==(4294967295&B.total)){D.msg="incorrect length check",B.mode=30;break}tt=J=0}B.mode=29;case 29:dt=1;break t;case 30:dt=-3;break t;case 31:return-4;case 32:default:return _}return D.next_out=lt,D.avail_out=ft,D.next_in=mt,D.avail_in=ot,B.hold=J,B.bits=tt,(B.wsize||Et!==D.avail_out&&B.mode<30&&(B.mode<27||j!==4))&&H(D,D.output,D.next_out,Et-D.avail_out)?(B.mode=31,-4):(_t-=D.avail_in,Et-=D.avail_out,D.total_in+=_t,D.total_out+=Et,B.total+=Et,B.wrap&&Et&&(D.adler=B.check=B.flags?l(B.check,Rt,Et,D.next_out-Et):a(B.check,Rt,Et,D.next_out-Et)),D.data_type=B.bits+(B.last?64:0)+(B.mode===12?128:0)+(B.mode===20||B.mode===15?256:0),(_t==0&&Et===0||j===4)&&dt===v&&(dt=-5),dt)},i.inflateEnd=function(D){if(!D||!D.state)return _;var j=D.state;return j.window&&(j.window=null),D.state=null,v},i.inflateGetHeader=function(D,j){var B;return D&&D.state&&2&(B=D.state).wrap?((B.head=j).done=!1,v):_},i.inflateSetDictionary=function(D,j){var B,wt=j.length;return D&&D.state?(B=D.state).wrap!==0&&B.mode!==11?_:B.mode===11&&a(1,j,wt,0)!==B.check?-3:H(D,j,wt,wt)?(B.mode=31,-4):(B.havedict=1,v):_},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,m,v,_,T,w,I,E){var M,R,W,q,X,U,S,k,F,H=E.bits,D=0,j=0,B=0,wt=0,Rt=0,mt=0,lt=0,ot=0,ft=0,J=0,tt=null,_t=0,Et=new s.Buf16(16),vt=new s.Buf16(16),Pt=null,$t=0;for(D=0;D<=15;D++)Et[D]=0;for(j=0;j<_;j++)Et[m[v+j]]++;for(Rt=H,wt=15;1<=wt&&Et[wt]===0;wt--);if(wt<Rt&&(Rt=wt),wt===0)return T[w++]=20971520,T[w++]=20971520,E.bits=1,0;for(B=1;B<wt&&Et[B]===0;B++);for(Rt<B&&(Rt=B),D=ot=1;D<=15;D++)if(ot<<=1,(ot-=Et[D])<0)return-1;if(0<ot&&(p===0||wt!==1))return-1;for(vt[1]=0,D=1;D<15;D++)vt[D+1]=vt[D]+Et[D];for(j=0;j<_;j++)m[v+j]!==0&&(I[vt[m[v+j]]++]=j);if(U=p===0?(tt=Pt=I,19):p===1?(tt=a,_t-=257,Pt=l,$t-=257,256):(tt=h,Pt=c,-1),D=B,X=w,lt=j=J=0,W=-1,q=(ft=1<<(mt=Rt))-1,p===1&&852<ft||p===2&&592<ft)return 1;for(;;){for(S=D-lt,F=I[j]<U?(k=0,I[j]):I[j]>U?(k=Pt[$t+I[j]],tt[_t+I[j]]):(k=96,0),M=1<<D-lt,B=R=1<<mt;T[X+(J>>lt)+(R-=M)]=S<<24|k<<16|F|0,R!==0;);for(M=1<<D-1;J&M;)M>>=1;if(M!==0?(J&=M-1,J+=M):J=0,j++,--Et[D]==0){if(D===wt)break;D=m[v+I[j]]}if(Rt<D&&(J&q)!==W){for(lt===0&&(lt=Rt),X+=B,ot=1<<(mt=D-lt);mt+lt<wt&&!((ot-=Et[mt+lt])<=0);)mt++,ot<<=1;if(ft+=1<<mt,p===1&&852<ft||p===2&&592<ft)return 1;T[W=J&q]=Rt<<24|mt<<16|X-w|0}}return J!==0&&(T[X+J]=D-lt<<24|64<<16|0),E.bits=Rt,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=0,l=1;function h(O){for(var V=O.length;0<=--V;)O[V]=0}var c=0,p=29,m=256,v=m+1+p,_=30,T=19,w=2*v+1,I=15,E=16,M=7,R=256,W=16,q=17,X=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(v+2));h(H);var D=new Array(2*_);h(D);var j=new Array(512);h(j);var B=new Array(256);h(B);var wt=new Array(p);h(wt);var Rt,mt,lt,ot=new Array(_);function ft(O,V,Z,K,Y){this.static_tree=O,this.extra_bits=V,this.extra_base=Z,this.elems=K,this.max_length=Y,this.has_stree=O&&O.length}function J(O,V){this.dyn_tree=O,this.max_code=0,this.stat_desc=V}function tt(O){return O<256?j[O]:j[256+(O>>>7)]}function _t(O,V){O.pending_buf[O.pending++]=255&V,O.pending_buf[O.pending++]=V>>>8&255}function Et(O,V,Z){O.bi_valid>E-Z?(O.bi_buf|=V<<O.bi_valid&65535,_t(O,O.bi_buf),O.bi_buf=V>>E-O.bi_valid,O.bi_valid+=Z-E):(O.bi_buf|=V<<O.bi_valid&65535,O.bi_valid+=Z)}function vt(O,V,Z){Et(O,Z[2*V],Z[2*V+1])}function Pt(O,V){for(var Z=0;Z|=1&O,O>>>=1,Z<<=1,0<--V;);return Z>>>1}function $t(O,V,Z){var K,Y,rt=new Array(I+1),xt=0;for(K=1;K<=I;K++)rt[K]=xt=xt+Z[K-1]<<1;for(Y=0;Y<=V;Y++){var st=O[2*Y+1];st!==0&&(O[2*Y]=Pt(rt[st]++,st))}}function It(O){var V;for(V=0;V<v;V++)O.dyn_ltree[2*V]=0;for(V=0;V<_;V++)O.dyn_dtree[2*V]=0;for(V=0;V<T;V++)O.bl_tree[2*V]=0;O.dyn_ltree[2*R]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function Nt(O){8<O.bi_valid?_t(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Ht(O,V,Z,K){var Y=2*V,rt=2*Z;return O[Y]<O[rt]||O[Y]===O[rt]&&K[V]<=K[Z]}function Ft(O,V,Z){for(var K=O.heap[Z],Y=Z<<1;Y<=O.heap_len&&(Y<O.heap_len&&Ht(V,O.heap[Y+1],O.heap[Y],O.depth)&&Y++,!Ht(V,K,O.heap[Y],O.depth));)O.heap[Z]=O.heap[Y],Z=Y,Y<<=1;O.heap[Z]=K}function Gt(O,V,Z){var K,Y,rt,xt,st=0;if(O.last_lit!==0)for(;K=O.pending_buf[O.d_buf+2*st]<<8|O.pending_buf[O.d_buf+2*st+1],Y=O.pending_buf[O.l_buf+st],st++,K===0?vt(O,Y,V):(vt(O,(rt=B[Y])+m+1,V),(xt=U[rt])!==0&&Et(O,Y-=wt[rt],xt),vt(O,rt=tt(--K),Z),(xt=S[rt])!==0&&Et(O,K-=ot[rt],xt)),st<O.last_lit;);vt(O,R,V)}function Kt(O,V){var Z,K,Y,rt=V.dyn_tree,xt=V.stat_desc.static_tree,st=V.stat_desc.has_stree,Mt=V.stat_desc.elems,z=-1;for(O.heap_len=0,O.heap_max=w,Z=0;Z<Mt;Z++)rt[2*Z]!==0?(O.heap[++O.heap_len]=z=Z,O.depth[Z]=0):rt[2*Z+1]=0;for(;O.heap_len<2;)rt[2*(Y=O.heap[++O.heap_len]=z<2?++z:0)]=1,O.depth[Y]=0,O.opt_len--,st&&(O.static_len-=xt[2*Y+1]);for(V.max_code=z,Z=O.heap_len>>1;1<=Z;Z--)Ft(O,rt,Z);for(Y=Mt;Z=O.heap[1],O.heap[1]=O.heap[O.heap_len--],Ft(O,rt,1),K=O.heap[1],O.heap[--O.heap_max]=Z,O.heap[--O.heap_max]=K,rt[2*Y]=rt[2*Z]+rt[2*K],O.depth[Y]=(O.depth[Z]>=O.depth[K]?O.depth[Z]:O.depth[K])+1,rt[2*Z+1]=rt[2*K+1]=Y,O.heap[1]=Y++,Ft(O,rt,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(y,C){var Q,nt,ht,pt,Wt,_e,ie=C.dyn_tree,ce=C.max_code,fe=C.stat_desc.static_tree,Cs=C.stat_desc.has_stree,ks=C.stat_desc.extra_bits,Dr=C.stat_desc.extra_base,Bn=C.stat_desc.max_length,Oi=0;for(pt=0;pt<=I;pt++)y.bl_count[pt]=0;for(ie[2*y.heap[y.heap_max]+1]=0,Q=y.heap_max+1;Q<w;Q++)Bn<(pt=ie[2*ie[2*(nt=y.heap[Q])+1]+1]+1)&&(pt=Bn,Oi++),ie[2*nt+1]=pt,ce<nt||(y.bl_count[pt]++,Wt=0,Dr<=nt&&(Wt=ks[nt-Dr]),_e=ie[2*nt],y.opt_len+=_e*(pt+Wt),Cs&&(y.static_len+=_e*(fe[2*nt+1]+Wt)));if(Oi!==0){do{for(pt=Bn-1;y.bl_count[pt]===0;)pt--;y.bl_count[pt]--,y.bl_count[pt+1]+=2,y.bl_count[Bn]--,Oi-=2}while(0<Oi);for(pt=Bn;pt!==0;pt--)for(nt=y.bl_count[pt];nt!==0;)ce<(ht=y.heap[--Q])||(ie[2*ht+1]!==pt&&(y.opt_len+=(pt-ie[2*ht+1])*ie[2*ht],ie[2*ht+1]=pt),nt--)}}(O,V),$t(rt,z,O.bl_count)}function P(O,V,Z){var K,Y,rt=-1,xt=V[1],st=0,Mt=7,z=4;for(xt===0&&(Mt=138,z=3),V[2*(Z+1)+1]=65535,K=0;K<=Z;K++)Y=xt,xt=V[2*(K+1)+1],++st<Mt&&Y===xt||(st<z?O.bl_tree[2*Y]+=st:Y!==0?(Y!==rt&&O.bl_tree[2*Y]++,O.bl_tree[2*W]++):st<=10?O.bl_tree[2*q]++:O.bl_tree[2*X]++,rt=Y,z=(st=0)===xt?(Mt=138,3):Y===xt?(Mt=6,3):(Mt=7,4))}function dt(O,V,Z){var K,Y,rt=-1,xt=V[1],st=0,Mt=7,z=4;for(xt===0&&(Mt=138,z=3),K=0;K<=Z;K++)if(Y=xt,xt=V[2*(K+1)+1],!(++st<Mt&&Y===xt)){if(st<z)for(;vt(O,Y,O.bl_tree),--st!=0;);else Y!==0?(Y!==rt&&(vt(O,Y,O.bl_tree),st--),vt(O,W,O.bl_tree),Et(O,st-3,2)):st<=10?(vt(O,q,O.bl_tree),Et(O,st-3,3)):(vt(O,X,O.bl_tree),Et(O,st-11,7));rt=Y,z=(st=0)===xt?(Mt=138,3):Y===xt?(Mt=6,3):(Mt=7,4)}}h(ot);var at=!1;function N(O,V,Z,K){Et(O,(c<<1)+(K?1:0),3),function(Y,rt,xt,st){Nt(Y),st&&(_t(Y,xt),_t(Y,~xt)),s.arraySet(Y.pending_buf,Y.window,rt,xt,Y.pending),Y.pending+=xt}(O,V,Z,!0)}i._tr_init=function(O){at||(function(){var V,Z,K,Y,rt,xt=new Array(I+1);for(Y=K=0;Y<p-1;Y++)for(wt[Y]=K,V=0;V<1<<U[Y];V++)B[K++]=Y;for(B[K-1]=Y,Y=rt=0;Y<16;Y++)for(ot[Y]=rt,V=0;V<1<<S[Y];V++)j[rt++]=Y;for(rt>>=7;Y<_;Y++)for(ot[Y]=rt<<7,V=0;V<1<<S[Y]-7;V++)j[256+rt++]=Y;for(Z=0;Z<=I;Z++)xt[Z]=0;for(V=0;V<=143;)H[2*V+1]=8,V++,xt[8]++;for(;V<=255;)H[2*V+1]=9,V++,xt[9]++;for(;V<=279;)H[2*V+1]=7,V++,xt[7]++;for(;V<=287;)H[2*V+1]=8,V++,xt[8]++;for($t(H,v+1,xt),V=0;V<_;V++)D[2*V+1]=5,D[2*V]=Pt(V,5);Rt=new ft(H,U,m+1,v,I),mt=new ft(D,S,0,_,I),lt=new ft(new Array(0),k,0,T,M)}(),at=!0),O.l_desc=new J(O.dyn_ltree,Rt),O.d_desc=new J(O.dyn_dtree,mt),O.bl_desc=new J(O.bl_tree,lt),O.bi_buf=0,O.bi_valid=0,It(O)},i._tr_stored_block=N,i._tr_flush_block=function(O,V,Z,K){var Y,rt,xt=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(st){var Mt,z=4093624447;for(Mt=0;Mt<=31;Mt++,z>>>=1)if(1&z&&st.dyn_ltree[2*Mt]!==0)return a;if(st.dyn_ltree[18]!==0||st.dyn_ltree[20]!==0||st.dyn_ltree[26]!==0)return l;for(Mt=32;Mt<m;Mt++)if(st.dyn_ltree[2*Mt]!==0)return l;return a}(O)),Kt(O,O.l_desc),Kt(O,O.d_desc),xt=function(st){var Mt;for(P(st,st.dyn_ltree,st.l_desc.max_code),P(st,st.dyn_dtree,st.d_desc.max_code),Kt(st,st.bl_desc),Mt=T-1;3<=Mt&&st.bl_tree[2*F[Mt]+1]===0;Mt--);return st.opt_len+=3*(Mt+1)+5+5+4,Mt}(O),Y=O.opt_len+3+7>>>3,(rt=O.static_len+3+7>>>3)<=Y&&(Y=rt)):Y=rt=Z+5,Z+4<=Y&&V!==-1?N(O,V,Z,K):O.strategy===4||rt===Y?(Et(O,2+(K?1:0),3),Gt(O,H,D)):(Et(O,4+(K?1:0),3),function(st,Mt,z,y){var C;for(Et(st,Mt-257,5),Et(st,z-1,5),Et(st,y-4,4),C=0;C<y;C++)Et(st,st.bl_tree[2*F[C]+1],3);dt(st,st.dyn_ltree,Mt-1),dt(st,st.dyn_dtree,z-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,xt+1),Gt(O,O.dyn_ltree,O.dyn_dtree)),It(O),K&&Nt(O)},i._tr_tally=function(O,V,Z){return O.pending_buf[O.d_buf+2*O.last_lit]=V>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&V,O.pending_buf[O.l_buf+O.last_lit]=255&Z,O.last_lit++,V===0?O.dyn_ltree[2*Z]++:(O.matches++,V--,O.dyn_ltree[2*(B[Z]+m+1)]++,O.dyn_dtree[2*tt(V)]++),O.last_lit===O.lit_bufsize-1},i._tr_align=function(O){Et(O,2,3),vt(O,R,H),function(V){V.bi_valid===16?(_t(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):8<=V.bi_valid&&(V.pending_buf[V.pending++]=255&V.bi_buf,V.bi_buf>>=8,V.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(a,l){if(!a.setImmediate){var h,c,p,m,v=1,_={},T=!1,w=a.document,I=Object.getPrototypeOf&&Object.getPrototypeOf(a);I=I&&I.setTimeout?I:a,h={}.toString.call(a.process)==="[object process]"?function(W){process.nextTick(function(){M(W)})}:function(){if(a.postMessage&&!a.importScripts){var W=!0,q=a.onmessage;return a.onmessage=function(){W=!1},a.postMessage("","*"),a.onmessage=q,W}}()?(m="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",R,!1):a.attachEvent("onmessage",R),function(W){a.postMessage(m+W,"*")}):a.MessageChannel?((p=new MessageChannel).port1.onmessage=function(W){M(W.data)},function(W){p.port2.postMessage(W)}):w&&"onreadystatechange"in w.createElement("script")?(c=w.documentElement,function(W){var q=w.createElement("script");q.onreadystatechange=function(){M(W),q.onreadystatechange=null,c.removeChild(q),q=null},c.appendChild(q)}):function(W){setTimeout(M,0,W)},I.setImmediate=function(W){typeof W!="function"&&(W=new Function(""+W));for(var q=new Array(arguments.length-1),X=0;X<q.length;X++)q[X]=arguments[X+1];var U={callback:W,args:q};return _[v]=U,h(v),v++},I.clearImmediate=E}function E(W){delete _[W]}function M(W){if(T)setTimeout(M,0,W);else{var q=_[W];if(q){T=!0;try{(function(X){var U=X.callback,S=X.args;switch(S.length){case 0:U();break;case 1:U(S[0]);break;case 2:U(S[0],S[1]);break;case 3:U(S[0],S[1],S[2]);break;default:U.apply(l,S)}})(q)}finally{E(W),T=!1}}}}function R(W){W.source===a&&typeof W.data=="string"&&W.data.indexOf(m)===0&&M(+W.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(s2);var wD=s2.exports;const xD=wD;var ED=async t=>{const e=new xD;await e.loadAsync(t);const n=e.file(/.+/),r={};return await Promise.all(n.map(async i=>{let s;i.name.slice(-3).toLowerCase()==="shp"||i.name.slice(-3).toLowerCase()==="dbf"?s=await i.async("nodebuffer"):s=await i.async("text"),r[i.name]=s})),r},yy=window.MutationObserver||window.WebKitMutationObserver,Il;if(yy){var wy=0,TD=new yy(nc),xy=window.document.createTextNode("");TD.observe(xy,{characterData:!0}),Il=function(){xy.data=wy=++wy%2}}else if(!window.setImmediate&&typeof window.MessageChannel<"u"){var Ey=new window.MessageChannel;Ey.port1.onmessage=nc,Il=function(){Ey.port2.postMessage(0)}}else"document"in window&&"onreadystatechange"in window.document.createElement("script")?Il=function(){var t=window.document.createElement("script");t.onreadystatechange=function(){nc(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},window.document.documentElement.appendChild(t)}:Il=function(){setTimeout(nc,0)};var wm,Pl=[];function nc(){wm=!0;for(var t,e,n=Pl.length;n;){for(e=Pl,Pl=[],t=-1;++t<n;)e[t]();n=Pl.length}wm=!1}var SD=MD;function MD(t){Pl.push(t)===1&&!wm&&Il()}var LD=SD;function Na(){}var bn={},o2=["REJECTED"],xm=["FULFILLED"],a2=["PENDING"],l2=Ls;function Ls(t){if(typeof t!="function")throw new TypeError("resolver must be a function");this.state=a2,this.queue=[],this.outcome=void 0,t!==Na&&u2(this,t)}Ls.prototype.finally=function(t){if(typeof t!="function")return this;var e=this.constructor;return this.then(n,r);function n(i){function s(){return i}return e.resolve(t()).then(s)}function r(i){function s(){throw i}return e.resolve(t()).then(s)}};Ls.prototype.catch=function(t){return this.then(null,t)};Ls.prototype.then=function(t,e){if(typeof t!="function"&&this.state===xm||typeof e!="function"&&this.state===o2)return this;var n=new this.constructor(Na);if(this.state!==a2){var r=this.state===xm?t:e;fg(n,r,this.outcome)}else this.queue.push(new Yu(n,t,e));return n};function Yu(t,e,n){this.promise=t,typeof e=="function"&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),typeof n=="function"&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}Yu.prototype.callFulfilled=function(t){bn.resolve(this.promise,t)};Yu.prototype.otherCallFulfilled=function(t){fg(this.promise,this.onFulfilled,t)};Yu.prototype.callRejected=function(t){bn.reject(this.promise,t)};Yu.prototype.otherCallRejected=function(t){fg(this.promise,this.onRejected,t)};function fg(t,e,n){LD(function(){var r;try{r=e(n)}catch(i){return bn.reject(t,i)}r===t?bn.reject(t,new TypeError("Cannot resolve promise with itself")):bn.resolve(t,r)})}bn.resolve=function(t,e){var n=h2(CD,e);if(n.status==="error")return bn.reject(t,n.value);var r=n.value;if(r)u2(t,r);else{t.state=xm,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t};bn.reject=function(t,e){t.state=o2,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t};function CD(t){var e=t&&t.then;if(t&&(typeof t=="object"||typeof t=="function")&&typeof e=="function")return function(){e.apply(t,arguments)}}function u2(t,e){var n=!1;function r(l){n||(n=!0,bn.reject(t,l))}function i(l){n||(n=!0,bn.resolve(t,l))}function s(){e(i,r)}var a=h2(s);a.status==="error"&&r(a.value)}function h2(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}Ls.resolve=kD;function kD(t){return t instanceof this?t:bn.resolve(new this(Na),t)}Ls.reject=bD;function bD(t){var e=new this(Na);return bn.reject(e,t)}Ls.all=ID;function ID(t){var e=this;if(Object.prototype.toString.call(t)!=="[object Array]")return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),s=0,a=-1,l=new this(Na);++a<n;)h(t[a],a);return l;function h(c,p){e.resolve(c).then(m,function(v){r||(r=!0,bn.reject(l,v))});function m(v){i[p]=v,++s===n&&!r&&(r=!0,bn.resolve(l,i))}}}Ls.race=PD;function PD(t){var e=this;if(Object.prototype.toString.call(t)!=="[object Array]")return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,s=new this(Na);++i<n;)a(t[i]);return s;function a(l){e.resolve(l).then(function(h){r||(r=!0,bn.resolve(s,h))},function(h){r||(r=!0,bn.reject(s,h))})}}const AD=window.URL;var c2=(t,e)=>{if(!e)return t;const n=new AD(t);return n.pathname=`${n.pathname}.${e}`,n.href},Xu={},Yf={};Yf.byteLength=ND;Yf.toByteArray=FD;Yf.fromByteArray=VD;var qi=[],fi=[],RD=typeof Uint8Array<"u"?Uint8Array:Array,Hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Io=0,DD=Hd.length;Io<DD;++Io)qi[Io]=Hd[Io],fi[Hd.charCodeAt(Io)]=Io;fi["-".charCodeAt(0)]=62;fi["_".charCodeAt(0)]=63;function f2(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function ND(t){var e=f2(t),n=e[0],r=e[1];return(n+r)*3/4-r}function OD(t,e,n){return(e+n)*3/4-n}function FD(t){var e,n=f2(t),r=n[0],i=n[1],s=new RD(OD(t,r,i)),a=0,l=i>0?r-4:r,h;for(h=0;h<l;h+=4)e=fi[t.charCodeAt(h)]<<18|fi[t.charCodeAt(h+1)]<<12|fi[t.charCodeAt(h+2)]<<6|fi[t.charCodeAt(h+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=fi[t.charCodeAt(h)]<<2|fi[t.charCodeAt(h+1)]>>4,s[a++]=e&255),i===1&&(e=fi[t.charCodeAt(h)]<<10|fi[t.charCodeAt(h+1)]<<4|fi[t.charCodeAt(h+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function BD(t){return qi[t>>18&63]+qi[t>>12&63]+qi[t>>6&63]+qi[t&63]}function zD(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(BD(r));return i.join("")}function VD(t){for(var e,n=t.length,r=n%3,i=[],s=16383,a=0,l=n-r;a<l;a+=s)i.push(zD(t,a,a+s>l?l:a+s));return r===1?(e=t[n-1],i.push(qi[e>>2]+qi[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(qi[e>>10]+qi[e>>4&63]+qi[e<<2&63]+"=")),i.join("")}var dg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */dg.read=function(t,e,n,r,i){var s,a,l=i*8-r-1,h=(1<<l)-1,c=h>>1,p=-7,m=n?i-1:0,v=n?-1:1,_=t[e+m];for(m+=v,s=_&(1<<-p)-1,_>>=-p,p+=l;p>0;s=s*256+t[e+m],m+=v,p-=8);for(a=s&(1<<-p)-1,s>>=-p,p+=r;p>0;a=a*256+t[e+m],m+=v,p-=8);if(s===0)s=1-c;else{if(s===h)return a?NaN:(_?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-c}return(_?-1:1)*a*Math.pow(2,s-r)};dg.write=function(t,e,n,r,i,s){var a,l,h,c=s*8-i-1,p=(1<<c)-1,m=p>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=r?0:s-1,T=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+m>=1?e+=v/h:e+=v*Math.pow(2,1-m),e*h>=2&&(a++,h/=2),a+m>=p?(l=0,a=p):a+m>=1?(l=(e*h-1)*Math.pow(2,i),a=a+m):(l=e*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;t[n+_]=l&255,_+=T,l/=256,i-=8);for(a=a<<i|l,c+=i;c>0;t[n+_]=a&255,_+=T,a/=256,c-=8);t[n+_-T]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Yf,n=dg,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=M,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const z=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(z,y),z.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(z){if(z>i)throw new RangeError('The value "'+z+'" is invalid for option "size"');const y=new Uint8Array(z);return Object.setPrototypeOf(y,l.prototype),y}function l(z,y,C){if(typeof z=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(z)}return h(z,y,C)}l.poolSize=8192;function h(z,y,C){if(typeof z=="string")return v(z,y);if(ArrayBuffer.isView(z))return T(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(Y(z,ArrayBuffer)||z&&Y(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(z,SharedArrayBuffer)||z&&Y(z.buffer,SharedArrayBuffer)))return w(z,y,C);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Q=z.valueOf&&z.valueOf();if(Q!=null&&Q!==z)return l.from(Q,y,C);const nt=I(z);if(nt)return nt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return l.from(z[Symbol.toPrimitive]("string"),y,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}l.from=function(z,y,C){return h(z,y,C)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function c(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function p(z,y,C){return c(z),z<=0?a(z):y!==void 0?typeof C=="string"?a(z).fill(y,C):a(z).fill(y):a(z)}l.alloc=function(z,y,C){return p(z,y,C)};function m(z){return c(z),a(z<0?0:E(z)|0)}l.allocUnsafe=function(z){return m(z)},l.allocUnsafeSlow=function(z){return m(z)};function v(z,y){if((typeof y!="string"||y==="")&&(y="utf8"),!l.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const C=R(z,y)|0;let Q=a(C);const nt=Q.write(z,y);return nt!==C&&(Q=Q.slice(0,nt)),Q}function _(z){const y=z.length<0?0:E(z.length)|0,C=a(y);for(let Q=0;Q<y;Q+=1)C[Q]=z[Q]&255;return C}function T(z){if(Y(z,Uint8Array)){const y=new Uint8Array(z);return w(y.buffer,y.byteOffset,y.byteLength)}return _(z)}function w(z,y,C){if(y<0||z.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<y+(C||0))throw new RangeError('"length" is outside of buffer bounds');let Q;return y===void 0&&C===void 0?Q=new Uint8Array(z):C===void 0?Q=new Uint8Array(z,y):Q=new Uint8Array(z,y,C),Object.setPrototypeOf(Q,l.prototype),Q}function I(z){if(l.isBuffer(z)){const y=E(z.length)|0,C=a(y);return C.length===0||z.copy(C,0,0,y),C}if(z.length!==void 0)return typeof z.length!="number"||rt(z.length)?a(0):_(z);if(z.type==="Buffer"&&Array.isArray(z.data))return _(z.data)}function E(z){if(z>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return z|0}function M(z){return+z!=z&&(z=0),l.alloc(+z)}l.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==l.prototype},l.compare=function(y,C){if(Y(y,Uint8Array)&&(y=l.from(y,y.offset,y.byteLength)),Y(C,Uint8Array)&&(C=l.from(C,C.offset,C.byteLength)),!l.isBuffer(y)||!l.isBuffer(C))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===C)return 0;let Q=y.length,nt=C.length;for(let ht=0,pt=Math.min(Q,nt);ht<pt;++ht)if(y[ht]!==C[ht]){Q=y[ht],nt=C[ht];break}return Q<nt?-1:nt<Q?1:0},l.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(y,C){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return l.alloc(0);let Q;if(C===void 0)for(C=0,Q=0;Q<y.length;++Q)C+=y[Q].length;const nt=l.allocUnsafe(C);let ht=0;for(Q=0;Q<y.length;++Q){let pt=y[Q];if(Y(pt,Uint8Array))ht+pt.length>nt.length?(l.isBuffer(pt)||(pt=l.from(pt)),pt.copy(nt,ht)):Uint8Array.prototype.set.call(nt,pt,ht);else if(l.isBuffer(pt))pt.copy(nt,ht);else throw new TypeError('"list" argument must be an Array of Buffers');ht+=pt.length}return nt};function R(z,y){if(l.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||Y(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const C=z.length,Q=arguments.length>2&&arguments[2]===!0;if(!Q&&C===0)return 0;let nt=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return N(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C*2;case"hex":return C>>>1;case"base64":return Z(z).length;default:if(nt)return Q?-1:N(z).length;y=(""+y).toLowerCase(),nt=!0}}l.byteLength=R;function W(z,y,C){let Q=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0,y>>>=0,C<=y))return"";for(z||(z="utf8");;)switch(z){case"hex":return ot(this,y,C);case"utf8":case"utf-8":return B(this,y,C);case"ascii":return mt(this,y,C);case"latin1":case"binary":return lt(this,y,C);case"base64":return j(this,y,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,y,C);default:if(Q)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),Q=!0}}l.prototype._isBuffer=!0;function q(z,y,C){const Q=z[y];z[y]=z[C],z[C]=Q}l.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let C=0;C<y;C+=2)q(this,C,C+1);return this},l.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let C=0;C<y;C+=4)q(this,C,C+3),q(this,C+1,C+2);return this},l.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let C=0;C<y;C+=8)q(this,C,C+7),q(this,C+1,C+6),q(this,C+2,C+5),q(this,C+3,C+4);return this},l.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?B(this,0,y):W.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(y){if(!l.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:l.compare(this,y)===0},l.prototype.inspect=function(){let y="";const C=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,C).replace(/(.{2})/g,"$1 ").trim(),this.length>C&&(y+=" ... "),"<Buffer "+y+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(y,C,Q,nt,ht){if(Y(y,Uint8Array)&&(y=l.from(y,y.offset,y.byteLength)),!l.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(C===void 0&&(C=0),Q===void 0&&(Q=y?y.length:0),nt===void 0&&(nt=0),ht===void 0&&(ht=this.length),C<0||Q>y.length||nt<0||ht>this.length)throw new RangeError("out of range index");if(nt>=ht&&C>=Q)return 0;if(nt>=ht)return-1;if(C>=Q)return 1;if(C>>>=0,Q>>>=0,nt>>>=0,ht>>>=0,this===y)return 0;let pt=ht-nt,Wt=Q-C;const _e=Math.min(pt,Wt),ie=this.slice(nt,ht),ce=y.slice(C,Q);for(let fe=0;fe<_e;++fe)if(ie[fe]!==ce[fe]){pt=ie[fe],Wt=ce[fe];break}return pt<Wt?-1:Wt<pt?1:0};function X(z,y,C,Q,nt){if(z.length===0)return-1;if(typeof C=="string"?(Q=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),C=+C,rt(C)&&(C=nt?0:z.length-1),C<0&&(C=z.length+C),C>=z.length){if(nt)return-1;C=z.length-1}else if(C<0)if(nt)C=0;else return-1;if(typeof y=="string"&&(y=l.from(y,Q)),l.isBuffer(y))return y.length===0?-1:U(z,y,C,Q,nt);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?nt?Uint8Array.prototype.indexOf.call(z,y,C):Uint8Array.prototype.lastIndexOf.call(z,y,C):U(z,[y],C,Q,nt);throw new TypeError("val must be string, number or Buffer")}function U(z,y,C,Q,nt){let ht=1,pt=z.length,Wt=y.length;if(Q!==void 0&&(Q=String(Q).toLowerCase(),Q==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(z.length<2||y.length<2)return-1;ht=2,pt/=2,Wt/=2,C/=2}function _e(ce,fe){return ht===1?ce[fe]:ce.readUInt16BE(fe*ht)}let ie;if(nt){let ce=-1;for(ie=C;ie<pt;ie++)if(_e(z,ie)===_e(y,ce===-1?0:ie-ce)){if(ce===-1&&(ce=ie),ie-ce+1===Wt)return ce*ht}else ce!==-1&&(ie-=ie-ce),ce=-1}else for(C+Wt>pt&&(C=pt-Wt),ie=C;ie>=0;ie--){let ce=!0;for(let fe=0;fe<Wt;fe++)if(_e(z,ie+fe)!==_e(y,fe)){ce=!1;break}if(ce)return ie}return-1}l.prototype.includes=function(y,C,Q){return this.indexOf(y,C,Q)!==-1},l.prototype.indexOf=function(y,C,Q){return X(this,y,C,Q,!0)},l.prototype.lastIndexOf=function(y,C,Q){return X(this,y,C,Q,!1)};function S(z,y,C,Q){C=Number(C)||0;const nt=z.length-C;Q?(Q=Number(Q),Q>nt&&(Q=nt)):Q=nt;const ht=y.length;Q>ht/2&&(Q=ht/2);let pt;for(pt=0;pt<Q;++pt){const Wt=parseInt(y.substr(pt*2,2),16);if(rt(Wt))return pt;z[C+pt]=Wt}return pt}function k(z,y,C,Q){return K(N(y,z.length-C),z,C,Q)}function F(z,y,C,Q){return K(O(y),z,C,Q)}function H(z,y,C,Q){return K(Z(y),z,C,Q)}function D(z,y,C,Q){return K(V(y,z.length-C),z,C,Q)}l.prototype.write=function(y,C,Q,nt){if(C===void 0)nt="utf8",Q=this.length,C=0;else if(Q===void 0&&typeof C=="string")nt=C,Q=this.length,C=0;else if(isFinite(C))C=C>>>0,isFinite(Q)?(Q=Q>>>0,nt===void 0&&(nt="utf8")):(nt=Q,Q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ht=this.length-C;if((Q===void 0||Q>ht)&&(Q=ht),y.length>0&&(Q<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");nt||(nt="utf8");let pt=!1;for(;;)switch(nt){case"hex":return S(this,y,C,Q);case"utf8":case"utf-8":return k(this,y,C,Q);case"ascii":case"latin1":case"binary":return F(this,y,C,Q);case"base64":return H(this,y,C,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,y,C,Q);default:if(pt)throw new TypeError("Unknown encoding: "+nt);nt=(""+nt).toLowerCase(),pt=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(z,y,C){return y===0&&C===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(y,C))}function B(z,y,C){C=Math.min(z.length,C);const Q=[];let nt=y;for(;nt<C;){const ht=z[nt];let pt=null,Wt=ht>239?4:ht>223?3:ht>191?2:1;if(nt+Wt<=C){let _e,ie,ce,fe;switch(Wt){case 1:ht<128&&(pt=ht);break;case 2:_e=z[nt+1],(_e&192)===128&&(fe=(ht&31)<<6|_e&63,fe>127&&(pt=fe));break;case 3:_e=z[nt+1],ie=z[nt+2],(_e&192)===128&&(ie&192)===128&&(fe=(ht&15)<<12|(_e&63)<<6|ie&63,fe>2047&&(fe<55296||fe>57343)&&(pt=fe));break;case 4:_e=z[nt+1],ie=z[nt+2],ce=z[nt+3],(_e&192)===128&&(ie&192)===128&&(ce&192)===128&&(fe=(ht&15)<<18|(_e&63)<<12|(ie&63)<<6|ce&63,fe>65535&&fe<1114112&&(pt=fe))}}pt===null?(pt=65533,Wt=1):pt>65535&&(pt-=65536,Q.push(pt>>>10&1023|55296),pt=56320|pt&1023),Q.push(pt),nt+=Wt}return Rt(Q)}const wt=4096;function Rt(z){const y=z.length;if(y<=wt)return String.fromCharCode.apply(String,z);let C="",Q=0;for(;Q<y;)C+=String.fromCharCode.apply(String,z.slice(Q,Q+=wt));return C}function mt(z,y,C){let Q="";C=Math.min(z.length,C);for(let nt=y;nt<C;++nt)Q+=String.fromCharCode(z[nt]&127);return Q}function lt(z,y,C){let Q="";C=Math.min(z.length,C);for(let nt=y;nt<C;++nt)Q+=String.fromCharCode(z[nt]);return Q}function ot(z,y,C){const Q=z.length;(!y||y<0)&&(y=0),(!C||C<0||C>Q)&&(C=Q);let nt="";for(let ht=y;ht<C;++ht)nt+=xt[z[ht]];return nt}function ft(z,y,C){const Q=z.slice(y,C);let nt="";for(let ht=0;ht<Q.length-1;ht+=2)nt+=String.fromCharCode(Q[ht]+Q[ht+1]*256);return nt}l.prototype.slice=function(y,C){const Q=this.length;y=~~y,C=C===void 0?Q:~~C,y<0?(y+=Q,y<0&&(y=0)):y>Q&&(y=Q),C<0?(C+=Q,C<0&&(C=0)):C>Q&&(C=Q),C<y&&(C=y);const nt=this.subarray(y,C);return Object.setPrototypeOf(nt,l.prototype),nt};function J(z,y,C){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+y>C)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(y,C,Q){y=y>>>0,C=C>>>0,Q||J(y,C,this.length);let nt=this[y],ht=1,pt=0;for(;++pt<C&&(ht*=256);)nt+=this[y+pt]*ht;return nt},l.prototype.readUintBE=l.prototype.readUIntBE=function(y,C,Q){y=y>>>0,C=C>>>0,Q||J(y,C,this.length);let nt=this[y+--C],ht=1;for(;C>0&&(ht*=256);)nt+=this[y+--C]*ht;return nt},l.prototype.readUint8=l.prototype.readUInt8=function(y,C){return y=y>>>0,C||J(y,1,this.length),this[y]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(y,C){return y=y>>>0,C||J(y,2,this.length),this[y]|this[y+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(y,C){return y=y>>>0,C||J(y,2,this.length),this[y]<<8|this[y+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(y,C){return y=y>>>0,C||J(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(y,C){return y=y>>>0,C||J(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},l.prototype.readBigUInt64LE=st(function(y){y=y>>>0,Kt(y,"offset");const C=this[y],Q=this[y+7];(C===void 0||Q===void 0)&&P(y,this.length-8);const nt=C+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,ht=this[++y]+this[++y]*2**8+this[++y]*2**16+Q*2**24;return BigInt(nt)+(BigInt(ht)<<BigInt(32))}),l.prototype.readBigUInt64BE=st(function(y){y=y>>>0,Kt(y,"offset");const C=this[y],Q=this[y+7];(C===void 0||Q===void 0)&&P(y,this.length-8);const nt=C*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],ht=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+Q;return(BigInt(nt)<<BigInt(32))+BigInt(ht)}),l.prototype.readIntLE=function(y,C,Q){y=y>>>0,C=C>>>0,Q||J(y,C,this.length);let nt=this[y],ht=1,pt=0;for(;++pt<C&&(ht*=256);)nt+=this[y+pt]*ht;return ht*=128,nt>=ht&&(nt-=Math.pow(2,8*C)),nt},l.prototype.readIntBE=function(y,C,Q){y=y>>>0,C=C>>>0,Q||J(y,C,this.length);let nt=C,ht=1,pt=this[y+--nt];for(;nt>0&&(ht*=256);)pt+=this[y+--nt]*ht;return ht*=128,pt>=ht&&(pt-=Math.pow(2,8*C)),pt},l.prototype.readInt8=function(y,C){return y=y>>>0,C||J(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},l.prototype.readInt16LE=function(y,C){y=y>>>0,C||J(y,2,this.length);const Q=this[y]|this[y+1]<<8;return Q&32768?Q|4294901760:Q},l.prototype.readInt16BE=function(y,C){y=y>>>0,C||J(y,2,this.length);const Q=this[y+1]|this[y]<<8;return Q&32768?Q|4294901760:Q},l.prototype.readInt32LE=function(y,C){return y=y>>>0,C||J(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},l.prototype.readInt32BE=function(y,C){return y=y>>>0,C||J(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},l.prototype.readBigInt64LE=st(function(y){y=y>>>0,Kt(y,"offset");const C=this[y],Q=this[y+7];(C===void 0||Q===void 0)&&P(y,this.length-8);const nt=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(Q<<24);return(BigInt(nt)<<BigInt(32))+BigInt(C+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),l.prototype.readBigInt64BE=st(function(y){y=y>>>0,Kt(y,"offset");const C=this[y],Q=this[y+7];(C===void 0||Q===void 0)&&P(y,this.length-8);const nt=(C<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(nt)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+Q)}),l.prototype.readFloatLE=function(y,C){return y=y>>>0,C||J(y,4,this.length),n.read(this,y,!0,23,4)},l.prototype.readFloatBE=function(y,C){return y=y>>>0,C||J(y,4,this.length),n.read(this,y,!1,23,4)},l.prototype.readDoubleLE=function(y,C){return y=y>>>0,C||J(y,8,this.length),n.read(this,y,!0,52,8)},l.prototype.readDoubleBE=function(y,C){return y=y>>>0,C||J(y,8,this.length),n.read(this,y,!1,52,8)};function tt(z,y,C,Q,nt,ht){if(!l.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>nt||y<ht)throw new RangeError('"value" argument is out of bounds');if(C+Q>z.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(y,C,Q,nt){if(y=+y,C=C>>>0,Q=Q>>>0,!nt){const Wt=Math.pow(2,8*Q)-1;tt(this,y,C,Q,Wt,0)}let ht=1,pt=0;for(this[C]=y&255;++pt<Q&&(ht*=256);)this[C+pt]=y/ht&255;return C+Q},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(y,C,Q,nt){if(y=+y,C=C>>>0,Q=Q>>>0,!nt){const Wt=Math.pow(2,8*Q)-1;tt(this,y,C,Q,Wt,0)}let ht=Q-1,pt=1;for(this[C+ht]=y&255;--ht>=0&&(pt*=256);)this[C+ht]=y/pt&255;return C+Q},l.prototype.writeUint8=l.prototype.writeUInt8=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,1,255,0),this[C]=y&255,C+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,2,65535,0),this[C]=y&255,this[C+1]=y>>>8,C+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,2,65535,0),this[C]=y>>>8,this[C+1]=y&255,C+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,4,4294967295,0),this[C+3]=y>>>24,this[C+2]=y>>>16,this[C+1]=y>>>8,this[C]=y&255,C+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,4,4294967295,0),this[C]=y>>>24,this[C+1]=y>>>16,this[C+2]=y>>>8,this[C+3]=y&255,C+4};function _t(z,y,C,Q,nt){Gt(y,Q,nt,z,C,7);let ht=Number(y&BigInt(4294967295));z[C++]=ht,ht=ht>>8,z[C++]=ht,ht=ht>>8,z[C++]=ht,ht=ht>>8,z[C++]=ht;let pt=Number(y>>BigInt(32)&BigInt(4294967295));return z[C++]=pt,pt=pt>>8,z[C++]=pt,pt=pt>>8,z[C++]=pt,pt=pt>>8,z[C++]=pt,C}function Et(z,y,C,Q,nt){Gt(y,Q,nt,z,C,7);let ht=Number(y&BigInt(4294967295));z[C+7]=ht,ht=ht>>8,z[C+6]=ht,ht=ht>>8,z[C+5]=ht,ht=ht>>8,z[C+4]=ht;let pt=Number(y>>BigInt(32)&BigInt(4294967295));return z[C+3]=pt,pt=pt>>8,z[C+2]=pt,pt=pt>>8,z[C+1]=pt,pt=pt>>8,z[C]=pt,C+8}l.prototype.writeBigUInt64LE=st(function(y,C=0){return _t(this,y,C,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=st(function(y,C=0){return Et(this,y,C,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(y,C,Q,nt){if(y=+y,C=C>>>0,!nt){const _e=Math.pow(2,8*Q-1);tt(this,y,C,Q,_e-1,-_e)}let ht=0,pt=1,Wt=0;for(this[C]=y&255;++ht<Q&&(pt*=256);)y<0&&Wt===0&&this[C+ht-1]!==0&&(Wt=1),this[C+ht]=(y/pt>>0)-Wt&255;return C+Q},l.prototype.writeIntBE=function(y,C,Q,nt){if(y=+y,C=C>>>0,!nt){const _e=Math.pow(2,8*Q-1);tt(this,y,C,Q,_e-1,-_e)}let ht=Q-1,pt=1,Wt=0;for(this[C+ht]=y&255;--ht>=0&&(pt*=256);)y<0&&Wt===0&&this[C+ht+1]!==0&&(Wt=1),this[C+ht]=(y/pt>>0)-Wt&255;return C+Q},l.prototype.writeInt8=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,1,127,-128),y<0&&(y=255+y+1),this[C]=y&255,C+1},l.prototype.writeInt16LE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,2,32767,-32768),this[C]=y&255,this[C+1]=y>>>8,C+2},l.prototype.writeInt16BE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,2,32767,-32768),this[C]=y>>>8,this[C+1]=y&255,C+2},l.prototype.writeInt32LE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,4,2147483647,-2147483648),this[C]=y&255,this[C+1]=y>>>8,this[C+2]=y>>>16,this[C+3]=y>>>24,C+4},l.prototype.writeInt32BE=function(y,C,Q){return y=+y,C=C>>>0,Q||tt(this,y,C,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[C]=y>>>24,this[C+1]=y>>>16,this[C+2]=y>>>8,this[C+3]=y&255,C+4},l.prototype.writeBigInt64LE=st(function(y,C=0){return _t(this,y,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=st(function(y,C=0){return Et(this,y,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function vt(z,y,C,Q,nt,ht){if(C+Q>z.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function Pt(z,y,C,Q,nt){return y=+y,C=C>>>0,nt||vt(z,y,C,4),n.write(z,y,C,Q,23,4),C+4}l.prototype.writeFloatLE=function(y,C,Q){return Pt(this,y,C,!0,Q)},l.prototype.writeFloatBE=function(y,C,Q){return Pt(this,y,C,!1,Q)};function $t(z,y,C,Q,nt){return y=+y,C=C>>>0,nt||vt(z,y,C,8),n.write(z,y,C,Q,52,8),C+8}l.prototype.writeDoubleLE=function(y,C,Q){return $t(this,y,C,!0,Q)},l.prototype.writeDoubleBE=function(y,C,Q){return $t(this,y,C,!1,Q)},l.prototype.copy=function(y,C,Q,nt){if(!l.isBuffer(y))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),!nt&&nt!==0&&(nt=this.length),C>=y.length&&(C=y.length),C||(C=0),nt>0&&nt<Q&&(nt=Q),nt===Q||y.length===0||this.length===0)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(nt<0)throw new RangeError("sourceEnd out of bounds");nt>this.length&&(nt=this.length),y.length-C<nt-Q&&(nt=y.length-C+Q);const ht=nt-Q;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(C,Q,nt):Uint8Array.prototype.set.call(y,this.subarray(Q,nt),C),ht},l.prototype.fill=function(y,C,Q,nt){if(typeof y=="string"){if(typeof C=="string"?(nt=C,C=0,Q=this.length):typeof Q=="string"&&(nt=Q,Q=this.length),nt!==void 0&&typeof nt!="string")throw new TypeError("encoding must be a string");if(typeof nt=="string"&&!l.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);if(y.length===1){const pt=y.charCodeAt(0);(nt==="utf8"&&pt<128||nt==="latin1")&&(y=pt)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(C<0||this.length<C||this.length<Q)throw new RangeError("Out of range index");if(Q<=C)return this;C=C>>>0,Q=Q===void 0?this.length:Q>>>0,y||(y=0);let ht;if(typeof y=="number")for(ht=C;ht<Q;++ht)this[ht]=y;else{const pt=l.isBuffer(y)?y:l.from(y,nt),Wt=pt.length;if(Wt===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(ht=0;ht<Q-C;++ht)this[ht+C]=pt[ht%Wt]}return this};const It={};function Nt(z,y,C){It[z]=class extends C{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(nt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:nt,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}Nt("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Nt("ERR_INVALID_ARG_TYPE",function(z,y){return`The "${z}" argument must be of type number. Received type ${typeof y}`},TypeError),Nt("ERR_OUT_OF_RANGE",function(z,y,C){let Q=`The value of "${z}" is out of range.`,nt=C;return Number.isInteger(C)&&Math.abs(C)>2**32?nt=Ht(String(C)):typeof C=="bigint"&&(nt=String(C),(C>BigInt(2)**BigInt(32)||C<-(BigInt(2)**BigInt(32)))&&(nt=Ht(nt)),nt+="n"),Q+=` It must be ${y}. Received ${nt}`,Q},RangeError);function Ht(z){let y="",C=z.length;const Q=z[0]==="-"?1:0;for(;C>=Q+4;C-=3)y=`_${z.slice(C-3,C)}${y}`;return`${z.slice(0,C)}${y}`}function Ft(z,y,C){Kt(y,"offset"),(z[y]===void 0||z[y+C]===void 0)&&P(y,z.length-(C+1))}function Gt(z,y,C,Q,nt,ht){if(z>C||z<y){const pt=typeof y=="bigint"?"n":"";let Wt;throw ht>3?y===0||y===BigInt(0)?Wt=`>= 0${pt} and < 2${pt} ** ${(ht+1)*8}${pt}`:Wt=`>= -(2${pt} ** ${(ht+1)*8-1}${pt}) and < 2 ** ${(ht+1)*8-1}${pt}`:Wt=`>= ${y}${pt} and <= ${C}${pt}`,new It.ERR_OUT_OF_RANGE("value",Wt,z)}Ft(Q,nt,ht)}function Kt(z,y){if(typeof z!="number")throw new It.ERR_INVALID_ARG_TYPE(y,"number",z)}function P(z,y,C){throw Math.floor(z)!==z?(Kt(z,C),new It.ERR_OUT_OF_RANGE(C||"offset","an integer",z)):y<0?new It.ERR_BUFFER_OUT_OF_BOUNDS:new It.ERR_OUT_OF_RANGE(C||"offset",`>= ${C?1:0} and <= ${y}`,z)}const dt=/[^+/0-9A-Za-z-_]/g;function at(z){if(z=z.split("=")[0],z=z.trim().replace(dt,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function N(z,y){y=y||1/0;let C;const Q=z.length;let nt=null;const ht=[];for(let pt=0;pt<Q;++pt){if(C=z.charCodeAt(pt),C>55295&&C<57344){if(!nt){if(C>56319){(y-=3)>-1&&ht.push(239,191,189);continue}else if(pt+1===Q){(y-=3)>-1&&ht.push(239,191,189);continue}nt=C;continue}if(C<56320){(y-=3)>-1&&ht.push(239,191,189),nt=C;continue}C=(nt-55296<<10|C-56320)+65536}else nt&&(y-=3)>-1&&ht.push(239,191,189);if(nt=null,C<128){if((y-=1)<0)break;ht.push(C)}else if(C<2048){if((y-=2)<0)break;ht.push(C>>6|192,C&63|128)}else if(C<65536){if((y-=3)<0)break;ht.push(C>>12|224,C>>6&63|128,C&63|128)}else if(C<1114112){if((y-=4)<0)break;ht.push(C>>18|240,C>>12&63|128,C>>6&63|128,C&63|128)}else throw new Error("Invalid code point")}return ht}function O(z){const y=[];for(let C=0;C<z.length;++C)y.push(z.charCodeAt(C)&255);return y}function V(z,y){let C,Q,nt;const ht=[];for(let pt=0;pt<z.length&&!((y-=2)<0);++pt)C=z.charCodeAt(pt),Q=C>>8,nt=C%256,ht.push(nt),ht.push(Q);return ht}function Z(z){return e.toByteArray(at(z))}function K(z,y,C,Q){let nt;for(nt=0;nt<Q&&!(nt+C>=y.length||nt>=z.length);++nt)y[nt+C]=z[nt];return nt}function Y(z,y){return z instanceof y||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===y.name}function rt(z){return z!==z}const xt=function(){const z="0123456789abcdef",y=new Array(256);for(let C=0;C<16;++C){const Q=C*16;for(let nt=0;nt<16;++nt)y[Q+nt]=z[C]+z[nt]}return y}();function st(z){return typeof BigInt>"u"?Mt:z}function Mt(){throw new Error("BigInt not supported")}})(Xu);const UD=l2,jD=c2,$D=Xu.Buffer;var HD=GD;function GD(t,e){return new UD(function(n,r){const i=jD(t,e),s=new XMLHttpRequest;s.open("GET",i,!0),e!=="prj"&&e!=="cpg"&&(s.responseType="arraybuffer"),s.addEventListener("load",function(){return s.status>399?e==="prj"||e==="cpg"?n(!1):r(new Error(s.status)):n(e!=="prj"&&e!=="cpg"?$D.from(s.response):s.response)},!1),s.send()})}const WD=HD,qD=c2,ZD=Xu.Buffer;var KD=async function(e,n){if(!window.fetch)return WD(e,n);const r=qD(e,n),i=n==="prj"||n==="cpg";try{const s=await fetch(r);if(s.status>399)throw new Error(s.statusText);if(i)return s.text();const a=await s.arrayBuffer();return ZD.from(a)}catch(s){if(console.log("ERROR",s,n),i||n==="dbf")return!1;throw s}};function QD(t){let e=0,n=1;const r=t.length;let i,s;for(;n<r;)i=s||t[0],s=t[n],e+=(s[0]-i[0])*(s[1]+i[1]),n++;return e>0}function YD(t,e){return QD(e)||!t.length?t.push([e]):t[t.length-1].push(e),t}He.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}};He.prototype.parseZPoint=function(t){const e=this.parsePoint(t);return e.coordinates.push(t.readDoubleLE(16)),e};He.prototype.parsePointArray=function(t,e,n){const r=[];let i=0;for(;i<n;)r.push(this.parseCoord(t,e)),e+=16,i++;return r};He.prototype.parseZPointArray=function(t,e,n,r){let i=0;for(;i<n;)r[i].push(t.readDoubleLE(e)),i++,e+=8;return r};He.prototype.parseArrayGroup=function(t,e,n,r,i){const s=[];let a=0,l,h=0,c;for(;a<r;)a++,n+=4,l=h,a===r?h=i:h=t.readInt32LE(n),c=h-l,c&&(s.push(this.parsePointArray(t,e,c)),e+=c<<4);return s};He.prototype.parseZArrayGroup=function(t,e,n,r){let i=0;for(;i<n;)r[i]=this.parseZPointArray(t,e,r[i].length,r[i]),e+=r[i].length<<3,i++;return r};He.prototype.parseMultiPoint=function(t){const e={},n=t.readInt32LE(32,!0);if(!n)return null;const r=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[r[0],r[1],i[0],i[1]];const s=36;return n===1?(e.type="Point",e.coordinates=this.parseCoord(t,s)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,s,n)),e};He.prototype.parseZMultiPoint=function(t){const e=this.parseMultiPoint(t);if(!e)return null;let n;if(e.type==="Point")return e.coordinates.push(t.readDoubleLE(72)),e;n=e.coordinates.length;const r=52+(n<<4);return e.coordinates=this.parseZPointArray(t,r,n,e.coordinates),e};He.prototype.parsePolyline=function(t){const e={},n=t.readInt32LE(32);if(!n)return null;const r=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[r[0],r[1],i[0],i[1]];const s=t.readInt32LE(36);let a,l;return n===1?(e.type="LineString",a=44,e.coordinates=this.parsePointArray(t,a,s)):(e.type="MultiLineString",a=40+(n<<2),l=40,e.coordinates=this.parseArrayGroup(t,a,l,n,s)),e};He.prototype.parseZPolyline=function(t){const e=this.parsePolyline(t);if(!e)return null;const n=e.coordinates.length;let r;return e.type==="LineString"?(r=60+(n<<4),e.coordinates=this.parseZPointArray(t,r,n,e.coordinates),e):(r=56+(e.coordinates.reduce(function(s,a){return s+a.length},0)<<4)+(n<<2),e.coordinates=this.parseZArrayGroup(t,r,n,e.coordinates),e)};He.prototype.polyFuncs=function(t){return t&&(t.type==="LineString"?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(YD,[]),t.coordinates.length===1?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t)))};He.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))};He.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};const Ty={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function XD(t){return t?function(e,n){const r=[e.readDoubleLE(n),e.readDoubleLE(n+8)];return t.inverse(r)}:function(e,n){return[e.readDoubleLE(n),e.readDoubleLE(n+8)]}}function He(t,e){if(!(this instanceof He))return new He(t,e);this.buffer=t,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(e),this.rows=this.getRows()}He.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in Ty))throw new Error("I don't know that shp type");this.parseFunc=this[Ty[e]],this.parseCoord=XD(t)};He.prototype.getShpCode=function(){return this.parseHeader().shpCode};He.prototype.parseHeader=function(){const t=this.buffer.slice(0,100);return{length:t.readInt32BE(24)<<1,version:t.readInt32LE(28),shpCode:t.readInt32LE(32),bbox:[t.readDoubleLE(36),t.readDoubleLE(44),t.readDoubleLE(52),t.readDoubleLE(52)]}};He.prototype.getRows=function(){let t=100;const e=this.buffer.byteLength,n=[];let r;for(;t<e&&(r=this.getRow(t),!!r);)t+=8,t+=r.len,r.type?n.push(this.parseFunc(r.data)):n.push(null);return n};He.prototype.getRow=function(t){const e=this.buffer.slice(t,t+12),n=e.readInt32BE(4)<<1,r=e.readInt32BE(0);return n===0?{id:r,len:n,type:0}:{id:r,len:n,data:this.buffer.slice(t+12,t+n+8),type:e.readInt32LE(8)}};var JD=function(t,e){return new He(t,e).rows},tN={exports:{}};(function(t){(function(e){t.exports&&e["encoding-indexes"];function n(N,O,V){return O<=N&&N<=V}function r(N,O){return N.indexOf(O)!==-1}var i=Math.floor;function s(N){if(N===void 0)return{};if(N===Object(N))return N;throw TypeError("Could not convert argument to dictionary")}function a(N){for(var O=String(N),V=O.length,Z=0,K=[];Z<V;){var Y=O.charCodeAt(Z);if(Y<55296||Y>57343)K.push(Y);else if(56320<=Y&&Y<=57343)K.push(65533);else if(55296<=Y&&Y<=56319)if(Z===V-1)K.push(65533);else{var rt=O.charCodeAt(Z+1);if(56320<=rt&&rt<=57343){var xt=Y&1023,st=rt&1023;K.push(65536+(xt<<10)+st),Z+=1}else K.push(65533)}Z+=1}return K}function l(N){for(var O="",V=0;V<N.length;++V){var Z=N[V];Z<=65535?O+=String.fromCharCode(Z):(Z-=65536,O+=String.fromCharCode((Z>>10)+55296,(Z&1023)+56320))}return O}function h(N){return 0<=N&&N<=127}var c=h,p=-1;function m(N){this.tokens=[].slice.call(N),this.tokens.reverse()}m.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():p},prepend:function(N){if(Array.isArray(N))for(var O=N;O.length;)this.tokens.push(O.pop());else this.tokens.push(N)},push:function(N){if(Array.isArray(N))for(var O=N;O.length;)this.tokens.unshift(O.shift());else this.tokens.unshift(N)}};var v=-1;function _(N,O){if(N)throw TypeError("Decoder error");return O||65533}function T(N){throw TypeError("The code point "+N+" could not be encoded.")}function w(N){return N=String(N).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(E,N)?E[N]:null}var I=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],E={};I.forEach(function(N){N.encodings.forEach(function(O){O.labels.forEach(function(V){E[V]=O})})});var M={},R={};function W(N,O){return O&&O[N]||null}function q(N,O){var V=O.indexOf(N);return V===-1?null:V}function X(N){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][N]}function U(N){if(N>39419&&N<189e3||N>1237575)return null;if(N===7457)return 59335;var O=0,V=0,Z=X("gb18030-ranges"),K;for(K=0;K<Z.length;++K){var Y=Z[K];if(Y[0]<=N)O=Y[0],V=Y[1];else break}return V+N-O}function S(N){if(N===59335)return 7457;var O=0,V=0,Z=X("gb18030-ranges"),K;for(K=0;K<Z.length;++K){var Y=Z[K];if(Y[1]<=N)O=Y[1],V=Y[0];else break}return V+N-O}function k(N){F=F||X("jis0208").map(function(V,Z){return n(Z,8272,8835)?null:V});var O=F;return O.indexOf(N)}var F;function H(N){D=D||X("big5").map(function(V,Z){return Z<(161-129)*157?null:V});var O=D;return N===9552||N===9566||N===9569||N===9578||N===21313||N===21317?O.lastIndexOf(N):q(N,O)}var D,j="utf-8";function B(N,O){if(!(this instanceof B))throw TypeError("Called as a function. Did you forget 'new'?");N=N!==void 0?String(N):j,O=s(O),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var V=w(N);if(V===null||V.name==="replacement")throw RangeError("Unknown encoding: "+N);if(!R[V.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var Z=this;return Z._encoding=V,O.fatal&&(Z._error_mode="fatal"),O.ignoreBOM&&(Z._ignoreBOM=!0),Object.defineProperty||(this.encoding=Z._encoding.name.toLowerCase(),this.fatal=Z._error_mode==="fatal",this.ignoreBOM=Z._ignoreBOM),Z}Object.defineProperty&&(Object.defineProperty(B.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(B.prototype,"fatal",{get:function(){return this._error_mode==="fatal"}}),Object.defineProperty(B.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),B.prototype.decode=function(O,V){var Z;typeof O=="object"&&O instanceof ArrayBuffer?Z=new Uint8Array(O):typeof O=="object"&&"buffer"in O&&O.buffer instanceof ArrayBuffer?Z=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Z=new Uint8Array(0),V=s(V),this._do_not_flush||(this._decoder=R[this._encoding.name]({fatal:this._error_mode==="fatal"}),this._BOMseen=!1),this._do_not_flush=!!V.stream;for(var K=new m(Z),Y=[],rt;;){var xt=K.read();if(xt===p||(rt=this._decoder.handler(K,xt),rt===v))break;rt!==null&&(Array.isArray(rt)?Y.push.apply(Y,rt):Y.push(rt))}if(!this._do_not_flush){do{if(rt=this._decoder.handler(K,K.read()),rt===v)break;rt!==null&&(Array.isArray(rt)?Y.push.apply(Y,rt):Y.push(rt))}while(!K.endOfStream());this._decoder=null}function st(Mt){return r(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)&&!this._ignoreBOM&&!this._BOMseen&&(Mt.length>0&&Mt[0]===65279?(this._BOMseen=!0,Mt.shift()):Mt.length>0&&(this._BOMseen=!0)),l(Mt)}return st.call(this,Y)};function wt(N,O){if(!(this instanceof wt))throw TypeError("Called as a function. Did you forget 'new'?");O=s(O),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=O.fatal?"fatal":"replacement";var V=this;if(O.NONSTANDARD_allowLegacyEncoding){N=N!==void 0?String(N):j;var Z=w(N);if(Z===null||Z.name==="replacement")throw RangeError("Unknown encoding: "+N);if(!M[Z.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");V._encoding=Z}else V._encoding=w("utf-8"),N!==void 0&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=V._encoding.name.toLowerCase()),V}Object.defineProperty&&Object.defineProperty(wt.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),wt.prototype.encode=function(O,V){O=O===void 0?"":String(O),V=s(V),this._do_not_flush||(this._encoder=M[this._encoding.name]({fatal:this._fatal==="fatal"})),this._do_not_flush=!!V.stream;for(var Z=new m(a(O)),K=[],Y;;){var rt=Z.read();if(rt===p||(Y=this._encoder.handler(Z,rt),Y===v))break;Array.isArray(Y)?K.push.apply(K,Y):K.push(Y)}if(!this._do_not_flush){for(;Y=this._encoder.handler(Z,Z.read()),Y!==v;)Array.isArray(Y)?K.push.apply(K,Y):K.push(Y);this._encoder=null}return new Uint8Array(K)};function Rt(N){var O=N.fatal,V=0,Z=0,K=0,Y=128,rt=191;this.handler=function(xt,st){if(st===p&&K!==0)return K=0,_(O);if(st===p)return v;if(K===0){if(n(st,0,127))return st;if(n(st,194,223))K=1,V=st&31;else if(n(st,224,239))st===224&&(Y=160),st===237&&(rt=159),K=2,V=st&15;else if(n(st,240,244))st===240&&(Y=144),st===244&&(rt=143),K=3,V=st&7;else return _(O);return null}if(!n(st,Y,rt))return V=K=Z=0,Y=128,rt=191,xt.prepend(st),_(O);if(Y=128,rt=191,V=V<<6|st&63,Z+=1,Z!==K)return null;var Mt=V;return V=K=Z=0,Mt}}function mt(N){N.fatal,this.handler=function(O,V){if(V===p)return v;if(c(V))return V;var Z,K;n(V,128,2047)?(Z=1,K=192):n(V,2048,65535)?(Z=2,K=224):n(V,65536,1114111)&&(Z=3,K=240);for(var Y=[(V>>6*Z)+K];Z>0;){var rt=V>>6*(Z-1);Y.push(128|rt&63),Z-=1}return Y}}M["UTF-8"]=function(N){return new mt(N)},R["UTF-8"]=function(N){return new Rt(N)};function lt(N,O){var V=O.fatal;this.handler=function(Z,K){if(K===p)return v;if(h(K))return K;var Y=N[K-128];return Y===null?_(V):Y}}function ot(N,O){O.fatal,this.handler=function(V,Z){if(Z===p)return v;if(c(Z))return Z;var K=q(Z,N);return K===null&&T(Z),K+128}}(function(){"encoding-indexes"in e&&I.forEach(function(N){N.heading==="Legacy single-byte encodings"&&N.encodings.forEach(function(O){var V=O.name,Z=X(V.toLowerCase());R[V]=function(K){return new lt(Z,K)},M[V]=function(K){return new ot(Z,K)}})})})(),R.GBK=function(N){return new ft(N)},M.GBK=function(N){return new J(N,!0)};function ft(N){var O=N.fatal,V=0,Z=0,K=0;this.handler=function(Y,rt){if(rt===p&&V===0&&Z===0&&K===0)return v;rt===p&&(V!==0||Z!==0||K!==0)&&(V=0,Z=0,K=0,_(O));var xt;if(K!==0){xt=null,n(rt,48,57)&&(xt=U((((V-129)*10+Z-48)*126+K-129)*10+rt-48));var st=[Z,K,rt];return V=0,Z=0,K=0,xt===null?(Y.prepend(st),_(O)):xt}if(Z!==0)return n(rt,129,254)?(K=rt,null):(Y.prepend([Z,rt]),V=0,Z=0,_(O));if(V!==0){if(n(rt,48,57))return Z=rt,null;var Mt=V,z=null;V=0;var y=rt<127?64:65;return(n(rt,64,126)||n(rt,128,254))&&(z=(Mt-129)*190+(rt-y)),xt=z===null?null:W(z,X("gb18030")),xt===null&&h(rt)&&Y.prepend(rt),xt===null?_(O):xt}return h(rt)?rt:rt===128?8364:n(rt,129,254)?(V=rt,null):_(O)}}function J(N,O){N.fatal,this.handler=function(V,Z){if(Z===p)return v;if(c(Z))return Z;if(Z===58853)return T(Z);if(O&&Z===8364)return 128;var K=q(Z,X("gb18030"));if(K!==null){var Y=i(K/190)+129,rt=K%190,xt=rt<63?64:65;return[Y,rt+xt]}if(O)return T(Z);K=S(Z);var st=i(K/10/126/10);K=K-st*10*126*10;var Mt=i(K/10/126);K=K-Mt*10*126;var z=i(K/10),y=K-z*10;return[st+129,Mt+48,z+129,y+48]}}M.gb18030=function(N){return new J(N)},R.gb18030=function(N){return new ft(N)};function tt(N){var O=N.fatal,V=0;this.handler=function(Z,K){if(K===p&&V!==0)return V=0,_(O);if(K===p&&V===0)return v;if(V!==0){var Y=V,rt=null;V=0;var xt=K<127?64:98;switch((n(K,64,126)||n(K,161,254))&&(rt=(Y-129)*157+(K-xt)),rt){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var st=rt===null?null:W(rt,X("big5"));return st===null&&h(K)&&Z.prepend(K),st===null?_(O):st}return h(K)?K:n(K,129,254)?(V=K,null):_(O)}}function _t(N){N.fatal,this.handler=function(O,V){if(V===p)return v;if(c(V))return V;var Z=H(V);if(Z===null)return T(V);var K=i(Z/157)+129;if(K<161)return T(V);var Y=Z%157,rt=Y<63?64:98;return[K,Y+rt]}}M.Big5=function(N){return new _t(N)},R.Big5=function(N){return new tt(N)};function Et(N){var O=N.fatal,V=!1,Z=0;this.handler=function(K,Y){if(Y===p&&Z!==0)return Z=0,_(O);if(Y===p&&Z===0)return v;if(Z===142&&n(Y,161,223))return Z=0,65377-161+Y;if(Z===143&&n(Y,161,254))return V=!0,Z=Y,null;if(Z!==0){var rt=Z;Z=0;var xt=null;return n(rt,161,254)&&n(Y,161,254)&&(xt=W((rt-161)*94+(Y-161),X(V?"jis0212":"jis0208"))),V=!1,n(Y,161,254)||K.prepend(Y),xt===null?_(O):xt}return h(Y)?Y:Y===142||Y===143||n(Y,161,254)?(Z=Y,null):_(O)}}function vt(N){N.fatal,this.handler=function(O,V){if(V===p)return v;if(c(V))return V;if(V===165)return 92;if(V===8254)return 126;if(n(V,65377,65439))return[142,V-65377+161];V===8722&&(V=65293);var Z=q(V,X("jis0208"));if(Z===null)return T(V);var K=i(Z/94)+161,Y=Z%94+161;return[K,Y]}}M["EUC-JP"]=function(N){return new vt(N)},R["EUC-JP"]=function(N){return new Et(N)};function Pt(N){var O=N.fatal,V={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},Z=V.ASCII,K=V.ASCII,Y=0,rt=!1;this.handler=function(xt,st){switch(Z){default:case V.ASCII:return st===27?(Z=V.EscapeStart,null):n(st,0,127)&&st!==14&&st!==15&&st!==27?(rt=!1,st):st===p?v:(rt=!1,_(O));case V.Roman:return st===27?(Z=V.EscapeStart,null):st===92?(rt=!1,165):st===126?(rt=!1,8254):n(st,0,127)&&st!==14&&st!==15&&st!==27&&st!==92&&st!==126?(rt=!1,st):st===p?v:(rt=!1,_(O));case V.Katakana:return st===27?(Z=V.EscapeStart,null):n(st,33,95)?(rt=!1,65377-33+st):st===p?v:(rt=!1,_(O));case V.LeadByte:return st===27?(Z=V.EscapeStart,null):n(st,33,126)?(rt=!1,Y=st,Z=V.TrailByte,null):st===p?v:(rt=!1,_(O));case V.TrailByte:if(st===27)return Z=V.EscapeStart,_(O);if(n(st,33,126)){Z=V.LeadByte;var Mt=(Y-33)*94+st-33,z=W(Mt,X("jis0208"));return z===null?_(O):z}return st===p?(Z=V.LeadByte,xt.prepend(st),_(O)):(Z=V.LeadByte,_(O));case V.EscapeStart:return st===36||st===40?(Y=st,Z=V.Escape,null):(xt.prepend(st),rt=!1,Z=K,_(O));case V.Escape:var y=Y;Y=0;var C=null;if(y===40&&st===66&&(C=V.ASCII),y===40&&st===74&&(C=V.Roman),y===40&&st===73&&(C=V.Katakana),y===36&&(st===64||st===66)&&(C=V.LeadByte),C!==null){Z=Z=C;var Q=rt;return rt=!0,Q?_(O):null}return xt.prepend([y,st]),rt=!1,Z=K,_(O)}}}function $t(N){N.fatal;var O={ASCII:0,Roman:1,jis0208:2},V=O.ASCII;this.handler=function(Z,K){if(K===p&&V!==O.ASCII)return Z.prepend(K),V=O.ASCII,[27,40,66];if(K===p&&V===O.ASCII)return v;if((V===O.ASCII||V===O.Roman)&&(K===14||K===15||K===27))return T(65533);if(V===O.ASCII&&c(K))return K;if(V===O.Roman&&(c(K)&&K!==92&&K!==126||K==165||K==8254)){if(c(K))return K;if(K===165)return 92;if(K===8254)return 126}if(c(K)&&V!==O.ASCII)return Z.prepend(K),V=O.ASCII,[27,40,66];if((K===165||K===8254)&&V!==O.Roman)return Z.prepend(K),V=O.Roman,[27,40,74];K===8722&&(K=65293);var Y=q(K,X("jis0208"));if(Y===null)return T(K);if(V!==O.jis0208)return Z.prepend(K),V=O.jis0208,[27,36,66];var rt=i(Y/94)+33,xt=Y%94+33;return[rt,xt]}}M["ISO-2022-JP"]=function(N){return new $t(N)},R["ISO-2022-JP"]=function(N){return new Pt(N)};function It(N){var O=N.fatal,V=0;this.handler=function(Z,K){if(K===p&&V!==0)return V=0,_(O);if(K===p&&V===0)return v;if(V!==0){var Y=V,rt=null;V=0;var xt=K<127?64:65,st=Y<160?129:193;if((n(K,64,126)||n(K,128,252))&&(rt=(Y-st)*188+K-xt),n(rt,8836,10715))return 57344-8836+rt;var Mt=rt===null?null:W(rt,X("jis0208"));return Mt===null&&h(K)&&Z.prepend(K),Mt===null?_(O):Mt}return h(K)||K===128?K:n(K,161,223)?65377-161+K:n(K,129,159)||n(K,224,252)?(V=K,null):_(O)}}function Nt(N){N.fatal,this.handler=function(O,V){if(V===p)return v;if(c(V)||V===128)return V;if(V===165)return 92;if(V===8254)return 126;if(n(V,65377,65439))return V-65377+161;V===8722&&(V=65293);var Z=k(V);if(Z===null)return T(V);var K=i(Z/188),Y=K<31?129:193,rt=Z%188,xt=rt<63?64:65;return[K+Y,rt+xt]}}M.Shift_JIS=function(N){return new Nt(N)},R.Shift_JIS=function(N){return new It(N)};function Ht(N){var O=N.fatal,V=0;this.handler=function(Z,K){if(K===p&&V!==0)return V=0,_(O);if(K===p&&V===0)return v;if(V!==0){var Y=V,rt=null;V=0,n(K,65,254)&&(rt=(Y-129)*190+(K-65));var xt=rt===null?null:W(rt,X("euc-kr"));return rt===null&&h(K)&&Z.prepend(K),xt===null?_(O):xt}return h(K)?K:n(K,129,254)?(V=K,null):_(O)}}function Ft(N){N.fatal,this.handler=function(O,V){if(V===p)return v;if(c(V))return V;var Z=q(V,X("euc-kr"));if(Z===null)return T(V);var K=i(Z/190)+129,Y=Z%190+65;return[K,Y]}}M["EUC-KR"]=function(N){return new Ft(N)},R["EUC-KR"]=function(N){return new Ht(N)};function Gt(N,O){var V=N>>8,Z=N&255;return O?[V,Z]:[Z,V]}function Kt(N,O){var V=O.fatal,Z=null,K=null;this.handler=function(Y,rt){if(rt===p&&(Z!==null||K!==null))return _(V);if(rt===p&&Z===null&&K===null)return v;if(Z===null)return Z=rt,null;var xt;if(N?xt=(Z<<8)+rt:xt=(rt<<8)+Z,Z=null,K!==null){var st=K;return K=null,n(xt,56320,57343)?65536+(st-55296)*1024+(xt-56320):(Y.prepend(Gt(xt,N)),_(V))}return n(xt,55296,56319)?(K=xt,null):n(xt,56320,57343)?_(V):xt}}function P(N,O){O.fatal,this.handler=function(V,Z){if(Z===p)return v;if(n(Z,0,65535))return Gt(Z,N);var K=Gt((Z-65536>>10)+55296,N),Y=Gt((Z-65536&1023)+56320,N);return K.concat(Y)}}M["UTF-16BE"]=function(N){return new P(!0,N)},R["UTF-16BE"]=function(N){return new Kt(!0,N)},M["UTF-16LE"]=function(N){return new P(!1,N)},R["UTF-16LE"]=function(N){return new Kt(!1,N)};function dt(N){N.fatal,this.handler=function(O,V){return V===p?v:h(V)?V:63360+V-128}}function at(N){N.fatal,this.handler=function(O,V){return V===p?v:c(V)?V:n(V,63360,63487)?V-63360+128:T(V)}}M["x-user-defined"]=function(N){return new at(N)},R["x-user-defined"]=function(N){return new dt(N)},e.TextEncoder||(e.TextEncoder=wt),e.TextDecoder||(e.TextDecoder=B),t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})})(Tm||{})})(tN);var d2={},Em={exports:{}};(function(t,e){var n=Xu,r=n.Buffer;function i(a,l){for(var h in a)l[h]=a[h]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(a,l,h){return r(a,l,h)}i(r,s),s.from=function(a,l,h){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,l,h)},s.alloc=function(a,l,h){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=r(a);return l!==void 0?typeof h=="string"?c.fill(l,h):c.fill(l):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}})(Em,Em.exports);var eN=Em.exports,pg=eN.Buffer,Sy=pg.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function nN(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function iN(t){var e=nN(t);if(typeof e!="string"&&(pg.isEncoding===Sy||!Sy(t)))throw new Error("Unknown encoding: "+t);return e||t}d2.StringDecoder=Ju;function Ju(t){this.encoding=iN(t);var e;switch(this.encoding){case"utf16le":this.text=uN,this.end=hN,e=4;break;case"utf8":this.fillLast=oN,e=4;break;case"base64":this.text=cN,this.end=fN,e=3;break;default:this.write=dN,this.end=pN;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=pg.allocUnsafe(e)}Ju.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};Ju.prototype.end=lN;Ju.prototype.text=aN;Ju.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Gd(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function rN(t,e,n){var r=e.length-1;if(r<n)return 0;var i=Gd(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=Gd(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=Gd(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function sN(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function oN(t){var e=this.lastTotal-this.lastNeed,n=sN(this,t);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function aN(t,e){var n=rN(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function lN(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function uN(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function hN(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function cN(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function fN(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function dN(t){return t.toString(this.encoding)}function pN(t){return t&&t.length?this.write(t):""}var mN=d2.StringDecoder;function My(t){var e=new mN,n=e.write(t)+e.end();return n.replace(/\0/g,"").trim()}var _N=p2,gN=/^(?:ANSI\s)?(\d+)$/m;function p2(t,e){if(!t)return My;try{new TextDecoder(t.trim())}catch{var n=gN.exec(t);return n&&!e?p2("windows-"+n[1],!0):My}return r;function r(i){var s=new TextDecoder(t),a=s.decode(i,{stream:!0})+s.decode();return a.replace(/\0/g,"").trim()}}var vN=_N;function yN(t){var e={};return e.lastUpdated=new Date(t.readUInt8(1)+1900,t.readUInt8(2),t.readUInt8(3)),e.records=t.readUInt32LE(4),e.headerLen=t.readUInt16LE(8),e.recLen=t.readUInt16LE(10),e}function wN(t,e,n){for(var r=[],i=32;i<e&&(r.push({name:n(t.slice(i,i+11)),dataType:String.fromCharCode(t.readUInt8(i+11)),len:t.readUInt8(i+16),decimal:t.readUInt8(i+17)}),t.readUInt8(i+32)!==13);)i+=32;return r}function xN(t,e,n,r,i){var s=t.slice(e,e+n),a=i(s);switch(r){case"N":case"F":case"O":return parseFloat(a,10);case"D":return new Date(a.slice(0,4),parseInt(a.slice(4,6),10)-1,a.slice(6,8));case"L":return a.toLowerCase()==="y"||a.toLowerCase()==="t";default:return a}}function EN(t,e,n,r){for(var i={},s=0,a=n.length,l,h;s<a;)h=n[s],l=xN(t,e,h.len,h.dataType,r),e+=h.len,typeof l<"u"&&(i[h.name]=l),s++;return i}var TN=function(t,e){for(var n=vN(e),r=yN(t),i=wN(t,r.headerLen-1,n),s=(i.length+1<<5)+2,a=r.recLen,l=r.records,h=[];l;)h.push(EN(t,s,i,n)),s+=a,l--;return h},m2={exports:{}};(function(t){(function(){t.exports?t.exports=s:this.LRUCache=s;function e(_,T){return Object.prototype.hasOwnProperty.call(_,T)}function n(){return 1}var r=!1;function i(_){!r&&typeof _!="string"&&typeof _!="number"&&(r=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof _).stack))}function s(_){if(!(this instanceof s))return new s(_);typeof _=="number"&&(_={max:_}),_||(_={}),this._max=_.max,(!this._max||typeof this._max!="number"||this._max<=0)&&(this._max=1/0),this._lengthCalculator=_.length||n,typeof this._lengthCalculator!="function"&&(this._lengthCalculator=n),this._allowStale=_.stale||!1,this._maxAge=_.maxAge||null,this._dispose=_.dispose,this.reset()}Object.defineProperty(s.prototype,"max",{set:function(_){(!_||typeof _!="number"||_<=0)&&(_=1/0),this._max=_,this._length>this._max&&c(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(s.prototype,"lengthCalculator",{set:function(_){if(typeof _!="function"){this._lengthCalculator=n,this._length=this._itemCount;for(var T in this._cache)this._cache[T].length=1}else{this._lengthCalculator=_,this._length=0;for(var T in this._cache)this._cache[T].length=this._lengthCalculator(this._cache[T].value),this._length+=this._cache[T].length}this._length>this._max&&c(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(s.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),s.prototype.forEach=function(_,T){T=T||this;for(var w=0,I=this._itemCount,E=this._mru-1;E>=0&&w<I;E--)if(this._lruList[E]){w++;var M=this._lruList[E];l(this,M)&&(m(this,M),this._allowStale||(M=void 0)),M&&_.call(T,M.value,M.key,this)}},s.prototype.keys=function(){for(var _=new Array(this._itemCount),T=0,w=this._mru-1;w>=0&&T<this._itemCount;w--)if(this._lruList[w]){var I=this._lruList[w];_[T++]=I.key}return _},s.prototype.values=function(){for(var _=new Array(this._itemCount),T=0,w=this._mru-1;w>=0&&T<this._itemCount;w--)if(this._lruList[w]){var I=this._lruList[w];_[T++]=I.value}return _},s.prototype.reset=function(){if(this._dispose&&this._cache)for(var _ in this._cache)this._dispose(_,this._cache[_].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},s.prototype.dump=function(){for(var _=[],T=0,w=this._mru-1;w>=0&&T<this._itemCount;w--)if(this._lruList[w]){var I=this._lruList[w];l(this,I)||(++T,_.push({k:I.key,v:I.value,e:I.now+(I.maxAge||0)}))}return _},s.prototype.dumpLru=function(){return this._lruList},s.prototype.set=function(_,T,w){w=w||this._maxAge,i(_);var I=w?Date.now():0,E=this._lengthCalculator(T);if(e(this._cache,_))return E>this._max?(m(this,this._cache[_]),!1):(this._dispose&&this._dispose(_,this._cache[_].value),this._cache[_].now=I,this._cache[_].maxAge=w,this._cache[_].value=T,this._length+=E-this._cache[_].length,this._cache[_].length=E,this.get(_),this._length>this._max&&c(this),!0);var M=new v(_,T,this._mru++,E,I,w);return M.length>this._max?(this._dispose&&this._dispose(_,T),!1):(this._length+=M.length,this._lruList[M.lu]=this._cache[_]=M,this._itemCount++,this._length>this._max&&c(this),!0)},s.prototype.has=function(_){if(i(_),!e(this._cache,_))return!1;var T=this._cache[_];return!l(this,T)},s.prototype.get=function(_){return i(_),a(this,_,!0)},s.prototype.peek=function(_){return i(_),a(this,_,!1)},s.prototype.pop=function(){var _=this._lruList[this._lru];return m(this,_),_||null},s.prototype.del=function(_){i(_),m(this,this._cache[_])},s.prototype.load=function(_){this.reset();for(var T=Date.now(),w=_.length-1;w>=0;w--){var I=_[w];i(I.k);var E=I.e||0;if(E===0)this.set(I.k,I.v);else{var M=E-T;M>0&&this.set(I.k,I.v,M)}}};function a(_,T,w){i(T);var I=_._cache[T];return I&&(l(_,I)?(m(_,I),_._allowStale||(I=void 0)):w&&h(_,I),I&&(I=I.value)),I}function l(_,T){if(!T||!T.maxAge&&!_._maxAge)return!1;var w=!1,I=Date.now()-T.now;return T.maxAge?w=I>T.maxAge:w=_._maxAge&&I>_._maxAge,w}function h(_,T){p(_,T),T.lu=_._mru++,_._lruList[T.lu]=T}function c(_){for(;_._lru<_._mru&&_._length>_._max;)m(_,_._lruList[_._lru])}function p(_,T){for(delete _._lruList[T.lu];_._lru<_._mru&&!_._lruList[_._lru];)_._lru++}function m(_,T){T&&(_._dispose&&_._dispose(T.key,T.value),_._length-=T.length,_._itemCount--,delete _._cache[T.key],p(_,T))}function v(_,T,w,I,E,M){this.key=_,this.value=T,this.lu=w,this.length=I,this.now=E,M&&(this.maxAge=M)}})()})(m2);var SN=m2.exports;let aa=yD;aa.default&&(aa=aa.default);const MN=ED,Iu=KD,mg=JD,_g=TN,Xf=l2,LN=SN,Al=Xu.Buffer,CN=window.URL,Wd=new LN({max:20});function gg(t){if(!t)throw new Error("forgot to pass buffer");if(Al.isBuffer(t))return t;if(Ly(t))return Al.from(t);if(Ly(t.buffer))return t.BYTES_PER_ELEMENT===1?Al.from(t):Al.from(t.buffer)}function Ly(t){return t instanceof window.ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]"}function Di(t,e){return typeof t=="string"&&Wd.has(t)?Xf.resolve(Wd.get(t)):Di.getShapefile(t,e).then(function(n){return typeof t=="string"&&Wd.set(t,n),n})}Di.combine=function([t,e]){const n={};n.type="FeatureCollection",n.features=[];let r=0;const i=t.length;for(e||(e=[]);r<i;)n.features.push({type:"Feature",geometry:t[r],properties:e[r]||{}}),r++;return n};Di.parseZip=async function(t,e){let n;t=gg(t);const r=await MN(t),i=[];e=e||[];for(n in r)n.indexOf("__MACOSX")===-1&&(n.slice(-3).toLowerCase()==="shp"?(i.push(n.slice(0,-4)),r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r[n]):n.slice(-3).toLowerCase()==="prj"?r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=aa(r[n]):n.slice(-4).toLowerCase()==="json"||e.indexOf(n.split(".").pop())>-1?i.push(n.slice(0,-3)+n.slice(-3).toLowerCase()):(n.slice(-3).toLowerCase()==="dbf"||n.slice(-3).toLowerCase()==="cpg")&&(r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r[n]));if(!i.length)throw new Error("no layers founds");const s=i.map(function(a){let l,h;const c=a.lastIndexOf(".");return c>-1&&a.slice(c).indexOf("json")>-1?(l=JSON.parse(r[a]),l.fileName=a.slice(0,c)):e.indexOf(a.slice(c+1))>-1?(l=r[a],l.fileName=a):(r[a+".dbf"]&&(h=_g(r[a+".dbf"],r[a+".cpg"])),l=Di.combine([mg(r[a+".shp"],r[a+".prj"]),h]),l.fileName=a),l});return s.length===1?s[0]:s};async function kN(t,e){const n=await Iu(t);return Di.parseZip(n,e)}const bN=async t=>{const e=await Xf.all([Iu(t,"shp"),Iu(t,"prj")]);let n=!1;try{e[1]&&(n=aa(e[1]))}catch{n=!1}return mg(e[0],n)},IN=async t=>{const[e,n]=await Xf.all([Iu(t,"dbf"),Iu(t,"cpg")]);if(e)return _g(e,n)},PN=(t,e)=>new CN(t).pathname.slice(-4).toLowerCase()===e;Di.getShapefile=async function(t,e){if(typeof t!="string")return Di.parseZip(t);if(PN(t,".zip"))return kN(t,e);const n=await Xf.all([bN(t),IN(t)]);return Di.combine(n)};Di.parseShp=function(t,e){if(t=gg(t),Al.isBuffer(e)&&(e=e.toString()),typeof e=="string")try{e=aa(e)}catch{e=!1}return mg(t,e)};Di.parseDbf=function(t,e){return t=gg(t),_g(t,e)};var AN=Di;const RN=Pu(AN);function DN(){const[t,e]=Tt.useState(""),[n,r]=Tt.useState([]),[i,s]=Tt.useState([]),a=async c=>{const p=c.target.files[0];if(p){e("Processing shapefile...");try{const m=await p.arrayBuffer(),v=await RN(m),T=(await KI(Ss(gi,"fields"))).docs.map(w=>({id:w.id,...w.data()}));r(v.features.map(w=>{var M;const I=((M=w.properties)==null?void 0:M.name)||"",E=T.find(R=>R.fieldName.trim().toLowerCase()===I.trim().toLowerCase());return{geometry:w.geometry,fieldId:(E==null?void 0:E.id)||"",fieldNameGuess:I}})),s(T),e(`Loaded ${v.features.length} boundaries.`)}catch(m){console.error(m),e("Error reading shapefile.")}}},l=async()=>{const c=n.filter(p=>p.fieldId);for(const p of c){const m=Wl(gi,"fields",p.fieldId);await cm(m,{boundary:{geojson:p.geometry,year:new Date().getFullYear()}})}e(`Saved ${c.length} boundaries.`)},h=(c,p)=>{r(m=>{const v=[...m];return v[c].fieldId=p,v})};return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Upload Field Boundaries (Shapefile)"}),it.jsx("input",{type:"file",accept:".zip",onChange:a,className:"mb-4"}),t&&it.jsx("p",{className:"text-sm text-blue-700",children:t}),n.length>0&&it.jsxs("div",{className:"bg-white p-4 rounded shadow mt-4 text-sm",children:[it.jsx("h3",{className:"font-semibold mb-2",children:"Boundary Matches"}),n.map((c,p)=>it.jsxs("div",{className:"mb-2 flex gap-3 items-center",children:[it.jsxs("div",{className:"w-48 truncate",children:[" ",c.fieldNameGuess]}),it.jsxs("select",{value:c.fieldId,onChange:m=>h(p,m.target.value),className:"border p-1 rounded w-full",children:[it.jsx("option",{value:"",children:"Select Field"}),i.map(m=>it.jsxs("option",{value:m.id,children:[m.fieldName,"  ",m.farmName]},m.id))]})]},p)),it.jsx("button",{onClick:l,className:"mt-4 bg-blue-700 text-white px-4 py-2 rounded",children:"Save Boundaries"})]})]})}function NN(){const[t,e]=Tt.useState(""),n=async r=>{const i=r.target.files[0];i&&Gu.parse(i,{header:!0,skipEmptyLines:!0,complete:async({data:s})=>{let a=0,l=0;for(const h of s)try{await Aa(Ss(gi,"products"),{name:h.productName||"",type:"Seed",crop:h.crop||"",unitType:h.unitType||"weight",unitLabel:h.unitLabel||"",unitAbbrev:h.unitAbbrev||"",seedsPerUnit:h.seedsPerUnit?parseFloat(h.seedsPerUnit):null,lbsPerBushel:h.lbsPerBushel?parseFloat(h.lbsPerBushel):null,tech:h.technology||"",rateMode:h.unitType==="population"?"population":"weight"}),a++}catch(c){console.error("Import failed:",h,c),l++}e(`Imported ${a} seeds. ${l} failed.`)}})};return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Import Seed Products"}),it.jsx("a",{href:"/seeds-template.csv",download:!0,className:"inline-block mb-4 text-blue-600 hover:underline text-sm",children:" Download blank seeds-template.csv"}),it.jsx("input",{type:"file",accept:".csv",onChange:n,className:"mb-4"}),t&&it.jsx("p",{className:"text-green-700 font-semibold",children:t}),it.jsxs("p",{className:"text-sm text-gray-600",children:["Your CSV must include: ",it.jsx("code",{children:"productName, crop, unitType, unitLabel, unitAbbrev, seedsPerUnit, lbsPerBushel, technology"})]})]})}function ON(){const[t,e]=Tt.useState(""),n=async r=>{const i=r.target.files[0];i&&Gu.parse(i,{header:!0,skipEmptyLines:!0,complete:async({data:s})=>{let a=0,l=0;for(const h of s)try{await Aa(Ss(gi,"products"),{name:h.productName,type:"Fertilizer",unitLabel:h.unitLabel,unitAbbrev:h.unitAbbrev,defaultRate:h.defaultRate?parseFloat(h.defaultRate):null,rateType:h.rateType||"per acre"}),a++}catch(c){console.error("Import failed:",h,c),l++}e(`Imported ${a} fertilizers. ${l} failed.`)}})};return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Import Fertilizers"}),it.jsx("a",{href:"/fertilizers-template.csv",download:!0,className:"inline-block mb-4 text-blue-600 hover:underline text-sm",children:" Download blank fertilizers-template.csv"}),it.jsx("input",{type:"file",accept:".csv",onChange:n,className:"mb-4"}),t&&it.jsx("p",{className:"text-green-700 font-semibold",children:t}),it.jsxs("p",{className:"text-sm text-gray-600",children:["Your CSV must include: ",it.jsx("code",{children:"productName, unitLabel, unitAbbrev, defaultRate, rateType"})]})]})}function FN(){const[t,e]=Tt.useState(""),n=async r=>{const i=r.target.files[0];i&&Gu.parse(i,{header:!0,skipEmptyLines:!0,complete:async({data:s})=>{let a=0,l=0;for(const h of s)try{await Aa(Ss(gi,"products"),{name:h.productName,type:"Chemical",unitLabel:h.unitLabel,unitAbbrev:h.unitAbbrev,rateType:h.rateType||"per acre",carrierVolumeRequired:h.carrierVolumeRequired==="true"}),a++}catch(c){console.error("Import failed:",h,c),l++}e(`Imported ${a} chemicals. ${l} failed.`)}})};return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Import Chemicals"}),it.jsx("a",{href:"/chemicals-template.csv",download:!0,className:"inline-block mb-4 text-blue-600 hover:underline text-sm",children:" Download blank chemicals-template.csv"}),it.jsx("input",{type:"file",accept:".csv",onChange:n,className:"mb-4"}),t&&it.jsx("p",{className:"text-green-700 font-semibold",children:t}),it.jsxs("p",{className:"text-sm text-gray-600",children:["Your CSV must include: ",it.jsx("code",{children:"productName, unitLabel, unitAbbrev, rateType, carrierVolumeRequired"})]})]})}function BN(){const[t,e]=Tt.useState(""),n=async r=>{const i=r.target.files[0];i&&Gu.parse(i,{header:!0,skipEmptyLines:!0,complete:async({data:s})=>{let a=0,l=0;for(const h of s)try{await Aa(Ss(gi,"products"),{name:h.productName||"",type:"Seed",crop:"Rice",unitType:h.unitType||"",unitLabel:h.unitLabel||"",unitAbbrev:h.unitAbbrev||"",seedsPerUnit:h.seedsPerUnit?parseFloat(h.seedsPerUnit):null,lbsPerBushel:h.lbsPerBushel?parseFloat(h.lbsPerBushel):null,tech:h.technology||"",manufacturer:h.manufacturer||"",rateMode:h.unitType==="population"?"population":"weight"}),a++}catch(c){console.error("Import failed:",h,c),l++}e(`Imported ${a} rice varieties. ${l} failed.`)}})};return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Import Rice Seed Varieties"}),it.jsx("a",{href:"/rice-seeds-template.csv",download:!0,className:"inline-block mb-4 text-blue-600 hover:underline text-sm",children:" Download blank rice-seeds-template.csv"}),it.jsx("input",{type:"file",accept:".csv",onChange:n,className:"mb-4"}),t&&it.jsx("p",{className:"text-green-700 font-semibold",children:t}),it.jsx("p",{className:"text-sm text-gray-600",children:"This uploader is built for rice varieties only. Format must match your updated CSV."})]})}function zN(){const[t,e]=Tt.useState(""),[n,r]=Tt.useState({name:"",crop:"Soybeans",unitType:"",unitLabel:"",unitAbbrev:"",seedsPerUnit:"",lbsPerBushel:"",technology:"",manufacturer:""}),i=a=>{const{name:l,value:h}=a.target;r(c=>({...c,[l]:h}))},s=async()=>{try{await Aa(Ss(gi,"products"),{name:n.name,type:"Seed",crop:n.crop,unitType:n.unitType,unitLabel:n.unitLabel,unitAbbrev:n.unitAbbrev,seedsPerUnit:n.unitType==="population"?parseFloat(n.seedsPerUnit):null,lbsPerBushel:n.unitType==="weight"?parseFloat(n.lbsPerBushel):null,tech:n.technology,manufacturer:n.manufacturer,rateMode:n.unitType==="population"?"population":"weight"}),e("Soybean variety added!"),r({...n,name:"",unitLabel:"",unitAbbrev:"",seedsPerUnit:"",lbsPerBushel:"",technology:"",manufacturer:""})}catch(a){console.error("Save failed",a),e("Error saving variety.")}};return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Soybean Variety"}),it.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[it.jsx("input",{name:"name",placeholder:"Product Name",value:n.name,onChange:i,className:"border p-2 rounded"}),it.jsxs("select",{name:"unitType",value:n.unitType,onChange:i,className:"border p-2 rounded",children:[it.jsx("option",{value:"",children:"Unit Type"}),it.jsx("option",{value:"weight",children:"Weight"}),it.jsx("option",{value:"population",children:"Population"})]}),it.jsx("input",{name:"unitLabel",placeholder:"Unit Label (e.g. Pounds)",value:n.unitLabel,onChange:i,className:"border p-2 rounded"}),it.jsx("input",{name:"unitAbbrev",placeholder:"Unit Abbreviation (e.g. lb)",value:n.unitAbbrev,onChange:i,className:"border p-2 rounded"}),n.unitType==="population"&&it.jsx("input",{name:"seedsPerUnit",placeholder:"Seeds per Unit",value:n.seedsPerUnit,onChange:i,className:"border p-2 rounded"}),n.unitType==="weight"&&it.jsx("input",{name:"lbsPerBushel",placeholder:"Lbs per Bushel",value:n.lbsPerBushel,onChange:i,className:"border p-2 rounded"}),it.jsx("input",{name:"technology",placeholder:"Technology (e.g. XtendFlex)",value:n.technology,onChange:i,className:"border p-2 rounded"}),it.jsx("input",{name:"manufacturer",placeholder:"Manufacturer",value:n.manufacturer,onChange:i,className:"border p-2 rounded"})]}),it.jsx("button",{onClick:s,className:"mt-4 bg-blue-700 text-white px-4 py-2 rounded",children:"Save Variety"}),t&&it.jsx("p",{className:"mt-2 text-green-700 font-semibold",children:t})]})}function VN(){return it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reports"}),it.jsx("p",{className:"text-gray-600 text-sm",children:"This will display all reports such as:"}),it.jsxs("ul",{className:"list-disc list-inside mt-2 text-sm text-gray-700",children:[it.jsx("li",{children:"Seeding Report"}),it.jsx("li",{children:"Crop Insurance Acreage Report"}),it.jsx("li",{children:"Planting Date Report"}),it.jsx("li",{children:"Vendor Summary"}),it.jsx("li",{children:"Job Cost Breakdown"})]})]})}function UN(){const[t,e]=Tt.useState("Dashboard");Tt.useState(null);const[n,r]=Tt.useState(2025),[i,s]=Tt.useState(!1),a=Tt.useRef(null),l=w_(),h={Farm:["Fields","Jobs","Crop Budget","Reminders","Reports"],Mapping:["Map Viewer","Map Creator"],Records:["Field History","Crop History","Calendar","Documents","Field Metrics","Inventory"]};Tt.useEffect(()=>{const p=m=>{a.current&&!a.current.contains(m.target)&&s(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const c=p=>{e(p),l("/")};return it.jsxs("div",{className:"flex min-h-screen font-sans text-gray-800",children:[it.jsx("aside",{className:"hidden md:flex flex-col w-64 bg-white shadow-xl border-r border-gray-200 overflow-y-auto max-h-screen sticky top-0",children:it.jsxs("div",{className:"p-6",children:[it.jsx("h2",{className:"text-2xl font-extrabold text-blue-800 mb-8 tracking-tight",children:" Farm Job"}),it.jsxs("nav",{className:"flex flex-col gap-4 text-sm",children:[it.jsx("button",{onClick:()=>c("Dashboard"),className:`text-left px-3 py-1.5 rounded-md transition font-medium ${t==="Dashboard"?"bg-blue-100 text-blue-800":"hover:bg-blue-50"}`,children:"Dashboard"}),Object.entries(h).map(([p,m])=>it.jsxs("details",{className:"group",children:[it.jsx("summary",{className:"cursor-pointer text-xs uppercase font-bold text-gray-600 group-open:text-blue-700",children:p}),it.jsx("div",{className:"flex flex-col mt-1 ml-2 gap-1",children:m.map(v=>it.jsx("button",{onClick:()=>c(v),className:`text-left px-3 py-1.5 rounded-md transition font-medium ${t===v?"bg-blue-100 text-blue-800":"hover:bg-blue-50"}`,children:v},v))})]},p))]})]})}),it.jsxs("main",{className:"flex-1 bg-gradient-to-br from-gray-50 to-white p-8 overflow-y-auto",children:[it.jsxs("div",{className:"flex justify-between items-center mb-6",children:[it.jsx("div",{className:"flex gap-3 items-center",children:it.jsx("h1",{className:"text-2xl font-extrabold text-blue-800 tracking-tight",children:" Farm Job"})}),it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsxs("div",{className:"flex gap-2 items-center",children:[it.jsx("button",{onClick:()=>r(p=>p-1),className:"text-blue-600 hover:text-blue-800 font-bold",children:""}),it.jsx("span",{className:"text-lg font-semibold text-gray-700",children:n}),it.jsx("button",{onClick:()=>r(p=>p+1),className:"text-blue-600 hover:text-blue-800 font-bold",children:""})]}),it.jsxs("div",{className:"relative",ref:a,children:[it.jsx("button",{onClick:()=>s(!i),className:"w-9 h-9 rounded-full bg-blue-800 text-white font-bold",children:"BW"}),i&&it.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white border shadow rounded text-sm z-50",children:[it.jsx("div",{className:"px-4 py-2 border-b font-semibold",children:"User Profile"}),it.jsx("button",{onClick:()=>c("Profile Settings"),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Profile Settings"}),it.jsx("button",{onClick:()=>c("Manage Users"),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Manage Users"}),it.jsx("button",{onClick:()=>s(!1),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Logout"}),it.jsx("div",{className:"px-4 py-2 border-t font-semibold",children:"Setup"}),["Import Seeds","Import Rice Seeds","Import Fertilizers","Import Chemicals","Add Soybean Variety","Import Fields","Boundary Upload","Manage Job Types","Audit Log"].map(p=>it.jsx("button",{onClick:()=>c(p),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:p},p))]})]})]})]}),it.jsxs(lL,{children:[it.jsx(Up,{path:"/",element:it.jsxs(it.Fragment,{children:[t==="Fields"&&it.jsx(eP,{cropYear:n}),t==="Import Fields"&&it.jsx(SP,{}),t==="Map Viewer"&&it.jsx(MP,{}),t==="Boundary Upload"&&it.jsx(DN,{}),t==="Import Seeds"&&it.jsx(NN,{}),t==="Import Rice Seeds"&&it.jsx(BN,{}),t==="Import Fertilizers"&&it.jsx(ON,{}),t==="Import Chemicals"&&it.jsx(FN,{}),t==="Add Soybean Variety"&&it.jsx(zN,{}),t==="Reports"&&it.jsx(VN,{}),["Fields","Import Fields","Map Viewer","Boundary Upload","Import Seeds","Import Rice Seeds","Import Fertilizers","Import Chemicals","Add Soybean Variety","Reports"].indexOf(t)===-1&&it.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-gray-500 italic",children:[" ",t," page content will appear here."]})]})}),it.jsx(Up,{path:"/fields/:fieldId",element:it.jsx(EP,{})})]})]})]})}qd.createRoot(document.getElementById("root")).render(it.jsx(Zs.StrictMode,{children:it.jsx(mL,{children:it.jsx(UN,{})})}))});export default jN();
